(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Sp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var tu={exports:{}},xs={},ru={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function ry(){if(fg)return ge;fg=1;var a=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function _(P,U,ue){this.props=P,this.context=U,this.refs=C,this.updater=ue||S}_.prototype.isReactComponent={},_.prototype.setState=function(P,U){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,U,"setState")},_.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=_.prototype;function R(P,U,ue){this.props=P,this.context=U,this.refs=C,this.updater=ue||S}var I=R.prototype=new T;I.constructor=R,w(I,_.prototype),I.isPureReactComponent=!0;var B=Array.isArray,z=Object.prototype.hasOwnProperty,G={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function K(P,U,ue){var le,pe={},de=null,Ce=null;if(U!=null)for(le in U.ref!==void 0&&(Ce=U.ref),U.key!==void 0&&(de=""+U.key),U)z.call(U,le)&&!Q.hasOwnProperty(le)&&(pe[le]=U[le]);var Ae=arguments.length-2;if(Ae===1)pe.children=ue;else if(1<Ae){for(var Oe=Array(Ae),Ue=0;Ue<Ae;Ue++)Oe[Ue]=arguments[Ue+2];pe.children=Oe}if(P&&P.defaultProps)for(le in Ae=P.defaultProps,Ae)pe[le]===void 0&&(pe[le]=Ae[le]);return{$$typeof:a,type:P,key:de,ref:Ce,props:pe,_owner:G.current}}function ie(P,U){return{$$typeof:a,type:P.type,key:U,ref:P.ref,props:P.props,_owner:P._owner}}function ce(P){return typeof P=="object"&&P!==null&&P.$$typeof===a}function we(P){var U={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return U[ue]})}var Se=/\/+/g;function he(P,U){return typeof P=="object"&&P!==null&&P.key!=null?we(""+P.key):U.toString(36)}function me(P,U,ue,le,pe){var de=typeof P;(de==="undefined"||de==="boolean")&&(P=null);var Ce=!1;if(P===null)Ce=!0;else switch(de){case"string":case"number":Ce=!0;break;case"object":switch(P.$$typeof){case a:case e:Ce=!0}}if(Ce)return Ce=P,pe=pe(Ce),P=le===""?"."+he(Ce,0):le,B(pe)?(ue="",P!=null&&(ue=P.replace(Se,"$&/")+"/"),me(pe,U,ue,"",function(Ue){return Ue})):pe!=null&&(ce(pe)&&(pe=ie(pe,ue+(!pe.key||Ce&&Ce.key===pe.key?"":(""+pe.key).replace(Se,"$&/")+"/")+P)),U.push(pe)),1;if(Ce=0,le=le===""?".":le+":",B(P))for(var Ae=0;Ae<P.length;Ae++){de=P[Ae];var Oe=le+he(de,Ae);Ce+=me(de,U,ue,Oe,pe)}else if(Oe=y(P),typeof Oe=="function")for(P=Oe.call(P),Ae=0;!(de=P.next()).done;)de=de.value,Oe=le+he(de,Ae++),Ce+=me(de,U,ue,Oe,pe);else if(de==="object")throw U=String(P),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ce}function je(P,U,ue){if(P==null)return P;var le=[],pe=0;return me(P,le,"","",function(de){return U.call(ue,de,pe++)}),le}function ke(P){if(P._status===-1){var U=P._result;U=U(),U.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=U)}if(P._status===1)return P._result.default;throw P._result}var ve={current:null},Y={transition:null},re={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:Y,ReactCurrentOwner:G};function q(){throw Error("act(...) is not supported in production builds of React.")}return ge.Children={map:je,forEach:function(P,U,ue){je(P,function(){U.apply(this,arguments)},ue)},count:function(P){var U=0;return je(P,function(){U++}),U},toArray:function(P){return je(P,function(U){return U})||[]},only:function(P){if(!ce(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ge.Component=_,ge.Fragment=t,ge.Profiler=s,ge.PureComponent=R,ge.StrictMode=n,ge.Suspense=d,ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,ge.act=q,ge.cloneElement=function(P,U,ue){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var le=w({},P.props),pe=P.key,de=P.ref,Ce=P._owner;if(U!=null){if(U.ref!==void 0&&(de=U.ref,Ce=G.current),U.key!==void 0&&(pe=""+U.key),P.type&&P.type.defaultProps)var Ae=P.type.defaultProps;for(Oe in U)z.call(U,Oe)&&!Q.hasOwnProperty(Oe)&&(le[Oe]=U[Oe]===void 0&&Ae!==void 0?Ae[Oe]:U[Oe])}var Oe=arguments.length-2;if(Oe===1)le.children=ue;else if(1<Oe){Ae=Array(Oe);for(var Ue=0;Ue<Oe;Ue++)Ae[Ue]=arguments[Ue+2];le.children=Ae}return{$$typeof:a,type:P.type,key:pe,ref:de,props:le,_owner:Ce}},ge.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:o,_context:P},P.Consumer=P},ge.createElement=K,ge.createFactory=function(P){var U=K.bind(null,P);return U.type=P,U},ge.createRef=function(){return{current:null}},ge.forwardRef=function(P){return{$$typeof:u,render:P}},ge.isValidElement=ce,ge.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:ke}},ge.memo=function(P,U){return{$$typeof:g,type:P,compare:U===void 0?null:U}},ge.startTransition=function(P){var U=Y.transition;Y.transition={};try{P()}finally{Y.transition=U}},ge.unstable_act=q,ge.useCallback=function(P,U){return ve.current.useCallback(P,U)},ge.useContext=function(P){return ve.current.useContext(P)},ge.useDebugValue=function(){},ge.useDeferredValue=function(P){return ve.current.useDeferredValue(P)},ge.useEffect=function(P,U){return ve.current.useEffect(P,U)},ge.useId=function(){return ve.current.useId()},ge.useImperativeHandle=function(P,U,ue){return ve.current.useImperativeHandle(P,U,ue)},ge.useInsertionEffect=function(P,U){return ve.current.useInsertionEffect(P,U)},ge.useLayoutEffect=function(P,U){return ve.current.useLayoutEffect(P,U)},ge.useMemo=function(P,U){return ve.current.useMemo(P,U)},ge.useReducer=function(P,U,ue){return ve.current.useReducer(P,U,ue)},ge.useRef=function(P){return ve.current.useRef(P)},ge.useState=function(P){return ve.current.useState(P)},ge.useSyncExternalStore=function(P,U,ue){return ve.current.useSyncExternalStore(P,U,ue)},ge.useTransition=function(){return ve.current.useTransition()},ge.version="18.3.1",ge}var gg;function Ka(){return gg||(gg=1,ru.exports=ry()),ru.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg;function ny(){if(pg)return xs;pg=1;var a=Ka(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,g){var p,v={},y=null,S=null;g!==void 0&&(y=""+g),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(S=d.ref);for(p in d)n.call(d,p)&&!o.hasOwnProperty(p)&&(v[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)v[p]===void 0&&(v[p]=d[p]);return{$$typeof:e,type:u,key:y,ref:S,props:v,_owner:s.current}}return xs.Fragment=t,xs.jsx=c,xs.jsxs=c,xs}var mg;function iy(){return mg||(mg=1,tu.exports=ny()),tu.exports}var k=iy(),N=Ka(),Zo={},nu={exports:{}},wt={},iu={exports:{}},su={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function sy(){return vg||(vg=1,function(a){function e(Y,re){var q=Y.length;Y.push(re);e:for(;0<q;){var P=q-1>>>1,U=Y[P];if(0<s(U,re))Y[P]=re,Y[q]=U,q=P;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var re=Y[0],q=Y.pop();if(q!==re){Y[0]=q;e:for(var P=0,U=Y.length,ue=U>>>1;P<ue;){var le=2*(P+1)-1,pe=Y[le],de=le+1,Ce=Y[de];if(0>s(pe,q))de<U&&0>s(Ce,pe)?(Y[P]=Ce,Y[de]=q,P=de):(Y[P]=pe,Y[le]=q,P=le);else if(de<U&&0>s(Ce,q))Y[P]=Ce,Y[de]=q,P=de;else break e}}return re}function s(Y,re){var q=Y.sortIndex-re.sortIndex;return q!==0?q:Y.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();a.unstable_now=function(){return c.now()-u}}var d=[],g=[],p=1,v=null,y=3,S=!1,w=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Y){for(var re=t(g);re!==null;){if(re.callback===null)n(g);else if(re.startTime<=Y)n(g),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(g)}}function B(Y){if(C=!1,I(Y),!w)if(t(d)!==null)w=!0,ke(z);else{var re=t(g);re!==null&&ve(B,re.startTime-Y)}}function z(Y,re){w=!1,C&&(C=!1,T(K),K=-1),S=!0;var q=y;try{for(I(re),v=t(d);v!==null&&(!(v.expirationTime>re)||Y&&!we());){var P=v.callback;if(typeof P=="function"){v.callback=null,y=v.priorityLevel;var U=P(v.expirationTime<=re);re=a.unstable_now(),typeof U=="function"?v.callback=U:v===t(d)&&n(d),I(re)}else n(d);v=t(d)}if(v!==null)var ue=!0;else{var le=t(g);le!==null&&ve(B,le.startTime-re),ue=!1}return ue}finally{v=null,y=q,S=!1}}var G=!1,Q=null,K=-1,ie=5,ce=-1;function we(){return!(a.unstable_now()-ce<ie)}function Se(){if(Q!==null){var Y=a.unstable_now();ce=Y;var re=!0;try{re=Q(!0,Y)}finally{re?he():(G=!1,Q=null)}}else G=!1}var he;if(typeof R=="function")he=function(){R(Se)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,je=me.port2;me.port1.onmessage=Se,he=function(){je.postMessage(null)}}else he=function(){_(Se,0)};function ke(Y){Q=Y,G||(G=!0,he())}function ve(Y,re){K=_(function(){Y(a.unstable_now())},re)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Y){Y.callback=null},a.unstable_continueExecution=function(){w||S||(w=!0,ke(z))},a.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<Y?Math.floor(1e3/Y):5},a.unstable_getCurrentPriorityLevel=function(){return y},a.unstable_getFirstCallbackNode=function(){return t(d)},a.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var q=y;y=re;try{return Y()}finally{y=q}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var q=y;y=Y;try{return re()}finally{y=q}},a.unstable_scheduleCallback=function(Y,re,q){var P=a.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?P+q:P):q=P,Y){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=q+U,Y={id:p++,callback:re,priorityLevel:Y,startTime:q,expirationTime:U,sortIndex:-1},q>P?(Y.sortIndex=q,e(g,Y),t(d)===null&&Y===t(g)&&(C?(T(K),K=-1):C=!0,ve(B,q-P))):(Y.sortIndex=U,e(d,Y),w||S||(w=!0,ke(z))),Y},a.unstable_shouldYield=we,a.unstable_wrapCallback=function(Y){var re=y;return function(){var q=y;y=re;try{return Y.apply(this,arguments)}finally{y=q}}}}(su)),su}var yg;function oy(){return yg||(yg=1,iu.exports=sy()),iu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function ay(){if(xg)return wt;xg=1;var a=Ka(),e=oy();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(s[r]=i,r=0;r<i.length;r++)n.add(i[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function y(r){return d.call(v,r)?!0:d.call(p,r)?!1:g.test(r)?v[r]=!0:(p[r]=!0,!1)}function S(r,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function w(r,i,l,h){if(i===null||typeof i>"u"||S(r,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(r,i,l,h,f,m,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=x}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){_[r]=new C(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];_[i]=new C(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){_[r]=new C(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){_[r]=new C(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){_[r]=new C(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){_[r]=new C(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){_[r]=new C(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){_[r]=new C(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){_[r]=new C(r,5,!1,r.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(T,R);_[i]=new C(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(T,R);_[i]=new C(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(T,R);_[i]=new C(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){_[r]=new C(r,1,!1,r.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){_[r]=new C(r,1,!1,r.toLowerCase(),null,!0,!0)});function I(r,i,l,h){var f=_.hasOwnProperty(i)?_[i]:null;(f!==null?f.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(w(i,l,f,h)&&(l=null),h||f===null?y(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(i=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(i):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,i,l):r.setAttribute(i,l))))}var B=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),G=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),we=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),Y=Symbol.iterator;function re(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var q=Object.assign,P;function U(r){if(P===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+r}var ue=!1;function le(r,i){if(!r||ue)return"";ue=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(F){var h=F}Reflect.construct(r,[],i)}else{try{i.call()}catch(F){h=F}r.call(i.prototype)}else{try{throw Error()}catch(F){h=F}r()}}catch(F){if(F&&h&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),m=h.stack.split(`
`),x=f.length-1,A=m.length-1;1<=x&&0<=A&&f[x]!==m[A];)A--;for(;1<=x&&0<=A;x--,A--)if(f[x]!==m[A]){if(x!==1||A!==1)do if(x--,A--,0>A||f[x]!==m[A]){var E=`
`+f[x].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=x&&0<=A);break}}}finally{ue=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?U(r):""}function pe(r){switch(r.tag){case 5:return U(r.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return r=le(r.type,!1),r;case 11:return r=le(r.type.render,!1),r;case 1:return r=le(r.type,!0),r;default:return""}}function de(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Q:return"Fragment";case G:return"Portal";case ie:return"Profiler";case K:return"StrictMode";case he:return"Suspense";case me:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case we:return(r.displayName||"Context")+".Consumer";case ce:return(r._context.displayName||"Context")+".Provider";case Se:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case je:return i=r.displayName||null,i!==null?i:de(r.type)||"Memo";case ke:i=r._payload,r=r._init;try{return de(r(i))}catch{}}return null}function Ce(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(i);case 8:return i===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ae(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Oe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ue(r){var i=Oe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){h=""+x,m.call(this,x)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Us(r){r._valueTracker||(r._valueTracker=Ue(r))}function yh(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return r&&(h=Oe(r)?r.checked?"true":"false":r.value),r=h,r!==l?(i.setValue(r),!0):!1}function Ws(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ll(r,i){var l=i.checked;return q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function xh(r,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=Ae(i.value!=null?i.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function wh(r,i){i=i.checked,i!=null&&I(r,"checked",i,!1)}function cl(r,i){wh(r,i);var l=Ae(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ul(r,i.type,l):i.hasOwnProperty("defaultValue")&&ul(r,i.type,Ae(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Sh(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function ul(r,i,l){(i!=="number"||Ws(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Ri=Array.isArray;function Wn(r,i,l,h){if(r=r.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=i.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Ae(l),i=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function hl(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ch(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Ri(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:Ae(l)}}function _h(r,i){var l=Ae(i.value),h=Ae(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function Ah(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Th(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dl(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Th(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Vs,kh=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(i,l,h,f)})}:r}(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Vs.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Fi(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ov=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(r){ov.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Li[i]=Li[r]})});function Eh(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Li.hasOwnProperty(r)&&Li[r]?(""+i).trim():i+"px"}function bh(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=Eh(l,i[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var av=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fl(r,i){if(i){if(av[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function gl(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function ml(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var vl=null,Vn=null,Hn=null;function Oh(r){if(r=is(r)){if(typeof vl!="function")throw Error(t(280));var i=r.stateNode;i&&(i=fo(i),vl(r.stateNode,r.type,i))}}function Dh(r){Vn?Hn?Hn.push(r):Hn=[r]:Vn=r}function Ph(){if(Vn){var r=Vn,i=Hn;if(Hn=Vn=null,Oh(r),i)for(r=0;r<i.length;r++)Oh(i[r])}}function Mh(r,i){return r(i)}function jh(){}var yl=!1;function Rh(r,i,l){if(yl)return r(i,l);yl=!0;try{return Mh(r,i,l)}finally{yl=!1,(Vn!==null||Hn!==null)&&(jh(),Ph())}}function Ii(r,i){var l=r.stateNode;if(l===null)return null;var h=fo(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var xl=!1;if(u)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){xl=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{xl=!1}function lv(r,i,l,h,f,m,x,A,E){var F=Array.prototype.slice.call(arguments,3);try{i.apply(l,F)}catch(V){this.onError(V)}}var Bi=!1,Hs=null,Ys=!1,wl=null,cv={onError:function(r){Bi=!0,Hs=r}};function uv(r,i,l,h,f,m,x,A,E){Bi=!1,Hs=null,lv.apply(cv,arguments)}function hv(r,i,l,h,f,m,x,A,E){if(uv.apply(this,arguments),Bi){if(Bi){var F=Hs;Bi=!1,Hs=null}else throw Error(t(198));Ys||(Ys=!0,wl=F)}}function gn(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,i.flags&4098&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Fh(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Lh(r){if(gn(r)!==r)throw Error(t(188))}function dv(r){var i=r.alternate;if(!i){if(i=gn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var l=r,h=i;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return Lh(f),r;if(m===h)return Lh(f),i;m=m.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=m;else{for(var x=!1,A=f.child;A;){if(A===l){x=!0,l=f,h=m;break}if(A===h){x=!0,h=f,l=m;break}A=A.sibling}if(!x){for(A=m.child;A;){if(A===l){x=!0,l=m,h=f;break}if(A===h){x=!0,h=m,l=f;break}A=A.sibling}if(!x)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:i}function Ih(r){return r=dv(r),r!==null?Nh(r):null}function Nh(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Nh(r);if(i!==null)return i;r=r.sibling}return null}var Bh=e.unstable_scheduleCallback,zh=e.unstable_cancelCallback,fv=e.unstable_shouldYield,gv=e.unstable_requestPaint,Ve=e.unstable_now,pv=e.unstable_getCurrentPriorityLevel,Sl=e.unstable_ImmediatePriority,Uh=e.unstable_UserBlockingPriority,Xs=e.unstable_NormalPriority,mv=e.unstable_LowPriority,Wh=e.unstable_IdlePriority,Gs=null,ar=null;function vv(r){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Gs,r,void 0,(r.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:wv,yv=Math.log,xv=Math.LN2;function wv(r){return r>>>=0,r===0?32:31-(yv(r)/xv|0)|0}var Ks=64,Qs=4194304;function zi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qs(r,i){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,m=r.pingedLanes,x=l&268435455;if(x!==0){var A=x&~f;A!==0?h=zi(A):(m&=x,m!==0&&(h=zi(m)))}else x=l&~f,x!==0?h=zi(x):m!==0&&(h=zi(m));if(h===0)return 0;if(i!==0&&i!==h&&!(i&f)&&(f=h&-h,m=i&-i,f>=m||f===16&&(m&4194240)!==0))return i;if(h&4&&(h|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)l=31-Yt(i),f=1<<l,h|=r[l],i&=~f;return h}function Sv(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cv(r,i){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes;0<m;){var x=31-Yt(m),A=1<<x,E=f[x];E===-1?(!(A&l)||A&h)&&(f[x]=Sv(A,i)):E<=i&&(r.expiredLanes|=A),m&=~A}}function Cl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Vh(){var r=Ks;return Ks<<=1,!(Ks&4194240)&&(Ks=64),r}function _l(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Ui(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Yt(i),r[i]=l}function _v(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Yt(l),m=1<<f;i[f]=0,h[f]=-1,r[f]=-1,l&=~m}}function Al(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var h=31-Yt(l),f=1<<h;f&i|r[h]&i&&(r[h]|=i),l&=~f}}var Ee=0;function Hh(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Yh,Tl,Xh,Gh,Kh,kl=!1,Js=[],Br=null,zr=null,Ur=null,Wi=new Map,Vi=new Map,Wr=[],Av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qh(r,i){switch(r){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":Wi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vi.delete(i.pointerId)}}function Hi(r,i,l,h,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},i!==null&&(i=is(i),i!==null&&Tl(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function Tv(r,i,l,h,f){switch(i){case"focusin":return Br=Hi(Br,r,i,l,h,f),!0;case"dragenter":return zr=Hi(zr,r,i,l,h,f),!0;case"mouseover":return Ur=Hi(Ur,r,i,l,h,f),!0;case"pointerover":var m=f.pointerId;return Wi.set(m,Hi(Wi.get(m)||null,r,i,l,h,f)),!0;case"gotpointercapture":return m=f.pointerId,Vi.set(m,Hi(Vi.get(m)||null,r,i,l,h,f)),!0}return!1}function qh(r){var i=pn(r.target);if(i!==null){var l=gn(i);if(l!==null){if(i=l.tag,i===13){if(i=Fh(l),i!==null){r.blockedOn=i,Kh(r.priority,function(){Xh(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Zs(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=bl(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);pl=h,l.target.dispatchEvent(h),pl=null}else return i=is(l),i!==null&&Tl(i),r.blockedOn=l,!1;i.shift()}return!0}function Jh(r,i,l){Zs(r)&&l.delete(i)}function kv(){kl=!1,Br!==null&&Zs(Br)&&(Br=null),zr!==null&&Zs(zr)&&(zr=null),Ur!==null&&Zs(Ur)&&(Ur=null),Wi.forEach(Jh),Vi.forEach(Jh)}function Yi(r,i){r.blockedOn===i&&(r.blockedOn=null,kl||(kl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,kv)))}function Xi(r){function i(f){return Yi(f,r)}if(0<Js.length){Yi(Js[0],r);for(var l=1;l<Js.length;l++){var h=Js[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Br!==null&&Yi(Br,r),zr!==null&&Yi(zr,r),Ur!==null&&Yi(Ur,r),Wi.forEach(i),Vi.forEach(i),l=0;l<Wr.length;l++)h=Wr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Wr.length&&(l=Wr[0],l.blockedOn===null);)qh(l),l.blockedOn===null&&Wr.shift()}var Yn=B.ReactCurrentBatchConfig,$s=!0;function Ev(r,i,l,h){var f=Ee,m=Yn.transition;Yn.transition=null;try{Ee=1,El(r,i,l,h)}finally{Ee=f,Yn.transition=m}}function bv(r,i,l,h){var f=Ee,m=Yn.transition;Yn.transition=null;try{Ee=4,El(r,i,l,h)}finally{Ee=f,Yn.transition=m}}function El(r,i,l,h){if($s){var f=bl(r,i,l,h);if(f===null)Yl(r,i,h,eo,l),Qh(r,h);else if(Tv(f,r,i,l,h))h.stopPropagation();else if(Qh(r,h),i&4&&-1<Av.indexOf(r)){for(;f!==null;){var m=is(f);if(m!==null&&Yh(m),m=bl(r,i,l,h),m===null&&Yl(r,i,h,eo,l),m===f)break;f=m}f!==null&&h.stopPropagation()}else Yl(r,i,h,null,l)}}var eo=null;function bl(r,i,l,h){if(eo=null,r=ml(h),r=pn(r),r!==null)if(i=gn(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Fh(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return eo=r,null}function Zh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pv()){case Sl:return 1;case Uh:return 4;case Xs:case mv:return 16;case Wh:return 536870912;default:return 16}default:return 16}}var Vr=null,Ol=null,to=null;function $h(){if(to)return to;var r,i=Ol,l=i.length,h,f="value"in Vr?Vr.value:Vr.textContent,m=f.length;for(r=0;r<l&&i[r]===f[r];r++);var x=l-r;for(h=1;h<=x&&i[l-h]===f[m-h];h++);return to=f.slice(r,1<h?1-h:void 0)}function ro(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function no(){return!0}function ed(){return!1}function Et(r){function i(l,h,f,m,x){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(l=r[A],this[A]=l?l(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?no:ed,this.isPropagationStopped=ed,this}return q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=no)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=no)},persist:function(){},isPersistent:no}),i}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dl=Et(Xn),Gi=q({},Xn,{view:0,detail:0}),Ov=Et(Gi),Pl,Ml,Ki,io=q({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ki&&(Ki&&r.type==="mousemove"?(Pl=r.screenX-Ki.screenX,Ml=r.screenY-Ki.screenY):Ml=Pl=0,Ki=r),Pl)},movementY:function(r){return"movementY"in r?r.movementY:Ml}}),td=Et(io),Dv=q({},io,{dataTransfer:0}),Pv=Et(Dv),Mv=q({},Gi,{relatedTarget:0}),jl=Et(Mv),jv=q({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rv=Et(jv),Fv=q({},Xn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Lv=Et(Fv),Iv=q({},Xn,{data:0}),rd=Et(Iv),Nv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uv(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=zv[r])?!!i[r]:!1}function Rl(){return Uv}var Wv=q({},Gi,{key:function(r){if(r.key){var i=Nv[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ro(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bv[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(r){return r.type==="keypress"?ro(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ro(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Vv=Et(Wv),Hv=q({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nd=Et(Hv),Yv=q({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),Xv=Et(Yv),Gv=q({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kv=Et(Gv),Qv=q({},io,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),qv=Et(Qv),Jv=[9,13,27,32],Fl=u&&"CompositionEvent"in window,Qi=null;u&&"documentMode"in document&&(Qi=document.documentMode);var Zv=u&&"TextEvent"in window&&!Qi,id=u&&(!Fl||Qi&&8<Qi&&11>=Qi),sd=" ",od=!1;function ad(r,i){switch(r){case"keyup":return Jv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Gn=!1;function $v(r,i){switch(r){case"compositionend":return ld(i);case"keypress":return i.which!==32?null:(od=!0,sd);case"textInput":return r=i.data,r===sd&&od?null:r;default:return null}}function e0(r,i){if(Gn)return r==="compositionend"||!Fl&&ad(r,i)?(r=$h(),to=Ol=Vr=null,Gn=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return id&&i.locale!=="ko"?null:i.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!t0[r.type]:i==="textarea"}function ud(r,i,l,h){Dh(h),i=co(i,"onChange"),0<i.length&&(l=new Dl("onChange","change",null,l,h),r.push({event:l,listeners:i}))}var qi=null,Ji=null;function r0(r){bd(r,0)}function so(r){var i=Zn(r);if(yh(i))return r}function n0(r,i){if(r==="change")return i}var hd=!1;if(u){var Ll;if(u){var Il="oninput"in document;if(!Il){var dd=document.createElement("div");dd.setAttribute("oninput","return;"),Il=typeof dd.oninput=="function"}Ll=Il}else Ll=!1;hd=Ll&&(!document.documentMode||9<document.documentMode)}function fd(){qi&&(qi.detachEvent("onpropertychange",gd),Ji=qi=null)}function gd(r){if(r.propertyName==="value"&&so(Ji)){var i=[];ud(i,Ji,r,ml(r)),Rh(r0,i)}}function i0(r,i,l){r==="focusin"?(fd(),qi=i,Ji=l,qi.attachEvent("onpropertychange",gd)):r==="focusout"&&fd()}function s0(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return so(Ji)}function o0(r,i){if(r==="click")return so(i)}function a0(r,i){if(r==="input"||r==="change")return so(i)}function l0(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Xt=typeof Object.is=="function"?Object.is:l0;function Zi(r,i){if(Xt(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!d.call(i,f)||!Xt(r[f],i[f]))return!1}return!0}function pd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function md(r,i){var l=pd(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=i&&h>=i)return{node:l,offset:i-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=pd(l)}}function vd(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?vd(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function yd(){for(var r=window,i=Ws();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=Ws(r.document)}return i}function Nl(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function c0(r){var i=yd(),l=r.focusedElem,h=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&vd(l.ownerDocument.documentElement,l)){if(h!==null&&Nl(l)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!r.extend&&m>h&&(f=h,h=m,m=f),f=md(l,m);var x=md(l,h);f&&x&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),r.removeAllRanges(),m>h?(r.addRange(i),r.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var u0=u&&"documentMode"in document&&11>=document.documentMode,Kn=null,Bl=null,$i=null,zl=!1;function xd(r,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;zl||Kn==null||Kn!==Ws(h)||(h=Kn,"selectionStart"in h&&Nl(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),$i&&Zi($i,h)||($i=h,h=co(Bl,"onSelect"),0<h.length&&(i=new Dl("onSelect","select",null,i,l),r.push({event:i,listeners:h}),i.target=Kn)))}function oo(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var Qn={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionend:oo("Transition","TransitionEnd")},Ul={},wd={};u&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function ao(r){if(Ul[r])return Ul[r];if(!Qn[r])return r;var i=Qn[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in wd)return Ul[r]=i[l];return r}var Sd=ao("animationend"),Cd=ao("animationiteration"),_d=ao("animationstart"),Ad=ao("transitionend"),Td=new Map,kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(r,i){Td.set(r,i),o(i,[r])}for(var Wl=0;Wl<kd.length;Wl++){var Vl=kd[Wl],h0=Vl.toLowerCase(),d0=Vl[0].toUpperCase()+Vl.slice(1);Hr(h0,"on"+d0)}Hr(Sd,"onAnimationEnd"),Hr(Cd,"onAnimationIteration"),Hr(_d,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(Ad,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Ed(r,i,l){var h=r.type||"unknown-event";r.currentTarget=l,hv(h,i,void 0,r),r.currentTarget=null}function bd(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var x=h.length-1;0<=x;x--){var A=h[x],E=A.instance,F=A.currentTarget;if(A=A.listener,E!==m&&f.isPropagationStopped())break e;Ed(f,A,F),m=E}else for(x=0;x<h.length;x++){if(A=h[x],E=A.instance,F=A.currentTarget,A=A.listener,E!==m&&f.isPropagationStopped())break e;Ed(f,A,F),m=E}}}if(Ys)throw r=wl,Ys=!1,wl=null,r}function Pe(r,i){var l=i[Jl];l===void 0&&(l=i[Jl]=new Set);var h=r+"__bubble";l.has(h)||(Od(i,r,2,!1),l.add(h))}function Hl(r,i,l){var h=0;i&&(h|=4),Od(l,r,h,i)}var lo="_reactListening"+Math.random().toString(36).slice(2);function ts(r){if(!r[lo]){r[lo]=!0,n.forEach(function(l){l!=="selectionchange"&&(f0.has(l)||Hl(l,!1,r),Hl(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[lo]||(i[lo]=!0,Hl("selectionchange",!1,i))}}function Od(r,i,l,h){switch(Zh(i)){case 1:var f=Ev;break;case 4:f=bv;break;default:f=El}l=f.bind(null,i,l,r),f=void 0,!xl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(i,l,{capture:!0,passive:f}):r.addEventListener(i,l,!0):f!==void 0?r.addEventListener(i,l,{passive:f}):r.addEventListener(i,l,!1)}function Yl(r,i,l,h,f){var m=h;if(!(i&1)&&!(i&2)&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var A=h.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(x===4)for(x=h.return;x!==null;){var E=x.tag;if((E===3||E===4)&&(E=x.stateNode.containerInfo,E===f||E.nodeType===8&&E.parentNode===f))return;x=x.return}for(;A!==null;){if(x=pn(A),x===null)return;if(E=x.tag,E===5||E===6){h=m=x;continue e}A=A.parentNode}}h=h.return}Rh(function(){var F=m,V=ml(l),H=[];e:{var W=Td.get(r);if(W!==void 0){var J=Dl,ee=r;switch(r){case"keypress":if(ro(l)===0)break e;case"keydown":case"keyup":J=Vv;break;case"focusin":ee="focus",J=jl;break;case"focusout":ee="blur",J=jl;break;case"beforeblur":case"afterblur":J=jl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Pv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Xv;break;case Sd:case Cd:case _d:J=Rv;break;case Ad:J=Kv;break;case"scroll":J=Ov;break;case"wheel":J=qv;break;case"copy":case"cut":case"paste":J=Lv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=nd}var te=(i&4)!==0,He=!te&&r==="scroll",M=te?W!==null?W+"Capture":null:W;te=[];for(var O=F,j;O!==null;){j=O;var X=j.stateNode;if(j.tag===5&&X!==null&&(j=X,M!==null&&(X=Ii(O,M),X!=null&&te.push(rs(O,X,j)))),He)break;O=O.return}0<te.length&&(W=new J(W,ee,null,l,V),H.push({event:W,listeners:te}))}}if(!(i&7)){e:{if(W=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",W&&l!==pl&&(ee=l.relatedTarget||l.fromElement)&&(pn(ee)||ee[yr]))break e;if((J||W)&&(W=V.window===V?V:(W=V.ownerDocument)?W.defaultView||W.parentWindow:window,J?(ee=l.relatedTarget||l.toElement,J=F,ee=ee?pn(ee):null,ee!==null&&(He=gn(ee),ee!==He||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(J=null,ee=F),J!==ee)){if(te=td,X="onMouseLeave",M="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(te=nd,X="onPointerLeave",M="onPointerEnter",O="pointer"),He=J==null?W:Zn(J),j=ee==null?W:Zn(ee),W=new te(X,O+"leave",J,l,V),W.target=He,W.relatedTarget=j,X=null,pn(V)===F&&(te=new te(M,O+"enter",ee,l,V),te.target=j,te.relatedTarget=He,X=te),He=X,J&&ee)t:{for(te=J,M=ee,O=0,j=te;j;j=qn(j))O++;for(j=0,X=M;X;X=qn(X))j++;for(;0<O-j;)te=qn(te),O--;for(;0<j-O;)M=qn(M),j--;for(;O--;){if(te===M||M!==null&&te===M.alternate)break t;te=qn(te),M=qn(M)}te=null}else te=null;J!==null&&Dd(H,W,J,te,!1),ee!==null&&He!==null&&Dd(H,He,ee,te,!0)}}e:{if(W=F?Zn(F):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var ne=n0;else if(cd(W))if(hd)ne=a0;else{ne=s0;var se=i0}else(J=W.nodeName)&&J.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ne=o0);if(ne&&(ne=ne(r,F))){ud(H,ne,l,V);break e}se&&se(r,W,F),r==="focusout"&&(se=W._wrapperState)&&se.controlled&&W.type==="number"&&ul(W,"number",W.value)}switch(se=F?Zn(F):window,r){case"focusin":(cd(se)||se.contentEditable==="true")&&(Kn=se,Bl=F,$i=null);break;case"focusout":$i=Bl=Kn=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,xd(H,l,V);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":xd(H,l,V)}var oe;if(Fl)e:{switch(r){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else Gn?ad(r,l)&&(ae="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ae="onCompositionStart");ae&&(id&&l.locale!=="ko"&&(Gn||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&Gn&&(oe=$h()):(Vr=V,Ol="value"in Vr?Vr.value:Vr.textContent,Gn=!0)),se=co(F,ae),0<se.length&&(ae=new rd(ae,r,null,l,V),H.push({event:ae,listeners:se}),oe?ae.data=oe:(oe=ld(l),oe!==null&&(ae.data=oe)))),(oe=Zv?$v(r,l):e0(r,l))&&(F=co(F,"onBeforeInput"),0<F.length&&(V=new rd("onBeforeInput","beforeinput",null,l,V),H.push({event:V,listeners:F}),V.data=oe))}bd(H,i)})}function rs(r,i,l){return{instance:r,listener:i,currentTarget:l}}function co(r,i){for(var l=i+"Capture",h=[];r!==null;){var f=r,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=Ii(r,l),m!=null&&h.unshift(rs(r,m,f)),m=Ii(r,i),m!=null&&h.push(rs(r,m,f))),r=r.return}return h}function qn(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Dd(r,i,l,h,f){for(var m=i._reactName,x=[];l!==null&&l!==h;){var A=l,E=A.alternate,F=A.stateNode;if(E!==null&&E===h)break;A.tag===5&&F!==null&&(A=F,f?(E=Ii(l,m),E!=null&&x.unshift(rs(l,E,A))):f||(E=Ii(l,m),E!=null&&x.push(rs(l,E,A)))),l=l.return}x.length!==0&&r.push({event:i,listeners:x})}var g0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function Pd(r){return(typeof r=="string"?r:""+r).replace(g0,`
`).replace(p0,"")}function uo(r,i,l){if(i=Pd(i),Pd(r)!==i&&l)throw Error(t(425))}function ho(){}var Xl=null,Gl=null;function Kl(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,m0=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,v0=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(r){return Md.resolve(null).then(r).catch(y0)}:Ql;function y0(r){setTimeout(function(){throw r})}function ql(r,i){var l=i,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Xi(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Xi(i)}function Yr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function jd(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var Jn=Math.random().toString(36).slice(2),lr="__reactFiber$"+Jn,ns="__reactProps$"+Jn,yr="__reactContainer$"+Jn,Jl="__reactEvents$"+Jn,x0="__reactListeners$"+Jn,w0="__reactHandles$"+Jn;function pn(r){var i=r[lr];if(i)return i;for(var l=r.parentNode;l;){if(i=l[yr]||l[lr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=jd(r);r!==null;){if(l=r[lr])return l;r=jd(r)}return i}r=l,l=r.parentNode}return null}function is(r){return r=r[lr]||r[yr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Zn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function fo(r){return r[ns]||null}var Zl=[],$n=-1;function Xr(r){return{current:r}}function Me(r){0>$n||(r.current=Zl[$n],Zl[$n]=null,$n--)}function De(r,i){$n++,Zl[$n]=r.current,r.current=i}var Gr={},st=Xr(Gr),pt=Xr(!1),mn=Gr;function ei(r,i){var l=r.type.contextTypes;if(!l)return Gr;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in l)f[m]=i[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=f),f}function mt(r){return r=r.childContextTypes,r!=null}function go(){Me(pt),Me(st)}function Rd(r,i,l){if(st.current!==Gr)throw Error(t(168));De(st,i),De(pt,l)}function Fd(r,i,l){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in i))throw Error(t(108,Ce(r)||"Unknown",f));return q({},l,h)}function po(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Gr,mn=st.current,De(st,r),De(pt,pt.current),!0}function Ld(r,i,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=Fd(r,i,mn),h.__reactInternalMemoizedMergedChildContext=r,Me(pt),Me(st),De(st,r)):Me(pt),De(pt,l)}var xr=null,mo=!1,$l=!1;function Id(r){xr===null?xr=[r]:xr.push(r)}function S0(r){mo=!0,Id(r)}function Kr(){if(!$l&&xr!==null){$l=!0;var r=0,i=Ee;try{var l=xr;for(Ee=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}xr=null,mo=!1}catch(f){throw xr!==null&&(xr=xr.slice(r+1)),Bh(Sl,Kr),f}finally{Ee=i,$l=!1}}return null}var ti=[],ri=0,vo=null,yo=0,Rt=[],Ft=0,vn=null,wr=1,Sr="";function yn(r,i){ti[ri++]=yo,ti[ri++]=vo,vo=r,yo=i}function Nd(r,i,l){Rt[Ft++]=wr,Rt[Ft++]=Sr,Rt[Ft++]=vn,vn=r;var h=wr;r=Sr;var f=32-Yt(h)-1;h&=~(1<<f),l+=1;var m=32-Yt(i)+f;if(30<m){var x=f-f%5;m=(h&(1<<x)-1).toString(32),h>>=x,f-=x,wr=1<<32-Yt(i)+f|l<<f|h,Sr=m+r}else wr=1<<m|l<<f|h,Sr=r}function ec(r){r.return!==null&&(yn(r,1),Nd(r,1,0))}function tc(r){for(;r===vo;)vo=ti[--ri],ti[ri]=null,yo=ti[--ri],ti[ri]=null;for(;r===vn;)vn=Rt[--Ft],Rt[Ft]=null,Sr=Rt[--Ft],Rt[Ft]=null,wr=Rt[--Ft],Rt[Ft]=null}var bt=null,Ot=null,Re=!1,Gt=null;function Bd(r,i){var l=Bt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function zd(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,bt=r,Ot=Yr(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,bt=r,Ot=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=vn!==null?{id:wr,overflow:Sr}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Bt(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,bt=r,Ot=null,!0):!1;default:return!1}}function rc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function nc(r){if(Re){var i=Ot;if(i){var l=i;if(!zd(r,i)){if(rc(r))throw Error(t(418));i=Yr(l.nextSibling);var h=bt;i&&zd(r,i)?Bd(h,l):(r.flags=r.flags&-4097|2,Re=!1,bt=r)}}else{if(rc(r))throw Error(t(418));r.flags=r.flags&-4097|2,Re=!1,bt=r}}}function Ud(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;bt=r}function xo(r){if(r!==bt)return!1;if(!Re)return Ud(r),Re=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Kl(r.type,r.memoizedProps)),i&&(i=Ot)){if(rc(r))throw Wd(),Error(t(418));for(;i;)Bd(r,i),i=Yr(i.nextSibling)}if(Ud(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Ot=Yr(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Ot=null}}else Ot=bt?Yr(r.stateNode.nextSibling):null;return!0}function Wd(){for(var r=Ot;r;)r=Yr(r.nextSibling)}function ni(){Ot=bt=null,Re=!1}function ic(r){Gt===null?Gt=[r]:Gt.push(r)}var C0=B.ReactCurrentBatchConfig;function ss(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(x){var A=f.refs;x===null?delete A[m]:A[m]=x},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function wo(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Vd(r){var i=r._init;return i(r._payload)}function Hd(r){function i(M,O){if(r){var j=M.deletions;j===null?(M.deletions=[O],M.flags|=16):j.push(O)}}function l(M,O){if(!r)return null;for(;O!==null;)i(M,O),O=O.sibling;return null}function h(M,O){for(M=new Map;O!==null;)O.key!==null?M.set(O.key,O):M.set(O.index,O),O=O.sibling;return M}function f(M,O){return M=rn(M,O),M.index=0,M.sibling=null,M}function m(M,O,j){return M.index=j,r?(j=M.alternate,j!==null?(j=j.index,j<O?(M.flags|=2,O):j):(M.flags|=2,O)):(M.flags|=1048576,O)}function x(M){return r&&M.alternate===null&&(M.flags|=2),M}function A(M,O,j,X){return O===null||O.tag!==6?(O=Qc(j,M.mode,X),O.return=M,O):(O=f(O,j),O.return=M,O)}function E(M,O,j,X){var ne=j.type;return ne===Q?V(M,O,j.props.children,X,j.key):O!==null&&(O.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ke&&Vd(ne)===O.type)?(X=f(O,j.props),X.ref=ss(M,O,j),X.return=M,X):(X=Ho(j.type,j.key,j.props,null,M.mode,X),X.ref=ss(M,O,j),X.return=M,X)}function F(M,O,j,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=qc(j,M.mode,X),O.return=M,O):(O=f(O,j.children||[]),O.return=M,O)}function V(M,O,j,X,ne){return O===null||O.tag!==7?(O=kn(j,M.mode,X,ne),O.return=M,O):(O=f(O,j),O.return=M,O)}function H(M,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Qc(""+O,M.mode,j),O.return=M,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return j=Ho(O.type,O.key,O.props,null,M.mode,j),j.ref=ss(M,null,O),j.return=M,j;case G:return O=qc(O,M.mode,j),O.return=M,O;case ke:var X=O._init;return H(M,X(O._payload),j)}if(Ri(O)||re(O))return O=kn(O,M.mode,j,null),O.return=M,O;wo(M,O)}return null}function W(M,O,j,X){var ne=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ne!==null?null:A(M,O,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case z:return j.key===ne?E(M,O,j,X):null;case G:return j.key===ne?F(M,O,j,X):null;case ke:return ne=j._init,W(M,O,ne(j._payload),X)}if(Ri(j)||re(j))return ne!==null?null:V(M,O,j,X,null);wo(M,j)}return null}function J(M,O,j,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number")return M=M.get(j)||null,A(O,M,""+X,ne);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case z:return M=M.get(X.key===null?j:X.key)||null,E(O,M,X,ne);case G:return M=M.get(X.key===null?j:X.key)||null,F(O,M,X,ne);case ke:var se=X._init;return J(M,O,j,se(X._payload),ne)}if(Ri(X)||re(X))return M=M.get(j)||null,V(O,M,X,ne,null);wo(O,X)}return null}function ee(M,O,j,X){for(var ne=null,se=null,oe=O,ae=O=0,tt=null;oe!==null&&ae<j.length;ae++){oe.index>ae?(tt=oe,oe=null):tt=oe.sibling;var _e=W(M,oe,j[ae],X);if(_e===null){oe===null&&(oe=tt);break}r&&oe&&_e.alternate===null&&i(M,oe),O=m(_e,O,ae),se===null?ne=_e:se.sibling=_e,se=_e,oe=tt}if(ae===j.length)return l(M,oe),Re&&yn(M,ae),ne;if(oe===null){for(;ae<j.length;ae++)oe=H(M,j[ae],X),oe!==null&&(O=m(oe,O,ae),se===null?ne=oe:se.sibling=oe,se=oe);return Re&&yn(M,ae),ne}for(oe=h(M,oe);ae<j.length;ae++)tt=J(oe,M,ae,j[ae],X),tt!==null&&(r&&tt.alternate!==null&&oe.delete(tt.key===null?ae:tt.key),O=m(tt,O,ae),se===null?ne=tt:se.sibling=tt,se=tt);return r&&oe.forEach(function(nn){return i(M,nn)}),Re&&yn(M,ae),ne}function te(M,O,j,X){var ne=re(j);if(typeof ne!="function")throw Error(t(150));if(j=ne.call(j),j==null)throw Error(t(151));for(var se=ne=null,oe=O,ae=O=0,tt=null,_e=j.next();oe!==null&&!_e.done;ae++,_e=j.next()){oe.index>ae?(tt=oe,oe=null):tt=oe.sibling;var nn=W(M,oe,_e.value,X);if(nn===null){oe===null&&(oe=tt);break}r&&oe&&nn.alternate===null&&i(M,oe),O=m(nn,O,ae),se===null?ne=nn:se.sibling=nn,se=nn,oe=tt}if(_e.done)return l(M,oe),Re&&yn(M,ae),ne;if(oe===null){for(;!_e.done;ae++,_e=j.next())_e=H(M,_e.value,X),_e!==null&&(O=m(_e,O,ae),se===null?ne=_e:se.sibling=_e,se=_e);return Re&&yn(M,ae),ne}for(oe=h(M,oe);!_e.done;ae++,_e=j.next())_e=J(oe,M,ae,_e.value,X),_e!==null&&(r&&_e.alternate!==null&&oe.delete(_e.key===null?ae:_e.key),O=m(_e,O,ae),se===null?ne=_e:se.sibling=_e,se=_e);return r&&oe.forEach(function(ty){return i(M,ty)}),Re&&yn(M,ae),ne}function He(M,O,j,X){if(typeof j=="object"&&j!==null&&j.type===Q&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case z:e:{for(var ne=j.key,se=O;se!==null;){if(se.key===ne){if(ne=j.type,ne===Q){if(se.tag===7){l(M,se.sibling),O=f(se,j.props.children),O.return=M,M=O;break e}}else if(se.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===ke&&Vd(ne)===se.type){l(M,se.sibling),O=f(se,j.props),O.ref=ss(M,se,j),O.return=M,M=O;break e}l(M,se);break}else i(M,se);se=se.sibling}j.type===Q?(O=kn(j.props.children,M.mode,X,j.key),O.return=M,M=O):(X=Ho(j.type,j.key,j.props,null,M.mode,X),X.ref=ss(M,O,j),X.return=M,M=X)}return x(M);case G:e:{for(se=j.key;O!==null;){if(O.key===se)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){l(M,O.sibling),O=f(O,j.children||[]),O.return=M,M=O;break e}else{l(M,O);break}else i(M,O);O=O.sibling}O=qc(j,M.mode,X),O.return=M,M=O}return x(M);case ke:return se=j._init,He(M,O,se(j._payload),X)}if(Ri(j))return ee(M,O,j,X);if(re(j))return te(M,O,j,X);wo(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,O!==null&&O.tag===6?(l(M,O.sibling),O=f(O,j),O.return=M,M=O):(l(M,O),O=Qc(j,M.mode,X),O.return=M,M=O),x(M)):l(M,O)}return He}var ii=Hd(!0),Yd=Hd(!1),So=Xr(null),Co=null,si=null,sc=null;function oc(){sc=si=Co=null}function ac(r){var i=So.current;Me(So),r._currentValue=i}function lc(r,i,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===l)break;r=r.return}}function oi(r,i){Co=r,sc=si=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&i&&(vt=!0),r.firstContext=null)}function Lt(r){var i=r._currentValue;if(sc!==r)if(r={context:r,memoizedValue:i,next:null},si===null){if(Co===null)throw Error(t(308));si=r,Co.dependencies={lanes:0,firstContext:r}}else si=si.next=r;return i}var xn=null;function cc(r){xn===null?xn=[r]:xn.push(r)}function Xd(r,i,l,h){var f=i.interleaved;return f===null?(l.next=l,cc(i)):(l.next=f.next,f.next=l),i.interleaved=l,Cr(r,h)}function Cr(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Qr=!1;function uc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function _r(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function qr(r,i,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,ye&2){var f=h.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),h.pending=i,Cr(r,l)}return f=h.interleaved,f===null?(i.next=i,cc(h)):(i.next=f.next,f.next=i),h.interleaved=i,Cr(r,l)}function _o(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,Al(r,l)}}function Kd(r,i){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var x={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?f=m=x:m=m.next=x,l=l.next}while(l!==null);m===null?f=m=i:m=m.next=i}else f=m=i;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Ao(r,i,l,h){var f=r.updateQueue;Qr=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var E=A,F=E.next;E.next=null,x===null?m=F:x.next=F,x=E;var V=r.alternate;V!==null&&(V=V.updateQueue,A=V.lastBaseUpdate,A!==x&&(A===null?V.firstBaseUpdate=F:A.next=F,V.lastBaseUpdate=E))}if(m!==null){var H=f.baseState;x=0,V=F=E=null,A=m;do{var W=A.lane,J=A.eventTime;if((h&W)===W){V!==null&&(V=V.next={eventTime:J,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ee=r,te=A;switch(W=i,J=l,te.tag){case 1:if(ee=te.payload,typeof ee=="function"){H=ee.call(J,H,W);break e}H=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=te.payload,W=typeof ee=="function"?ee.call(J,H,W):ee,W==null)break e;H=q({},H,W);break e;case 2:Qr=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,W=f.effects,W===null?f.effects=[A]:W.push(A))}else J={eventTime:J,lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},V===null?(F=V=J,E=H):V=V.next=J,x|=W;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;W=A,A=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);if(V===null&&(E=H),f.baseState=E,f.firstBaseUpdate=F,f.lastBaseUpdate=V,i=f.shared.interleaved,i!==null){f=i;do x|=f.lane,f=f.next;while(f!==i)}else m===null&&(f.shared.lanes=0);Cn|=x,r.lanes=x,r.memoizedState=H}}function Qd(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var os={},cr=Xr(os),as=Xr(os),ls=Xr(os);function wn(r){if(r===os)throw Error(t(174));return r}function hc(r,i){switch(De(ls,i),De(as,r),De(cr,os),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:dl(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=dl(i,r)}Me(cr),De(cr,i)}function ai(){Me(cr),Me(as),Me(ls)}function qd(r){wn(ls.current);var i=wn(cr.current),l=dl(i,r.type);i!==l&&(De(as,r),De(cr,l))}function dc(r){as.current===r&&(Me(cr),Me(as))}var Le=Xr(0);function To(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fc=[];function gc(){for(var r=0;r<fc.length;r++)fc[r]._workInProgressVersionPrimary=null;fc.length=0}var ko=B.ReactCurrentDispatcher,pc=B.ReactCurrentBatchConfig,Sn=0,Ie=null,Qe=null,$e=null,Eo=!1,cs=!1,us=0,_0=0;function ot(){throw Error(t(321))}function mc(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Xt(r[l],i[l]))return!1;return!0}function vc(r,i,l,h,f,m){if(Sn=m,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ko.current=r===null||r.memoizedState===null?E0:b0,r=l(h,f),cs){m=0;do{if(cs=!1,us=0,25<=m)throw Error(t(301));m+=1,$e=Qe=null,i.updateQueue=null,ko.current=O0,r=l(h,f)}while(cs)}if(ko.current=Do,i=Qe!==null&&Qe.next!==null,Sn=0,$e=Qe=Ie=null,Eo=!1,i)throw Error(t(300));return r}function yc(){var r=us!==0;return us=0,r}function ur(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ie.memoizedState=$e=r:$e=$e.next=r,$e}function It(){if(Qe===null){var r=Ie.alternate;r=r!==null?r.memoizedState:null}else r=Qe.next;var i=$e===null?Ie.memoizedState:$e.next;if(i!==null)$e=i,Qe=r;else{if(r===null)throw Error(t(310));Qe=r,r={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},$e===null?Ie.memoizedState=$e=r:$e=$e.next=r}return $e}function hs(r,i){return typeof i=="function"?i(r):i}function xc(r){var i=It(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Qe,f=h.baseQueue,m=l.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}h.baseQueue=f=m,l.pending=null}if(f!==null){m=f.next,h=h.baseState;var A=x=null,E=null,F=m;do{var V=F.lane;if((Sn&V)===V)E!==null&&(E=E.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),h=F.hasEagerState?F.eagerState:r(h,F.action);else{var H={lane:V,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};E===null?(A=E=H,x=h):E=E.next=H,Ie.lanes|=V,Cn|=V}F=F.next}while(F!==null&&F!==m);E===null?x=h:E.next=A,Xt(h,i.memoizedState)||(vt=!0),i.memoizedState=h,i.baseState=x,i.baseQueue=E,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do m=f.lane,Ie.lanes|=m,Cn|=m,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function wc(r){var i=It(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,m=i.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do m=r(m,x.action),x=x.next;while(x!==f);Xt(m,i.memoizedState)||(vt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,h]}function Jd(){}function Zd(r,i){var l=Ie,h=It(),f=i(),m=!Xt(h.memoizedState,f);if(m&&(h.memoizedState=f,vt=!0),h=h.queue,Sc(tf.bind(null,l,h,r),[r]),h.getSnapshot!==i||m||$e!==null&&$e.memoizedState.tag&1){if(l.flags|=2048,ds(9,ef.bind(null,l,h,f,i),void 0,null),et===null)throw Error(t(349));Sn&30||$d(l,i,f)}return f}function $d(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Ie.updateQueue,i===null?(i={lastEffect:null,stores:null},Ie.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function ef(r,i,l,h){i.value=l,i.getSnapshot=h,rf(i)&&nf(r)}function tf(r,i,l){return l(function(){rf(i)&&nf(r)})}function rf(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Xt(r,l)}catch{return!0}}function nf(r){var i=Cr(r,1);i!==null&&Jt(i,r,1,-1)}function sf(r){var i=ur();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:r},i.queue=r,r=r.dispatch=k0.bind(null,Ie,r),[i.memoizedState,r]}function ds(r,i,l,h){return r={tag:r,create:i,destroy:l,deps:h,next:null},i=Ie.updateQueue,i===null?(i={lastEffect:null,stores:null},Ie.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,i.lastEffect=r)),r}function of(){return It().memoizedState}function bo(r,i,l,h){var f=ur();Ie.flags|=r,f.memoizedState=ds(1|i,l,void 0,h===void 0?null:h)}function Oo(r,i,l,h){var f=It();h=h===void 0?null:h;var m=void 0;if(Qe!==null){var x=Qe.memoizedState;if(m=x.destroy,h!==null&&mc(h,x.deps)){f.memoizedState=ds(i,l,m,h);return}}Ie.flags|=r,f.memoizedState=ds(1|i,l,m,h)}function af(r,i){return bo(8390656,8,r,i)}function Sc(r,i){return Oo(2048,8,r,i)}function lf(r,i){return Oo(4,2,r,i)}function cf(r,i){return Oo(4,4,r,i)}function uf(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function hf(r,i,l){return l=l!=null?l.concat([r]):null,Oo(4,4,uf.bind(null,i,r),l)}function Cc(){}function df(r,i){var l=It();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&mc(i,h[1])?h[0]:(l.memoizedState=[r,i],r)}function ff(r,i){var l=It();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&mc(i,h[1])?h[0]:(r=r(),l.memoizedState=[r,i],r)}function gf(r,i,l){return Sn&21?(Xt(l,i)||(l=Vh(),Ie.lanes|=l,Cn|=l,r.baseState=!0),i):(r.baseState&&(r.baseState=!1,vt=!0),r.memoizedState=l)}function A0(r,i){var l=Ee;Ee=l!==0&&4>l?l:4,r(!0);var h=pc.transition;pc.transition={};try{r(!1),i()}finally{Ee=l,pc.transition=h}}function pf(){return It().memoizedState}function T0(r,i,l){var h=en(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},mf(r))vf(i,l);else if(l=Xd(r,i,l,h),l!==null){var f=ht();Jt(l,r,h,f),yf(l,i,h)}}function k0(r,i,l){var h=en(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(mf(r))vf(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,A=m(x,l);if(f.hasEagerState=!0,f.eagerState=A,Xt(A,x)){var E=i.interleaved;E===null?(f.next=f,cc(i)):(f.next=E.next,E.next=f),i.interleaved=f;return}}catch{}finally{}l=Xd(r,i,f,h),l!==null&&(f=ht(),Jt(l,r,h,f),yf(l,i,h))}}function mf(r){var i=r.alternate;return r===Ie||i!==null&&i===Ie}function vf(r,i){cs=Eo=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function yf(r,i,l){if(l&4194240){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,Al(r,l)}}var Do={readContext:Lt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},E0={readContext:Lt,useCallback:function(r,i){return ur().memoizedState=[r,i===void 0?null:i],r},useContext:Lt,useEffect:af,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,bo(4194308,4,uf.bind(null,i,r),l)},useLayoutEffect:function(r,i){return bo(4194308,4,r,i)},useInsertionEffect:function(r,i){return bo(4,2,r,i)},useMemo:function(r,i){var l=ur();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var h=ur();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=T0.bind(null,Ie,r),[h.memoizedState,r]},useRef:function(r){var i=ur();return r={current:r},i.memoizedState=r},useState:sf,useDebugValue:Cc,useDeferredValue:function(r){return ur().memoizedState=r},useTransition:function(){var r=sf(!1),i=r[0];return r=A0.bind(null,r[1]),ur().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var h=Ie,f=ur();if(Re){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),et===null)throw Error(t(349));Sn&30||$d(h,i,l)}f.memoizedState=l;var m={value:l,getSnapshot:i};return f.queue=m,af(tf.bind(null,h,m,r),[r]),h.flags|=2048,ds(9,ef.bind(null,h,m,l,i),void 0,null),l},useId:function(){var r=ur(),i=et.identifierPrefix;if(Re){var l=Sr,h=wr;l=(h&~(1<<32-Yt(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=us++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=_0++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},b0={readContext:Lt,useCallback:df,useContext:Lt,useEffect:Sc,useImperativeHandle:hf,useInsertionEffect:lf,useLayoutEffect:cf,useMemo:ff,useReducer:xc,useRef:of,useState:function(){return xc(hs)},useDebugValue:Cc,useDeferredValue:function(r){var i=It();return gf(i,Qe.memoizedState,r)},useTransition:function(){var r=xc(hs)[0],i=It().memoizedState;return[r,i]},useMutableSource:Jd,useSyncExternalStore:Zd,useId:pf,unstable_isNewReconciler:!1},O0={readContext:Lt,useCallback:df,useContext:Lt,useEffect:Sc,useImperativeHandle:hf,useInsertionEffect:lf,useLayoutEffect:cf,useMemo:ff,useReducer:wc,useRef:of,useState:function(){return wc(hs)},useDebugValue:Cc,useDeferredValue:function(r){var i=It();return Qe===null?i.memoizedState=r:gf(i,Qe.memoizedState,r)},useTransition:function(){var r=wc(hs)[0],i=It().memoizedState;return[r,i]},useMutableSource:Jd,useSyncExternalStore:Zd,useId:pf,unstable_isNewReconciler:!1};function Kt(r,i){if(r&&r.defaultProps){i=q({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function _c(r,i,l,h){i=r.memoizedState,l=l(h,i),l=l==null?i:q({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Po={isMounted:function(r){return(r=r._reactInternals)?gn(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var h=ht(),f=en(r),m=_r(h,f);m.payload=i,l!=null&&(m.callback=l),i=qr(r,m,f),i!==null&&(Jt(i,r,f,h),_o(i,r,f))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var h=ht(),f=en(r),m=_r(h,f);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=qr(r,m,f),i!==null&&(Jt(i,r,f,h),_o(i,r,f))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=ht(),h=en(r),f=_r(l,h);f.tag=2,i!=null&&(f.callback=i),i=qr(r,f,h),i!==null&&(Jt(i,r,h,l),_o(i,r,h))}};function xf(r,i,l,h,f,m,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,x):i.prototype&&i.prototype.isPureReactComponent?!Zi(l,h)||!Zi(f,m):!0}function wf(r,i,l){var h=!1,f=Gr,m=i.contextType;return typeof m=="object"&&m!==null?m=Lt(m):(f=mt(i)?mn:st.current,h=i.contextTypes,m=(h=h!=null)?ei(r,f):Gr),i=new i(l,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Po,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=m),i}function Sf(r,i,l,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==r&&Po.enqueueReplaceState(i,i.state,null)}function Ac(r,i,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},uc(r);var m=i.contextType;typeof m=="object"&&m!==null?f.context=Lt(m):(m=mt(i)?mn:st.current,f.context=ei(r,m)),f.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(_c(r,i,m,l),f.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Po.enqueueReplaceState(f,f.state,null),Ao(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function li(r,i){try{var l="",h=i;do l+=pe(h),h=h.return;while(h);var f=l}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:f,digest:null}}function Tc(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function kc(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var D0=typeof WeakMap=="function"?WeakMap:Map;function Cf(r,i,l){l=_r(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){No||(No=!0,Uc=h),kc(r,i)},l}function _f(r,i,l){l=_r(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=i.value;l.payload=function(){return h(f)},l.callback=function(){kc(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){kc(r,i),typeof h!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),l}function Af(r,i,l){var h=r.pingCache;if(h===null){h=r.pingCache=new D0;var f=new Set;h.set(i,f)}else f=h.get(i),f===void 0&&(f=new Set,h.set(i,f));f.has(l)||(f.add(l),r=H0.bind(null,r,i,l),i.then(r,r))}function Tf(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function kf(r,i,l,h,f){return r.mode&1?(r.flags|=65536,r.lanes=f,r):(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=_r(-1,1),i.tag=2,qr(l,i,1))),l.lanes|=1),r)}var P0=B.ReactCurrentOwner,vt=!1;function ut(r,i,l,h){i.child=r===null?Yd(i,null,l,h):ii(i,r.child,l,h)}function Ef(r,i,l,h,f){l=l.render;var m=i.ref;return oi(i,f),h=vc(r,i,l,h,m,f),l=yc(),r!==null&&!vt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~f,Ar(r,i,f)):(Re&&l&&ec(i),i.flags|=1,ut(r,i,h,f),i.child)}function bf(r,i,l,h,f){if(r===null){var m=l.type;return typeof m=="function"&&!Kc(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=m,Of(r,i,m,h,f)):(r=Ho(l.type,null,h,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!(r.lanes&f)){var x=m.memoizedProps;if(l=l.compare,l=l!==null?l:Zi,l(x,h)&&r.ref===i.ref)return Ar(r,i,f)}return i.flags|=1,r=rn(m,h),r.ref=i.ref,r.return=i,i.child=r}function Of(r,i,l,h,f){if(r!==null){var m=r.memoizedProps;if(Zi(m,h)&&r.ref===i.ref)if(vt=!1,i.pendingProps=h=m,(r.lanes&f)!==0)r.flags&131072&&(vt=!0);else return i.lanes=r.lanes,Ar(r,i,f)}return Ec(r,i,l,h,f)}function Df(r,i,l){var h=i.pendingProps,f=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ui,Dt),Dt|=l;else{if(!(l&1073741824))return r=m!==null?m.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,De(ui,Dt),Dt|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:l,De(ui,Dt),Dt|=h}else m!==null?(h=m.baseLanes|l,i.memoizedState=null):h=l,De(ui,Dt),Dt|=h;return ut(r,i,f,l),i.child}function Pf(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Ec(r,i,l,h,f){var m=mt(l)?mn:st.current;return m=ei(i,m),oi(i,f),l=vc(r,i,l,h,m,f),h=yc(),r!==null&&!vt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~f,Ar(r,i,f)):(Re&&h&&ec(i),i.flags|=1,ut(r,i,l,f),i.child)}function Mf(r,i,l,h,f){if(mt(l)){var m=!0;po(i)}else m=!1;if(oi(i,f),i.stateNode===null)jo(r,i),wf(i,l,h),Ac(i,l,h,f),h=!0;else if(r===null){var x=i.stateNode,A=i.memoizedProps;x.props=A;var E=x.context,F=l.contextType;typeof F=="object"&&F!==null?F=Lt(F):(F=mt(l)?mn:st.current,F=ei(i,F));var V=l.getDerivedStateFromProps,H=typeof V=="function"||typeof x.getSnapshotBeforeUpdate=="function";H||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==h||E!==F)&&Sf(i,x,h,F),Qr=!1;var W=i.memoizedState;x.state=W,Ao(i,h,x,f),E=i.memoizedState,A!==h||W!==E||pt.current||Qr?(typeof V=="function"&&(_c(i,l,V,h),E=i.memoizedState),(A=Qr||xf(i,l,A,h,W,E,F))?(H||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=E),x.props=h,x.state=E,x.context=F,h=A):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{x=i.stateNode,Gd(r,i),A=i.memoizedProps,F=i.type===i.elementType?A:Kt(i.type,A),x.props=F,H=i.pendingProps,W=x.context,E=l.contextType,typeof E=="object"&&E!==null?E=Lt(E):(E=mt(l)?mn:st.current,E=ei(i,E));var J=l.getDerivedStateFromProps;(V=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==H||W!==E)&&Sf(i,x,h,E),Qr=!1,W=i.memoizedState,x.state=W,Ao(i,h,x,f);var ee=i.memoizedState;A!==H||W!==ee||pt.current||Qr?(typeof J=="function"&&(_c(i,l,J,h),ee=i.memoizedState),(F=Qr||xf(i,l,F,h,W,ee,E)||!1)?(V||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,ee,E),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,ee,E)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===r.memoizedProps&&W===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&W===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ee),x.props=h,x.state=ee,x.context=E,h=F):(typeof x.componentDidUpdate!="function"||A===r.memoizedProps&&W===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&W===r.memoizedState||(i.flags|=1024),h=!1)}return bc(r,i,l,h,m,f)}function bc(r,i,l,h,f,m){Pf(r,i);var x=(i.flags&128)!==0;if(!h&&!x)return f&&Ld(i,l,!1),Ar(r,i,m);h=i.stateNode,P0.current=i;var A=x&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&x?(i.child=ii(i,r.child,null,m),i.child=ii(i,null,A,m)):ut(r,i,A,m),i.memoizedState=h.state,f&&Ld(i,l,!0),i.child}function jf(r){var i=r.stateNode;i.pendingContext?Rd(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Rd(r,i.context,!1),hc(r,i.containerInfo)}function Rf(r,i,l,h,f){return ni(),ic(f),i.flags|=256,ut(r,i,l,h),i.child}var Oc={dehydrated:null,treeContext:null,retryLane:0};function Dc(r){return{baseLanes:r,cachePool:null,transitions:null}}function Ff(r,i,l){var h=i.pendingProps,f=Le.current,m=!1,x=(i.flags&128)!==0,A;if((A=x)||(A=r!==null&&r.memoizedState===null?!1:(f&2)!==0),A?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),De(Le,f&1),r===null)return nc(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(i.mode&1?r.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(x=h.children,r=h.fallback,m?(h=i.mode,m=i.child,x={mode:"hidden",children:x},!(h&1)&&m!==null?(m.childLanes=0,m.pendingProps=x):m=Yo(x,h,0,null),r=kn(r,h,l,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=Dc(l),i.memoizedState=Oc,r):Pc(i,x));if(f=r.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return M0(r,i,x,h,A,f,l);if(m){m=h.fallback,x=i.mode,f=r.child,A=f.sibling;var E={mode:"hidden",children:h.children};return!(x&1)&&i.child!==f?(h=i.child,h.childLanes=0,h.pendingProps=E,i.deletions=null):(h=rn(f,E),h.subtreeFlags=f.subtreeFlags&14680064),A!==null?m=rn(A,m):(m=kn(m,x,l,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,x=r.child.memoizedState,x=x===null?Dc(l):{baseLanes:x.baseLanes|l,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=r.childLanes&~l,i.memoizedState=Oc,h}return m=r.child,r=m.sibling,h=rn(m,{mode:"visible",children:h.children}),!(i.mode&1)&&(h.lanes=l),h.return=i,h.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=h,i.memoizedState=null,h}function Pc(r,i){return i=Yo({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Mo(r,i,l,h){return h!==null&&ic(h),ii(i,r.child,null,l),r=Pc(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function M0(r,i,l,h,f,m,x){if(l)return i.flags&256?(i.flags&=-257,h=Tc(Error(t(422))),Mo(r,i,x,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=h.fallback,f=i.mode,h=Yo({mode:"visible",children:h.children},f,0,null),m=kn(m,f,x,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,i.mode&1&&ii(i,r.child,null,x),i.child.memoizedState=Dc(x),i.memoizedState=Oc,m);if(!(i.mode&1))return Mo(r,i,x,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var A=h.dgst;return h=A,m=Error(t(419)),h=Tc(m,h,void 0),Mo(r,i,x,h)}if(A=(x&r.childLanes)!==0,vt||A){if(h=et,h!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|x)?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Cr(r,f),Jt(h,r,f,-1))}return Gc(),h=Tc(Error(t(421))),Mo(r,i,x,h)}return f.data==="$?"?(i.flags|=128,i.child=r.child,i=Y0.bind(null,r),f._reactRetry=i,null):(r=m.treeContext,Ot=Yr(f.nextSibling),bt=i,Re=!0,Gt=null,r!==null&&(Rt[Ft++]=wr,Rt[Ft++]=Sr,Rt[Ft++]=vn,wr=r.id,Sr=r.overflow,vn=i),i=Pc(i,h.children),i.flags|=4096,i)}function Lf(r,i,l){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),lc(r.return,i,l)}function Mc(r,i,l,h,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=l,m.tailMode=f)}function If(r,i,l){var h=i.pendingProps,f=h.revealOrder,m=h.tail;if(ut(r,i,h.children,l),h=Le.current,h&2)h=h&1|2,i.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Lf(r,l,i);else if(r.tag===19)Lf(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(De(Le,h),!(i.mode&1))i.memoizedState=null;else switch(f){case"forwards":for(l=i.child,f=null;l!==null;)r=l.alternate,r!==null&&To(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),Mc(i,!1,f,l,m);break;case"backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&To(r)===null){i.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Mc(i,!0,l,null,m);break;case"together":Mc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function jo(r,i){!(i.mode&1)&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Ar(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),Cn|=i.lanes,!(l&i.childLanes))return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,l=rn(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=rn(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function j0(r,i,l){switch(i.tag){case 3:jf(i),ni();break;case 5:qd(i);break;case 1:mt(i.type)&&po(i);break;case 4:hc(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,f=i.memoizedProps.value;De(So,h._currentValue),h._currentValue=f;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(De(Le,Le.current&1),i.flags|=128,null):l&i.child.childLanes?Ff(r,i,l):(De(Le,Le.current&1),r=Ar(r,i,l),r!==null?r.sibling:null);De(Le,Le.current&1);break;case 19:if(h=(l&i.childLanes)!==0,r.flags&128){if(h)return If(r,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),De(Le,Le.current),h)break;return null;case 22:case 23:return i.lanes=0,Df(r,i,l)}return Ar(r,i,l)}var Nf,jc,Bf,zf;Nf=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jc=function(){},Bf=function(r,i,l,h){var f=r.memoizedProps;if(f!==h){r=i.stateNode,wn(cr.current);var m=null;switch(l){case"input":f=ll(r,f),h=ll(r,h),m=[];break;case"select":f=q({},f,{value:void 0}),h=q({},h,{value:void 0}),m=[];break;case"textarea":f=hl(r,f),h=hl(r,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=ho)}fl(l,h);var x;l=null;for(F in f)if(!h.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var A=f[F];for(x in A)A.hasOwnProperty(x)&&(l||(l={}),l[x]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(s.hasOwnProperty(F)?m||(m=[]):(m=m||[]).push(F,null));for(F in h){var E=h[F];if(A=f!=null?f[F]:void 0,h.hasOwnProperty(F)&&E!==A&&(E!=null||A!=null))if(F==="style")if(A){for(x in A)!A.hasOwnProperty(x)||E&&E.hasOwnProperty(x)||(l||(l={}),l[x]="");for(x in E)E.hasOwnProperty(x)&&A[x]!==E[x]&&(l||(l={}),l[x]=E[x])}else l||(m||(m=[]),m.push(F,l)),l=E;else F==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,A=A?A.__html:void 0,E!=null&&A!==E&&(m=m||[]).push(F,E)):F==="children"?typeof E!="string"&&typeof E!="number"||(m=m||[]).push(F,""+E):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(s.hasOwnProperty(F)?(E!=null&&F==="onScroll"&&Pe("scroll",r),m||A===E||(m=[])):(m=m||[]).push(F,E))}l&&(m=m||[]).push("style",l);var F=m;(i.updateQueue=F)&&(i.flags|=4)}},zf=function(r,i,l,h){l!==h&&(i.flags|=4)};function fs(r,i){if(!Re)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function at(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(i)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,i}function R0(r,i,l){var h=i.pendingProps;switch(tc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return mt(i.type)&&go(),at(i),null;case 3:return h=i.stateNode,ai(),Me(pt),Me(st),gc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(xo(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Gt!==null&&(Hc(Gt),Gt=null))),jc(r,i),at(i),null;case 5:dc(i);var f=wn(ls.current);if(l=i.type,r!==null&&i.stateNode!=null)Bf(r,i,l,h,f),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return at(i),null}if(r=wn(cr.current),xo(i)){h=i.stateNode,l=i.type;var m=i.memoizedProps;switch(h[lr]=i,h[ns]=m,r=(i.mode&1)!==0,l){case"dialog":Pe("cancel",h),Pe("close",h);break;case"iframe":case"object":case"embed":Pe("load",h);break;case"video":case"audio":for(f=0;f<es.length;f++)Pe(es[f],h);break;case"source":Pe("error",h);break;case"img":case"image":case"link":Pe("error",h),Pe("load",h);break;case"details":Pe("toggle",h);break;case"input":xh(h,m),Pe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Pe("invalid",h);break;case"textarea":Ch(h,m),Pe("invalid",h)}fl(l,m),f=null;for(var x in m)if(m.hasOwnProperty(x)){var A=m[x];x==="children"?typeof A=="string"?h.textContent!==A&&(m.suppressHydrationWarning!==!0&&uo(h.textContent,A,r),f=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(m.suppressHydrationWarning!==!0&&uo(h.textContent,A,r),f=["children",""+A]):s.hasOwnProperty(x)&&A!=null&&x==="onScroll"&&Pe("scroll",h)}switch(l){case"input":Us(h),Sh(h,m,!0);break;case"textarea":Us(h),Ah(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=ho)}h=f,i.updateQueue=h,h!==null&&(i.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Th(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=x.createElement(l,{is:h.is}):(r=x.createElement(l),l==="select"&&(x=r,h.multiple?x.multiple=!0:h.size&&(x.size=h.size))):r=x.createElementNS(r,l),r[lr]=i,r[ns]=h,Nf(r,i,!1,!1),i.stateNode=r;e:{switch(x=gl(l,h),l){case"dialog":Pe("cancel",r),Pe("close",r),f=h;break;case"iframe":case"object":case"embed":Pe("load",r),f=h;break;case"video":case"audio":for(f=0;f<es.length;f++)Pe(es[f],r);f=h;break;case"source":Pe("error",r),f=h;break;case"img":case"image":case"link":Pe("error",r),Pe("load",r),f=h;break;case"details":Pe("toggle",r),f=h;break;case"input":xh(r,h),f=ll(r,h),Pe("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=q({},h,{value:void 0}),Pe("invalid",r);break;case"textarea":Ch(r,h),f=hl(r,h),Pe("invalid",r);break;default:f=h}fl(l,f),A=f;for(m in A)if(A.hasOwnProperty(m)){var E=A[m];m==="style"?bh(r,E):m==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&kh(r,E)):m==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&Fi(r,E):typeof E=="number"&&Fi(r,""+E):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(s.hasOwnProperty(m)?E!=null&&m==="onScroll"&&Pe("scroll",r):E!=null&&I(r,m,E,x))}switch(l){case"input":Us(r),Sh(r,h,!1);break;case"textarea":Us(r),Ah(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ae(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?Wn(r,!!h.multiple,m,!1):h.defaultValue!=null&&Wn(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=ho)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return at(i),null;case 6:if(r&&i.stateNode!=null)zf(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=wn(ls.current),wn(cr.current),xo(i)){if(h=i.stateNode,l=i.memoizedProps,h[lr]=i,(m=h.nodeValue!==l)&&(r=bt,r!==null))switch(r.tag){case 3:uo(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&uo(h.nodeValue,l,(r.mode&1)!==0)}m&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[lr]=i,i.stateNode=h}return at(i),null;case 13:if(Me(Le),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Re&&Ot!==null&&i.mode&1&&!(i.flags&128))Wd(),ni(),i.flags|=98560,m=!1;else if(m=xo(i),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[lr]=i}else ni(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;at(i),m=!1}else Gt!==null&&(Hc(Gt),Gt=null),m=!0;if(!m)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,i.mode&1&&(r===null||Le.current&1?qe===0&&(qe=3):Gc())),i.updateQueue!==null&&(i.flags|=4),at(i),null);case 4:return ai(),jc(r,i),r===null&&ts(i.stateNode.containerInfo),at(i),null;case 10:return ac(i.type._context),at(i),null;case 17:return mt(i.type)&&go(),at(i),null;case 19:if(Me(Le),m=i.memoizedState,m===null)return at(i),null;if(h=(i.flags&128)!==0,x=m.rendering,x===null)if(h)fs(m,!1);else{if(qe!==0||r!==null&&r.flags&128)for(r=i.child;r!==null;){if(x=To(r),x!==null){for(i.flags|=128,fs(m,!1),h=x.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)m=l,r=h,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,r=x.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return De(Le,Le.current&1|2),i.child}r=r.sibling}m.tail!==null&&Ve()>hi&&(i.flags|=128,h=!0,fs(m,!1),i.lanes=4194304)}else{if(!h)if(r=To(x),r!==null){if(i.flags|=128,h=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),fs(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Re)return at(i),null}else 2*Ve()-m.renderingStartTime>hi&&l!==1073741824&&(i.flags|=128,h=!0,fs(m,!1),i.lanes=4194304);m.isBackwards?(x.sibling=i.child,i.child=x):(l=m.last,l!==null?l.sibling=x:i.child=x,m.last=x)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ve(),i.sibling=null,l=Le.current,De(Le,h?l&1|2:l&1),i):(at(i),null);case 22:case 23:return Xc(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&i.mode&1?Dt&1073741824&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function F0(r,i){switch(tc(i),i.tag){case 1:return mt(i.type)&&go(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ai(),Me(pt),Me(st),gc(),r=i.flags,r&65536&&!(r&128)?(i.flags=r&-65537|128,i):null;case 5:return dc(i),null;case 13:if(Me(Le),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ni()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Me(Le),null;case 4:return ai(),null;case 10:return ac(i.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Ro=!1,lt=!1,L0=typeof WeakSet=="function"?WeakSet:Set,$=null;function ci(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){We(r,i,h)}else l.current=null}function Rc(r,i,l){try{l()}catch(h){We(r,i,h)}}var Uf=!1;function I0(r,i){if(Xl=$s,r=yd(),Nl(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var x=0,A=-1,E=-1,F=0,V=0,H=r,W=null;t:for(;;){for(var J;H!==l||f!==0&&H.nodeType!==3||(A=x+f),H!==m||h!==0&&H.nodeType!==3||(E=x+h),H.nodeType===3&&(x+=H.nodeValue.length),(J=H.firstChild)!==null;)W=H,H=J;for(;;){if(H===r)break t;if(W===l&&++F===f&&(A=x),W===m&&++V===h&&(E=x),(J=H.nextSibling)!==null)break;H=W,W=H.parentNode}H=J}l=A===-1||E===-1?null:{start:A,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gl={focusedElem:r,selectionRange:l},$s=!1,$=i;$!==null;)if(i=$,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,$=r;else for(;$!==null;){i=$;try{var ee=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var te=ee.memoizedProps,He=ee.memoizedState,M=i.stateNode,O=M.getSnapshotBeforeUpdate(i.elementType===i.type?te:Kt(i.type,te),He);M.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var j=i.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){We(i,i.return,X)}if(r=i.sibling,r!==null){r.return=i.return,$=r;break}$=i.return}return ee=Uf,Uf=!1,ee}function gs(r,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var m=f.destroy;f.destroy=void 0,m!==void 0&&Rc(i,l,m)}f=f.next}while(f!==h)}}function Fo(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function Fc(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Wf(r){var i=r.alternate;i!==null&&(r.alternate=null,Wf(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[lr],delete i[ns],delete i[Jl],delete i[x0],delete i[w0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Vf(r){return r.tag===5||r.tag===3||r.tag===4}function Hf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Vf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Lc(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ho));else if(h!==4&&(r=r.child,r!==null))for(Lc(r,i,l),r=r.sibling;r!==null;)Lc(r,i,l),r=r.sibling}function Ic(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Ic(r,i,l),r=r.sibling;r!==null;)Ic(r,i,l),r=r.sibling}var rt=null,Qt=!1;function Jr(r,i,l){for(l=l.child;l!==null;)Yf(r,i,l),l=l.sibling}function Yf(r,i,l){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Gs,l)}catch{}switch(l.tag){case 5:lt||ci(l,i);case 6:var h=rt,f=Qt;rt=null,Jr(r,i,l),rt=h,Qt=f,rt!==null&&(Qt?(r=rt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):rt.removeChild(l.stateNode));break;case 18:rt!==null&&(Qt?(r=rt,l=l.stateNode,r.nodeType===8?ql(r.parentNode,l):r.nodeType===1&&ql(r,l),Xi(r)):ql(rt,l.stateNode));break;case 4:h=rt,f=Qt,rt=l.stateNode.containerInfo,Qt=!0,Jr(r,i,l),rt=h,Qt=f;break;case 0:case 11:case 14:case 15:if(!lt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,x=m.destroy;m=m.tag,x!==void 0&&(m&2||m&4)&&Rc(l,i,x),f=f.next}while(f!==h)}Jr(r,i,l);break;case 1:if(!lt&&(ci(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(A){We(l,i,A)}Jr(r,i,l);break;case 21:Jr(r,i,l);break;case 22:l.mode&1?(lt=(h=lt)||l.memoizedState!==null,Jr(r,i,l),lt=h):Jr(r,i,l);break;default:Jr(r,i,l)}}function Xf(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new L0),i.forEach(function(h){var f=X0.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function qt(r,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var m=r,x=i,A=x;e:for(;A!==null;){switch(A.tag){case 5:rt=A.stateNode,Qt=!1;break e;case 3:rt=A.stateNode.containerInfo,Qt=!0;break e;case 4:rt=A.stateNode.containerInfo,Qt=!0;break e}A=A.return}if(rt===null)throw Error(t(160));Yf(m,x,f),rt=null,Qt=!1;var E=f.alternate;E!==null&&(E.return=null),f.return=null}catch(F){We(f,i,F)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Gf(i,r),i=i.sibling}function Gf(r,i){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(qt(i,r),hr(r),h&4){try{gs(3,r,r.return),Fo(3,r)}catch(te){We(r,r.return,te)}try{gs(5,r,r.return)}catch(te){We(r,r.return,te)}}break;case 1:qt(i,r),hr(r),h&512&&l!==null&&ci(l,l.return);break;case 5:if(qt(i,r),hr(r),h&512&&l!==null&&ci(l,l.return),r.flags&32){var f=r.stateNode;try{Fi(f,"")}catch(te){We(r,r.return,te)}}if(h&4&&(f=r.stateNode,f!=null)){var m=r.memoizedProps,x=l!==null?l.memoizedProps:m,A=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{A==="input"&&m.type==="radio"&&m.name!=null&&wh(f,m),gl(A,x);var F=gl(A,m);for(x=0;x<E.length;x+=2){var V=E[x],H=E[x+1];V==="style"?bh(f,H):V==="dangerouslySetInnerHTML"?kh(f,H):V==="children"?Fi(f,H):I(f,V,H,F)}switch(A){case"input":cl(f,m);break;case"textarea":_h(f,m);break;case"select":var W=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var J=m.value;J!=null?Wn(f,!!m.multiple,J,!1):W!==!!m.multiple&&(m.defaultValue!=null?Wn(f,!!m.multiple,m.defaultValue,!0):Wn(f,!!m.multiple,m.multiple?[]:"",!1))}f[ns]=m}catch(te){We(r,r.return,te)}}break;case 6:if(qt(i,r),hr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,m=r.memoizedProps;try{f.nodeValue=m}catch(te){We(r,r.return,te)}}break;case 3:if(qt(i,r),hr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Xi(i.containerInfo)}catch(te){We(r,r.return,te)}break;case 4:qt(i,r),hr(r);break;case 13:qt(i,r),hr(r),f=r.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(zc=Ve())),h&4&&Xf(r);break;case 22:if(V=l!==null&&l.memoizedState!==null,r.mode&1?(lt=(F=lt)||V,qt(i,r),lt=F):qt(i,r),hr(r),h&8192){if(F=r.memoizedState!==null,(r.stateNode.isHidden=F)&&!V&&r.mode&1)for($=r,V=r.child;V!==null;){for(H=$=V;$!==null;){switch(W=$,J=W.child,W.tag){case 0:case 11:case 14:case 15:gs(4,W,W.return);break;case 1:ci(W,W.return);var ee=W.stateNode;if(typeof ee.componentWillUnmount=="function"){h=W,l=W.return;try{i=h,ee.props=i.memoizedProps,ee.state=i.memoizedState,ee.componentWillUnmount()}catch(te){We(h,l,te)}}break;case 5:ci(W,W.return);break;case 22:if(W.memoizedState!==null){qf(H);continue}}J!==null?(J.return=W,$=J):qf(H)}V=V.sibling}e:for(V=null,H=r;;){if(H.tag===5){if(V===null){V=H;try{f=H.stateNode,F?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(A=H.stateNode,E=H.memoizedProps.style,x=E!=null&&E.hasOwnProperty("display")?E.display:null,A.style.display=Eh("display",x))}catch(te){We(r,r.return,te)}}}else if(H.tag===6){if(V===null)try{H.stateNode.nodeValue=F?"":H.memoizedProps}catch(te){We(r,r.return,te)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===r)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===r)break e;for(;H.sibling===null;){if(H.return===null||H.return===r)break e;V===H&&(V=null),H=H.return}V===H&&(V=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:qt(i,r),hr(r),h&4&&Xf(r);break;case 21:break;default:qt(i,r),hr(r)}}function hr(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Vf(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Fi(f,""),h.flags&=-33);var m=Hf(r);Ic(r,m,f);break;case 3:case 4:var x=h.stateNode.containerInfo,A=Hf(r);Lc(r,A,x);break;default:throw Error(t(161))}}catch(E){We(r,r.return,E)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function N0(r,i,l){$=r,Kf(r)}function Kf(r,i,l){for(var h=(r.mode&1)!==0;$!==null;){var f=$,m=f.child;if(f.tag===22&&h){var x=f.memoizedState!==null||Ro;if(!x){var A=f.alternate,E=A!==null&&A.memoizedState!==null||lt;A=Ro;var F=lt;if(Ro=x,(lt=E)&&!F)for($=f;$!==null;)x=$,E=x.child,x.tag===22&&x.memoizedState!==null?Jf(f):E!==null?(E.return=x,$=E):Jf(f);for(;m!==null;)$=m,Kf(m),m=m.sibling;$=f,Ro=A,lt=F}Qf(r)}else f.subtreeFlags&8772&&m!==null?(m.return=f,$=m):Qf(r)}}function Qf(r){for(;$!==null;){var i=$;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:lt||Fo(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!lt)if(l===null)h.componentDidMount();else{var f=i.elementType===i.type?l.memoizedProps:Kt(i.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Qd(i,m,h);break;case 3:var x=i.updateQueue;if(x!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Qd(i,x,l)}break;case 5:var A=i.stateNode;if(l===null&&i.flags&4){l=A;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var F=i.alternate;if(F!==null){var V=F.memoizedState;if(V!==null){var H=V.dehydrated;H!==null&&Xi(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}lt||i.flags&512&&Fc(i)}catch(W){We(i,i.return,W)}}if(i===r){$=null;break}if(l=i.sibling,l!==null){l.return=i.return,$=l;break}$=i.return}}function qf(r){for(;$!==null;){var i=$;if(i===r){$=null;break}var l=i.sibling;if(l!==null){l.return=i.return,$=l;break}$=i.return}}function Jf(r){for(;$!==null;){var i=$;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{Fo(4,i)}catch(E){We(i,l,E)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var f=i.return;try{h.componentDidMount()}catch(E){We(i,f,E)}}var m=i.return;try{Fc(i)}catch(E){We(i,m,E)}break;case 5:var x=i.return;try{Fc(i)}catch(E){We(i,x,E)}}}catch(E){We(i,i.return,E)}if(i===r){$=null;break}var A=i.sibling;if(A!==null){A.return=i.return,$=A;break}$=i.return}}var B0=Math.ceil,Lo=B.ReactCurrentDispatcher,Nc=B.ReactCurrentOwner,Nt=B.ReactCurrentBatchConfig,ye=0,et=null,Ge=null,nt=0,Dt=0,ui=Xr(0),qe=0,ps=null,Cn=0,Io=0,Bc=0,ms=null,yt=null,zc=0,hi=1/0,Tr=null,No=!1,Uc=null,Zr=null,Bo=!1,$r=null,zo=0,vs=0,Wc=null,Uo=-1,Wo=0;function ht(){return ye&6?Ve():Uo!==-1?Uo:Uo=Ve()}function en(r){return r.mode&1?ye&2&&nt!==0?nt&-nt:C0.transition!==null?(Wo===0&&(Wo=Vh()),Wo):(r=Ee,r!==0||(r=window.event,r=r===void 0?16:Zh(r.type)),r):1}function Jt(r,i,l,h){if(50<vs)throw vs=0,Wc=null,Error(t(185));Ui(r,l,h),(!(ye&2)||r!==et)&&(r===et&&(!(ye&2)&&(Io|=l),qe===4&&tn(r,nt)),xt(r,h),l===1&&ye===0&&!(i.mode&1)&&(hi=Ve()+500,mo&&Kr()))}function xt(r,i){var l=r.callbackNode;Cv(r,i);var h=qs(r,r===et?nt:0);if(h===0)l!==null&&zh(l),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(l!=null&&zh(l),i===1)r.tag===0?S0($f.bind(null,r)):Id($f.bind(null,r)),v0(function(){!(ye&6)&&Kr()}),l=null;else{switch(Hh(h)){case 1:l=Sl;break;case 4:l=Uh;break;case 16:l=Xs;break;case 536870912:l=Wh;break;default:l=Xs}l=ag(l,Zf.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Zf(r,i){if(Uo=-1,Wo=0,ye&6)throw Error(t(327));var l=r.callbackNode;if(di()&&r.callbackNode!==l)return null;var h=qs(r,r===et?nt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||i)i=Vo(r,h);else{i=h;var f=ye;ye|=2;var m=tg();(et!==r||nt!==i)&&(Tr=null,hi=Ve()+500,An(r,i));do try{W0();break}catch(A){eg(r,A)}while(!0);oc(),Lo.current=m,ye=f,Ge!==null?i=0:(et=null,nt=0,i=qe)}if(i!==0){if(i===2&&(f=Cl(r),f!==0&&(h=f,i=Vc(r,f))),i===1)throw l=ps,An(r,0),tn(r,h),xt(r,Ve()),l;if(i===6)tn(r,h);else{if(f=r.current.alternate,!(h&30)&&!z0(f)&&(i=Vo(r,h),i===2&&(m=Cl(r),m!==0&&(h=m,i=Vc(r,m))),i===1))throw l=ps,An(r,0),tn(r,h),xt(r,Ve()),l;switch(r.finishedWork=f,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Tn(r,yt,Tr);break;case 3:if(tn(r,h),(h&130023424)===h&&(i=zc+500-Ve(),10<i)){if(qs(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){ht(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Ql(Tn.bind(null,r,yt,Tr),i);break}Tn(r,yt,Tr);break;case 4:if(tn(r,h),(h&4194240)===h)break;for(i=r.eventTimes,f=-1;0<h;){var x=31-Yt(h);m=1<<x,x=i[x],x>f&&(f=x),h&=~m}if(h=f,h=Ve()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*B0(h/1960))-h,10<h){r.timeoutHandle=Ql(Tn.bind(null,r,yt,Tr),h);break}Tn(r,yt,Tr);break;case 5:Tn(r,yt,Tr);break;default:throw Error(t(329))}}}return xt(r,Ve()),r.callbackNode===l?Zf.bind(null,r):null}function Vc(r,i){var l=ms;return r.current.memoizedState.isDehydrated&&(An(r,i).flags|=256),r=Vo(r,i),r!==2&&(i=yt,yt=l,i!==null&&Hc(i)),r}function Hc(r){yt===null?yt=r:yt.push.apply(yt,r)}function z0(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],m=f.getSnapshot;f=f.value;try{if(!Xt(m(),f))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function tn(r,i){for(i&=~Bc,i&=~Io,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Yt(i),h=1<<l;r[l]=-1,i&=~h}}function $f(r){if(ye&6)throw Error(t(327));di();var i=qs(r,0);if(!(i&1))return xt(r,Ve()),null;var l=Vo(r,i);if(r.tag!==0&&l===2){var h=Cl(r);h!==0&&(i=h,l=Vc(r,h))}if(l===1)throw l=ps,An(r,0),tn(r,i),xt(r,Ve()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Tn(r,yt,Tr),xt(r,Ve()),null}function Yc(r,i){var l=ye;ye|=1;try{return r(i)}finally{ye=l,ye===0&&(hi=Ve()+500,mo&&Kr())}}function _n(r){$r!==null&&$r.tag===0&&!(ye&6)&&di();var i=ye;ye|=1;var l=Nt.transition,h=Ee;try{if(Nt.transition=null,Ee=1,r)return r()}finally{Ee=h,Nt.transition=l,ye=i,!(ye&6)&&Kr()}}function Xc(){Dt=ui.current,Me(ui)}function An(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,m0(l)),Ge!==null)for(l=Ge.return;l!==null;){var h=l;switch(tc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&go();break;case 3:ai(),Me(pt),Me(st),gc();break;case 5:dc(h);break;case 4:ai();break;case 13:Me(Le);break;case 19:Me(Le);break;case 10:ac(h.type._context);break;case 22:case 23:Xc()}l=l.return}if(et=r,Ge=r=rn(r.current,null),nt=Dt=i,qe=0,ps=null,Bc=Io=Cn=0,yt=ms=null,xn!==null){for(i=0;i<xn.length;i++)if(l=xn[i],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,m=l.pending;if(m!==null){var x=m.next;m.next=f,h.next=x}l.pending=h}xn=null}return r}function eg(r,i){do{var l=Ge;try{if(oc(),ko.current=Do,Eo){for(var h=Ie.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Eo=!1}if(Sn=0,$e=Qe=Ie=null,cs=!1,us=0,Nc.current=null,l===null||l.return===null){qe=1,ps=i,Ge=null;break}e:{var m=r,x=l.return,A=l,E=i;if(i=nt,A.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var F=E,V=A,H=V.tag;if(!(V.mode&1)&&(H===0||H===11||H===15)){var W=V.alternate;W?(V.updateQueue=W.updateQueue,V.memoizedState=W.memoizedState,V.lanes=W.lanes):(V.updateQueue=null,V.memoizedState=null)}var J=Tf(x);if(J!==null){J.flags&=-257,kf(J,x,A,m,i),J.mode&1&&Af(m,F,i),i=J,E=F;var ee=i.updateQueue;if(ee===null){var te=new Set;te.add(E),i.updateQueue=te}else ee.add(E);break e}else{if(!(i&1)){Af(m,F,i),Gc();break e}E=Error(t(426))}}else if(Re&&A.mode&1){var He=Tf(x);if(He!==null){!(He.flags&65536)&&(He.flags|=256),kf(He,x,A,m,i),ic(li(E,A));break e}}m=E=li(E,A),qe!==4&&(qe=2),ms===null?ms=[m]:ms.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var M=Cf(m,E,i);Kd(m,M);break e;case 1:A=E;var O=m.type,j=m.stateNode;if(!(m.flags&128)&&(typeof O.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Zr===null||!Zr.has(j)))){m.flags|=65536,i&=-i,m.lanes|=i;var X=_f(m,A,i);Kd(m,X);break e}}m=m.return}while(m!==null)}ng(l)}catch(ne){i=ne,Ge===l&&l!==null&&(Ge=l=l.return);continue}break}while(!0)}function tg(){var r=Lo.current;return Lo.current=Do,r===null?Do:r}function Gc(){(qe===0||qe===3||qe===2)&&(qe=4),et===null||!(Cn&268435455)&&!(Io&268435455)||tn(et,nt)}function Vo(r,i){var l=ye;ye|=2;var h=tg();(et!==r||nt!==i)&&(Tr=null,An(r,i));do try{U0();break}catch(f){eg(r,f)}while(!0);if(oc(),ye=l,Lo.current=h,Ge!==null)throw Error(t(261));return et=null,nt=0,qe}function U0(){for(;Ge!==null;)rg(Ge)}function W0(){for(;Ge!==null&&!fv();)rg(Ge)}function rg(r){var i=og(r.alternate,r,Dt);r.memoizedProps=r.pendingProps,i===null?ng(r):Ge=i,Nc.current=null}function ng(r){var i=r;do{var l=i.alternate;if(r=i.return,i.flags&32768){if(l=F0(l,i),l!==null){l.flags&=32767,Ge=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{qe=6,Ge=null;return}}else if(l=R0(l,i,Dt),l!==null){Ge=l;return}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=r}while(i!==null);qe===0&&(qe=5)}function Tn(r,i,l){var h=Ee,f=Nt.transition;try{Nt.transition=null,Ee=1,V0(r,i,l,h)}finally{Nt.transition=f,Ee=h}return null}function V0(r,i,l,h){do di();while($r!==null);if(ye&6)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=l.lanes|l.childLanes;if(_v(r,m),r===et&&(Ge=et=null,nt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Bo||(Bo=!0,ag(Xs,function(){return di(),null})),m=(l.flags&15990)!==0,l.subtreeFlags&15990||m){m=Nt.transition,Nt.transition=null;var x=Ee;Ee=1;var A=ye;ye|=4,Nc.current=null,I0(r,l),Gf(l,r),c0(Gl),$s=!!Xl,Gl=Xl=null,r.current=l,N0(l),gv(),ye=A,Ee=x,Nt.transition=m}else r.current=l;if(Bo&&(Bo=!1,$r=r,zo=f),m=r.pendingLanes,m===0&&(Zr=null),vv(l.stateNode),xt(r,Ve()),i!==null)for(h=r.onRecoverableError,l=0;l<i.length;l++)f=i[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(No)throw No=!1,r=Uc,Uc=null,r;return zo&1&&r.tag!==0&&di(),m=r.pendingLanes,m&1?r===Wc?vs++:(vs=0,Wc=r):vs=0,Kr(),null}function di(){if($r!==null){var r=Hh(zo),i=Nt.transition,l=Ee;try{if(Nt.transition=null,Ee=16>r?16:r,$r===null)var h=!1;else{if(r=$r,$r=null,zo=0,ye&6)throw Error(t(331));var f=ye;for(ye|=4,$=r.current;$!==null;){var m=$,x=m.child;if($.flags&16){var A=m.deletions;if(A!==null){for(var E=0;E<A.length;E++){var F=A[E];for($=F;$!==null;){var V=$;switch(V.tag){case 0:case 11:case 15:gs(8,V,m)}var H=V.child;if(H!==null)H.return=V,$=H;else for(;$!==null;){V=$;var W=V.sibling,J=V.return;if(Wf(V),V===F){$=null;break}if(W!==null){W.return=J,$=W;break}$=J}}}var ee=m.alternate;if(ee!==null){var te=ee.child;if(te!==null){ee.child=null;do{var He=te.sibling;te.sibling=null,te=He}while(te!==null)}}$=m}}if(m.subtreeFlags&2064&&x!==null)x.return=m,$=x;else e:for(;$!==null;){if(m=$,m.flags&2048)switch(m.tag){case 0:case 11:case 15:gs(9,m,m.return)}var M=m.sibling;if(M!==null){M.return=m.return,$=M;break e}$=m.return}}var O=r.current;for($=O;$!==null;){x=$;var j=x.child;if(x.subtreeFlags&2064&&j!==null)j.return=x,$=j;else e:for(x=O;$!==null;){if(A=$,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Fo(9,A)}}catch(ne){We(A,A.return,ne)}if(A===x){$=null;break e}var X=A.sibling;if(X!==null){X.return=A.return,$=X;break e}$=A.return}}if(ye=f,Kr(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Gs,r)}catch{}h=!0}return h}finally{Ee=l,Nt.transition=i}}return!1}function ig(r,i,l){i=li(l,i),i=Cf(r,i,1),r=qr(r,i,1),i=ht(),r!==null&&(Ui(r,1,i),xt(r,i))}function We(r,i,l){if(r.tag===3)ig(r,r,l);else for(;i!==null;){if(i.tag===3){ig(i,r,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Zr===null||!Zr.has(h))){r=li(l,r),r=_f(i,r,1),i=qr(i,r,1),r=ht(),i!==null&&(Ui(i,1,r),xt(i,r));break}}i=i.return}}function H0(r,i,l){var h=r.pingCache;h!==null&&h.delete(i),i=ht(),r.pingedLanes|=r.suspendedLanes&l,et===r&&(nt&l)===l&&(qe===4||qe===3&&(nt&130023424)===nt&&500>Ve()-zc?An(r,0):Bc|=l),xt(r,i)}function sg(r,i){i===0&&(r.mode&1?(i=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):i=1);var l=ht();r=Cr(r,i),r!==null&&(Ui(r,i,l),xt(r,l))}function Y0(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),sg(r,l)}function X0(r,i){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),sg(r,l)}var og;og=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||pt.current)vt=!0;else{if(!(r.lanes&l)&&!(i.flags&128))return vt=!1,j0(r,i,l);vt=!!(r.flags&131072)}else vt=!1,Re&&i.flags&1048576&&Nd(i,yo,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;jo(r,i),r=i.pendingProps;var f=ei(i,st.current);oi(i,l),f=vc(null,i,h,r,f,l);var m=yc();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,mt(h)?(m=!0,po(i)):m=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,uc(i),f.updater=Po,i.stateNode=f,f._reactInternals=i,Ac(i,h,r,l),i=bc(null,i,h,!0,m,l)):(i.tag=0,Re&&m&&ec(i),ut(null,i,f,l),i=i.child),i;case 16:h=i.elementType;e:{switch(jo(r,i),r=i.pendingProps,f=h._init,h=f(h._payload),i.type=h,f=i.tag=K0(h),r=Kt(h,r),f){case 0:i=Ec(null,i,h,r,l);break e;case 1:i=Mf(null,i,h,r,l);break e;case 11:i=Ef(null,i,h,r,l);break e;case 14:i=bf(null,i,h,Kt(h.type,r),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Kt(h,f),Ec(r,i,h,f,l);case 1:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Kt(h,f),Mf(r,i,h,f,l);case 3:e:{if(jf(i),r===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,f=m.element,Gd(r,i),Ao(i,h,null,l);var x=i.memoizedState;if(h=x.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){f=li(Error(t(423)),i),i=Rf(r,i,h,l,f);break e}else if(h!==f){f=li(Error(t(424)),i),i=Rf(r,i,h,l,f);break e}else for(Ot=Yr(i.stateNode.containerInfo.firstChild),bt=i,Re=!0,Gt=null,l=Yd(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ni(),h===f){i=Ar(r,i,l);break e}ut(r,i,h,l)}i=i.child}return i;case 5:return qd(i),r===null&&nc(i),h=i.type,f=i.pendingProps,m=r!==null?r.memoizedProps:null,x=f.children,Kl(h,f)?x=null:m!==null&&Kl(h,m)&&(i.flags|=32),Pf(r,i),ut(r,i,x,l),i.child;case 6:return r===null&&nc(i),null;case 13:return Ff(r,i,l);case 4:return hc(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=ii(i,null,h,l):ut(r,i,h,l),i.child;case 11:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Kt(h,f),Ef(r,i,h,f,l);case 7:return ut(r,i,i.pendingProps,l),i.child;case 8:return ut(r,i,i.pendingProps.children,l),i.child;case 12:return ut(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,f=i.pendingProps,m=i.memoizedProps,x=f.value,De(So,h._currentValue),h._currentValue=x,m!==null)if(Xt(m.value,x)){if(m.children===f.children&&!pt.current){i=Ar(r,i,l);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var A=m.dependencies;if(A!==null){x=m.child;for(var E=A.firstContext;E!==null;){if(E.context===h){if(m.tag===1){E=_r(-1,l&-l),E.tag=2;var F=m.updateQueue;if(F!==null){F=F.shared;var V=F.pending;V===null?E.next=E:(E.next=V.next,V.next=E),F.pending=E}}m.lanes|=l,E=m.alternate,E!==null&&(E.lanes|=l),lc(m.return,l,i),A.lanes|=l;break}E=E.next}}else if(m.tag===10)x=m.type===i.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(t(341));x.lanes|=l,A=x.alternate,A!==null&&(A.lanes|=l),lc(x,l,i),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===i){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}ut(r,i,f.children,l),i=i.child}return i;case 9:return f=i.type,h=i.pendingProps.children,oi(i,l),f=Lt(f),h=h(f),i.flags|=1,ut(r,i,h,l),i.child;case 14:return h=i.type,f=Kt(h,i.pendingProps),f=Kt(h.type,f),bf(r,i,h,f,l);case 15:return Of(r,i,i.type,i.pendingProps,l);case 17:return h=i.type,f=i.pendingProps,f=i.elementType===h?f:Kt(h,f),jo(r,i),i.tag=1,mt(h)?(r=!0,po(i)):r=!1,oi(i,l),wf(i,h,f),Ac(i,h,f,l),bc(null,i,h,!0,r,l);case 19:return If(r,i,l);case 22:return Df(r,i,l)}throw Error(t(156,i.tag))};function ag(r,i){return Bh(r,i)}function G0(r,i,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(r,i,l,h){return new G0(r,i,l,h)}function Kc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function K0(r){if(typeof r=="function")return Kc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Se)return 11;if(r===je)return 14}return 2}function rn(r,i){var l=r.alternate;return l===null?(l=Bt(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Ho(r,i,l,h,f,m){var x=2;if(h=r,typeof r=="function")Kc(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case Q:return kn(l.children,f,m,i);case K:x=8,f|=8;break;case ie:return r=Bt(12,l,i,f|2),r.elementType=ie,r.lanes=m,r;case he:return r=Bt(13,l,i,f),r.elementType=he,r.lanes=m,r;case me:return r=Bt(19,l,i,f),r.elementType=me,r.lanes=m,r;case ve:return Yo(l,f,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ce:x=10;break e;case we:x=9;break e;case Se:x=11;break e;case je:x=14;break e;case ke:x=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Bt(x,l,i,f),i.elementType=r,i.type=h,i.lanes=m,i}function kn(r,i,l,h){return r=Bt(7,r,h,i),r.lanes=l,r}function Yo(r,i,l,h){return r=Bt(22,r,h,i),r.elementType=ve,r.lanes=l,r.stateNode={isHidden:!1},r}function Qc(r,i,l){return r=Bt(6,r,null,i),r.lanes=l,r}function qc(r,i,l){return i=Bt(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function Q0(r,i,l,h,f){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Jc(r,i,l,h,f,m,x,A,E){return r=new Q0(r,i,l,A,E),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Bt(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(m),r}function q0(r,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:h==null?null:""+h,children:r,containerInfo:i,implementation:l}}function lg(r){if(!r)return Gr;r=r._reactInternals;e:{if(gn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(mt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(mt(l))return Fd(r,l,i)}return i}function cg(r,i,l,h,f,m,x,A,E){return r=Jc(l,h,!0,r,f,m,x,A,E),r.context=lg(null),l=r.current,h=ht(),f=en(l),m=_r(h,f),m.callback=i??null,qr(l,m,f),r.current.lanes=f,Ui(r,f,h),xt(r,h),r}function Xo(r,i,l,h){var f=i.current,m=ht(),x=en(f);return l=lg(l),i.context===null?i.context=l:i.pendingContext=l,i=_r(m,x),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=qr(f,i,x),r!==null&&(Jt(r,f,x,m),_o(r,f,x)),x}function Go(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function ug(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function Zc(r,i){ug(r,i),(r=r.alternate)&&ug(r,i)}function J0(){return null}var hg=typeof reportError=="function"?reportError:function(r){console.error(r)};function $c(r){this._internalRoot=r}Ko.prototype.render=$c.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Xo(r,i,null,null)},Ko.prototype.unmount=$c.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;_n(function(){Xo(null,r,null,null)}),i[yr]=null}};function Ko(r){this._internalRoot=r}Ko.prototype.unstable_scheduleHydration=function(r){if(r){var i=Gh();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Wr.length&&i!==0&&i<Wr[l].priority;l++);Wr.splice(l,0,r),l===0&&qh(r)}};function eu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Qo(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function dg(){}function Z0(r,i,l,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var F=Go(x);m.call(F)}}var x=cg(i,h,r,0,null,!1,!1,"",dg);return r._reactRootContainer=x,r[yr]=x.current,ts(r.nodeType===8?r.parentNode:r),_n(),x}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var A=h;h=function(){var F=Go(E);A.call(F)}}var E=Jc(r,0,!1,null,null,!1,!1,"",dg);return r._reactRootContainer=E,r[yr]=E.current,ts(r.nodeType===8?r.parentNode:r),_n(function(){Xo(i,E,l,h)}),E}function qo(r,i,l,h,f){var m=l._reactRootContainer;if(m){var x=m;if(typeof f=="function"){var A=f;f=function(){var E=Go(x);A.call(E)}}Xo(i,x,r,f)}else x=Z0(l,i,r,f,h);return Go(x)}Yh=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=zi(i.pendingLanes);l!==0&&(Al(i,l|1),xt(i,Ve()),!(ye&6)&&(hi=Ve()+500,Kr()))}break;case 13:_n(function(){var h=Cr(r,1);if(h!==null){var f=ht();Jt(h,r,1,f)}}),Zc(r,1)}},Tl=function(r){if(r.tag===13){var i=Cr(r,134217728);if(i!==null){var l=ht();Jt(i,r,134217728,l)}Zc(r,134217728)}},Xh=function(r){if(r.tag===13){var i=en(r),l=Cr(r,i);if(l!==null){var h=ht();Jt(l,r,i,h)}Zc(r,i)}},Gh=function(){return Ee},Kh=function(r,i){var l=Ee;try{return Ee=r,i()}finally{Ee=l}},vl=function(r,i,l){switch(i){case"input":if(cl(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==r&&h.form===r.form){var f=fo(h);if(!f)throw Error(t(90));yh(h),cl(h,f)}}}break;case"textarea":_h(r,l);break;case"select":i=l.value,i!=null&&Wn(r,!!l.multiple,i,!1)}},Mh=Yc,jh=_n;var $0={usingClientEntryPoint:!1,Events:[is,Zn,fo,Dh,Ph,Yc]},ys={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ey={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ih(r),r===null?null:r.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||J0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{Gs=Jo.inject(ey),ar=Jo}catch{}}return wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$0,wt.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eu(i))throw Error(t(200));return q0(r,i,null,l)},wt.createRoot=function(r,i){if(!eu(r))throw Error(t(299));var l=!1,h="",f=hg;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Jc(r,1,!1,null,null,l,!1,h,f),r[yr]=i.current,ts(r.nodeType===8?r.parentNode:r),new $c(i)},wt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Ih(i),r=r===null?null:r.stateNode,r},wt.flushSync=function(r){return _n(r)},wt.hydrate=function(r,i,l){if(!Qo(i))throw Error(t(200));return qo(null,r,i,!0,l)},wt.hydrateRoot=function(r,i,l){if(!eu(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,m="",x=hg;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),i=cg(i,null,r,1,l??null,f,!1,m,x),r[yr]=i.current,ts(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,f]:i.mutableSourceEagerHydrationData.push(l,f);return new Ko(i)},wt.render=function(r,i,l){if(!Qo(i))throw Error(t(200));return qo(null,r,i,!1,l)},wt.unmountComponentAtNode=function(r){if(!Qo(r))throw Error(t(40));return r._reactRootContainer?(_n(function(){qo(null,null,r,!1,function(){r._reactRootContainer=null,r[yr]=null})}),!0):!1},wt.unstable_batchedUpdates=Yc,wt.unstable_renderSubtreeIntoContainer=function(r,i,l,h){if(!Qo(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return qo(r,i,l,!1,h)},wt.version="18.3.1-next-f1338f8080-20240426",wt}var wg;function ly(){if(wg)return nu.exports;wg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),nu.exports=ay(),nu.exports}var Sg;function cy(){if(Sg)return Zo;Sg=1;var a=ly();return Zo.createRoot=a.createRoot,Zo.hydrateRoot=a.hydrateRoot,Zo}var uy=cy(),ws={},Cg;function hy(){if(Cg)return ws;Cg=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.parse=c,ws.serialize=g;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,S){const w=new o,C=y.length;if(C<2)return w;const _=(S==null?void 0:S.decode)||p;let T=0;do{const R=y.indexOf("=",T);if(R===-1)break;const I=y.indexOf(";",T),B=I===-1?C:I;if(R>B){T=y.lastIndexOf(";",R-1)+1;continue}const z=u(y,T,R),G=d(y,R,z),Q=y.slice(z,G);if(w[Q]===void 0){let K=u(y,R+1,B),ie=d(y,B,K);const ce=_(y.slice(K,ie));w[Q]=ce}T=B+1}while(T<C);return w}function u(y,S,w){do{const C=y.charCodeAt(S);if(C!==32&&C!==9)return S}while(++S<w);return w}function d(y,S,w){for(;S>w;){const C=y.charCodeAt(--S);if(C!==32&&C!==9)return S+1}return w}function g(y,S,w){const C=(w==null?void 0:w.encode)||encodeURIComponent;if(!a.test(y))throw new TypeError(`argument name is invalid: ${y}`);const _=C(S);if(!e.test(_))throw new TypeError(`argument val is invalid: ${S}`);let T=y+"="+_;if(!w)return T;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);T+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);T+="; Domain="+w.domain}if(w.path){if(!n.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);T+="; Path="+w.path}if(w.expires){if(!v(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);T+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(T+="; HttpOnly"),w.secure&&(T+="; Secure"),w.partitioned&&(T+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return T}function p(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return s.call(y)==="[object Date]"}return ws}hy();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _g="popstate";function dy(a={}){function e(s,o){let{pathname:c="/",search:u="",hash:d=""}=Ln(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ku("",{pathname:c,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,g=d.indexOf("#");u=g===-1?d:d.slice(0,g)}return u+"#"+(typeof o=="string"?o:bs(o))}function n(s,o){sr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return gy(e,t,n,a)}function ze(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function sr(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fy(){return Math.random().toString(36).substring(2,10)}function Ag(a,e){return{usr:a.state,key:a.key,idx:e}}function ku(a,e,t=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Ln(e):e,state:t,key:e&&e.key||n||fy()}}function bs({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Ln(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let n=a.indexOf("?");n>=0&&(e.search=a.substring(n),a=a.substring(0,n)),a&&(e.pathname=a)}return e}function gy(a,e,t,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",d=null,g=p();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function p(){return(c.state||{idx:null}).idx}function v(){u="POP";let _=p(),T=_==null?null:_-g;g=_,d&&d({action:u,location:C.location,delta:T})}function y(_,T){u="PUSH";let R=ku(C.location,_,T);t&&t(R,_),g=p()+1;let I=Ag(R,g),B=C.createHref(R);try{c.pushState(I,"",B)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(B)}o&&d&&d({action:u,location:C.location,delta:1})}function S(_,T){u="REPLACE";let R=ku(C.location,_,T);t&&t(R,_),g=p();let I=Ag(R,g),B=C.createHref(R);c.replaceState(I,"",B),o&&d&&d({action:u,location:C.location,delta:0})}function w(_){let T=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof _=="string"?_:bs(_);return R=R.replace(/ $/,"%20"),ze(T,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,T)}let C={get action(){return u},get location(){return a(s,c)},listen(_){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(_g,v),d=_,()=>{s.removeEventListener(_g,v),d=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let T=w(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:S,go(_){return c.go(_)}};return C}function Cp(a,e,t="/"){return py(a,e,t,!1)}function py(a,e,t,n){let s=typeof e=="string"?Ln(e):e,o=ln(s.pathname||"/",t);if(o==null)return null;let c=_p(a);my(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let g=Ey(o);u=Ty(c[d],g,n)}return u}function _p(a,e=[],t=[],n=""){let s=(o,c,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};d.relativePath.startsWith("/")&&(ze(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let g=Pr([n,d.relativePath]),p=t.concat(d);o.children&&o.children.length>0&&(ze(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),_p(o.children,e,p,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:_y(g,o.index),routesMeta:p})};return a.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,c);else for(let d of Ap(o.path))s(o,c,d)}),e}function Ap(a){let e=a.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=Ap(n.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...c),u.map(d=>a.startsWith("/")&&d===""?"/":d)}function my(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:Ay(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var vy=/^:[\w-]+$/,yy=3,xy=2,wy=1,Sy=10,Cy=-2,Tg=a=>a==="*";function _y(a,e){let t=a.split("/"),n=t.length;return t.some(Tg)&&(n+=Cy),e&&(n+=xy),t.filter(s=>!Tg(s)).reduce((s,o)=>s+(vy.test(o)?yy:o===""?wy:Sy),n)}function Ay(a,e){return a.length===e.length&&a.slice(0,-1).every((n,s)=>n===e[s])?a[a.length-1]-e[e.length-1]:0}function Ty(a,e,t=!1){let{routesMeta:n}=a,s={},o="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],g=u===n.length-1,p=o==="/"?e:e.slice(o.length)||"/",v=ja({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},p),y=d.route;if(!v&&g&&t&&!n[n.length-1].route.index&&(v=ja({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Pr([o,v.pathname]),pathnameBase:Py(Pr([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=Pr([o,v.pathnameBase]))}return c}function ja(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=ky(a.path,a.caseSensitive,a.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((g,{paramName:p,isOptional:v},y)=>{if(p==="*"){let w=u[y]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const S=u[y];return v&&!S?g[p]=void 0:g[p]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:a}}function ky(a,e=!1,t=!0){sr(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],s="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),s+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":a!==""&&a!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Ey(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sr(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function ln(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}function by(a,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof a=="string"?Ln(a):a;return{pathname:t?t.startsWith("/")?t:Oy(t,e):e,search:My(n),hash:jy(s)}}function Oy(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ou(a,e,t,n){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Dy(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Tp(a){let e=Dy(a);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function kp(a,e,t,n=!1){let s;typeof a=="string"?s=Ln(a):(s={...a},ze(!s.pathname||!s.pathname.includes("?"),ou("?","pathname","search",s)),ze(!s.pathname||!s.pathname.includes("#"),ou("#","pathname","hash",s)),ze(!s.search||!s.search.includes("#"),ou("#","search","hash",s)));let o=a===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let v=e.length-1;if(!n&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}u=v>=0?e[v]:"/"}let d=by(s,u),g=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(g||p)&&(d.pathname+="/"),d}var Pr=a=>a.join("/").replace(/\/\/+/g,"/"),Py=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),My=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,jy=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function Ry(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var Ep=["POST","PUT","PATCH","DELETE"];new Set(Ep);var Fy=["GET",...Ep];new Set(Fy);var Ti=N.createContext(null);Ti.displayName="DataRouter";var Qa=N.createContext(null);Qa.displayName="DataRouterState";var bp=N.createContext({isTransitioning:!1});bp.displayName="ViewTransition";var Ly=N.createContext(new Map);Ly.displayName="Fetchers";var Iy=N.createContext(null);Iy.displayName="Await";var vr=N.createContext(null);vr.displayName="Navigation";var Rs=N.createContext(null);Rs.displayName="Location";var Lr=N.createContext({outlet:null,matches:[],isDataRoute:!1});Lr.displayName="Route";var Vu=N.createContext(null);Vu.displayName="RouteError";function Ny(a,{relative:e}={}){ze(Fs(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=N.useContext(vr),{hash:s,pathname:o,search:c}=Ls(a,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Pr([t,o])),n.createHref({pathname:u,search:c,hash:s})}function Fs(){return N.useContext(Rs)!=null}function In(){return ze(Fs(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Rs).location}var Op="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Dp(a){N.useContext(vr).static||N.useLayoutEffect(a)}function ki(){let{isDataRoute:a}=N.useContext(Lr);return a?Jy():By()}function By(){ze(Fs(),"useNavigate() may be used only in the context of a <Router> component.");let a=N.useContext(Ti),{basename:e,navigator:t}=N.useContext(vr),{matches:n}=N.useContext(Lr),{pathname:s}=In(),o=JSON.stringify(Tp(n)),c=N.useRef(!1);return Dp(()=>{c.current=!0}),N.useCallback((d,g={})=>{if(sr(c.current,Op),!c.current)return;if(typeof d=="number"){t.go(d);return}let p=kp(d,JSON.parse(o),s,g.relative==="path");a==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Pr([e,p.pathname])),(g.replace?t.replace:t.push)(p,g.state,g)},[e,t,o,s,a])}N.createContext(null);function Ls(a,{relative:e}={}){let{matches:t}=N.useContext(Lr),{pathname:n}=In(),s=JSON.stringify(Tp(t));return N.useMemo(()=>kp(a,JSON.parse(s),n,e==="path"),[a,s,n,e])}function zy(a,e){return Pp(a,e)}function Pp(a,e,t,n){var R;ze(Fs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=N.useContext(vr),{matches:c}=N.useContext(Lr),u=c[c.length-1],d=u?u.params:{},g=u?u.pathname:"/",p=u?u.pathnameBase:"/",v=u&&u.route;{let I=v&&v.path||"";Mp(g,!v||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let y=In(),S;if(e){let I=typeof e=="string"?Ln(e):e;ze(p==="/"||((R=I.pathname)==null?void 0:R.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${I.pathname}" was given in the \`location\` prop.`),S=I}else S=y;let w=S.pathname||"/",C=w;if(p!=="/"){let I=p.replace(/^\//,"").split("/");C="/"+w.replace(/^\//,"").split("/").slice(I.length).join("/")}let _=!o&&t&&t.matches&&t.matches.length>0?t.matches:Cp(a,{pathname:C});sr(v||_!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),sr(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Yy(_&&_.map(I=>Object.assign({},I,{params:Object.assign({},d,I.params),pathname:Pr([p,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?p:Pr([p,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),c,t,n);return e&&T?N.createElement(Rs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},T):T}function Uy(){let a=qy(),e=Ry(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",a),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,c)}var Wy=N.createElement(Uy,null),Vy=class extends N.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){console.error("React Router caught the following error during render",a,e)}render(){return this.state.error!==void 0?N.createElement(Lr.Provider,{value:this.props.routeContext},N.createElement(Vu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hy({routeContext:a,match:e,children:t}){let n=N.useContext(Ti);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Lr.Provider,{value:a},t)}function Yy(a,e=[],t=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let s=a,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);ze(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(t)for(let d=0;d<s.length;d++){let g=s[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=d),g.route.id){let{loaderData:p,errors:v}=t,y=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||y){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,g,p)=>{let v,y=!1,S=null,w=null;t&&(v=o&&g.route.id?o[g.route.id]:void 0,S=g.route.errorElement||Wy,c&&(u<0&&p===0?(Mp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):u===p&&(y=!0,w=g.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,p+1)),_=()=>{let T;return v?T=S:y?T=w:g.route.Component?T=N.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=d,N.createElement(Hy,{match:g,routeContext:{outlet:d,matches:C,isDataRoute:t!=null},children:T})};return t&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?N.createElement(Vy,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}function Hu(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xy(a){let e=N.useContext(Ti);return ze(e,Hu(a)),e}function Gy(a){let e=N.useContext(Qa);return ze(e,Hu(a)),e}function Ky(a){let e=N.useContext(Lr);return ze(e,Hu(a)),e}function Yu(a){let e=Ky(a),t=e.matches[e.matches.length-1];return ze(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function Qy(){return Yu("useRouteId")}function qy(){var n;let a=N.useContext(Vu),e=Gy("useRouteError"),t=Yu("useRouteError");return a!==void 0?a:(n=e.errors)==null?void 0:n[t]}function Jy(){let{router:a}=Xy("useNavigate"),e=Yu("useNavigate"),t=N.useRef(!1);return Dp(()=>{t.current=!0}),N.useCallback(async(s,o={})=>{sr(t.current,Op),t.current&&(typeof s=="number"?a.navigate(s):await a.navigate(s,{fromRouteId:e,...o}))},[a,e])}var kg={};function Mp(a,e,t){!e&&!kg[a]&&(kg[a]=!0,sr(!1,t))}N.memo(Zy);function Zy({routes:a,future:e,state:t}){return Pp(a,void 0,t,e)}function Ut(a){ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $y({basename:a="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:o=!1}){ze(!Fs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=a.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof t=="string"&&(t=Ln(t));let{pathname:d="/",search:g="",hash:p="",state:v=null,key:y="default"}=t,S=N.useMemo(()=>{let w=ln(d,c);return w==null?null:{location:{pathname:w,search:g,hash:p,state:v,key:y},navigationType:n}},[c,d,g,p,v,y,n]);return sr(S!=null,`<Router basename="${c}"> is not able to match the URL "${d}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:N.createElement(vr.Provider,{value:u},N.createElement(Rs.Provider,{children:e,value:S}))}function ex({children:a,location:e}){return zy(Eu(a),e)}function Eu(a,e=[]){let t=[];return N.Children.forEach(a,(n,s)=>{if(!N.isValidElement(n))return;let o=[...e,s];if(n.type===N.Fragment){t.push.apply(t,Eu(n.props.children,o));return}ze(n.type===Ut,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ze(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Eu(n.props.children,o)),t.push(c)}),t}var Ta="get",ka="application/x-www-form-urlencoded";function qa(a){return a!=null&&typeof a.tagName=="string"}function tx(a){return qa(a)&&a.tagName.toLowerCase()==="button"}function rx(a){return qa(a)&&a.tagName.toLowerCase()==="form"}function nx(a){return qa(a)&&a.tagName.toLowerCase()==="input"}function ix(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function sx(a,e){return a.button===0&&(!e||e==="_self")&&!ix(a)}var $o=null;function ox(){if($o===null)try{new FormData(document.createElement("form"),0),$o=!1}catch{$o=!0}return $o}var ax=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function au(a){return a!=null&&!ax.has(a)?(sr(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ka}"`),null):a}function lx(a,e){let t,n,s,o,c;if(rx(a)){let u=a.getAttribute("action");n=u?ln(u,e):null,t=a.getAttribute("method")||Ta,s=au(a.getAttribute("enctype"))||ka,o=new FormData(a)}else if(tx(a)||nx(a)&&(a.type==="submit"||a.type==="image")){let u=a.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=a.getAttribute("formaction")||u.getAttribute("action");if(n=d?ln(d,e):null,t=a.getAttribute("formmethod")||u.getAttribute("method")||Ta,s=au(a.getAttribute("formenctype"))||au(u.getAttribute("enctype"))||ka,o=new FormData(u,a),!ox()){let{name:g,type:p,value:v}=a;if(p==="image"){let y=g?`${g}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else g&&o.append(g,v)}}else{if(qa(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ta,n=null,s=ka,c=a}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:o,body:c}}function Xu(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}async function cx(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ux(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function hx(a,e,t){let n=await Promise.all(a.map(async s=>{let o=e.routes[s.route.id];if(o){let c=await cx(o,t);return c.links?c.links():[]}return[]}));return px(n.flat(1).filter(ux).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Eg(a,e,t,n,s,o){let c=(d,g)=>t[g]?d.route.id!==t[g].route.id:!0,u=(d,g)=>{var p;return t[g].pathname!==d.pathname||((p=t[g].route.path)==null?void 0:p.endsWith("*"))&&t[g].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,g)=>c(d,g)||u(d,g)):o==="data"?e.filter((d,g)=>{var v;let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(c(d,g)||u(d,g))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(a,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function dx(a,e,{includeHydrateFallback:t}={}){return fx(a.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function fx(a){return[...new Set(a)]}function gx(a){let e={},t=Object.keys(a).sort();for(let n of t)e[n]=a[n];return e}function px(a,e){let t=new Set;return new Set(e),a.reduce((n,s)=>{let o=JSON.stringify(gx(s));return t.has(o)||(t.add(o),n.push({key:o,link:s})),n},[])}function mx(a){let e=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function vx(){let a=N.useContext(Ti);return Xu(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function yx(){let a=N.useContext(Qa);return Xu(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Gu=N.createContext(void 0);Gu.displayName="FrameworkContext";function jp(){let a=N.useContext(Gu);return Xu(a,"You must render this element inside a <HydratedRouter> element"),a}function xx(a,e){let t=N.useContext(Gu),[n,s]=N.useState(!1),[o,c]=N.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:g,onMouseLeave:p,onTouchStart:v}=e,y=N.useRef(null);N.useEffect(()=>{if(a==="render"&&c(!0),a==="viewport"){let C=T=>{T.forEach(R=>{c(R.isIntersecting)})},_=new IntersectionObserver(C,{threshold:.5});return y.current&&_.observe(y.current),()=>{_.disconnect()}}},[a]),N.useEffect(()=>{if(n){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[n]);let S=()=>{s(!0)},w=()=>{s(!1),c(!1)};return t?a!=="intent"?[o,y,{}]:[o,y,{onFocus:Ss(u,S),onBlur:Ss(d,w),onMouseEnter:Ss(g,S),onMouseLeave:Ss(p,w),onTouchStart:Ss(v,S)}]:[!1,y,{}]}function Ss(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function wx({page:a,...e}){let{router:t}=vx(),n=N.useMemo(()=>Cp(t.routes,a,t.basename),[t.routes,a,t.basename]);return n?N.createElement(Cx,{page:a,matches:n,...e}):null}function Sx(a){let{manifest:e,routeModules:t}=jp(),[n,s]=N.useState([]);return N.useEffect(()=>{let o=!1;return hx(a,e,t).then(c=>{o||s(c)}),()=>{o=!0}},[a,e,t]),n}function Cx({page:a,matches:e,...t}){let n=In(),{manifest:s,routeModules:o}=jp(),{loaderData:c,matches:u}=yx(),d=N.useMemo(()=>Eg(a,e,u,s,n,"data"),[a,e,u,s,n]),g=N.useMemo(()=>Eg(a,e,u,s,n,"assets"),[a,e,u,s,n]),p=N.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let S=new Set,w=!1;if(e.forEach(_=>{var R;let T=s.routes[_.route.id];!T||!T.hasLoader||(!d.some(I=>I.route.id===_.route.id)&&_.route.id in c&&((R=o[_.route.id])!=null&&R.shouldRevalidate)||T.hasClientLoader?w=!0:S.add(_.route.id))}),S.size===0)return[];let C=mx(a);return w&&S.size>0&&C.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[C.pathname+C.search]},[c,n,s,d,e,a,o]),v=N.useMemo(()=>dx(g,s),[g,s]),y=Sx(g);return N.createElement(N.Fragment,null,p.map(S=>N.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),v.map(S=>N.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),y.map(({key:S,link:w})=>N.createElement("link",{key:S,...w})))}function _x(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rp&&(window.__reactRouterVersion="7.2.0")}catch{}function Ax({basename:a,children:e,window:t}){let n=N.useRef();n.current==null&&(n.current=dy({window:t,v5Compat:!0}));let s=n.current,[o,c]=N.useState({action:s.action,location:s.location}),u=N.useCallback(d=>{N.startTransition(()=>c(d))},[c]);return N.useLayoutEffect(()=>s.listen(u),[s,u]),N.createElement($y,{basename:a,children:e,location:o.location,navigationType:o.action,navigator:s})}var Fp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nr=N.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:d,to:g,preventScrollReset:p,viewTransition:v,...y},S){let{basename:w}=N.useContext(vr),C=typeof g=="string"&&Fp.test(g),_,T=!1;if(typeof g=="string"&&C&&(_=g,Rp))try{let ie=new URL(window.location.href),ce=g.startsWith("//")?new URL(ie.protocol+g):new URL(g),we=ln(ce.pathname,w);ce.origin===ie.origin&&we!=null?g=we+ce.search+ce.hash:T=!0}catch{sr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=Ny(g,{relative:s}),[I,B,z]=xx(n,y),G=bx(g,{replace:c,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:v});function Q(ie){e&&e(ie),ie.defaultPrevented||G(ie)}let K=N.createElement("a",{...y,...z,href:_||R,onClick:T||o?e:Q,ref:_x(S,B),target:d,"data-discover":!C&&t==="render"?"true":void 0});return I&&!C?N.createElement(N.Fragment,null,K,N.createElement(wx,{page:R})):K});nr.displayName="Link";var Tx=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:d,...g},p){let v=Ls(c,{relative:g.relative}),y=In(),S=N.useContext(Qa),{navigator:w,basename:C}=N.useContext(vr),_=S!=null&&jx(v)&&u===!0,T=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,R=y.pathname,I=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(R=R.toLowerCase(),I=I?I.toLowerCase():null,T=T.toLowerCase()),I&&C&&(I=ln(I,C)||I);const B=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=R===T||!s&&R.startsWith(T)&&R.charAt(B)==="/",G=I!=null&&(I===T||!s&&I.startsWith(T)&&I.charAt(T.length)==="/"),Q={isActive:z,isPending:G,isTransitioning:_},K=z?e:void 0,ie;typeof n=="function"?ie=n(Q):ie=[n,z?"active":null,G?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let ce=typeof o=="function"?o(Q):o;return N.createElement(nr,{...g,"aria-current":K,className:ie,ref:p,style:ce,to:c,viewTransition:u},typeof d=="function"?d(Q):d)});Tx.displayName="NavLink";var kx=N.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:o,method:c=Ta,action:u,onSubmit:d,relative:g,preventScrollReset:p,viewTransition:v,...y},S)=>{let w=Px(),C=Mx(u,{relative:g}),_=c.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&Fp.test(u),R=I=>{if(d&&d(I),I.defaultPrevented)return;I.preventDefault();let B=I.nativeEvent.submitter,z=(B==null?void 0:B.getAttribute("formmethod"))||c;w(B||I.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:o,relative:g,preventScrollReset:p,viewTransition:v})};return N.createElement("form",{ref:S,method:_,action:C,onSubmit:n?d:R,...y,"data-discover":!T&&a==="render"?"true":void 0})});kx.displayName="Form";function Ex(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lp(a){let e=N.useContext(Ti);return ze(e,Ex(a)),e}function bx(a,{target:e,replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:c}={}){let u=ki(),d=In(),g=Ls(a,{relative:o});return N.useCallback(p=>{if(sx(p,e)){p.preventDefault();let v=t!==void 0?t:bs(d)===bs(g);u(a,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:c})}},[d,u,g,t,n,e,a,s,o,c])}var Ox=0,Dx=()=>`__${String(++Ox)}__`;function Px(){let{router:a}=Lp("useSubmit"),{basename:e}=N.useContext(vr),t=Qy();return N.useCallback(async(n,s={})=>{let{action:o,method:c,encType:u,formData:d,body:g}=lx(n,e);if(s.navigate===!1){let p=s.fetcherKey||Dx();await a.fetch(p,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:g,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await a.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:g,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[a,e,t])}function Mx(a,{relative:e}={}){let{basename:t}=N.useContext(vr),n=N.useContext(Lr);ze(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Ls(a||".",{relative:e})},c=In();if(a==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let p=u.toString();o.search=p?`?${p}`:""}}return(!a||a===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Pr([t,o.pathname])),bs(o)}function jx(a,e={}){let t=N.useContext(bp);ze(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Lp("useViewTransitionState"),s=Ls(a,{relative:e.relative});if(!t.isTransitioning)return!1;let o=ln(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=ln(t.nextLocation.pathname,n)||t.nextLocation.pathname;return ja(s.pathname,c)!=null||ja(s.pathname,o)!=null}new TextEncoder;const Rx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABPoAAABsCAYAAADzCtzhAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAArKSURBVHgB7d1tiKVlHcfx/+qappJKqYmaJ6FSM0yNTCnMREsTqQhTKxgqg4qM6JVKQhAV0psKjCJIrVCDSi0pDJIwDTXKiB6wZy3Ch9x8TFdd/V/cZ9nZ2TkzZ2Zn9rqu2c8HfszOzH1W9tzfV7fnnDsCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBpdo36XpQ7M3dyblPuvoB26JOW6ZPWaZSa9EdvNEtN+qM3mm3UMblbchtzz+Weyl0Q0AZ90jJ90jqNUpP+6I1mqUl/9EazC1gX9ZSrr7fnjpjz83tzx+UenPWz8srDE2I4meUE/i53V+7pgNWhT1qmT1qnUWrSH73RLDXpj95otmEzuWdiuPo6e4/nThofs0fuvBhOxOxjHsldkdszYHXMhD5p10zok7bNhEapZyb0R19mQrPUMxP6oy8zodlmXRbbnpiyDbn9crvlPhHDyXpuwt4esDr0Scv0Ses0Sk36ozeapSb90RvNLmKXqOdvMTzBc30jhhP07txnY+Erra8PWB36pGX6pHUapSb90RvNUpP+6I1mG3ZY7s7Y+qrqNbl9c3vnbo3JV18376KA1aFPWqZPWqdRatIfvdEsNemP3mi2ceVllTO5z8fw0snNrzA8OBZ+mWVZeW/1qwJWjz5pmT5pnUapSX/0RrPUpD96o9kGlZNQrrSWk3Ngbv2c35e7pzwUk09M+eDFSwNWhz5pmT5pnUapSX/0RrPUpD96o9lGlZNycQy3Q34s95/cT3Mfii3voX5h7saY/8Q8m/tibveAladPWqZPWqdRatIfvdEsNemP3mi2UXvlboj5n/RNuetiuCpb7B/D+6zvj+Gq68O5H+VOy60LWHn6pGX6pHUapSb90RvNUpP+6I1ml2BH/yPLE/uDGE7SJL+M4T3WG8bfHxbDyzE3jFdO3um543J7xHA19ycxXM2F7aFPWqZPWqdRatIfvdEsNemP3mi2YR+Nye+Vnr3PzfPY8h7sr8b877cuV2jPD/9Hge2jT1qmT1qnUWrSH73RLDXpj95otmGXxHQn577cIbMet0/uphhekrnQY44MWD590jJ90jqNUpP+6I1mqUl/9EazS7BL7Fh/nvK4A3Jnz/q+XL09JRa+yloe8+aA5dMnLdMnrdMoNemP3miWmvRHbzS7BDv6Qt8dMdwdZRonjr+WO6KcGtveNnmucgeVRwKWT5+0TJ+0TqPUpD96o1lq0h+90ewS7OgLff/K/X7KY8utk3fNPZV7YorjH4zhgxRhufRJy/RJ6zRKTfqjN5qlJv3RG80uwY6+0FdubXzVlMeW91JvGv/5ytyTCxxbTsz7c/+NpSl3Wjk6d3wMH9DIzk2ftEyftE6j1KQ/eqNZatIfvdFs48rtkO+NxT9E8UtzHvee3N25p2PLByn+P3dt7thY2l1SyrFn5f40/nvK3/nP3MXBzk6ftEyftE6j1KQ/eqNZatIfvdFs4y6M4QmZdGLK79405zHl1Ycvzb0h987cybH8K6evyz06z3+3XOk9NdjZ6ZOW6ZPWaZSa9EdvNEtN+qM3mm1YeVJ/GJNPzvW53XLH5C7P/Tr3sxiukr4ktt/VC/y3Lw92dvqkZfqkdRqlJv3RG81Sk/7ojWYb97LcH2LbJ+fm8e9enXt4nt/fPv79cpUPZbwhJp+ciwL0Sdv0Ses0Sk36ozeapSb90RvNNq68fPIzuV/kbs19JIYPNSxP4KQrpeXWx5+e8u8/IfeV3Ldyn8odMf55+bDFx2L+E//igIE+aZk+aZ1GqUl/9Eaz1KQ/eqPZTt0Yk6+UXjHF48/JPTTnceVOKh+OIYALcr/NPZC7L3dN7uCA6eiTlumT1mmUmvRHbzRLTfqjN5pt2Mdiyx1R5m5mkccem7tnwmPLCTtjfNyese1V10Nzb8wdFCvzHm7WJn3SMn3SOo1Sk/7ojWapSX/0RrMNK1dKL8s9Hlue2PI+6/Lyyd0XeFy5o8p3YvIV3LLbYuu7rJTHnJu7JYY7qDwxPu6vua/lXhmwNX3SMn3SOo1Sk/7ojWapSX/0RrONWxfDE3Ne7vwY3he9yyKPOTzm/+DF2duYO3PWYz4w/tmk48tJOilga/qkZfqkdRqlJv3RG81Sk/7ojWbXmAtj4ROzeZ8cH79v7u4pjv9Vbp+A7aNPWqZPWqdRatIfvdEsNemP3qyZZhe7otmb9bmzpjz2gPHX8t7qaT448ajcKGD59EnL9EnrNEpN+qM3mqUm/dGbNdXsWrvQt3fuFVMeu2789anc36c4ftN4sFz6pGX6pHUapSb90RvNUpP+6M2aanatXegbxfS3Nf7L+Gu5TfKlMbyveiG3xnQnESYZhT5p1yj0SdtGoVHqGYX+6MsoNEs9o9AffRmFZpt1Yky+jfLslbuvHDrrceWK7Dm5P85z7JO578dwi2TYHvqkZfqkdRqlJv3RG81Sk/7ozZpqdn2sLeU2yuumOO7a3L9nfV9OwndzN+WOz52c2y33WAxXX++M4YTC9tAnLdMnrdMoNemP3miWmvRHb9ZUs9P8Q3rymtzPc/stcEy50vq23D0xXOg8JYaTUf78j9xvcnfF8H5rWEn6pGX6pHUapSb90RvNUpP+6I1mG1auwn47Jr/M8sHcaeNjy8n4Qu6JOcc8mrsud3TAytInLdMnrdMoNemP3miWmvRHbzTbuFHuxtzDseUJ/1/u6txxs44rJ2ljTD6RD+ReHrCyRqFP2jUKfdK2UWiUekahP/oyCs1Szyj0R19Godmmlbckn5B7b+5duWNze8455pKYfGI2r7x0c9+AlaVPWqZPWqdRatIfvdEsNemP3mi2E3vlTs99PPfW8ffF+2Lxk/NM7uyA1aNPWqZPWqdRatIfvdEsNemP3mi2UeVuJ1+O4cMQy5P9bO6O3OG5/XP3x+In6IMBq0OftEyftE6j1KQ/eqNZatIfvdFsw14bW07M7JWXUR6YOy+GD0ycdGLKyXxLwOrQJy3TJ63TKDXpj95olpr0R28027Bzcpti2ye9nLBzx8eckbt7wnFfj23fjw0rRZ+0TJ+0TqPUpD96o1lq0h+96brZ9bG23ZZ7OveCOT8v3x85/vOPczfn3pE7MXdIDCfv+tz3YnhvNawGfdIyfdI6jVKT/uiNZqlJf/RGs437Zgwvm5x9dbU84efOc+y6gB1Ln7RMn7ROo9SkP3qjWWrSH73RbMMOyl2Z2xDDiXkyd1Vun4D69EnL9EnrNEpN+qM3mqUm/dGbbpvdWa46lrcoH5U7PvdQDC+x3BjQBn3SMn3SOo1Sk/7ojWapSX/0RrMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACLex5wBIfJ3UmjGAAAAABJRU5ErkJggg==",Fx="/nerofilm/assets/Cutselection-DKX518Km.png",Lx="/nerofilm/assets/ComputerView-wwVtzhvU.png",Ix="/nerofilm/assets/PhotoSelection-CF4rubsB.png",Nx="/nerofilm/assets/AddFilter-BBf6Q0Gp.png",Bx="/nerofilm/assets/FrameColor-DRoZpDOv.png",zx="/nerofilm/assets/DownloadShare-BxLEDuUJ.png",Ux="/nerofilm/assets/homepic1-gRWht2fL.png",Wx="/nerofilm/assets/homepic2-bEvrE2PB.png",Ip=()=>k.jsxs("header",{className:"header",children:[k.jsx("div",{className:"header-brand",children:k.jsx(nr,{to:"/",children:"NeroFilm"})}),k.jsx("nav",{children:k.jsxs("ul",{className:"header-nav",children:[k.jsx("li",{children:k.jsx(nr,{to:"/try-it",children:"Try It"})}),k.jsx("li",{children:k.jsx(nr,{to:"/about-us",children:"About Us"})})]})})]}),Np=()=>k.jsxs("footer",{className:"footer",children:[k.jsx("div",{className:"footer-logo",children:k.jsx("h1",{className:"footer-logo-text",children:"NeroFilm"})}),k.jsxs("div",{className:"footer-contact",children:[k.jsx("h3",{children:"Contact"}),k.jsx("p",{children:"contact.nerofilm@gmail.com"})]})]}),Vx=()=>{const a=ki();return N.useEffect(()=>{window.scrollTo(0,0)},[]),k.jsxs("div",{children:[k.jsx(Ip,{}),k.jsxs("div",{className:"home-container",children:[k.jsxs("div",{className:"home-main-content",children:[k.jsxs("div",{className:"home-left-content",children:[k.jsx("h1",{className:"home-logo-text",children:"NeroFilm"}),k.jsxs("h3",{className:"home-heading-3",children:["No photobooth nearby? ",k.jsx("br",{})," Your camera is all you need"]}),k.jsx("button",{className:"home-button",onClick:()=>a("/try-it"),children:"Try It Now!"})]}),k.jsxs("div",{className:"home-right-content",children:[k.jsx("img",{src:Ux,alt:"HomePic1",className:"home-image1"}),k.jsx("img",{src:Wx,alt:"HomePic2",className:"home-image2"})]})]}),k.jsx("img",{src:Rx,alt:"Paw Icon",className:"home-paw"}),k.jsxs("h3",{className:"home-heading-1",children:["Cherish Memories ",k.jsx("br",{})," Relive Moments"]}),k.jsx("h3",{className:"home-heading-2",children:"Select Frame Layout"}),k.jsx("img",{src:Fx,alt:"Cut Icon",className:"home-large-image"}),k.jsx("h3",{className:"home-heading-2",children:"Capture the Moment"}),k.jsx("img",{src:Lx,alt:"Computer Icon",className:"home-large-image"}),k.jsx("h3",{className:"home-heading-2",children:"Select Photos"}),k.jsx("img",{src:Ix,alt:"Photo Icon",className:"home-large-image"}),k.jsx("h3",{className:"home-heading-2",children:"Add Filter"}),k.jsx("img",{src:Nx,alt:"Filter Icon",className:"home-large-image"}),k.jsx("h3",{className:"home-heading-2",children:"Add Frame Color"}),k.jsx("img",{src:Bx,alt:"Frame Icon",className:"home-large-image"}),k.jsxs("h3",{className:"home-heading-2",children:["Download & Share ",k.jsx("br",{})," with Friends!"]}),k.jsx("img",{src:zx,alt:"Download Icon",className:"home-large-image"}),k.jsx("button",{className:"global-button",onClick:()=>a("/select-frame"),children:"Try It Now!"})]}),k.jsx(Np,{})]})};var lu={exports:{}},cu,bg;function Hx(){if(bg)return cu;bg=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cu=a,cu}var uu,Og;function Yx(){if(Og)return uu;Og=1;var a=Hx();function e(){}function t(){}return t.resetWarningCache=e,uu=function(){function n(c,u,d,g,p,v){if(v!==a){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},uu}var Dg;function Xx(){return Dg||(Dg=1,lu.exports=Yx()()),lu.exports}var Gx=Xx();const Wt=Sp(Gx),Bp={layout:"original",images:[],filter:"default",color:"black"},zp=N.createContext(),Up=N.createContext();function Nn(){return N.useContext(zp)}function Ei(){return N.useContext(Up)}function Wp({children:a}){const[e,t]=N.useState(Bp);function n(s){t(s)}return k.jsx(zp.Provider,{value:e,children:k.jsx(Up.Provider,{value:n,children:a})})}Wp.propTypes={children:Wt.node};const Vp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGMSURBVHgB7ZhLSgNBFEWvIroGdWAG6gYcCepInQo6l8ziKuRNswpBQceCKxD8LEFxARkpOvKDGO8jBu3q7mD0VdMv1IEDKegk73Z9uqqBRCKR8IjAMUK7cIqgV7zLAILv4t0FEGSLdxVAkC/eTQBBcfH/8ZV26Dlt0zU6hggIYF58mbe0SccxJIO+8IHqWKQH9PLrsxn7qK4X+j7RTRgisJ3Ek3SObtND+lzw2y90A4YI7AKEzNBjFPfEAgwRxAnQp0Xfg/+4xh8m9iAE8QIoLeR7ogljBPECKOFw0iXW/DkhiIfOiXBir8IZujr9DNAuu9B0ghhyGrSX4YwGsj3QgTOmkH+wFVLXIfRr6hpgOmg/lF1Y1wBLQfuu7MK6BtgK2ldwxCzyD7IVOOIE2eJvEOnIGYM95Ddzu3CCFh9up3Xs136p1zEfDhv1kc6jhuiRskF36BHKj5TrMKJbsXrnTQ/1VRavY970tUpVAXSp1NVm6Ak7gep5o/fobQ/0jp/RC8Q9piYSiURiRPkEHTYgq8EIOrIAAAAASUVORK5CYII=",hn=()=>{const a=ki();return k.jsxs("header",{className:"second-header",children:[k.jsx("button",{onClick:()=>a("/"),className:"second-header-brand",children:"NeroFilm"}),k.jsx("button",{onClick:()=>a(-1),className:"second-header-back",children:k.jsx("img",{src:Vp,alt:"Back Arrow",className:"icon"})})]})},Hp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAElSURBVHgBtVOBEYIwDCxOwAgZoSPoBo7ACG6AG+AGuAEj9JzAEcAJGKE23hcCpkW9M3e5Qj5N/5PWGGHeexvcBe9NwhiDUyqh9rNtFYpWr8G7AC/Bj8EbbBrhnNMCu4h8p9GtIG3LOuT2b+zRnxGJvJ6D74OXcP6++lkar3ZdhEQCn1ZmekTIiQeS1qNO2egS8euiR6AcqZKy4WVKvBSt2HOgxc/J6FLUQsDOgFspy/5QiKKabKIslBpABHdm2waszmemKa88mTT9fjGhGbOI35nRDfFKK1QUxRCWA5jRCo59fazHn6aeV1PFgEOg+aJIM01MBOU7qzcKlKLI8okgoRKj7vFPAuemn4SccZKknCYnlDO+xNZ8oJ/ZdEJuZOCCH80/7Qkg15D6lPLM0wAAAABJRU5ErkJggg==",Yp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAXCAYAAAD6FjQuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGASURBVHgBrVXRUcMwDFU4/skIZoN0AmCDMAFhAtiAMEHLBIEJ6AbJBi0TJEwATGCeiE2VtrHVNu9Op1xk6dlPOptIAWutgdWwLztEC3uiqeCIWhtGpal1rljDOzfuu4F17juFZS5WgPAjSZIFHQsUKKRke+KZiLPERlN0rCcSZiS3DOS0sDkslUQhEkYZ2ewqkl/zugQf7/C5y2to0xOPT/SijJAZ6nsrIXvKuCfBvqKJ4VTzqM5EbB1J5GGoheQsXWUDQwFFuu0i/8wBortAP9oQ4djJxhYbuFfxixVY0qa3HK9JgSgZDRv/DGlmsFt8z6gfqD9CbCqPVorJKHu0J5Yp8vUyUj/CjJ0BwgnXdAA0ZJ3zufU3gcOWdD80Admb80xU+cmDv4abi3XxS1iheWrjT8xCUz96MvTlG+6Gdq8xjxeseSQFNO+ZvwkusbuC+vvugvoeLRFrSAsx2rr36ACg3sNAaht+j6ZE5gcg9h6dipJPmogjF3BXNC0Gff0FNVUKfzTQCuoAAAAASUVORK5CYII=",Xp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFkSURBVHgB7Zb/dYIwEMcPJ3AEugEbdAW6gZ2gbGA6QbuBboAb4AZ0A9iAOsF5kcA7wiVEjf7l9717IcmZD/mSHwKQEDGlqCg6jKuG4odiDQwUG2Kr0qyEHkoqc+h1pGghjvRsMorU1D+B0WuILOPaoN2K9f1BZCVJ0vL6Cp6oF8wr+vhfZvvsxj3lSBxXi6N/YwZJHf1ba081PHcyvg9GbTnr12++WQDx3DwYhu6TZesA/ZqY5C7CDKhhfRXO35xLsd8qlDWHUbm2QHvTnlntM5BlfxcCK1lbLVhb2oOgsAJx7s4UhlOPdWIK8gq0rRJzsXdJhHUhIDaQZGsh5IkwrgwChAG2LsEKuFLosdUHU3CjBFv1ZylcsAPcKYetI4wfxB3cKX1ZUnzQ47fU/5ArhoCKijew/s9o2L95znFhuV8JbKnYs6aT7yyLrWzY5TU+Vuoy22GO2N9V7xBXJ4oDWXrUlTMGsOx+rb6YJAAAAABJRU5ErkJggg==",Gp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHPSURBVHgBpVbRccMgDCW9/tcjMIJH8AjdIN6g2SBsUG9ANmEEdwPaCdINXiHGiZAFdtx3x5kDofckEFipDQDwHtoVMnxojfoPEoFOfYc6+mTXhdaqZxAWWOLIsigsaTNGJui4h0iMgNi6iu3xGSKf2gwn2LfMZtxEKBDpNF7dhzDXUJvwNVVCTIdhQVRwHG37SFARQAmvkpP5aMdvw+Y15P3xoZ0F+47Y2DU1LRk/olxjYjZC/0LmNFfh2OKORESJot0JUxoNCgco9AcmxN5IsVQ9kkWOjBshG1EMPYF9QWSEVUxBVN2QBQsBBUIpOs0izMhsZZNPqgIS3VWYu/t/qfjQpP+r6vhO3+qFXCP7KhBLaIU1SyCHw+PmqNYeWd9LWxH6H8gPyW3PPCO8O0Zeex7sZsHyndOCgMe+Yzo1vGY6Ep3HMnorjBsighb1AH61Ib+I6Q3Ca0mCYb5MFhGbXK0pTKlxeKTNi6rV/emZke838pqKOKudwJR6mgkvGRlOmETY0D5RfnZ6YtMyohhVW1LFCcEWamZ/XrGv//ysEBpm63cTESentMBhSuXaexbtYjrHJOC53zlGPqyQ9Vv8vKptGNL3TZj7ORwOF7UBf5mK1kZZygkKAAAAAElFTkSuQmCC",Kx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADLSURBVHgB7ZSxDcJADEVtC0UoVUaADWCDVNGVtwErwASwQUZAbHB0KbMBjMAGpEuqM2eLSNAlp5T3K58tPfmf5I8QZIzZAPMVmXcMUMBMIaJjxFPTNC8UGHr/iAH9QQE6JtqvAqz+wm7rPD8657o5IHXn/SUwDurSVBXrhGgrK0OEbFkWQ5a9ZUsam7EwkWtbdSVOCRZWAiZgAk4CykFLYa2Nji9NnBEYgvEpxdD39e9gqnQR5rM+EO+LByxJbEkRGg4ipF+G2ApDWB8rHVF8oBep5QAAAABJRU5ErkJggg==",Qx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAaCAYAAACtv5zzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB7ZUxTsMwFIZ/WxlIKySOEG4QSsXeLWOOwg3gBj0C4gZhy1aGtgMd4Ab4CAyRnKnGLySVsZyAHXWp+ksvcfxevt92Ihs46ywPJTo+2zgookuWZQmUemJKpQq4gqeqqirW223amggzxwjO9vv3EDBJ1jXedjtIKdHCFzBMIg1ftvDni8nkviiKL/xfiY4V3eM4xu1sJtabjTALuIbnPy3+GAqnEd/N57icTlO7iHeNsiwFAuE6FjQD1zJz67n7CxJ4wGF92CEDGzAK7jLoXkgcJt5wl4HoMQmCkyJHn2gBKwOMEDiJ9/QL/J5JEHzIwDYx216K/sgLHdcYIY4j6wQMGNBscHmeB23XpOY86TNQjH1Qo5ZyOVTYp2ZgSj00D4y92PnRB84BpFdCcX5j78qcOiihCwoEqFlixl5dcNI3V/d+veUTG1cAAAAASUVORK5CYII=";function Bn(){N.useEffect(()=>(window.onbeforeunload=()=>!0,()=>{window.onbeforeunload=null}),[])}const qx=({onClose:a})=>{Bn();const[e,t]=N.useState(!1),n=ki();return k.jsxs("div",{className:"instructions-page",children:[k.jsx(hn,{}),k.jsx("div",{className:"instructions-overlay",children:k.jsxs("div",{className:"instructions-container",children:[k.jsxs("div",{className:"instructions-popup",children:[k.jsx("button",{className:"back-button",onClick:()=>n("/select-frame"),children:k.jsx("img",{src:Vp,alt:"Back",className:"back-icon"})}),k.jsx("h2",{children:"Before Taking Your Photos"}),k.jsxs("ul",{className:"instructions-list",children:[k.jsxs("li",{className:"instructions-item",children:[k.jsx("img",{src:Hp,alt:"Watch Icon",className:"icon"}),k.jsx("span",{className:"instructions-text",children:"The timer is set for 5 seconds"})]}),k.jsxs("li",{className:"instructions-item",children:[k.jsx("img",{src:Yp,alt:"Camera Icon",className:"icon"}),k.jsx("span",{className:"instructions-text",children:"Press the button to start the shoot"})]}),k.jsxs("li",{className:"instructions-item",children:[k.jsx("img",{src:Xp,alt:"Gallery Icon",className:"icon"}),k.jsx("span",{className:"instructions-text",children:"You'll get 8 photospick your favorite 4!"})]}),k.jsxs("li",{className:"instructions-item",children:[k.jsx("img",{src:Gp,alt:"Settings Icon",className:"icon"}),k.jsx("span",{className:"instructions-text",children:"Enable camera access in settings if needed"})]})]}),k.jsxs("div",{className:"checkbox-container",onClick:()=>t(!e),children:[k.jsx("img",{src:e?Qx:Kx,alt:"Checkbox",className:"checkbox-icon"}),k.jsx("span",{children:"Do not show this popup again"})]})]}),k.jsx("button",{className:"ready-button",onClick:()=>n("/camera"),children:"I'm Ready!"})]})})]})},Jx="/nerofilm/assets/Catfilm-BUtcPSWk.png",Zx=()=>(N.useEffect(()=>{window.scrollTo(0,0)},[]),k.jsxs("div",{children:[k.jsx(Ip,{}),k.jsx("div",{className:"about-container",children:k.jsxs("div",{className:"about-content-wrapper",children:[k.jsxs("div",{className:"about-text-section",children:[k.jsx("h1",{className:"about-heading",children:"WHO ARE WE"}),k.jsxs("div",{className:"about-text-container",children:[k.jsx("p",{className:"about-paragraph",children:"Bridging the past and present, we bring the classic photobooth experience into the digital ageno bulky setups, just your device's camera."}),k.jsx("p",{className:"about-paragraph",children:"With photobooths rising in popularity, we're making them more accessible than ever."}),k.jsx("p",{className:"about-paragraph",children:"Whether you're a small business looking to attract customers or someone without a photobooth nearby, our platform lets you capture the fun anytime, anywhere."})]})]}),k.jsx("div",{className:"about-image-section",children:k.jsx("img",{src:Jx,alt:"Cat Film Frame",className:"about-image"})})]})}),k.jsx(Np,{})]})),$x="/nerofilm/assets/default-image-9bdNzeyV.png";function zn({layout:a,images:e=[],filter:t,color:n}){const[s,o]=N.useState([]);return N.useEffect(()=>{const c=[];for(let u=0;u<4;u++)c.push(e[u]||$x);o(c)},[e]),k.jsx("div",{className:`frame frame-${a} frame-${n} frame-${t}`,children:s.map((c,u)=>k.jsx("div",{className:"img-wrapper",children:k.jsx("img",{className:"img",src:c,alt:`image ${u+1}`})},u))})}zn.propTypes={images:Wt.arrayOf(Wt.string).isRequired,filter:Wt.string.isRequired,layout:Wt.oneOf(["original","wide"]).isRequired,color:Wt.string.isRequired};const ew="/nerofilm/assets/MouseClick-CHil4oU_.mp3",Ku=()=>{new Audio(ew).play()};function tw(){const a=["original","wide"],e=Nn(),t=Ei();Bn();const n=N.useRef(!1),s=o=>{Ku(),t({...e,layout:o})};return N.useEffect(()=>{n.current||(t(Bp),n.current=!0)},[t]),k.jsxs("div",{children:[k.jsx(hn,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{children:"Select Frame Layout"}),k.jsx("div",{className:"options-r",children:k.jsx("ul",{className:"frame-options",children:a.map((o,c)=>k.jsxs("li",{onClick:()=>s(o),children:[k.jsx("div",{className:e.layout==o?"frame-selected":"frame",children:k.jsx(zn,{images:e.images,filter:e.filter,layout:o,color:e.color})}),k.jsx("p",{className:"frame-desc",children:"4 Cut Original"})]},c))})}),k.jsx(nr,{className:"btn",to:"/camera",role:"button",children:"Camera"})]})]})}const rw="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23F5F5F5'%20stroke='%23DADADA'/%3e%3c/svg%3e",hu="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%236E6E6E'%20stroke='%23DADADA'/%3e%3c/svg%3e";function Qu({options:a,onClick:e,selected:t}){return k.jsx("ul",{className:"options",children:a.map((n,s)=>k.jsxs("li",{className:"option",onClick:()=>{e(n.name),Ku()},children:[k.jsx("img",{className:t===n.name?"option-img-selected option-img":"option-img",src:n.image,alt:n.name}),k.jsx("p",{children:n.name})]},s))})}Qu.propTypes={options:Wt.arrayOf(Wt.shape({name:Wt.string.isRequired,image:Wt.string.isRequired})).isRequired,onClick:Wt.func.isRequired,selected:Wt.string.isRequired};function nw(){Bn();const a=Nn(),e=Ei(),t=[{name:"default",image:rw},{name:"bw",image:hu},{name:"vintage",image:hu},{name:"beauty",image:hu}];return k.jsxs("div",{children:[k.jsx(hn,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{children:"Add filter"}),k.jsxs("section",{className:"options-r",children:[k.jsx(zn,{layout:a.layout,filter:a.filter,images:a.images,color:a.color}),k.jsx(Qu,{options:t,onClick:n=>e({...a,filter:n}),selected:a.filter})]}),k.jsx(nr,{className:"btn",to:"/add-sticker",role:"button",children:"Continue"})]})]})}const iw="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%232E2E2E'%20stroke='%23DADADA'/%3e%3c/svg%3e",sw="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23FEFEFE'%20stroke='%23DADADA'/%3e%3c/svg%3e",ow="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23F6C7D1'%20stroke='%23DADADA'/%3e%3c/svg%3e",aw="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23B4D8EF'%20stroke='%23DADADA'/%3e%3c/svg%3e";function lw(){Bn();const a=Nn(),e=Ei(),t=[{name:"black",image:iw},{name:"white",image:sw},{name:"pink",image:ow},{name:"blue",image:aw}];return k.jsxs("div",{children:[k.jsx(hn,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{children:"Choose frame"}),k.jsxs("section",{className:"options-r",children:[k.jsx(zn,{images:a.images,filter:a.filter,layout:a.layout,color:a.color}),k.jsx(Qu,{options:t,onClick:n=>e({...a,color:n}),selected:a.color})]}),k.jsx(nr,{className:"btn",to:"/add-filter",role:"btn",children:"Continue"})]})]})}function cw(a,e){if(a.match(/^[a-z]+:\/\//i))return a;if(a.match(/^\/\//))return window.location.protocol+a;if(a.match(/^[a-z]+:/i))return a;const t=document.implementation.createHTMLDocument(),n=t.createElement("base"),s=t.createElement("a");return t.head.appendChild(n),t.body.appendChild(s),e&&(n.href=e),s.href=a,s.href}const uw=(()=>{let a=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(a+=1,`u${e()}${a}`)})();function an(a){const e=[];for(let t=0,n=a.length;t<n;t++)e.push(a[t]);return e}let fi=null;function Kp(a={}){return fi||(a.includeStyleProperties?(fi=a.includeStyleProperties,fi):(fi=an(window.getComputedStyle(document.documentElement)),fi))}function Ra(a,e){const n=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function hw(a){const e=Ra(a,"border-left-width"),t=Ra(a,"border-right-width");return a.clientWidth+e+t}function dw(a){const e=Ra(a,"border-top-width"),t=Ra(a,"border-bottom-width");return a.clientHeight+e+t}function Qp(a,e={}){const t=e.width||hw(a),n=e.height||dw(a);return{width:t,height:n}}function fw(){let a,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(a=parseInt(t,10),Number.isNaN(a)&&(a=1)),a||window.devicePixelRatio||1}const Pt=16384;function gw(a){(a.width>Pt||a.height>Pt)&&(a.width>Pt&&a.height>Pt?a.width>a.height?(a.height*=Pt/a.width,a.width=Pt):(a.width*=Pt/a.height,a.height=Pt):a.width>Pt?(a.height*=Pt/a.width,a.width=Pt):(a.width*=Pt/a.height,a.height=Pt))}function Fa(a){return new Promise((e,t)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=t,n.crossOrigin="anonymous",n.decoding="async",n.src=a})}async function pw(a){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(a)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function mw(a,e,t){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),o=document.createElementNS(n,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${t}`),s.setAttribute("viewBox",`0 0 ${e} ${t}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),s.appendChild(o),o.appendChild(a),pw(s)}const Ct=(a,e)=>{if(a instanceof e)return!0;const t=Object.getPrototypeOf(a);return t===null?!1:t.constructor.name===e.name||Ct(t,e)};function vw(a){const e=a.getPropertyValue("content");return`${a.cssText} content: '${e.replace(/'|"/g,"")}';`}function yw(a,e){return Kp(e).map(t=>{const n=a.getPropertyValue(t),s=a.getPropertyPriority(t);return`${t}: ${n}${s?" !important":""};`}).join(" ")}function xw(a,e,t,n){const s=`.${a}:${e}`,o=t.cssText?vw(t):yw(t,n);return document.createTextNode(`${s}{${o}}`)}function Pg(a,e,t,n){const s=window.getComputedStyle(a,t),o=s.getPropertyValue("content");if(o===""||o==="none")return;const c=uw();try{e.className=`${e.className} ${c}`}catch{return}const u=document.createElement("style");u.appendChild(xw(c,t,s,n)),e.appendChild(u)}function ww(a,e,t){Pg(a,e,":before",t),Pg(a,e,":after",t)}const Mg="application/font-woff",jg="image/jpeg",Sw={woff:Mg,woff2:Mg,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:jg,jpeg:jg,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Cw(a){const e=/\.([^./]*?)$/g.exec(a);return e?e[1]:""}function qu(a){const e=Cw(a).toLowerCase();return Sw[e]||""}function _w(a){return a.split(/,/)[1]}function bu(a){return a.search(/^(data:)/)!==-1}function Aw(a,e){return`data:${e};base64,${a}`}async function qp(a,e,t){const n=await fetch(a,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const s=await n.blob();return new Promise((o,c)=>{const u=new FileReader;u.onerror=c,u.onloadend=()=>{try{o(t({res:n,result:u.result}))}catch(d){c(d)}},u.readAsDataURL(s)})}const du={};function Tw(a,e,t){let n=a.replace(/\?.*/,"");return t&&(n=a),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function Ju(a,e,t){const n=Tw(a,e,t.includeQueryParams);if(du[n]!=null)return du[n];t.cacheBust&&(a+=(/\?/.test(a)?"&":"?")+new Date().getTime());let s;try{const o=await qp(a,t.fetchRequestInit,({res:c,result:u})=>(e||(e=c.headers.get("Content-Type")||""),_w(u)));s=Aw(o,e)}catch(o){s=t.imagePlaceholder||"";let c=`Failed to fetch resource: ${a}`;o&&(c=typeof o=="string"?o:o.message),c&&console.warn(c)}return du[n]=s,s}async function kw(a){const e=a.toDataURL();return e==="data:,"?a.cloneNode(!1):Fa(e)}async function Ew(a,e){if(a.currentSrc){const o=document.createElement("canvas"),c=o.getContext("2d");o.width=a.clientWidth,o.height=a.clientHeight,c==null||c.drawImage(a,0,0,o.width,o.height);const u=o.toDataURL();return Fa(u)}const t=a.poster,n=qu(t),s=await Ju(t,n,e);return Fa(s)}async function bw(a,e){var t;try{if(!((t=a==null?void 0:a.contentDocument)===null||t===void 0)&&t.body)return await Ja(a.contentDocument.body,e,!0)}catch{}return a.cloneNode(!1)}async function Ow(a,e){return Ct(a,HTMLCanvasElement)?kw(a):Ct(a,HTMLVideoElement)?Ew(a,e):Ct(a,HTMLIFrameElement)?bw(a,e):a.cloneNode(Jp(a))}const Dw=a=>a.tagName!=null&&a.tagName.toUpperCase()==="SLOT",Jp=a=>a.tagName!=null&&a.tagName.toUpperCase()==="SVG";async function Pw(a,e,t){var n,s;if(Jp(e))return e;let o=[];return Dw(a)&&a.assignedNodes?o=an(a.assignedNodes()):Ct(a,HTMLIFrameElement)&&(!((n=a.contentDocument)===null||n===void 0)&&n.body)?o=an(a.contentDocument.body.childNodes):o=an(((s=a.shadowRoot)!==null&&s!==void 0?s:a).childNodes),o.length===0||Ct(a,HTMLVideoElement)||await o.reduce((c,u)=>c.then(()=>Ja(u,t)).then(d=>{d&&e.appendChild(d)}),Promise.resolve()),e}function Mw(a,e,t){const n=e.style;if(!n)return;const s=window.getComputedStyle(a);s.cssText?(n.cssText=s.cssText,n.transformOrigin=s.transformOrigin):Kp(t).forEach(o=>{let c=s.getPropertyValue(o);o==="font-size"&&c.endsWith("px")&&(c=`${Math.floor(parseFloat(c.substring(0,c.length-2)))-.1}px`),Ct(a,HTMLIFrameElement)&&o==="display"&&c==="inline"&&(c="block"),o==="d"&&e.getAttribute("d")&&(c=`path(${e.getAttribute("d")})`),n.setProperty(o,c,s.getPropertyPriority(o))})}function jw(a,e){Ct(a,HTMLTextAreaElement)&&(e.innerHTML=a.value),Ct(a,HTMLInputElement)&&e.setAttribute("value",a.value)}function Rw(a,e){if(Ct(a,HTMLSelectElement)){const t=e,n=Array.from(t.children).find(s=>a.value===s.getAttribute("value"));n&&n.setAttribute("selected","")}}function Fw(a,e,t){return Ct(e,Element)&&(Mw(a,e,t),ww(a,e,t),jw(a,e),Rw(a,e)),e}async function Lw(a,e){const t=a.querySelectorAll?a.querySelectorAll("use"):[];if(t.length===0)return a;const n={};for(let o=0;o<t.length;o++){const u=t[o].getAttribute("xlink:href");if(u){const d=a.querySelector(u),g=document.querySelector(u);!d&&g&&!n[u]&&(n[u]=await Ja(g,e,!0))}}const s=Object.values(n);if(s.length){const o="http://www.w3.org/1999/xhtml",c=document.createElementNS(o,"svg");c.setAttribute("xmlns",o),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const u=document.createElementNS(o,"defs");c.appendChild(u);for(let d=0;d<s.length;d++)u.appendChild(s[d]);a.appendChild(c)}return a}async function Ja(a,e,t){return!t&&e.filter&&!e.filter(a)?null:Promise.resolve(a).then(n=>Ow(n,e)).then(n=>Pw(a,n,e)).then(n=>Fw(a,n,e)).then(n=>Lw(n,e))}const Zp=/url\((['"]?)([^'"]+?)\1\)/g,Iw=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Nw=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Bw(a){const e=a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function zw(a){const e=[];return a.replace(Zp,(t,n,s)=>(e.push(s),t)),e.filter(t=>!bu(t))}async function Uw(a,e,t,n,s){try{const o=t?cw(e,t):e,c=qu(e);let u;return s||(u=await Ju(o,c,n)),a.replace(Bw(e),`$1${u}$3`)}catch{}return a}function Ww(a,{preferredFontFormat:e}){return e?a.replace(Nw,t=>{for(;;){const[n,,s]=Iw.exec(t)||[];if(!s)return"";if(s===e)return`src: ${n};`}}):a}function $p(a){return a.search(Zp)!==-1}async function em(a,e,t){if(!$p(a))return a;const n=Ww(a,t);return zw(n).reduce((o,c)=>o.then(u=>Uw(u,c,e,t)),Promise.resolve(n))}async function gi(a,e,t){var n;const s=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(a);if(s){const o=await em(s,null,t);return e.style.setProperty(a,o,e.style.getPropertyPriority(a)),!0}return!1}async function Vw(a,e){await gi("background",a,e)||await gi("background-image",a,e),await gi("mask",a,e)||await gi("-webkit-mask",a,e)||await gi("mask-image",a,e)||await gi("-webkit-mask-image",a,e)}async function Hw(a,e){const t=Ct(a,HTMLImageElement);if(!(t&&!bu(a.src))&&!(Ct(a,SVGImageElement)&&!bu(a.href.baseVal)))return;const n=t?a.src:a.href.baseVal,s=await Ju(n,qu(n),e);await new Promise((o,c)=>{a.onload=o,a.onerror=e.onImageErrorHandler?(...d)=>{try{o(e.onImageErrorHandler(...d))}catch(g){c(g)}}:c;const u=a;u.decode&&(u.decode=o),u.loading==="lazy"&&(u.loading="eager"),t?(a.srcset="",a.src=s):a.href.baseVal=s})}async function Yw(a,e){const n=an(a.childNodes).map(s=>tm(s,e));await Promise.all(n).then(()=>a)}async function tm(a,e){Ct(a,Element)&&(await Vw(a,e),await Hw(a,e),await Yw(a,e))}function Xw(a,e){const{style:t}=a;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(s=>{t[s]=n[s]}),a}const Rg={};async function Fg(a){let e=Rg[a];if(e!=null)return e;const n=await(await fetch(a)).text();return e={url:a,cssText:n},Rg[a]=e,e}async function Lg(a,e){let t=a.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,o=(t.match(/url\([^)]+\)/g)||[]).map(async c=>{let u=c.replace(n,"$1");return u.startsWith("https://")||(u=new URL(u,a.url).href),qp(u,e.fetchRequestInit,({result:d})=>(t=t.replace(c,`url(${d})`),[c,d]))});return Promise.all(o).then(()=>t)}function Ig(a){if(a==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let n=a.replace(t,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=s.exec(n);if(d===null)break;e.push(d[0])}n=n.replace(s,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,c="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(c,"gi");for(;;){let d=o.exec(n);if(d===null){if(d=u.exec(n),d===null)break;o.lastIndex=u.lastIndex}else u.lastIndex=o.lastIndex;e.push(d[0])}return e}async function Gw(a,e){const t=[],n=[];return a.forEach(s=>{if("cssRules"in s)try{an(s.cssRules||[]).forEach((o,c)=>{if(o.type===CSSRule.IMPORT_RULE){let u=c+1;const d=o.href,g=Fg(d).then(p=>Lg(p,e)).then(p=>Ig(p).forEach(v=>{try{s.insertRule(v,v.startsWith("@import")?u+=1:s.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(p=>{console.error("Error loading remote css",p.toString())});n.push(g)}})}catch(o){const c=a.find(u=>u.href==null)||document.styleSheets[0];s.href!=null&&n.push(Fg(s.href).then(u=>Lg(u,e)).then(u=>Ig(u).forEach(d=>{c.insertRule(d,c.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",o)}}),Promise.all(n).then(()=>(a.forEach(s=>{if("cssRules"in s)try{an(s.cssRules||[]).forEach(o=>{t.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${s.href}`,o)}}),t))}function Kw(a){return a.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>$p(e.style.getPropertyValue("src")))}async function Qw(a,e){if(a.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=an(a.ownerDocument.styleSheets),n=await Gw(t,e);return Kw(n)}function rm(a){return a.trim().replace(/["']/g,"")}function qw(a){const e=new Set;function t(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(o=>{e.add(rm(o))}),Array.from(n.children).forEach(o=>{o instanceof HTMLElement&&t(o)})}return t(a),e}async function Jw(a,e){const t=await Qw(a,e),n=qw(a);return(await Promise.all(t.filter(o=>n.has(rm(o.style.fontFamily))).map(o=>{const c=o.parentStyleSheet?o.parentStyleSheet.href:null;return em(o.cssText,c,e)}))).join(`
`)}async function Zw(a,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Jw(a,e);if(t){const n=document.createElement("style"),s=document.createTextNode(t);n.appendChild(s),a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n)}}async function $w(a,e={}){const{width:t,height:n}=Qp(a,e),s=await Ja(a,e,!0);return await Zw(s,e),await tm(s,e),Xw(s,e),await mw(s,t,n)}async function eS(a,e={}){const{width:t,height:n}=Qp(a,e),s=await $w(a,e),o=await Fa(s),c=document.createElement("canvas"),u=c.getContext("2d"),d=e.pixelRatio||fw(),g=e.canvasWidth||t,p=e.canvasHeight||n;return c.width=g*d,c.height=p*d,e.skipAutoScale||gw(c),c.style.width=`${g}`,c.style.height=`${p}`,e.backgroundColor&&(u.fillStyle=e.backgroundColor,u.fillRect(0,0,c.width,c.height)),u.drawImage(o,0,0,c.width,c.height),c}async function tS(a,e={}){return(await eS(a,e)).toDataURL()}function rS(){Bn();const a=Nn(),e=N.useRef(null),t=()=>{tS(e.current,{cacheBust:!1,width:e.current.offsetWidth*4,height:e.current.offsetHeight*4,style:{transform:"scale(4)",transformOrigin:"top left"}}).then(n=>{const s=document.createElement("a");s.download="nerofilm.png",s.href=n,s.click()}).catch(n=>{console.log(n)})};return k.jsxs("div",{children:[k.jsx(hn,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{children:"Download & share"}),k.jsx("section",{className:"options-r",children:k.jsx("div",{ref:e,children:k.jsx(zn,{images:a.images,filter:a.filter,layout:a.layout,color:a.color})})}),k.jsxs("section",{className:"btns",children:[k.jsx("button",{onClick:()=>t(),children:"Download image"}),k.jsx(nr,{className:"btn",role:"button",to:"/",children:"Return home"})]})]})]})}var Ea={exports:{}},nS=Ea.exports,Ng;function iS(){return Ng||(Ng=1,function(a,e){(function(n,s){a.exports=s(Ka())})(nS,function(t){return function(n){var s={};function o(c){if(s[c])return s[c].exports;var u=s[c]={i:c,l:!1,exports:{}};return n[c].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=n,o.c=s,o.d=function(c,u,d){o.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:d})},o.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},o.t=function(c,u){if(u&1&&(c=o(c)),u&8||u&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),u&2&&typeof c!="string")for(var g in c)o.d(d,g,(function(p){return c[p]}).bind(null,g));return d},o.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(u,"a",u),u},o.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},o.p="",o(o.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(n,s,o){o.r(s);var c=o("react"),u=function(){var y=function(S,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var T in _)_.hasOwnProperty(T)&&(C[T]=_[T])},y(S,w)};return function(S,w){y(S,w);function C(){this.constructor=S}S.prototype=w===null?Object.create(w):(C.prototype=w.prototype,new C)}}(),d=function(){return d=Object.assign||function(y){for(var S,w=1,C=arguments.length;w<C;w++){S=arguments[w];for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(y[_]=S[_])}return y},d.apply(this,arguments)},g=function(y,S){var w={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&S.indexOf(C)<0&&(w[C]=y[C]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,C=Object.getOwnPropertySymbols(y);_<C.length;_++)S.indexOf(C[_])<0&&Object.prototype.propertyIsEnumerable.call(y,C[_])&&(w[C[_]]=y[C[_]]);return w};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var w=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return w?new Promise(function(C,_){w.call(navigator,S,C,_)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function p(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var v=function(y){u(S,y);function S(w){var C=y.call(this,w)||this;return C.canvas=null,C.ctx=null,C.requestUserMediaId=0,C.unmounted=!1,C.state={hasUserMedia:!1},C}return S.prototype.componentDidMount=function(){var w=this,C=w.state,_=w.props;if(this.unmounted=!1,!p()){_.onUserMediaError("getUserMedia not supported");return}C.hasUserMedia||this.requestUserMedia(),_.children&&typeof _.children!="function"&&console.warn("children must be a function")},S.prototype.componentDidUpdate=function(w){var C=this.props;if(!p()){C.onUserMediaError("getUserMedia not supported");return}var _=JSON.stringify(w.audioConstraints)!==JSON.stringify(C.audioConstraints),T=JSON.stringify(w.videoConstraints)!==JSON.stringify(C.videoConstraints),R=w.minScreenshotWidth!==C.minScreenshotWidth,I=w.minScreenshotHeight!==C.minScreenshotHeight;(T||R||I)&&(this.canvas=null,this.ctx=null),(_||T)&&(this.stopAndCleanup(),this.requestUserMedia())},S.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},S.stopMediaStream=function(w){w&&(w.getVideoTracks&&w.getAudioTracks?(w.getVideoTracks().map(function(C){w.removeTrack(C),C.stop()}),w.getAudioTracks().map(function(C){w.removeTrack(C),C.stop()})):w.stop())},S.prototype.stopAndCleanup=function(){var w=this.state;w.hasUserMedia&&(S.stopMediaStream(this.stream),w.src&&window.URL.revokeObjectURL(w.src))},S.prototype.getScreenshot=function(w){var C=this,_=C.state,T=C.props;if(!_.hasUserMedia)return null;var R=this.getCanvas(w);return R&&R.toDataURL(T.screenshotFormat,T.screenshotQuality)},S.prototype.getCanvas=function(w){var C=this,_=C.state,T=C.props;if(!this.video||!_.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var R=this.video.videoWidth,I=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var B=R/I;R=T.minScreenshotWidth||this.video.clientWidth,I=R/B,T.minScreenshotHeight&&I<T.minScreenshotHeight&&(I=T.minScreenshotHeight,R=I*B)}this.canvas=document.createElement("canvas"),this.canvas.width=(w==null?void 0:w.width)||R,this.canvas.height=(w==null?void 0:w.height)||I,this.ctx=this.canvas.getContext("2d")}var z=this,G=z.ctx,Q=z.canvas;return G&&Q&&(Q.width=(w==null?void 0:w.width)||Q.width,Q.height=(w==null?void 0:w.height)||Q.height,T.mirrored&&(G.translate(Q.width,0),G.scale(-1,1)),G.imageSmoothingEnabled=T.imageSmoothing,G.drawImage(this.video,0,0,(w==null?void 0:w.width)||Q.width,(w==null?void 0:w.height)||Q.height),T.mirrored&&(G.scale(-1,1),G.translate(-Q.width,0))),Q},S.prototype.requestUserMedia=function(){var w=this,C=this.props,_=function(I,B){var z={video:typeof B<"u"?B:!0};C.audio&&(z.audio=typeof I<"u"?I:!0),w.requestUserMediaId++;var G=w.requestUserMediaId;navigator.mediaDevices.getUserMedia(z).then(function(Q){w.unmounted||G!==w.requestUserMediaId?S.stopMediaStream(Q):w.handleUserMedia(null,Q)}).catch(function(Q){w.handleUserMedia(Q)})};if("mediaDevices"in navigator)_(C.audioConstraints,C.videoConstraints);else{var T=function(I){return{optional:[{sourceId:I}]}},R=function(I){var B=I.deviceId;return typeof B=="string"?B:Array.isArray(B)&&B.length>0?B[0]:typeof B=="object"&&B.ideal?B.ideal:null};MediaStreamTrack.getSources(function(I){var B=null,z=null;I.forEach(function(K){K.kind==="audio"?B=K.id:K.kind==="video"&&(z=K.id)});var G=R(C.audioConstraints);G&&(B=G);var Q=R(C.videoConstraints);Q&&(z=Q),_(T(B),T(z))})}},S.prototype.handleUserMedia=function(w,C){var _=this.props;if(w||!C){this.setState({hasUserMedia:!1}),_.onUserMediaError(w);return}this.stream=C;try{this.video&&(this.video.srcObject=C),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(C)})}_.onUserMedia(C)},S.prototype.render=function(){var w=this,C=this,_=C.state,T=C.props,R=T.audio;T.forceScreenshotSourceSize;var I=T.disablePictureInPicture;T.onUserMedia,T.onUserMediaError,T.screenshotFormat,T.screenshotQuality,T.minScreenshotWidth,T.minScreenshotHeight,T.audioConstraints,T.videoConstraints,T.imageSmoothing;var B=T.mirrored,z=T.style,G=z===void 0?{}:z,Q=T.children,K=g(T,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),ie=B?d(d({},G),{transform:(G.transform||"")+" scaleX(-1)"}):G,ce={getScreenshot:this.getScreenshot.bind(this)};return c.createElement(c.Fragment,null,c.createElement("video",d({autoPlay:!0,disablePictureInPicture:I,src:_.src,muted:!R,playsInline:!0,ref:function(we){w.video=we},style:ie},K)),Q&&Q(ce))},S.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},S}(c.Component);s.default=v},react:function(n,s){n.exports=t}}).default})}(Ea)),Ea.exports}var sS=iS();const oS=Sp(sS),aS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGpSURBVHgB7Zm/SgNBEMbnRPQZ1EILzQsIgvinUltBwVLT6VOIbZ5CUDC1YCVWgiaPYPQBUimmMoo4fkdOCONtvOjsuQP7g69Y2N375m5ndzYhikQiEXMw8xFZJTUPMVnky7zJAPrNmwtAmjcVQJ55MwG4zP+RV6gNXUM1aBVKSBtP5l20oCo0QkMyaMAHlUcFOoZuEUSFtMBkh1w+HWiDtGDlJMbQMWga2oJOoJec6bvQOmnBHrdRTDUJnTm+xBxpwZ4PMky5D72LIJr8i8Qe9BCvpUQWhKRKmrDnYi5nOaVbrO45wR7L6SwnZGKvkCW4tzv1U3P11UsQXc5Fe5EsgTc+I75AmywBw+MigK6rb6hLqDChBjAh2k+ujqEGMC/aD66OoQawKdoNsgISdirnIFsmK8BsXZi/Yx9XTh/A6AF/Z5cskJmX5XSDNctpH2Rrvp7z5p+hWQoN7l0p01JhGzpl95Vyrch8owUeWPaPWB1oJ0mSqyKdQ1tfTWgB5i+LDgglgBa0By3B/P0wA39cQh54gx6pVx6kJ+wFdAPjNv9ziEQikci/8gn0M5MY+6QbIAAAAABJRU5ErkJggg==",lS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKLSURBVHgB7ZmNUcJAEIU3GQqgBKxArUCsQDsQK1ArECtAK5AWrECsAKwg6SAWAMH3xmOMl0NzewcCk2/mxIT72d3b7G4OkZaWliCWy+VVWZYF2tKzZRwrgSQSAATooU3xb1d0fCRJcoqWi5JUAoDwz6IXnnTNHNsHC98o3MbZFovFrWwTuo7D71+bjmdfa2zBOWVbhAoQaoB1k9If7x3CbcQFOEbhbtP5fD6QNRbJlD6stpzGWJUQ3OMciZkow0dP/AkKg4FhOOfaKSYYiFJ4KH4XEsM5Fu2Owog/9JpbWn9q+fOYz4PsGNwtylZzX9u/thrOPKFhbXkT/ql2StNUXV6YBQZwizNcnsi3a+ZoM3z30ul0xhKALW9tB0QJhL8smxV1mTMUeijwQ94YCkD4kW8oZM4RBdEVMMlPE8upxEg8iaoAQ7BDsALRYojv+pV+J44IslLiUjyIqkBZz97Zb1FsTcYvfMJ2NAVc1m8Sgl2FnE8tZa8Z8kJzYQk2bpKV2Qd9n6x7fVGiVsC2NvLHU9Ox6Duxbh2LEnUi044LHV8bJ3uOWgHb36th8y8YVq1buSgJ2YFZ9QJb25fm3FjX76JFG0Ydr4SFRxj9saZPbRQzD3TLevGmSWSZeBA1E5sKtFYeYHeeq37O58PUTEWI9aMrQCDsY+lZxFUUHYon0RUwSgwVwj+Kgo0oQExtlDUQvvCtQH9TIOor5UoRNNZJtVdK3H/D/KyZPkSJLW90BTbN4ZcSu3gmtMKVY6jApHoDWzTaxbMhY1j7IGCWMATioVKdEPw3MPZ1Yo7VecDak/0iR8A5ShnS0M4loKT9B3Ij89dDzNqe2uDzWqwyeceYwFseQn/ZbGk5JD4BAaTcWsmVUD8AAAAASUVORK5CYII=",cS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALmSURBVHgB5ZqLcaNADIYF4wJcAtdBUsH5OnAH51RwvgqSDu46cDogqcAl2KkAd0AKsFEke5mQRbAPhB+Tf0YBA8vq2xX70AQQ8TdZSVbwOdyajONN3RaEaX28WQhydoGyvgcEP1NVVUmGgVaoNlIMBN3LIp2vjcM3Ay2FQpAD6wHO17YGTflC0O8/Cs4f7XA4LEFTLoiO0PFuSaHndEPJBTHUgaEN0PXSKdmj7ZwkjRDgMhHhttnv9wvoaJGiq6ADIrrlqvhBoKh7PDEvKuiQ9VWWJIl0+Z3snu7tIELsBNmGTqcQrh3Ve59yrIPDeVOZdJkr/gmRYnCyv+wMhIujZsmtv7Hi+Zm/B6kEXnDZwb3FvrU+fCHeM8eLLgkxtf1N+E/zoTRNE48XLeiwsq/TuzgcODQ4rO7gMzR3ZFu6/zqZTJ5hgGx/Wz0AnurqCZ8RRBwKAwC++BsLMBCCH3uECKkCGIh8AMQ/CJR6D/RNdvi5droTRpC63DykTlUAe/bugzAg0ozP6yjviUwNoNn6jTnkyROitMp5r6U0AXLLiVUN5oJgUKveF9961QAqawbnOG/AufYTM3toDahXDaC3nAtCq94JjCSajXlNxaf2jH28jhg8Yssa8A0UVgjNOp7zmeyiQyiFeG2tF8+kh7gn6PAgXG/+fINYxfaAsCXs3Rf39UTI2khzGJ1W7Y154YBY9n3YZwUwDs0rYXnAc4I1rM7wlDAofWbsswGwyNn/EoTLYiHUAQzEUwRAHgMxCgALT2ujwsN5/tjndZlQiNEALJDcguHznEcutFaeGJ5QHhcgRiEQVwnA8oVwAmDA5kJb6JcVbwGshTE8gwupC8J8PysLYJPwEEjrkqgMwZiScrGIrZTQQ4KntDonWDO4MjkgdpSE+5HSQ+9kvyAuwTqqUNgzMJRJCrPPkJqLRxo68rJ3C1cklDc+GQzIip9deMGEspo6IEq4JQkQ3lvRq5GBKPD0TyqLD+av9Z0xW064AAAAAElFTkSuQmCC",uS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZqSURBVHgB7V07TFxXEJ3dYotAQwQmRWxLuIGGxm4SxZ1lrKRJaJPWfer0oXbrOqQ1VSKQXAUpbkIKGrYxErhJsqvgwqbYAjzn7Vy8e9l9M/f99n040tVbe+/73MOZmfvuZ7ZFM8Tl5eUcH1a5LHK5K8cl+XrRq37Opc/lvRxRjrictlqt9zQjtKhAjBC2xuU+XScpKRyZB1y6RRJaCIFMHAjboCFxn1D+2OdywEQeUM7IjUBR22MuT6gY0iYBynxBQ1X2KAdkTmBJiPMBIv9gEncoY2RKIJP3kA+blJ1vyxqRIpnIfcoImRDIxCFyPqWhj6sC4Bt/zcKsUxPI5CE4QHVlMVcr0C3aTqvGxASKr/uWhr4uDeb4Wp/xcQGfucxz6cjnUaBrMuDyjssZCjf+TP6dBnt8nW1KiEQEisn+yOUOJQCfv8yH21LmKAW48e/4ev/xx9f8+V9KhlMuz5KYdDCBQt5PFB4oOnzuKj/kKh87lANAJh8OuYDQUGUiwGyFkhhEYELycifOB99rwPc65mOXwogMJtFMYELy8Nq2XhRxPkYUeRxwWhCJJgITkDfP53zBx2UqAYTIl2RXo5lEK4E/kz1gzFR1MUAEPxSztgCBZUsbmGiTAibiezKSx3UfSCkbeQCeCc+2bqyPNn+nVYolUF7NTP08rvslDdVXdqzLs1qwIS8KUzGVQPF7P5ANX3NZoepghdv3jbHupnAxEXEKhOmqr2f4a3L5lKqHBaMSwcHTaV9OJFBM9z7pgD+pkvJ8QIkPDPXWhJNrmKbATdKxGuCQywy0w+K7N+X9fwzXCORKlvE8vPDXgTwHtGVeqQNOHvv/OUagOMuHpONRSbsqSdGRjr+GJ74KfQW6KcY4wG9of60qYtlgyggoYyr0CdR8X91M1wfaplnWWL/4ikBmX52nxV+opupz6FhUKNO0EUYVqHVbQFyVuyxWgEBNhVdvJxGBzChsWwsetwwXrgMsKlxzwcQp0DKbVmff58MSTKI6jkDNfJdr7vt8dGTeJg6R6EwK5Ivdo+bhtvJ9JLq2+L/Y6MuDireoYeA2f65UWYQfhALvKhXnG2a+EaTN2pTrKgjUAsgCNReaH1wCgVrnubEEGsY574DApZQXqTM0E14EgbGjzuxMUy29qDIMbddNmJrx9jENattVBVLKxT9VhqH3sajOC98gHjcEpsQNgSkBAvtKnZntApo1ZFFSHM4tChxQc6G1vacqkCNRYxVoaHukwNg1cAYZ1xlnyvd9EHiS8iK1BYvnf6VK3xJEkq58rzzYhN8qVY5A4FFcDTHhxvlBtNvgvk7bXMltZI7DG2oYZO9JHHpY/uu6MbH7arli4whkvFa+j9ZaOwKPlMrwg43pD4r5ar4/Et0ogefKRa2r2+uAQ0OdjwoUP6ipECc0QYUDg//bd9sfRl/l9pSTBg1R4bEh+l7FjCsC+STVjKnmKhTiNJH0RpNZ+IMJFhVa/ENVcWhQ31jeBZ/AXbKpsHZvJ0KctikR4wZjsaLtXQTkaSoEXlGNTFm2x740VEXwGHvpmDQeCBWqIzQ1M2WL6fYmpU25RqCo0JJfpVuTqAwhWNoxkZOJI9KSycJy0b8obDNz2XBstKS/p2X3iBvSf056QAHZf1IFxwwx1ifPrgEc/DLty3bMDVzeKcvD/EbVUiKe9Xdj3W0/cIwidlKJT0REtkTlSIkVCSxdo/KAvZaSmMcyKwcVasP+Dohm8Iul6+Kgq4Jnk+ez4MSSkMeaMwELkJB0YslYf55v/qhEK1vR8X8VMEGGbtxWnOk6hKQ9CSJRgI0567MiEqojezfFwUxedA8KQBISRY3YU7FSZOIdPnQvLi667XY7xJ0EkRfdiwKRUImOSKz2z02RKYgDgsmL7kkJICQi+Zi2wn8asHHnHgjNgEwMbL6ReZukgxwIks9CyQNS5Q/kxiOrxwalgChzQRazo1jS3+Ez0t/9Q+mnXNFNeyGvsMHIIgEjNimCyComYNxh4nYpBbJKAQqTBomWTB9lAKLy8yQm6yOPJLRIlxQUYAoEAsVOq2xJaH1I5o+vqDxEuoHi3aS+bhryTMQNs8Y2slkqMjfiHIpKBQ/fiGJJqZIWIAo+bldmGnNF0T9GgEjtfogAbydZKRPBAFONIOwoL7VNQqEE+hBC0RkHqe6nMNz+Zb9b1B85IhicyOdCCfPxAeLlcaKMZEaKAAAAAElFTkSuQmCC",hS="/nerofilm/assets/CamShutter-CEMIM7zw.wav",dS=()=>{Bn();const a=ki(),e=Nn(),t=Ei(),n=N.useRef(new Audio(hS)),[s,o]=N.useState(null),[c,u]=N.useState(!1),[d,g]=N.useState(0),[p,v]=N.useState(!1),[y,S]=N.useState(!1),[w,C]=N.useState(null),_=N.useRef(null);N.useEffect(()=>{o(!0)},[]);const T=()=>{if(_.current){const B=_.current.getScreenshot();n.current.currentTime=0,n.current.play().catch(z=>console.log("Audio play failed:",z)),S(!0),setTimeout(()=>S(!1),200),t(z=>{const G=[...z.images,B].slice(-8);return{...z,images:G}}),g(z=>z+1)}},R=(B,z)=>{if(B===0){z();return}C(B),setTimeout(()=>R(B-1,z),1)},I=()=>{if(c)return;u(!0),g(0),v(!0);let B=8;const z=()=>{if(B===0){u(!1),C(null),a("/select-photos");return}R(3,()=>{T(),B--,setTimeout(z,500)})};z()};return k.jsxs("div",{className:`camera-page ${e.layout==="wide"?"wide-mode":"original-mode"}`,children:[k.jsx("button",{className:"back-button",onClick:()=>a("/select-frame"),children:k.jsx("img",{src:aS,alt:"Back",className:"back-arrow"})}),s===null&&k.jsxs("div",{className:"camera-access-message",children:[k.jsx("img",{src:lS,alt:"Camera",className:"camera-image"}),k.jsx("h2",{children:"Allow Camera Access"}),k.jsx("p",{children:"To take your photo, allow camera access."})]}),s===!1&&k.jsxs("div",{className:"camera-access-message",children:[k.jsx("img",{src:cS,alt:"Camera Disabled",className:"camera-image"}),k.jsx("h2",{children:"Camera Access Disabled"}),k.jsx("p",{children:"Please enable camera access in your browser settings."})]}),s===!0&&k.jsxs(k.Fragment,{children:[p?k.jsxs("div",{className:"count-display",children:[d,"/8"]}):k.jsx("h2",{className:"instructions",children:"Click to start taking photos"}),k.jsx("div",{className:"camera-container",children:k.jsxs("div",{className:`camera-preview-screen ${e.layout}`,children:[y&&k.jsx("div",{className:"flash-overlay"}),k.jsx(oS,{className:"webcam",ref:_,audio:!1,screenshotFormat:"image/png",mirrored:!0,videoConstraints:{facingMode:"user",aspectRatio:e.layout==="wide"?9/16:16/9}})]})}),k.jsxs("div",{className:"shutter",children:[w!==null&&k.jsx("div",{className:"countdown-timer",children:w}),k.jsx("button",{className:"shutter-button",onClick:I,disabled:c,children:k.jsx("img",{src:uS,alt:"Shutter",className:"shutter-icon"})})]})]})]})};function fS(){Bn();const a=ki(),e=Nn(),t=Ei(),[n,s]=N.useState([]);function o(u){Ku(),n.includes(u)?s(n.filter(d=>d!=u)):n.length<4&&s([...n,u])}function c(){n.length==4&&(t({...e,images:n}),a("/choose-frame"))}return k.jsxs("div",{children:[k.jsx(hn,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{children:"Select photos"}),k.jsxs("div",{className:"options-r",children:[k.jsx(zn,{filter:e.filter,images:n,layout:e.layout,color:e.color}),k.jsx("ul",{className:"image-options",children:e.images.map((u,d)=>k.jsxs("li",{className:`${n.includes(u)?"image-option image-selected":"image-option"}`,onClick:()=>o(u),children:[k.jsx("p",{className:n.includes(u)?"selected-num num":"num",children:n.indexOf(u)+1}),k.jsx("img",{src:u,alt:`image ${d}`})]},d))})]}),k.jsx("button",{className:"btn",onClick:()=>c(),children:"Continue"})]})]})}const gS=()=>{const[a,e]=N.useState(!1);return k.jsxs("div",{children:[k.jsx(hn,{}),k.jsx("div",{className:"instruction-box",children:k.jsxs("div",{className:"texts-box",children:[k.jsx("h2",{children:"Before Taking Your Photos"}),k.jsxs("ul",{className:"instructions",children:[k.jsxs("li",{children:[k.jsx("img",{src:Hp,alt:"Watch Icon",className:"icons"}),"The timer is set for 5 seconds"]}),k.jsxs("li",{children:[k.jsx("img",{src:Yp,alt:"Camera Icon",className:"icons"}),"Press the button to start the shoot"]}),k.jsxs("li",{children:[k.jsx("img",{src:Xp,alt:"Gallery Icon",className:"icons"}),"You'll get 8 photospick your favorite 4!"]}),k.jsxs("li",{children:[k.jsx("img",{src:Gp,alt:"Settings Icon",className:"icons"}),"Enable camera access in settings if needed"]})]}),k.jsxs("div",{className:"checkbox",children:[k.jsx("input",{type:"checkbox",id:"dont-show-again",checked:a,onChange:()=>e(!a)}),k.jsx("label",{htmlFor:"dont-show-again",children:"Do not show this page again"})]}),k.jsx(nr,{className:"ready-btn",to:"/select-frame",children:"Im Ready!"})]})})]})};function b(a,e,t){return(e=function(n){var s=function(o,c){if(typeof o!="object"||!o)return o;var u=o[Symbol.toPrimitive];if(u!==void 0){var d=u.call(o,c);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(o)}(n,"string");return typeof s=="symbol"?s:s+""}(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Bg(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,n)}return t}function D(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bg(Object(t),!0).forEach(function(n){b(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Bg(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Fe(a,e){if(a==null)return{};var t,n,s=function(c,u){if(c==null)return{};var d={};for(var g in c)if({}.hasOwnProperty.call(c,g)){if(u.indexOf(g)>=0)continue;d[g]=c[g]}return d}(a,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(a,t)&&(s[t]=a[t])}return s}function dn(a,e){return e||(e=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(e)}}))}class zg{constructor(){b(this,"browserShadowBlurConstant",1),b(this,"DPI",96),b(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),b(this,"perfLimitSizeTotal",2097152),b(this,"maxCacheSideLimit",4096),b(this,"minCacheSideLimit",256),b(this,"disableStyleCopyPaste",!1),b(this,"enableGLFiltering",!0),b(this,"textureSize",4096),b(this,"forceGLPutImageData",!1),b(this,"cachesBoundsOfCurve",!1),b(this,"fontPaths",{}),b(this,"NUM_FRACTION_DIGITS",4)}}const xe=new class extends zg{constructor(a){super(),this.configure(a)}configure(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,a)}addFonts(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=D(D({},this.fontPaths),a)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(a=>{delete this.fontPaths[a]})}clearFonts(){this.fontPaths={}}restoreDefaults(a){const e=new zg,t=(a==null?void 0:a.reduce((n,s)=>(n[s]=e[s],n),{}))||e;this.configure(t)}},cn=function(a){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[a]("fabric",...t)};class gr extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class pS extends gr{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class mS{}class vS extends mS{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),cn("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const yS={};let Ug;const pr=()=>Ug||(Ug={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new vS,dispose(){},copyPasteData:yS}),bi=()=>pr().document,Zu=()=>pr().window,nm=()=>{var a;return Math.max((a=xe.devicePixelRatio)!==null&&a!==void 0?a:Zu().devicePixelRatio,1)},As=new class{constructor(){b(this,"charWidthsCache",{}),b(this,"boundsOfCurveCache",{})}getFontCache(a){let{fontFamily:e,fontStyle:t,fontWeight:n}=a;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],o="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return s[o]||(s[o]={}),s[o]}clearFontCache(a){(a=(a||"").toLowerCase())?this.charWidthsCache[a]&&delete this.charWidthsCache[a]:this.charWidthsCache={}}limitDimsByArea(a){const{perfLimitSizeTotal:e}=xe,t=Math.sqrt(e*a);return[Math.floor(t),Math.floor(e/t)]}},Ou="6.6.1";function ba(){}const Is=Math.PI/2,La=2*Math.PI,$u=Math.PI/180,gt=Object.freeze([1,0,0,1,0,0]),eh=16,sn=.4477152502,fe="center",Te="left",_t="top",Du="bottom",Ye="right",At="none",th=/\r?\n/,im="moving",Za="scaling",sm="rotating",rh="rotate",om="skewing",Os="resizing",xS="modifyPoly",wS="modifyPath",Ia="changed",$a="scale",kt="scaleX",Ht="scaleY",Oi="skewX",Di="skewY",Je="fill",Tt="stroke",Na="modified",pi="json",fu="svg",Z=new class{constructor(){this[pi]=new Map,this[fu]=new Map}has(a){return this[pi].has(a)}getClass(a){const e=this[pi].get(a);if(!e)throw new gr("No class registered for ".concat(a));return e}setClass(a,e){e?this[pi].set(e,a):(this[pi].set(a.type,a),this[pi].set(a.type.toLowerCase(),a))}getSVGClass(a){return this[fu].get(a)}setSVGClass(a,e){this[fu].set(e??a.type.toLowerCase(),a)}},Ba=new class extends Array{remove(a){const e=this.indexOf(a);e>-1&&this.splice(e,1)}cancelAll(){const a=this.splice(0);return a.forEach(e=>e.abort()),a}cancelByCanvas(a){if(!a)return[];const e=this.filter(t=>{var n;return t.target===a||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===a});return e.forEach(t=>t.abort()),e}cancelByTarget(a){if(!a)return[];const e=this.filter(t=>t.target===a);return e.forEach(t=>t.abort()),e}};class SS{constructor(){b(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[s,o]=n;this.on(s,o)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(s=>{let[o,c]=s;n.push(this.once(o,c))}),()=>n.forEach(s=>s())}if(t){const n=this.on(e,function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];t.call(this,...o),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],s=n.indexOf(t);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[s,o]=n;this._removeEventListener(s,o)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let o=0;o<s.length;o++)s[o].call(this,t||{})}}const vi=(a,e)=>{const t=a.indexOf(e);return t!==-1&&a.splice(t,1),a},Rr=a=>{if(a===0)return 1;switch(Math.abs(a)/Is){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},Fr=a=>{if(a===0)return 0;const e=a/Is,t=Math.sign(a);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(a)};class L{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new L(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new L(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new L(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new L(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new L(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new L(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new L(this.x/e.x,this.y/e.y)}scalarDivide(e){return new L(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new L(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new L(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new L(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new L(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nh;const n=Fr(e),s=Rr(e),o=this.subtract(t);return new L(o.x*s-o.y*n,o.x*n+o.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new L(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const nh=new L(0,0),Oa=a=>!!a&&Array.isArray(a._objects);function am(a){class e extends a{constructor(){super(...arguments),b(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];const c=this._objects.push(...s);return s.forEach(u=>this._onObjectAdded(u)),c}insertAt(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),c=1;c<s;c++)o[c-1]=arguments[c];return this._objects.splice(n,0,...o),o.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const n=this._objects,s=[];for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return c.forEach(d=>{const g=n.indexOf(d);g!==-1&&(n.splice(g,1),s.push(d),this._onObjectRemoved(d))}),s}forEachObject(n){this.getObjects().forEach((s,o,c)=>n(s,o,c))}getObjects(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return s.length===0?[...this._objects]:this._objects.filter(c=>c.isType(...s))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some(o=>o instanceof e&&o.contains(n,!0))}complexity(){return this._objects.reduce((n,s)=>n+=s.complexity?s.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(vi(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(vi(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const c=this.findNewLowerIndex(n,o,s);return vi(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const c=this.findNewUpperIndex(n,o,s);return vi(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(vi(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,o){let c;if(o){c=s;for(let u=s-1;u>=0;--u)if(n.isOverlapping(this._objects[u])){c=u;break}}else c=s-1;return c}findNewUpperIndex(n,s,o){let c;if(o){c=s;for(let u=s+1;u<this._objects.length;++u)if(n.isOverlapping(this._objects[u])){c=u;break}}else c=s+1;return c}collectObjects(n){let{left:s,top:o,width:c,height:u}=n,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const g=[],p=new L(s,o),v=p.add(new L(c,u));for(let y=this._objects.length-1;y>=0;y--){const S=this._objects[y];S.selectable&&S.visible&&(d&&S.intersectsWithRect(p,v)||S.isContainedWithinRect(p,v)||d&&S.containsPoint(p)||d&&S.containsPoint(v))&&g.push(S)}return g}}return e}class lm extends SS{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Da(a){return Zu().requestAnimationFrame(a)}function CS(a){return Zu().cancelAnimationFrame(a)}let _S=0;const un=()=>_S++,or=()=>{const a=bi().createElement("canvas");if(!a||a.getContext===void 0)throw new gr("Failed to create `canvas` element");return a},AS=()=>bi().createElement("img"),mr=a=>{const e=or();return e.width=a.width,e.height=a.height,e},cm=(a,e,t)=>a.toDataURL("image/".concat(e),t),um=(a,e,t)=>new Promise((n,s)=>{a.toBlob(n,"image/".concat(e),t)}),Xe=a=>a*$u,Rn=a=>a/$u,TS=a=>a.every((e,t)=>e===gt[t]),St=(a,e,t)=>new L(a).transform(e,t),rr=a=>{const e=1/(a[0]*a[3]-a[1]*a[2]),t=[e*a[3],-e*a[1],-e*a[2],e*a[0],0,0],{x:n,y:s}=new L(a[4],a[5]).transform(t,!0);return t[4]=-n,t[5]=-s,t},it=(a,e,t)=>[a[0]*e[0]+a[2]*e[1],a[1]*e[0]+a[3]*e[1],a[0]*e[2]+a[2]*e[3],a[1]*e[2]+a[3]*e[3],t?0:a[0]*e[4]+a[2]*e[5]+a[4],t?0:a[1]*e[4]+a[3]*e[5]+a[5]],ih=(a,e)=>a.reduceRight((t,n)=>n&&t?it(n,t,e):n||t,void 0)||gt.concat(),hm=a=>{let[e,t]=a;return Math.atan2(t,e)},za=a=>{const e=hm(a),t=Math.pow(a[0],2)+Math.pow(a[1],2),n=Math.sqrt(t),s=(a[0]*a[3]-a[2]*a[1])/n,o=Math.atan2(a[0]*a[2]+a[1]*a[3],t);return{angle:Rn(e),scaleX:n,scaleY:s,skewX:Rn(o),skewY:0,translateX:a[4]||0,translateY:a[5]||0}},Ns=function(a){return[1,0,0,1,a,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Bs(){let{angle:a=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Xe(a),s=Rr(n),o=Fr(n);return[s,o,-o,s,e?e-(s*e-o*t):0,t?t-(o*e+s*t):0]}const sh=function(a){return[a,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,0,0]},dm=a=>Math.tan(Xe(a)),fm=a=>[1,0,dm(a),1,0,0],gm=a=>[1,dm(a),0,1,0,0],el=a=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:s=!1,skewX:o=0,skewY:c=0}=a,u=sh(n?-e:e,s?-t:t);return o&&(u=it(u,fm(o),!0)),c&&(u=it(u,gm(c),!0)),u},kS=a=>{const{translateX:e=0,translateY:t=0,angle:n=0}=a;let s=Ns(e,t);n&&(s=it(s,Bs({angle:n})));const o=el(a);return TS(o)||(s=it(s,o)),s},Pa=function(a){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,s){if(e&&e.aborted)return s(new pS("loadImage"));const o=AS();let c;e&&(c=function(d){o.src="",s(d)},e.addEventListener("abort",c,{once:!0}));const u=function(){o.onload=o.onerror=null,c&&(e==null||e.removeEventListener("abort",c)),n(o)};a?(o.onload=u,o.onerror=function(){c&&(e==null||e.removeEventListener("abort",c)),s(new gr("Error loading ".concat(o.src)))},t&&(o.crossOrigin=t),o.src=a):u()})},Ds=function(a){let{signal:e,reviver:t=ba}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,s)=>{const o=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(a.map(c=>Z.getClass(c.type).fromObject(c,{signal:e}).then(u=>(t(c,u),o.push(u),u)))).then(n).catch(c=>{o.forEach(u=>{u.dispose&&u.dispose()}),s(c)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},tl=function(a){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const o=Object.values(a).map(u=>u&&u.type&&Z.has(u.type)?Ds([u],{signal:e}).then(d=>{let[g]=d;return s.push(g),g}):u),c=Object.keys(a);Promise.all(o).then(u=>u.reduce((d,g,p)=>(d[c[p]]=g,d),{})).then(t).catch(u=>{s.forEach(d=>{d.dispose&&d.dispose()}),n(u)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Pi=function(a){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in a&&(e[t]=a[t]),e),{})},oh=(a,e)=>Object.keys(a).reduce((t,n)=>(e(a[n],n,a)&&(t[n]=a[n]),t),{}),Wg={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},gu=(a,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+6*(e-a)*t:t<.5?e:t<2/3?a+(e-a)*(2/3-t)*6:a),Vg=(a,e,t,n)=>{a/=255,e/=255,t/=255;const s=Math.max(a,e,t),o=Math.min(a,e,t);let c,u;const d=(s+o)/2;if(s===o)c=u=0;else{const g=s-o;switch(u=d>.5?g/(2-s-o):g/(s+o),s){case a:c=(e-t)/g+(e<t?6:0);break;case e:c=(t-a)/g+2;break;case t:c=(a-e)/g+4}c/=6}return[Math.round(360*c),Math.round(100*u),Math.round(100*d),n]},Hg=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(a)/(a.endsWith("%")?100:1)},ea=a=>Math.min(Math.round(a),255).toString(16).toUpperCase().padStart(2,"0"),Yg=a=>{let[e,t,n,s=1]=a;const o=Math.round(.3*e+.59*t+.11*n);return[o,o,o,s]};class be{constructor(e){if(b(this,"isUnrecognised",!1),e)if(e instanceof be)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,s,o=1]=e;this.setSource([t,n,s,o])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Wg&&(e=Wg[e]),e==="transparent"?[255,255,255,0]:be.sourceFromHex(e)||be.sourceFromRgb(e)||be.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Vg(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,s]=Vg(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,s]=this.getSource();return"".concat(ea(e)).concat(ea(t)).concat(ea(n)).concat(ea(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Yg(this.getSource())),this}toBlackWhite(e){const[t,,,n]=Yg(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof be||(e=new be(e));const t=this.getSource(),n=e.getSource(),[s,o,c]=t.map((u,d)=>Math.round(.5*u+.5*n[d]));return this.setSource([s,o,c,t[3]]),this}static fromRgb(e){return be.fromRgba(e)}static fromRgba(e){return new be(be.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,s,o]=t.slice(1,4).map(c=>{const u=parseFloat(c);return c.endsWith("%")?Math.round(2.55*u):u});return[n,s,o,Hg(t[4])]}}static fromHsl(e){return be.fromHsla(e)}static fromHsla(e){return new be(be.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(be.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,o=parseFloat(t[3])/100;let c,u,d;if(s===0)c=u=d=o;else{const g=o<=.5?o*(s+1):o+s-o*s,p=2*o-g;c=gu(p,g,n+1/3),u=gu(p,g,n),d=gu(p,g,n-1/3)}return[Math.round(255*c),Math.round(255*u),Math.round(255*d),Hg(t[4])]}static fromHex(e){return new be(be.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(d=>d+d):t.match(/.{2}/g);const[s,o,c,u=255]=n.map(d=>parseInt(d,16));return[s,o,c,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?Rn(n):t.includes("turn")?360*n:n}}const Be=(a,e)=>parseFloat(Number(a).toFixed(e)),Si=function(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eh;const t=/\D{0,2}$/.exec(a),n=parseFloat(a),s=xe.DPI;switch(t==null?void 0:t[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},ES=a=>{const[e,t]=a.trim().split(" "),[n,s]=(o=e)&&o!==At?[o.slice(1,4),o.slice(5,8)]:o===At?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:t||"meet",alignX:n,alignY:s}},Ua=a=>"matrix("+a.map(e=>Be(e,xe.NUM_FRACTION_DIGITS)).join(" ")+")",Ps=function(a,e){let t,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const o=new be(e),c=o.getAlpha();t=o.toRgb(),c!==1&&(n=c.toString())}else t="none";return s?"".concat(a,": ").concat(t,"; ").concat(n?"".concat(a,"-opacity: ").concat(n,"; "):""):"".concat(a,'="').concat(t,'" ').concat(n?"".concat(a,'-opacity="').concat(n,'" '):"")},Vt=a=>!!a&&a.toLive!==void 0,Xg=a=>!!a&&typeof a.toObject=="function",Gg=a=>!!a&&a.offsetX!==void 0&&"source"in a,En=a=>!!a&&"multiSelectionStacking"in a;function pm(a){const e=a&&tr(a);let t=0,n=0;if(!a||!e)return{left:t,top:n};let s=a;const o=e.documentElement,c=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=c.scrollLeft||o.scrollLeft||0,n=c.scrollTop||o.scrollTop||0):(t+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:n}}const tr=a=>a.ownerDocument||null,mm=a=>{var e;return((e=a.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},vm=function(a,e,t){let{width:n,height:s}=t,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;a.width=n,a.height=s,o>1&&(a.setAttribute("width",(n*o).toString()),a.setAttribute("height",(s*o).toString()),e.scale(o,o))},Pu=(a,e)=>{let{width:t,height:n}=e;t&&(a.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(a.style.height=typeof n=="number"?"".concat(n,"px"):n)};function Kg(a){return a.onselectstart!==void 0&&(a.onselectstart=()=>!1),a.style.userSelect=At,a}class ym{constructor(e){b(this,"_originalCanvasStyle",void 0),b(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&bi().getElementById(e)||or();var n;if(t.hasAttribute("data-fabric"))throw new gr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:s}=this.lower;vm(n,s,e,t)}setCSSDimensions(e){Pu(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&tr(e),s={left:0,top:0};if(!n)return s;const o=((t=mm(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(o.borderLeftWidth,10)||0,s.top+=parseInt(o.borderTopWidth,10)||0,s.left+=parseInt(o.paddingLeft,10)||0,s.top+=parseInt(o.paddingTop,10)||0;let c={left:0,top:0};const u=n.documentElement;e.getBoundingClientRect!==void 0&&(c=e.getBoundingClientRect());const d=pm(e);return{left:c.left+d.left-(u.clientLeft||0)+s.left,top:c.top+d.top-(u.clientTop||0)+s.top}}(this.lower.el)}dispose(){pr().dispose(this.lower.el),delete this.lower}}const bS={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...gt]};class zs extends am(lm){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return zs.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new ym(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const o=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(cn("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?nm():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=D({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,s=[...this.viewportTransform],o=St(e,rr(s));s[0]=t,s[3]=t;const c=St(o,s);s[4]+=n.x-c.x,s[5]+=n.y-c.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new L(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new L(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Da(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=rr(this.viewportTransform),s=St({x:0,y:0},n),o=St({x:e,y:t},n),c=s.min(o),u=s.max(o);return this.vptCoords={tl:c,tr:new L(u.x,c.y),bl:new L(c.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(CS(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,s=t.length;n<s;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],s=this["".concat(t,"Image")],o=this.viewportTransform,c=this["".concat(t,"Vpt")];if(!n&&!s)return;const u=Vt(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?n.toLive(e):n,c&&e.transform(...o),u){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const d=n.gradientTransform||n.patternTransform;d&&e.transform(...d)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:d}=this;this.skipOffscreen=c,c&&e.transform(...o),s.render(e),this.skipOffscreen=d,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new L(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new L(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new L(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new L(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new L(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return St(this.getCenterPoint(),rr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,fe,fe),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return D(D(D({version:Ou},Pi(this,t)),{},{objects:this._objects.filter(o=>!o.excludeFromExport).map(o=>this._toObject(o,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const o=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),o}__serializeBgOverlay(e,t){const n={},s=this.backgroundImage,o=this.overlayImage,c=this.backgroundColor,u=this.overlayColor;return Vt(c)?c.excludeFromExport||(n.background=c.toObject(t)):c&&(n.background=c),Vt(u)?u.excludeFromExport||(n.overlay=u.toObject(t)):u&&(n.overlay=u),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,t)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),s=t.height||"".concat(this.height),o=xe.NUM_FRACTION_DIGITS,c=t.viewBox;let u;if(c)u='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;u='viewBox="'.concat(Be(-d[4]/d[0],o)," ").concat(Be(-d[5]/d[3],o)," ").concat(Be(this.width/d[0],o)," ").concat(Be(this.height/d[3],o),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Ou,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(un()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Vt(t)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return t.toSVG(o,{additionalTransform:n?Ua(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=xe.fontPaths;this._objects.forEach(function o(c){e.push(c),Oa(c)&&c._objects.forEach(o)}),e.forEach(o=>{if(!(c=o)||typeof c._renderText!="function")return;var c;const{styles:u,fontFamily:d}=o;!t[d]&&n[d]&&(t[d]=!0,u&&Object.values(u).forEach(g=>{Object.values(g).forEach(p=>{let{fontFamily:v=""}=p;!t[v]&&n[v]&&(t[v]=!0)})}))});const s=Object.keys(t).map(o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Vt(n)){const s=n.repeat||"",o=this.width,c=this.height,u=this["".concat(t,"Vpt")]?Ua(rr(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(o/2,",").concat(c/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-c/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Gg(n)?o:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Gg(n)?c:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new gr("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:o=[],backgroundImage:c,background:u,overlayImage:d,overlay:g,clipPath:p}=s,v=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ds(o,{reviver:t,signal:n}),tl({backgroundImage:c,backgroundColor:u,overlayImage:d,overlayColor:g,clipPath:p},{signal:n})]).then(y=>{let[S,w]=y;return this.clear(),this.add(...S),this.set(s),this.set(w),this.renderOnAddRemove=v,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=mr(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:o=!1}=e,c=s*(o?this.getRetinaScaling():1);return cm(this.toCanvasElement(c,e),t,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:o=!1}=e,c=s*(o?this.getRetinaScaling():1);return um(this.toCanvasElement(c,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:s,top:o,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,d=(n||this.height)*e,g=this.getZoom(),p=this.width,v=this.height,y=this.skipControlsDrawing,S=g*e,w=this.viewportTransform,C=[S,0,0,S,(w[4]-(s||0))*e,(w[5]-(o||0))*e],_=this.enableRetinaScaling,T=mr({width:u,height:d}),R=c?this._objects.filter(I=>c(I)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=C,this.width=u,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(T.getContext("2d"),R),this.viewportTransform=w,this.width=p,this.height=v,this.calcViewportBoundaries(),this.enableRetinaScaling=_,this.skipControlsDrawing=y,T}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Ba.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}b(zs,"ownDefaults",bS);const OS=["touchstart","touchmove","touchend"],DS=a=>{const e=pm(a.target),t=function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n}(a);return new L(t.clientX+e.left,t.clientY+e.top)},Mu=a=>OS.includes(a.type)||a.pointerType==="touch",ju=a=>{a.preventDefault(),a.stopPropagation()},Mr=a=>{let e=0,t=0,n=0,s=0;for(let o=0,c=a.length;o<c;o++){const{x:u,y:d}=a[o];(u>n||!o)&&(n=u),(u<e||!o)&&(e=u),(d>s||!o)&&(s=d),(d<t||!o)&&(t=d)}return{left:e,top:t,width:n-e,height:s-t}},PS=["translateX","translateY","scaleX","scaleY"],MS=(a,e)=>Wa(a,it(e,a.calcOwnMatrix())),Wa=(a,e)=>{const t=za(e),{translateX:n,translateY:s,scaleX:o,scaleY:c}=t,u=Fe(t,PS),d=new L(n,s);a.flipX=!1,a.flipY=!1,Object.assign(a,u),a.set({scaleX:o,scaleY:c}),a.setPositionByOrigin(d,fe,fe)},jS=a=>{a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},xm=a=>({scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}),ah=(a,e,t)=>{const n=a/2,s=e/2,o=[new L(-n,-s),new L(n,-s),new L(-n,s),new L(n,s)].map(u=>u.transform(t)),c=Mr(o);return new L(c.width,c.height)},rl=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gt;return it(rr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt),a)},Ci=function(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gt;return a.transform(rl(e,t))},RS=function(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gt;return a.transform(rl(e,t),!0)},FS=(a,e,t)=>{const n=rl(e,t);return Wa(a,it(n,a.calcOwnMatrix())),n},wm=(a,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(a),D(D({},e),{},{target:n})),n.fire(a,e)},LS={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ke=a=>typeof a=="string"?LS[a]:a-.5,Va="not-allowed";function Sm(a){return Ke(a.originX)===Ke(fe)&&Ke(a.originY)===Ke(fe)}function Qg(a){return .5-Ke(a)}const ir=(a,e)=>a[e],Cm=(a,e,t,n)=>({e:a,transform:e,pointer:new L(t,n)});function _m(a,e){const t=a.getTotalAngle()+Rn(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function lh(a,e,t,n,s){var o;let{target:c,corner:u}=a;const d=c.controls[u],g=((o=c.canvas)===null||o===void 0?void 0:o.getZoom())||1,p=c.padding/g,v=function(y,S,w,C){const _=y.getRelativeCenterPoint(),T=w!==void 0&&C!==void 0?y.translateToGivenOrigin(_,fe,fe,w,C):new L(y.left,y.top);return(y.angle?S.rotate(-Xe(y.angle),_):S).subtract(T)}(c,new L(n,s),e,t);return v.x>=p&&(v.x-=p),v.x<=-p&&(v.x+=p),v.y>=p&&(v.y-=p),v.y<=p&&(v.y+=p),v.x-=d.offsetX,v.y-=d.offsetY,v}const IS=(a,e,t,n)=>{const{target:s,offsetX:o,offsetY:c}=e,u=t-o,d=n-c,g=!ir(s,"lockMovementX")&&s.left!==u,p=!ir(s,"lockMovementY")&&s.top!==d;return g&&s.set(Te,u),p&&s.set(_t,d),(g||p)&&wm(im,Cm(a,e,t,n)),g||p};class Am{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):At,o=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=this.opacity!==void 0?this.opacity:"1",p=this.visible?"":" visibility: hidden;",v=e?"":this.getSvgFilter(),y=Ps(Je,this.fill);return[Ps(Tt,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",d,"; ",y,"fill-rule: ",t,"; ","opacity: ",g,";",v,p].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Ua(n));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=e.indexOf("COMMON_PARTS");return e[o]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:s,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=s?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",p=d&&d.absolutePositioned,v=this.stroke,y=this.fill,S=this.shadow,w=[],C=e.indexOf("COMMON_PARTS");let _;d&&(d.clipPathId="CLIPPATH_".concat(un()),_='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(n),`</clipPath>
`)),p&&w.push("<g ",u,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),p?"":u+this.getSvgCommons(),` >
`);const T=[c,g,t?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return e[C]=T,Vt(y)&&w.push(y.toSVG(this)),Vt(v)&&w.push(v.toSVG(this)),S&&w.push(S.toSVG(this)),d&&w.push(_),w.push(e.join("")),w.push(`</g>
`),p&&w.push(`</g>
`),n?n(w.join("")):w.join("")}addPaintOrder(){return this.paintFirst!==Je?' paint-order="'.concat(this.paintFirst,'" '):""}}function nl(a){return new RegExp("^("+a.join("|")+")\\b","i")}var qg;const Fn=String.raw(qg||(qg=dn(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),NS=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Fn+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Fn+"))?\\s+(.*)"),BS={cx:Te,x:Te,r:"radius",cy:_t,y:_t,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},pu="font-size",mu="clip-path";nl(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);nl(["symbol","image","marker","pattern","view","svg"]);const Jg=nl(["symbol","g","a","svg","clipPath","defs"]),zS=new L(1,0),Tm=new L,km=(a,e)=>a.rotate(e),Ru=(a,e)=>new L(e).subtract(a),Fu=a=>a.distanceFrom(Tm),Lu=(a,e)=>Math.atan2(Ts(a,e),WS(a,e)),US=a=>Lu(zS,a),ch=a=>a.eq(Tm)?a:a.scalarDivide(Fu(a)),Em=function(a){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return ch(new L(-a.y,a.x).scalarMultiply(e?1:-1))},Ts=(a,e)=>a.x*e.y-a.y*e.x,WS=(a,e)=>a.x*e.x+a.y*e.y,Zg=(a,e,t)=>{if(a.eq(e)||a.eq(t))return!0;const n=Ts(e,t),s=Ts(e,a),o=Ts(t,a);return n>=0?s>=0&&o<=0:!(s<=0&&o>=0)},$g="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",ep=new RegExp("(?:\\s|^)"+$g+$g+"("+Fn+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class jr{constructor(e){const t=typeof e=="string"?jr.parseShadow(e):e;Object.assign(this,jr.ownDefaults,t),this.id=un()}static parseShadow(e){const t=e.trim(),[,n=0,s=0,o=0]=(ep.exec(t)||[]).map(c=>parseFloat(c)||0);return{color:(t.replace(ep,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=km(new L(this.offsetX,this.offsetY),Xe(-e.angle)),n=new be(this.color);let s=40,o=40;return e.width&&e.height&&(s=100*Be((Math.abs(t.x)+this.blur)/e.width,xe.NUM_FRACTION_DIGITS)+20,o=100*Be((Math.abs(t.y)+this.blur)/e.height,xe.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Be(this.blur?this.blur/2:0,xe.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Be(t.x,xe.NUM_FRACTION_DIGITS),'" dy="').concat(Be(t.y,xe.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=jr.ownDefaults;return this.includeDefaultValues?e:oh(e,(n,s)=>n!==t[s])}static async fromObject(e){return new this(e)}}b(jr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),b(jr,"type","shadow"),Z.setClass(jr,"shadow");const Ai=(a,e,t)=>Math.max(a,Math.min(e,t)),VS=[_t,Te,kt,Ht,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Oi,Di],Ir=[Je,Tt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],HS={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Te,originY:_t,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Je,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},YS=(a,e,t,n)=>-t*Math.cos(a/n*Is)+t+e,XS=()=>!1;class uh{constructor(e){let{startValue:t,byValue:n,duration:s=500,delay:o=0,easing:c=YS,onStart:u=ba,onChange:d=ba,onComplete:g=ba,abort:p=XS,target:v}=e;b(this,"_state","pending"),b(this,"durationProgress",0),b(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=o,this.easing=c,this._onStart=u,this._onChange=d,this._onComplete=g,this._abort=p,this.target=v,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Da(e),this.delay):Da(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:o}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Da(this.tick)))}register(){Ba.push(this)}unregister(){Ba.remove(this)}abort(){this._state="aborted",this.unregister()}}const GS=["startValue","endValue"];class KS extends uh{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(D(D({},Fe(e,GS)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const QS=["startValue","endValue"];class qS extends uh{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(D(D({},Fe(e,QS)),{},{startValue:t,byValue:n.map((s,o)=>s-t[o])}))}calculate(e){const t=this.startValue.map((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const JS=["startValue","endValue","easing","onChange","onComplete","abort"],ZS=(a,e,t,n)=>e+t*(1-Math.cos(a/n*Is)),vu=a=>a&&((e,t,n)=>a(new be(e).toRgba(),t,n));class $S extends uh{constructor(e){let{startValue:t,endValue:n,easing:s=ZS,onChange:o,onComplete:c,abort:u}=e,d=Fe(e,JS);const g=new be(t).getSource(),p=new be(n).getSource();super(D(D({},d),{},{startValue:g,byValue:p.map((v,y)=>v-g[y]),easing:s,onChange:vu(o),onComplete:vu(c),abort:vu(u)}))}calculate(e){const[t,n,s,o]=this.startValue.map((u,d)=>this.easing(e,u,this.byValue[d],this.duration,d)),c=[...[t,n,s].map(Math.round),Ai(0,o,1)];return{value:c,valueProgress:c.map((u,d)=>this.byValue[d]!==0?Math.abs((u-this.startValue[d])/this.byValue[d]):0).find(u=>u!==0)||0}}}function bm(a){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(a)?new qS(a):new KS(a);return e.start(),e}function eC(a){const e=new $S(a);return e.start(),e}class Ne{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const o=Ru(t,n),c=Ru(t,e).divide(o);return s?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(e,t){const n=new L(e).setX(Math.min(e.x-1,...t.map(o=>o.x)));let s=0;for(let o=0;o<t.length;o++){const c=this.intersectSegmentSegment(t[o],t[(o+1)%t.length],e,n);if(c.includes(e))return!0;s+=+(c.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,n,s){let o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,d=t.y-e.y,g=s.x-n.x,p=s.y-n.y,v=e.x-n.x,y=e.y-n.y,S=g*y-p*v,w=u*y-d*v,C=p*u-g*d;if(C!==0){const _=S/C,T=w/C;return(o||0<=_&&_<=1)&&(c||0<=T&&T<=1)?new Ne("Intersection").append(new L(e.x+_*u,e.y+_*d)):new Ne}if(S===0||w===0){const _=o||c||Ne.isPointContained(e,n,s)||Ne.isPointContained(t,n,s)||Ne.isPointContained(n,e,t)||Ne.isPointContained(s,e,t);return new Ne(_?"Coincident":void 0)}return new Ne("Parallel")}static intersectSegmentLine(e,t,n,s){return Ne.intersectLineLine(e,t,n,s,!1,!0)}static intersectSegmentSegment(e,t,n,s){return Ne.intersectLineLine(e,t,n,s,!1,!1)}static intersectLinePolygon(e,t,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const o=new Ne,c=n.length;for(let u,d,g,p=0;p<c;p++){if(u=n[p],d=n[(p+1)%c],g=Ne.intersectLineLine(e,t,u,d,s,!1),g.status==="Coincident")return g;o.append(...g.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(e,t,n){return Ne.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new Ne,s=e.length,o=[];for(let c=0;c<s;c++){const u=e[c],d=e[(c+1)%s],g=Ne.intersectSegmentPolygon(u,d,t);g.status==="Coincident"?(o.push(g),n.append(u,d)):n.append(...g.points)}return o.length>0&&o.length===e.length?new Ne("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const s=t.min(n),o=t.max(n),c=new L(o.x,s.y),u=new L(s.x,o.y);return Ne.intersectPolygonPolygon(e,[s,c,o,u])}}class tC extends lm{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?St(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=St(e,rr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new L(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),o=[e,t,n,s];if(this.group){const c=this.group.calcTransformMatrix();return o.map(u=>St(u,c))}return o}intersectsWithRect(e,t){return Ne.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ne.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:s,width:o,height:c}=this.getBoundingRect();return n>=e.x&&n+o<=t.x&&s>=e.y&&s+c<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ne.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Mr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(kt,e),this._set(Ht,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Rn(hm(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||gt.concat()}calcACoords(){const e=Bs({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),s=Ns(t,n),o=it(s,e),c=this._getTransformedDimensions(),u=c.x/2,d=c.y/2;return{tl:St({x:-u,y:-d},o),tr:St({x:u,y:-d},o),bl:St({x:-u,y:d},o),br:St({x:u,y:d},o)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ke(this.originX),Ke(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((o,c)=>o===n[c])?s.value:(this.group&&(t=it(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=kS(s);return this.ownMatrixCache={key:e,value:o},o}_getNonTransformedDimensions(){return new L(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let s=n,o=0;this.strokeUniform&&(s=0,o=n);const c=t.width+s,u=t.height+s;let d;return d=t.skewX===0&&t.skewY===0?new L(c*t.scaleX,u*t.scaleY):ah(c,u,el(t)),d.scalarAdd(o)}translateToGivenOrigin(e,t,n,s,o){let c=e.x,u=e.y;const d=Ke(s)-Ke(t),g=Ke(o)-Ke(n);if(d||g){const p=this._getTransformedDimensions();c+=d*p.x,u+=g*p.y}return new L(c,u)}translateToCenterPoint(e,t,n){if(t===fe&&n===fe)return e;const s=this.translateToGivenOrigin(e,t,n,fe,fe);return this.angle?s.rotate(Xe(this.angle),e):s}translateToOriginPoint(e,t,n){const s=this.translateToGivenOrigin(e,fe,fe,t,n);return this.angle?s.rotate(Xe(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?St(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new L(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const s=this.translateToCenterPoint(e,t,n),o=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Te,_t)}}const rC=["type"],nC=["extraParam"];let kr=class Ma extends tC{static getDefaults(){return Ma.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){cn("warn","Setting type has no effect",e)}constructor(e){super(),b(this,"_cacheContext",null),Object.assign(this,Ma.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=or(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,s=xe.maxCacheSideLimit,o=xe.minCacheSideLimit;if(t<=s&&n<=s&&t*n<=xe.perfLimitSizeTotal)return t<o&&(e.width=o),n<o&&(e.height=o),e;const c=t/n,[u,d]=As.limitDimsByArea(c),g=Ai(o,u,s),p=Ai(o,d,s);return t>g&&(e.zoomX/=t/g,e.width=g,e.capped=!0),n>p&&(e.zoomY/=n/p,e.height=p,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:s,zoomX:o,zoomY:c,x:u,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),g=n!==e.width||s!==e.height,p=this.zoomX!==o||this.zoomY!==c;if(!e||!t)return!1;if(g||p){n!==e.width||s!==e.height?(e.width=n,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const v=u/2,y=d/2;return this.cacheTranslationX=Math.round(e.width/2-v)+v,this.cacheTranslationY=Math.round(e.height/2-y)+y,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(o,c),this.zoomX=o,this.zoomY=c,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new L(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=za(this.calcTransformMatrix());return new L(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==kt&&e!==Ht||(t=this._constrainScale(t)),e===kt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof jr||(t=new jr(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:o}=this,{width:c,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:o,width:c,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Tt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const s=this.fill,o=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=s,this.stroke=o}createClipPathLayer(e,t){const n=mr(t),s=n.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(o=>{o.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const o=rr(this.calcTransformMatrix());s.transform(o[0],o[1],o[2],o[3],o[4],o[5])}return e.transform(s),e.drawObject(s,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Vt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Vt(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[o,,,c]=(n==null?void 0:n.viewportTransform)||gt,u=o*s,d=c*s,g=t.nonScaling?new L(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*xe.browserShadowBlurConstant*(u+d)*(g.x+g.y)/4,e.shadowOffsetX=t.offsetX*u*g.x,e.shadowOffsetY=t.offsetY*d*g.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Vt(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,o=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,o):e.transform(1,0,0,1,s,o),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:o}}_renderPaintInOrder(e){this.paintFirst===Tt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),o=this.getCanvasRetinaScaling(),c=s.x/this.scaleX/o,u=s.y/this.scaleY/o,d=mr({width:Math.ceil(c),height:Math.ceil(u)}),g=d.getContext("2d");g&&(g.beginPath(),g.moveTo(0,0),g.lineTo(c,0),g.lineTo(c,u),g.lineTo(0,u),g.closePath(),g.translate(c/2,u/2),g.scale(s.zoomX/this.scaleX/o,s.zoomY/this.scaleY/o),this._applyPatternGradientTransform(g,t),g.fillStyle=t.toLive(e),g.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/s.zoomX,o*this.scaleY/s.zoomY),e.strokeStyle=(n=g.createPattern(d,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new L(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Z.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=xm(this),n=this.group,s=this.shadow,o=Math.abs,c=e.enableRetinaScaling?nm():1,u=(e.multiplier||1)*c,d=e.canvasProvider||(R=>new zs(R,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&jS(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&FS(this,this.getViewportTransform()),this.setCoords();const g=or(),p=this.getBoundingRect(),v=this.shadow,y=new L;if(v){const R=v.blur,I=v.nonScaling?new L(1,1):this.getObjectScaling();y.x=2*Math.round(o(v.offsetX)+R)*o(I.x),y.y=2*Math.round(o(v.offsetY)+R)*o(I.y)}const S=p.width+y.x,w=p.height+y.y;g.width=Math.ceil(S),g.height=Math.ceil(w);const C=d(g);e.format==="jpeg"&&(C.backgroundColor="#fff"),this.setPositionByOrigin(new L(C.width/2,C.height/2),fe,fe);const _=this.canvas;C._objects=[this],this.set("canvas",C),this.setCoords();const T=C.toCanvasElement(u||1,e);return this.set("canvas",_),this.shadow=s,n&&(this.group=n),this.set(t),this.setCoords(),C._objects=[],C.destroy(),T}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return cm(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return um(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:s}=this;if(t){const{x:o,y:c}=this.getRelativeCenterPoint();this.originX=fe,this.originY=fe,this.left=o,this.top=c}if(this.set("angle",e),t){const{x:o,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=o,this.top=c,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Ba.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&pr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,s)=>{let[o,c]=s;return n[o]=this._animate(o,c,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),o=this.constructor.colorProperties.includes(s[s.length-1]),{abort:c,startValue:u,onChange:d,onComplete:g}=n,p=D(D({},n),{},{target:this,startValue:u??s.reduce((v,y)=>v[y],this),endValue:t,abort:c==null?void 0:c.bind(this),onChange:(v,y,S)=>{s.reduce((w,C,_)=>(_===s.length-1&&(w[C]=v),w[C]),this),d&&d(v,y,S)},onComplete:(v,y,S)=>{this.setCoords(),g&&g(v,y,S)}});return o?eC(p):bm(p)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,o=0;o<t.length;o++){if(s=t[o],s===e)return{fork:[this,...t.slice(0,o)],otherFork:[],common:t.slice(o)};for(let c=0;c<n.length;c++){if(this===n[c])return{fork:[],otherFork:[e,...n.slice(0,c)],common:[this,...t]};if(s===n[c])return{fork:[this,...t.slice(0,o)],otherFork:[e,...n.slice(0,c)],common:t.slice(o)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const s=t.fork.pop(),o=t.otherFork.pop(),c=n._objects.indexOf(s),u=n._objects.indexOf(o);return c>-1&&c>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Ma.customProperties,this.constructor.customProperties||[]);let t;const n=xe.NUM_FRACTION_DIGITS,{clipPath:s,fill:o,stroke:c,shadow:u,strokeDashArray:d,left:g,top:p,originX:v,originY:y,width:S,height:w,strokeWidth:C,strokeLineCap:_,strokeDashOffset:T,strokeLineJoin:R,strokeUniform:I,strokeMiterLimit:B,scaleX:z,scaleY:G,angle:Q,flipX:K,flipY:ie,opacity:ce,visible:we,backgroundColor:Se,fillRule:he,paintFirst:me,globalCompositeOperation:je,skewX:ke,skewY:ve}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const Y=q=>Be(q,n),re=D(D({},Pi(this,e)),{},{type:this.constructor.type,version:Ou,originX:v,originY:y,left:Y(g),top:Y(p),width:Y(S),height:Y(w),fill:Xg(o)?o.toObject():o,stroke:Xg(c)?c.toObject():c,strokeWidth:Y(C),strokeDashArray:d&&d.concat(),strokeLineCap:_,strokeDashOffset:T,strokeLineJoin:R,strokeUniform:I,strokeMiterLimit:Y(B),scaleX:Y(z),scaleY:Y(G),angle:Y(Q),flipX:K,flipY:ie,opacity:Y(ce),shadow:u&&u.toObject(),visible:we,backgroundColor:Se,fillRule:he,paintFirst:me,globalCompositeOperation:je,skewX:Y(ke),skewY:Y(ve)},t?{clipPath:t}:null);return this.includeDefaultValues?re:this._removeDefaultValues(re)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return oh(e,(s,o)=>{if(o===Te||o===_t||o==="type")return!0;const c=n[o];return s!==c&&!(Array.isArray(s)&&Array.isArray(c)&&s.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Fe(e,rC),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,o=Fe(n,nC);return tl(t,o).then(c=>s?(delete c[s],new this(t[s],c)):new this(c))}static fromObject(e,t){return this._fromObject(e,t)}};b(kr,"stateProperties",VS),b(kr,"cacheProperties",Ir),b(kr,"ownDefaults",HS),b(kr,"type","FabricObject"),b(kr,"colorProperties",[Je,Tt,"backgroundColor"]),b(kr,"customProperties",[]),Z.setClass(kr),Z.setClass(kr,"object");const Mi=(a,e,t)=>(n,s,o,c)=>{const u=e(n,s,o,c);return u&&wm(a,D(D({},Cm(n,s,o,c)),t)),u};function ji(a){return(e,t,n,s)=>{const{target:o,originX:c,originY:u}=t,d=o.getRelativeCenterPoint(),g=o.translateToOriginPoint(d,c,u),p=a(e,t,n,s);return o.setPositionByOrigin(g,t.originX,t.originY),p}}const tp=Mi(Os,ji((a,e,t,n)=>{const s=lh(e,e.originX,e.originY,t,n);if(Ke(e.originX)===Ke(fe)||Ke(e.originX)===Ke(Ye)&&s.x<0||Ke(e.originX)===Ke(Te)&&s.x>0){const{target:o}=e,c=o.strokeWidth/(o.strokeUniform?o.scaleX:1),u=Sm(e)?2:1,d=o.width,g=Math.abs(s.x*u/o.scaleX)-c;return o.set("width",Math.max(g,1)),d!==o.width}return!1}));function iC(a,e,t,n,s){n=n||{};const o=this.sizeX||n.cornerSize||s.cornerSize,c=this.sizeY||n.cornerSize||s.cornerSize,u=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,d=u?Tt:Je,g=!u&&(n.cornerStrokeColor||s.cornerStrokeColor);let p,v=e,y=t;a.save(),a.fillStyle=n.cornerColor||s.cornerColor||"",a.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",o>c?(p=o,a.scale(1,c/o),y=t*o/c):c>o?(p=c,a.scale(o/c,1),v=e*c/o):p=o,a.beginPath(),a.arc(v,y,p/2,0,La,!1),a[d](),g&&a.stroke(),a.restore()}function sC(a,e,t,n,s){n=n||{};const o=this.sizeX||n.cornerSize||s.cornerSize,c=this.sizeY||n.cornerSize||s.cornerSize,u=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,d=u?Tt:Je,g=!u&&(n.cornerStrokeColor||s.cornerStrokeColor),p=o/2,v=c/2;a.save(),a.fillStyle=n.cornerColor||s.cornerColor||"",a.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",a.translate(e,t);const y=s.getTotalAngle();a.rotate(Xe(y)),a["".concat(d,"Rect")](-p,-v,o,c),g&&a.strokeRect(-p,-v,o,c),a.restore()}class $t{constructor(e){b(this,"visible",!0),b(this,"actionName",$a),b(this,"angle",0),b(this,"x",0),b(this,"y",0),b(this,"offsetX",0),b(this,"offsetY",0),b(this,"sizeX",0),b(this,"sizeY",0),b(this,"touchSizeX",0),b(this,"touchSizeY",0),b(this,"cursorStyle","crosshair"),b(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,s){var o;let{tl:c,tr:u,br:d,bl:g}=s;return((o=t.canvas)===null||o===void 0?void 0:o.getActiveObject())===t&&t.isControlVisible(e)&&Ne.isPointInPolygon(n,[c,u,d,g])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,s){return new L(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,s,o,c){const u=ih([Ns(n,s),Bs({angle:e}),sh((o?this.touchSizeX:this.sizeX)||t,(o?this.touchSizeY:this.sizeY)||t)]);return{tl:new L(-.5,-.5).transform(u),tr:new L(.5,-.5).transform(u),br:new L(.5,.5).transform(u),bl:new L(-.5,.5).transform(u)}}render(e,t,n,s,o){((s=s||{}).cornerStyle||o.cornerStyle)==="circle"?iC.call(this,e,t,n,s,o):sC.call(this,e,t,n,s,o)}}const oC=(a,e,t)=>t.lockRotation?Va:e.cursorStyle,aC=Mi(sm,ji((a,e,t,n)=>{let{target:s,ex:o,ey:c,theta:u,originX:d,originY:g}=e;const p=s.translateToOriginPoint(s.getRelativeCenterPoint(),d,g);if(ir(s,"lockRotation"))return!1;const v=Math.atan2(c-p.y,o-p.x),y=Math.atan2(n-p.y,t-p.x);let S=Rn(y-v+u);if(s.snapAngle&&s.snapAngle>0){const C=s.snapAngle,_=s.snapThreshold||C,T=Math.ceil(S/C)*C,R=Math.floor(S/C)*C;Math.abs(S-R)<_?S=R:Math.abs(S-T)<_&&(S=T)}S<0&&(S=360+S),S%=360;const w=s.angle!==S;return s.angle=S,w}));function Om(a,e){const t=e.canvas,n=a[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function Dm(a,e,t){const n=ir(a,"lockScalingX"),s=ir(a,"lockScalingY");if(n&&s||!e&&(n||s)&&t||n&&e==="x"||s&&e==="y")return!0;const{width:o,height:c,strokeWidth:u}=a;return o===0&&u===0&&e!=="y"||c===0&&u===0&&e!=="x"}const lC=["e","se","s","sw","w","nw","n","ne","e"],_s=(a,e,t)=>{const n=Om(a,t);if(Dm(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return Va;const s=_m(t,e);return"".concat(lC[s],"-resize")};function hh(a,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=e.target,c=s.by,u=Om(a,o);let d,g,p,v,y,S;if(Dm(o,c,u))return!1;if(e.gestureScale)g=e.scaleX*e.gestureScale,p=e.scaleY*e.gestureScale;else{if(d=lh(e,e.originX,e.originY,t,n),y=c!=="y"?Math.sign(d.x||e.signX||1):1,S=c!=="x"?Math.sign(d.y||e.signY||1):1,e.signX||(e.signX=y),e.signY||(e.signY=S),ir(o,"lockScalingFlip")&&(e.signX!==y||e.signY!==S))return!1;if(v=o._getTransformedDimensions(),u&&!c){const _=Math.abs(d.x)+Math.abs(d.y),{original:T}=e,R=_/(Math.abs(v.x*T.scaleX/o.scaleX)+Math.abs(v.y*T.scaleY/o.scaleY));g=T.scaleX*R,p=T.scaleY*R}else g=Math.abs(d.x*o.scaleX/v.x),p=Math.abs(d.y*o.scaleY/v.y);Sm(e)&&(g*=2,p*=2),e.signX!==y&&c!=="y"&&(e.originX=Qg(e.originX),g*=-1,e.signX=y),e.signY!==S&&c!=="x"&&(e.originY=Qg(e.originY),p*=-1,e.signY=S)}const w=o.scaleX,C=o.scaleY;return c?(c==="x"&&o.set(kt,g),c==="y"&&o.set(Ht,p)):(!ir(o,"lockScalingX")&&o.set(kt,g),!ir(o,"lockScalingY")&&o.set(Ht,p)),w!==o.scaleX||C!==o.scaleY}const ta=Mi(Za,ji((a,e,t,n)=>hh(a,e,t,n))),cC=Mi(Za,ji((a,e,t,n)=>hh(a,e,t,n,{by:"x"}))),uC=Mi(Za,ji((a,e,t,n)=>hh(a,e,t,n,{by:"y"}))),hC=["target","ex","ey","skewingSide"],yu={x:{counterAxis:"y",scale:kt,skew:Oi,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Ht,skew:Di,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},dC=["ns","nesw","ew","nwse"],fC=(a,e,t)=>{if(e.x!==0&&ir(t,"lockSkewingY")||e.y!==0&&ir(t,"lockSkewingX"))return Va;const n=_m(t,e)%4;return"".concat(dC[n],"-resize")};function Pm(a,e,t,n,s){const{target:o}=t,{counterAxis:c,origin:u,lockSkewing:d,skew:g,flip:p}=yu[a];if(ir(o,d))return!1;const{origin:v,flip:y}=yu[c],S=Ke(t[v])*(o[y]?-1:1),w=-Math.sign(S)*(o[p]?-1:1),C=.5*-((o[g]===0&&lh(t,fe,fe,n,s)[a]>0||o[g]>0?1:-1)*w)+.5;return Mi(om,ji((T,R,I,B)=>function(z,G,Q){let{target:K,ex:ie,ey:ce,skewingSide:we}=G,Se=Fe(G,hC);const{skew:he}=yu[z],me=Q.subtract(new L(ie,ce)).divide(new L(K.scaleX,K.scaleY))[z],je=K[he],ke=Se[he],ve=Math.tan(Xe(ke)),Y=z==="y"?K._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:K._getTransformedDimensions({scaleX:1,scaleY:1}).y,re=2*me*we/Math.max(Y,1)+ve,q=Rn(Math.atan(re));K.set(he,q);const P=je!==K[he];if(P&&z==="y"){const{skewX:U,scaleX:ue}=K,le=K._getTransformedDimensions({skewY:je}),pe=K._getTransformedDimensions(),de=U!==0?le.x/pe.x:1;de!==1&&K.set(kt,de*ue)}return P}(a,R,new L(I,B))))(e,D(D({},t),{},{[u]:C,skewingSide:w}),n,s)}const gC=(a,e,t,n)=>Pm("x",a,e,t,n),pC=(a,e,t,n)=>Pm("y",a,e,t,n);function il(a,e){return a[e.canvas.altActionKey]}const ra=(a,e,t)=>{const n=il(a,t);return e.x===0?n?Oi:Ht:e.y===0?n?Di:kt:""},yi=(a,e,t)=>il(a,t)?fC(0,e,t):_s(a,e,t),rp=(a,e,t,n)=>il(a,e.target)?pC(a,e,t,n):cC(a,e,t,n),np=(a,e,t,n)=>il(a,e.target)?gC(a,e,t,n):uC(a,e,t,n),Mm=()=>({ml:new $t({x:-.5,y:0,cursorStyleHandler:yi,actionHandler:rp,getActionName:ra}),mr:new $t({x:.5,y:0,cursorStyleHandler:yi,actionHandler:rp,getActionName:ra}),mb:new $t({x:0,y:.5,cursorStyleHandler:yi,actionHandler:np,getActionName:ra}),mt:new $t({x:0,y:-.5,cursorStyleHandler:yi,actionHandler:np,getActionName:ra}),tl:new $t({x:-.5,y:-.5,cursorStyleHandler:_s,actionHandler:ta}),tr:new $t({x:.5,y:-.5,cursorStyleHandler:_s,actionHandler:ta}),bl:new $t({x:-.5,y:.5,cursorStyleHandler:_s,actionHandler:ta}),br:new $t({x:.5,y:.5,cursorStyleHandler:_s,actionHandler:ta}),mtr:new $t({x:0,y:-.5,actionHandler:aC,cursorStyleHandler:oC,offsetY:-40,withConnection:!0,actionName:rh})}),mC=()=>({mr:new $t({x:.5,y:0,actionHandler:tp,cursorStyleHandler:yi,actionName:Os}),ml:new $t({x:-.5,y:0,actionHandler:tp,cursorStyleHandler:yi,actionName:Os})}),vC=()=>D(D({},Mm()),mC());class Ms extends kr{static getDefaults(){return D(D({},super.getDefaults()),Ms.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ms.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Mm()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,s=t.action;if(this===n&&s&&s.startsWith($a))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[o,c]=n[s],u=this.controls[o];if(u.shouldActivate(o,this,e,t?c.touchCorner:c.corner))return this.__corner=o,{key:o,control:u,coord:this.oCoords[o]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=Ns(t.x,t.y),s=Bs({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=it(n,s),c=it(e,o),u=it(c,[1/e[0],0,0,1/e[3],0,0]),d=this.group?za(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const g=this._calculateCurrentDimensions(d),p={};return this.forEachControl((v,y)=>{const S=v.positionHandler(g,u,this,v);p[y]=Object.assign(S,this._calcCornerCoords(v,S))}),p}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Xe(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=D({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,o=D({hasBorders:n,hasControls:s},t),c=this.getViewportTransform(),u=o.hasBorders,d=o.hasControls,g=it(c,this.calcTransformMatrix()),p=za(g);e.save(),e.translate(p.translateX,p.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(p.angle-=180),e.rotate(Xe(this.group?p.angle:this.angle)),u&&this.drawBorders(e,p,t),d&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let s;if(n&&n.forActiveSelection||this.group){const o=ah(this.width,this.height,el(t)),c=this.isStrokeAccountedForInDimensions()?nh:(this.strokeUniform?new L().scalarAdd(this.canvas?this.canvas.getZoom():1):new L(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=o.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((s,o)=>{s.withConnection&&s.getVisibility(this,o)&&(n=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:o,cornerColor:c}=this,u=D({cornerStrokeColor:s,cornerDashArray:o,cornerColor:c},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((d,g)=>{if(d.getVisibility(this,g)){const p=this.oCoords[g];d.render(e,p.x,p.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,s]=t;return this.setControlVisible(n,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const s=this.width+4,o=this.height+4;return t.clearRect(-s/2,-o/2,s,o),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function jm(a,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(a.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),a}b(Ms,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ct extends Ms{}jm(ct,[Am]),Z.setClass(ct),Z.setClass(ct,"object");const yC=(a,e,t,n)=>{const s=2*(n=Math.round(n))+1,{data:o}=a.getImageData(e-n,t-n,s,s);for(let c=3;c<o.length;c+=4)if(o[c]>0)return!1;return!0};class Rm{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new L(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new L(1/this.options.scaleX,1/this.options.scaleY):new L(1,1)}createSideVector(e,t){const n=Ru(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new L(e);return t.y+=t.x*Math.tan(Xe(this.options.skewY)),t.x+=t.y*Math.tan(Xe(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const xC=new L;class _i extends Rm{static getOrthogonalRotationFactor(e,t){const n=t?Lu(e,t):US(e);return Math.abs(n)<Is?-1:1}constructor(e,t,n,s){super(s),b(this,"AB",void 0),b(this,"AC",void 0),b(this,"alpha",void 0),b(this,"bisector",void 0),this.A=new L(e),this.B=new L(t),this.C=new L(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Lu(this.AB,this.AC),this.bisector=ch(km(this.AB.eq(xC)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),o=Em(s),c=_i.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*c)}projectBevel(){const e=[];return(this.alpha%La==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?Fu(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Fu(s)/this.strokeProjectionMagnitude<=o&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],s=new L(_i.getOrthogonalRotationFactor(this.bisector),_i.getOrthogonalRotationFactor(new L(this.bisector.y,this.bisector.x)));return[new L(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new L(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(o=>{Zg(o,e,t)&&n.push(this.A.add(o))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:s,skewY:o,scaleX:c,scaleY:u,strokeUniform:d}=this.options,g=new L(Math.tan(Xe(s)),Math.tan(Xe(o))),p=this.strokeProjectionMagnitude,v=d?p/u/Math.sqrt(1/u**2+1/c**2*g.y**2):p/Math.sqrt(1+g.y**2),y=new L(Math.sqrt(Math.max(p**2-v**2,0)),v),S=d?p/Math.sqrt(1+g.x**2*(1/u)**2/(1/c+1/c*g.x*g.y)**2):p/Math.sqrt(1+g.x**2/(1+g.x*g.y)**2),w=new L(S,Math.sqrt(Math.max(p**2-S**2,0)));return[w,w.scalarMultiply(-1),y,y.scalarMultiply(-1)].map(C=>this.applySkew(d?C.multiply(this.strokeUniformScalar):C)).forEach(C=>{Zg(C,e,t)&&n.push(this.applySkew(this.A).add(C))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%La==0,n=this.applySkew(this.A),s=e[t?0:2].subtract(n),o=e[t?1:0].subtract(n),c=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=Ts(s,c)>0,d=u?s:o,g=u?o:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(d,g)):e.push(...this.projectRoundNoSkew(d,g)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class ip extends Rm{constructor(e,t,n){super(n),this.A=new L(e),this.T=new L(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(Em(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new L(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new _i(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new L(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(ch(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const wC=function(a,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(a.length===0)return n;const s=a.reduce((o,c)=>(o[o.length-1].eq(c)||o.push(new L(c)),o),[new L(a[0])]);if(s.length===1)t=!0;else if(!t){const o=s[0],c=((u,d)=>{for(let g=u.length-1;g>=0;g--)if(d(u[g],g,u))return g;return-1})(s,u=>!u.eq(o));s.splice(c+1)}return s.forEach((o,c,u)=>{let d,g;c===0?(g=u[1],d=t?o:u[u.length-1]):c===u.length-1?(d=u[c-1],g=t?o:u[0]):(d=u[c-1],g=u[c+1]),t&&u.length===1?n.push(...new ip(o,o,e).project()):!t||c!==0&&c!==u.length-1?n.push(...new _i(o,d,g,e).project()):n.push(...new ip(o,c===0?g:d,e).project())}),n},dh=a=>{const e={};return Object.keys(a).forEach(t=>{e[t]={},Object.keys(a[t]).forEach(n=>{e[t][n]=D({},a[t][n])})}),e},SC=a=>a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fh=a=>{const e=[];for(let t,n=0;n<a.length;n++)(t=CC(a,n))!==!1&&e.push(t);return e},CC=(a,e)=>{const t=a.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return a.charAt(e);if(55296<=t&&t<=56319){if(a.length<=e+1)throw"High surrogate without following low surrogate";const s=a.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return a.charAt(e)+a.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=a.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},gh=function(a,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return a.fill!==e.fill||a.stroke!==e.stroke||a.strokeWidth!==e.strokeWidth||a.fontSize!==e.fontSize||a.fontFamily!==e.fontFamily||a.fontWeight!==e.fontWeight||a.fontStyle!==e.fontStyle||a.textBackgroundColor!==e.textBackgroundColor||a.deltaY!==e.deltaY||t&&(a.overline!==e.overline||a.underline!==e.underline||a.linethrough!==e.linethrough)},_C=(a,e)=>{const t=e.split(`
`),n=[];let s=-1,o={};a=dh(a);for(let c=0;c<t.length;c++){const u=fh(t[c]);if(a[c])for(let d=0;d<u.length;d++){s++;const g=a[c][d];g&&Object.keys(g).length>0&&(gh(o,g,!0)?n.push({start:s,end:s+1,style:g}):n[n.length-1].end++),o=g||{}}else s+=u.length,o={}}return n},AC=(a,e)=>{if(!Array.isArray(a))return dh(a);const t=e.split(th),n={};let s=-1,o=0;for(let c=0;c<t.length;c++){const u=fh(t[c]);for(let d=0;d<u.length;d++)s++,a[o]&&a[o].start<=s&&s<a[o].end&&(n[c]=n[c]||{},n[c][d]=D({},a[o].style),s===a[o].end-1&&o++)}return n},fn=["display","transform",Je,"fill-opacity","fill-rule","opacity",Tt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function sp(a,e){const t=a.nodeName,n=a.getAttribute("class"),s=a.getAttribute("id"),o="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+t,"i"),e=e.replace(c,""),s&&e.length&&(c=new RegExp("#"+s+o,"i"),e=e.replace(c,"")),n&&e.length){const u=n.split(" ");for(let d=u.length;d--;)c=new RegExp("\\."+u[d]+o,"i"),e=e.replace(c,"")}return e.length===0}function TC(a,e){let t=!0;const n=sp(a,e.pop());return n&&e.length&&(t=function(s,o){let c,u=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&o.length;)u&&(c=o.pop()),u=sp(s=s.parentElement,c);return o.length===0}(a,e)),n&&t&&e.length===0}const kC=a=>{var e;return(e=BS[a])!==null&&e!==void 0?e:a},EC=new RegExp("(".concat(Fn,")"),"gi"),bC=a=>a.replace(EC," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var op,ap,lp,cp,up,hp,dp;const ft="(".concat(Fn,")"),OC=String.raw(op||(op=dn(["(skewX)(",")"],["(skewX)\\(","\\)"])),ft),DC=String.raw(ap||(ap=dn(["(skewY)(",")"],["(skewY)\\(","\\)"])),ft),PC=String.raw(lp||(lp=dn(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),ft,ft,ft),MC=String.raw(cp||(cp=dn(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),ft,ft),jC=String.raw(up||(up=dn(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),ft,ft),RC=String.raw(hp||(hp=dn(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),ft,ft,ft,ft,ft,ft),ph="(?:".concat(RC,"|").concat(jC,"|").concat(PC,"|").concat(MC,"|").concat(OC,"|").concat(DC,")"),FC="(?:".concat(ph,"*)"),LC=String.raw(dp||(dp=dn(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),FC),IC=new RegExp(LC),NC=new RegExp(ph),BC=new RegExp(ph,"g");function Iu(a){const e=[];if(!(a=bC(a).replace(/\s*([()])\s*/gi,"$1"))||a&&!IC.test(a))return[...gt];for(const t of a.matchAll(BC)){const n=NC.exec(t[0]);if(!n)continue;let s=gt;const o=n.filter(w=>!!w),[,c,...u]=o,[d,g,p,v,y,S]=u.map(w=>parseFloat(w));switch(c){case"translate":s=Ns(d,g);break;case rh:s=Bs({angle:d},{x:g,y:p});break;case $a:s=sh(d,g);break;case Oi:s=fm(d);break;case Di:s=gm(d);break;case"matrix":s=[d,g,p,v,y,S]}e.push(s)}return ih(e)}function zC(a,e,t,n){const s=Array.isArray(e);let o,c=e;if(a!==Je&&a!==Tt||e!==At){if(a==="strokeUniform")return e==="non-scaling-stroke";if(a==="strokeDashArray")c=e===At?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(a==="transformMatrix")c=t&&t.transformMatrix?it(t.transformMatrix,Iu(e)):Iu(e);else if(a==="visible")c=e!==At&&e!=="hidden",t&&t.visible===!1&&(c=!1);else if(a==="opacity")c=parseFloat(e),t&&t.opacity!==void 0&&(c*=t.opacity);else if(a==="textAnchor")c=e==="start"?Te:e==="end"?Ye:fe;else if(a==="charSpacing")o=Si(e,n)/n*1e3;else if(a==="paintFirst"){const u=e.indexOf(Je),d=e.indexOf(Tt);c=Je,(u>-1&&d>-1&&d<u||u===-1&&d>-1)&&(c=Tt)}else{if(a==="href"||a==="xlink:href"||a==="font"||a==="id")return e;if(a==="imageSmoothing")return e==="optimizeQuality";o=s?e.map(Si):Si(e,n)}}else c="";return!s&&isNaN(o)?c:o}function UC(a,e){const t=a.match(NS);if(!t)return;const n=t[1],s=t[3],o=t[4],c=t[5],u=t[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),o&&(e.fontSize=Si(o)),u&&(e.fontFamily=u),c&&(e.lineHeight=c==="normal"?1:c)}function WC(a,e){a.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,s]=t.split(":");e[n.trim().toLowerCase()]=s.trim()})}function VC(a){const e={},t=a.getAttribute("style");return t&&(typeof t=="string"?WC(t,e):function(n,s){Object.entries(n).forEach(o=>{let[c,u]=o;u!==void 0&&(s[c.toLowerCase()]=u)})}(t,e)),e}const HC={stroke:"strokeOpacity",fill:"fillOpacity"};function Nr(a,e,t){if(!a)return{};let n,s={},o=eh;a.parentNode&&Jg.test(a.parentNode.nodeName)&&(s=Nr(a.parentElement,e,t),s.fontSize&&(n=o=Si(s.fontSize)));const c=D(D(D({},e.reduce((g,p)=>{const v=a.getAttribute(p);return v&&(g[p]=v),g},{})),function(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(const y in p)TC(g,y.split(" "))&&(v=D(D({},v),p[y]));return v}(a,t)),VC(a));c[mu]&&a.setAttribute(mu,c[mu]),c[pu]&&(n=Si(c[pu],o),c[pu]="".concat(n));const u={};for(const g in c){const p=kC(g),v=zC(p,c[g],s,n);u[p]=v}u&&u.font&&UC(u.font,u);const d=D(D({},s),u);return Jg.test(a.nodeName)?d:function(g){const p=ct.getDefaults();return Object.entries(HC).forEach(v=>{let[y,S]=v;if(g[S]===void 0||g[y]==="")return;if(g[y]===void 0){if(!p[y])return;g[y]=p[y]}if(g[y].indexOf("url(")===0)return;const w=new be(g[y]);g[y]=w.setAlpha(Be(w.getAlpha()*g[S],2)).toRgba()}),g}(d)}const YC=["left","top","width","height","visible"],Fm=["rx","ry"];class dr extends ct{static getDefaults(){return D(D({},super.getDefaults()),dr.ownDefaults)}constructor(e){super(),Object.assign(this,dr.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,s=-t/2,o=-n/2,c=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,n/2):0,d=c!==0||u!==0;e.beginPath(),e.moveTo(s+c,o),e.lineTo(s+t-c,o),d&&e.bezierCurveTo(s+t-sn*c,o,s+t,o+sn*u,s+t,o+u),e.lineTo(s+t,o+n-u),d&&e.bezierCurveTo(s+t,o+n-sn*u,s+t-sn*c,o+n,s+t-c,o+n),e.lineTo(s+c,o+n),d&&e.bezierCurveTo(s+sn*c,o+n,s,o+n-sn*u,s,o+n-u),e.lineTo(s,o+u),d&&e.bezierCurveTo(s,o+sn*u,s+sn*c,o,s+c,o),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Fm,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const s=Nr(e,this.ATTRIBUTE_NAMES,n),{left:o=0,top:c=0,width:u=0,height:d=0,visible:g=!0}=s,p=Fe(s,YC);return new this(D(D(D({},t),p),{},{left:o,top:c,width:u,height:d,visible:!!(g&&u&&d)}))}}b(dr,"type","Rect"),b(dr,"cacheProperties",[...Ir,...Fm]),b(dr,"ownDefaults",{rx:0,ry:0}),b(dr,"ATTRIBUTE_NAMES",[...fn,"x","y","rx","ry","width","height"]),Z.setClass(dr),Z.setSVGClass(dr);const Or="initialization",Ha="added",mh="removed",Ya="imperative",Lm=(a,e)=>{const{strokeUniform:t,strokeWidth:n,width:s,height:o,group:c}=e,u=c&&c!==a?rl(c.calcTransformMatrix(),a.calcTransformMatrix()):null,d=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),g=!e.isStrokeAccountedForInDimensions(),p=t&&g?RS(new L(n,n),void 0,a.calcTransformMatrix()):nh,v=!t&&g?n:0,y=ah(s+v,o+v,ih([u,e.calcOwnMatrix()],!0)).add(p).scalarDivide(2);return[d.subtract(y),d.add(y)]};class sl{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:s}=e;return t===Or||t===Ya||!!n&&s!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==Or&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:s}=t;if(n===Ya&&t.overrides)return t.overrides;if(e.length===0)return;const{left:o,top:c,width:u,height:d}=Mr(e.map(v=>Lm(s,v)).reduce((v,y)=>v.concat(y),[])),g=new L(u,d),p=new L(o,c).add(g.scalarDivide(2));if(n===Or){const v=this.getInitialSize(t,{size:g,center:p});return{center:p,relativeCorrection:new L(0,0),size:v}}return{center:p.transform(s.calcOwnMatrix()),size:g}}}b(sl,"type","strategy");class Nu extends sl{shouldPerformLayout(e){return!0}}b(Nu,"type","fit-content"),Z.setClass(Nu);const XC=["strategy"],GC=["target","strategy","bubbles","prevStrategy"],Im="layoutManager";class js{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Nu;b(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=D(D({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[Na,im,Os,sm,Za,om,Ia,xS,wS].map(s=>e.on(s,o=>this.performLayout(s===Na?{type:"object_modified",trigger:s,e:o,target:n}:{type:"object_modifying",trigger:s,e:o,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:s}=t;if(n===Or||n===Ha?this.subscribeTargets(e):n===mh&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),n===Ya&&e.deep){const o=Fe(e,XC);t.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout(D(D({},o),{},{bubbles:!1,target:c})))}}getLayoutResult(e){const{target:t,strategy:n,type:s}=e,o=n.calcLayoutResult(e,t.getObjects());if(!o)return;const c=s===Or?new L:t.getRelativeCenterPoint(),{center:u,correction:d=new L,relativeCorrection:g=new L}=o,p=c.subtract(u).add(d).transform(s===Or?gt:rr(t.calcOwnMatrix()),!0).add(g);return{result:o,prevCenter:c,nextCenter:u,offset:p}}commitLayout(e,t){const{target:n}=e,{result:{size:s},nextCenter:o}=t;var c,u;n.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===Or?n.set({left:(c=e.x)!==null&&c!==void 0?c:o.x+s.x*Ke(n.originX),top:(u=e.y)!==null&&u!==void 0?u:o.y+s.y*Ke(n.originY)}):(n.setPositionByOrigin(o,fe,fe),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(s=>{s.group===n&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:s}=t;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,t){const{target:n,strategy:s,bubbles:o,prevStrategy:c}=e,u=Fe(e,GC),{canvas:d}=n;n.fire("layout:after",{context:e,result:t}),d&&d.fire("object:layout:after",{context:e,result:t,target:n});const g=n.parent;o&&g!=null&&g.layoutManager&&((u.path||(u.path=[])).push(n),g.layoutManager.performLayout(D(D({},u),{},{target:g}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:Im,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Z.setClass(js,Im);const KC=["type","objects","layoutManager"];class QC extends js{performLayout(){}}class jn extends am(ct){static getDefaults(){return D(D({},super.getDefaults()),jn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),b(this,"_activeObjects",[]),b(this,"__objectSelectionTracker",void 0),b(this,"__objectSelectionDisposer",void 0),Object.assign(this,jn.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new js,this.layoutManager.performLayout({type:Or,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(cn("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(cn("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,s)=>this.canEnterGroup(t)&&s.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(t),o=super.add(...s);return this._onAfterObjectsChange(Ha,s),o}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const o=this._filterObjectsBeforeEnteringGroup(n),c=super.insertAt(e,...o);return this._onAfterObjectsChange(Ha,o),c}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(mh,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const o=s.indexOf(n);o>-1&&(s.splice(o,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Wa(e,it(rr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Wa(e,it(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=ct.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let o=0;o<this._objects.length;o++){var s;const c=this._objects[o];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&c.group!==this?(e.save(),e.transform(...rr(this.calcTransformMatrix())),c.render(e),e.restore()):c.group===this&&c.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(D({target:this,type:Ya},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const o=s.includeDefaultValues;s.includeDefaultValues=n;const c=s[e||"toObject"](t);return s.includeDefaultValues=o,c})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return D(D(D({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=dr.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:s=[],layoutManager:o}=e,c=Fe(e,KC);return Promise.all([Ds(s,t),tl(c,t)]).then(u=>{let[d,g]=u;const p=new this(d,D(D(D({},c),g),{},{layoutManager:new QC}));if(o){const v=Z.getClass(o.type),y=Z.getClass(o.strategy);p.layoutManager=new v(new y)}else p.layoutManager=new js;return p.layoutManager.subscribeTargets({type:Or,target:p,targets:p.getObjects()}),p.setCoords(),p})}}b(jn,"type","Group"),b(jn,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Z.setClass(jn);const qC=(a,e)=>Math.min(e.width/a.width,e.height/a.height),JC=(a,e)=>Math.max(e.width/a.width,e.height/a.height),Bu="\\s*,?\\s*",Cs="".concat(Bu,"(").concat(Fn,")"),ZC="".concat(Cs).concat(Cs).concat(Cs).concat(Bu,"([01])").concat(Bu,"([01])").concat(Cs).concat(Cs),$C={m:"l",M:"L"},e_=(a,e,t,n,s,o,c,u,d,g,p)=>{const v=Rr(a),y=Fr(a),S=Rr(e),w=Fr(e),C=t*s*S-n*o*w+c,_=n*s*S+t*o*w+u;return["C",g+d*(-t*s*y-n*o*v),p+d*(-n*s*y+t*o*v),C+d*(t*s*w+n*o*S),_+d*(n*s*w-t*o*S),C,_]},fp=(a,e,t,n)=>{const s=Math.atan2(e,a),o=Math.atan2(n,t);return o>=s?o-s:2*Math.PI-(s-o)};function gp(a,e,t,n,s,o,c,u){let d;if(xe.cachesBoundsOfCurve&&(d=[...arguments].join(),As.boundsOfCurveCache[d]))return As.boundsOfCurveCache[d];const g=Math.sqrt,p=Math.abs,v=[],y=[[0,0],[0,0]];let S=6*a-12*t+6*s,w=-3*a+9*t-9*s+3*c,C=3*t-3*a;for(let B=0;B<2;++B){if(B>0&&(S=6*e-12*n+6*o,w=-3*e+9*n-9*o+3*u,C=3*n-3*e),p(w)<1e-12){if(p(S)<1e-12)continue;const ie=-C/S;0<ie&&ie<1&&v.push(ie);continue}const z=S*S-4*C*w;if(z<0)continue;const G=g(z),Q=(-S+G)/(2*w);0<Q&&Q<1&&v.push(Q);const K=(-S-G)/(2*w);0<K&&K<1&&v.push(K)}let _=v.length;const T=_,R=Nm(a,e,t,n,s,o,c,u);for(;_--;){const{x:B,y:z}=R(v[_]);y[0][_]=B,y[1][_]=z}y[0][T]=a,y[1][T]=e,y[0][T+1]=c,y[1][T+1]=u;const I=[new L(Math.min(...y[0]),Math.min(...y[1])),new L(Math.max(...y[0]),Math.max(...y[1]))];return xe.cachesBoundsOfCurve&&(As.boundsOfCurveCache[d]=I),I}const t_=(a,e,t)=>{let[n,s,o,c,u,d,g,p]=t;const v=((y,S,w,C,_,T,R)=>{if(w===0||C===0)return[];let I=0,B=0,z=0;const G=Math.PI,Q=R*$u,K=Fr(Q),ie=Rr(Q),ce=.5*(-ie*y-K*S),we=.5*(-ie*S+K*y),Se=w**2,he=C**2,me=we**2,je=ce**2,ke=Se*he-Se*me-he*je;let ve=Math.abs(w),Y=Math.abs(C);if(ke<0){const Ue=Math.sqrt(1-ke/(Se*he));ve*=Ue,Y*=Ue}else z=(_===T?-1:1)*Math.sqrt(ke/(Se*me+he*je));const re=z*ve*we/Y,q=-z*Y*ce/ve,P=ie*re-K*q+.5*y,U=K*re+ie*q+.5*S;let ue=fp(1,0,(ce-re)/ve,(we-q)/Y),le=fp((ce-re)/ve,(we-q)/Y,(-ce-re)/ve,(-we-q)/Y);T===0&&le>0?le-=2*G:T===1&&le<0&&(le+=2*G);const pe=Math.ceil(Math.abs(le/G*2)),de=[],Ce=le/pe,Ae=8/3*Math.sin(Ce/4)*Math.sin(Ce/4)/Math.sin(Ce/2);let Oe=ue+Ce;for(let Ue=0;Ue<pe;Ue++)de[Ue]=e_(ue,Oe,ie,K,ve,Y,P,U,Ae,I,B),I=de[Ue][5],B=de[Ue][6],ue=Oe,Oe+=Ce;return de})(g-a,p-e,s,o,u,d,c);for(let y=0,S=v.length;y<S;y++)v[y][1]+=a,v[y][2]+=e,v[y][3]+=a,v[y][4]+=e,v[y][5]+=a,v[y][6]+=e;return v},r_=a=>{let e=0,t=0,n=0,s=0;const o=[];let c,u=0,d=0;for(const g of a){const p=[...g];let v;switch(p[0]){case"l":p[1]+=e,p[2]+=t;case"L":e=p[1],t=p[2],v=["L",e,t];break;case"h":p[1]+=e;case"H":e=p[1],v=["L",e,t];break;case"v":p[1]+=t;case"V":t=p[1],v=["L",e,t];break;case"m":p[1]+=e,p[2]+=t;case"M":e=p[1],t=p[2],n=p[1],s=p[2],v=["M",e,t];break;case"c":p[1]+=e,p[2]+=t,p[3]+=e,p[4]+=t,p[5]+=e,p[6]+=t;case"C":u=p[3],d=p[4],e=p[5],t=p[6],v=["C",p[1],p[2],u,d,e,t];break;case"s":p[1]+=e,p[2]+=t,p[3]+=e,p[4]+=t;case"S":c==="C"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=p[3],t=p[4],v=["C",u,d,p[1],p[2],e,t],u=v[3],d=v[4];break;case"q":p[1]+=e,p[2]+=t,p[3]+=e,p[4]+=t;case"Q":u=p[1],d=p[2],e=p[3],t=p[4],v=["Q",u,d,e,t];break;case"t":p[1]+=e,p[2]+=t;case"T":c==="Q"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=p[1],t=p[2],v=["Q",u,d,e,t];break;case"a":p[6]+=e,p[7]+=t;case"A":t_(e,t,p).forEach(y=>o.push(y)),e=p[6],t=p[7];break;case"z":case"Z":e=n,t=s,v=["Z"]}v?(o.push(v),c=v[0]):c=""}return o},Xa=(a,e,t,n)=>Math.sqrt((t-a)**2+(n-e)**2),Nm=(a,e,t,n,s,o,c,u)=>d=>{const g=d**3,p=(S=>3*S**2*(1-S))(d),v=(S=>3*S*(1-S)**2)(d),y=(S=>(1-S)**3)(d);return new L(c*g+s*p+t*v+a*y,u*g+o*p+n*v+e*y)},Bm=a=>a**2,zm=a=>2*a*(1-a),Um=a=>(1-a)**2,n_=(a,e,t,n,s,o,c,u)=>d=>{const g=Bm(d),p=zm(d),v=Um(d),y=3*(v*(t-a)+p*(s-t)+g*(c-s)),S=3*(v*(n-e)+p*(o-n)+g*(u-o));return Math.atan2(S,y)},i_=(a,e,t,n,s,o)=>c=>{const u=Bm(c),d=zm(c),g=Um(c);return new L(s*u+t*d+a*g,o*u+n*d+e*g)},s_=(a,e,t,n,s,o)=>c=>{const u=1-c,d=2*(u*(t-a)+c*(s-t)),g=2*(u*(n-e)+c*(o-n));return Math.atan2(g,d)},pp=(a,e,t)=>{let n=new L(e,t),s=0;for(let o=1;o<=100;o+=1){const c=a(o/100);s+=Xa(n.x,n.y,c.x,c.y),n=c}return s},o_=(a,e)=>{let t,n=0,s=0,o={x:a.x,y:a.y},c=D({},o),u=.01,d=0;const g=a.iterator,p=a.angleFinder;for(;s<e&&u>1e-4;)c=g(n),d=n,t=Xa(o.x,o.y,c.x,c.y),t+s>e?(n-=u,u/=2):(o=c,n+=u,s+=t);return D(D({},c),{},{angle:p(d)})},Wm=a=>{let e,t,n=0,s=0,o=0,c=0,u=0;const d=[];for(const g of a){const p={x:s,y:o,command:g[0],length:0};switch(g[0]){case"M":t=p,t.x=c=s=g[1],t.y=u=o=g[2];break;case"L":t=p,t.length=Xa(s,o,g[1],g[2]),s=g[1],o=g[2];break;case"C":e=Nm(s,o,g[1],g[2],g[3],g[4],g[5],g[6]),t=p,t.iterator=e,t.angleFinder=n_(s,o,g[1],g[2],g[3],g[4],g[5],g[6]),t.length=pp(e,s,o),s=g[5],o=g[6];break;case"Q":e=i_(s,o,g[1],g[2],g[3],g[4]),t=p,t.iterator=e,t.angleFinder=s_(s,o,g[1],g[2],g[3],g[4]),t.length=pp(e,s,o),s=g[3],o=g[4];break;case"Z":t=p,t.destX=c,t.destY=u,t.length=Xa(s,o,c,u),s=c,o=u}n+=t.length,d.push(t)}return d.push({length:n,x:s,y:o}),d},a_=function(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wm(a),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const s=t[n],o=e/s.length,c=a[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return D(D({},new L(s.x,s.y).lerp(new L(s.destX,s.destY),o)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return D(D({},new L(s.x,s.y).lerp(new L(c[1],c[2]),o)),{},{angle:Math.atan2(c[2]-s.y,c[1]-s.x)});case"C":case"Q":return o_(s,e)}},l_=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),mp=new RegExp(ZC,"g"),c_=new RegExp(Fn,"gi"),u_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h_=a=>{var e;const t=[],n=(e=a.match(l_))!==null&&e!==void 0?e:[];for(const s of n){const o=s[0];if(o==="z"||o==="Z"){t.push([o]);continue}const c=u_[o.toLowerCase()];let u=[];if(o==="a"||o==="A"){mp.lastIndex=0;for(let d=null;d=mp.exec(s);)u.push(...d.slice(1))}else u=s.match(c_)||[];for(let d=0;d<u.length;d+=c){const g=new Array(c),p=$C[o];g[0]=d>0&&p?p:o;for(let v=0;v<c;v++)g[v+1]=parseFloat(u[d+v]);t.push(g)}}return t},d_=(a,e)=>a.map(t=>t.map((n,s)=>s===0||e===void 0?n:Be(n,e)).join(" ")).join(" ");function zu(a,e){const t=a.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[s,o]=n;return t.setProperty(s,o)}))}class f_ extends ym{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),b(this,"upper",void 0),b(this,"container",void 0);const{el:s}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(o,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(n),s.parentNode&&s.parentNode.replaceChild(c,s),c.append(s,o),this.container=c}createUpperCanvas(){const{el:e}=this.lower,t=or();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=bi().createElement("div");return e.setAttribute("data-fabric","wrapper"),zu(e,{position:"relative"}),Kg(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:s}=t;zu(e,D(D({},n),{},{"touch-action":s?"manipulation":At})),Kg(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:s}=this.upper;vm(n,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Pu(this.upper.el,e),Pu(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),pr().dispose(this.upper.el),delete this.upper,delete this.container}}class ol extends zs{constructor(){super(...arguments),b(this,"targets",[]),b(this,"_hoveredTargets",[]),b(this,"_objectsToRender",void 0),b(this,"_currentTransform",null),b(this,"_groupSelector",null),b(this,"contextTopDirty",!1)}static getDefaults(){return D(D({},super.getDefaults()),ol.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new f_(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const s=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-t+s,-n+s),o.transform(...this.viewportTransform);const c=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(o),e.selectionBackgroundColor=c,o.restore();const u=Math.round(s*this.getRetinaScaling());return yC(o,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&n.length>1&&n.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let s;return t===$a||t===kt||t===Ht||t===Os?s=this.centeredScaling||e.centeredScaling:t===rh&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=Ye:["mr","tr","br"].includes(t)&&(n.x=Te),["tl","mt","tr"].includes(t)?n.y=Du:["bl","mb","br"].includes(t)&&(n.y=_t)),n}_setupCurrentTransform(e,t,n){var s;const o=t.group?Ci(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:c="",control:u}=t.getActiveControl()||{},d=n&&u?(s=u.getActionHandler(e,t,u))===null||s===void 0?void 0:s.bind(u):IS,g=((S,w,C,_)=>{if(!w||!S)return"drag";const T=_.controls[w];return T.getActionName(C,T,_)})(n,c,e,t),p=e[this.centeredKey],v=this._shouldCenterTransform(t,g,p)?{x:fe,y:fe}:this._getOriginFromCorner(t,c),y={target:t,action:g,actionHandler:d,actionPerformed:!1,corner:c,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:o.x-t.left,offsetY:o.y-t.top,originX:v.x,originY:v.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:Xe(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:p,original:D(D({},xm(t)),{},{originX:v.x,originY:v.y})};this._currentTransform=y,this.fire("before:transform",{e,transform:y})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:s,deltaY:o}=this._groupSelector,c=new L(t,n).transform(this.viewportTransform),u=new L(t+s,n+o).transform(this.viewportTransform),d=this.selectionLineWidth/2;let g=Math.min(c.x,u.x),p=Math.min(c.y,u.y),v=Math.max(c.x,u.x),y=Math.max(c.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(g,p,v-g,y-p)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,g+=d,p+=d,v-=d,y-=d,ct.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(g,p,v-g,y-p))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(t,Mu(e))||s.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&c&&c!==n?(this.targets=o,n):c}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const s=this.getZoom(),o=e.padding/s;if(o){const[c,u,d,g]=n,p=Math.atan2(u.y-c.y,u.x-c.x),v=Rr(p)*o,y=Fr(p)*o,S=v+y,w=v-y;n=[new L(c.x-w,c.y-S),new L(u.x+S,u.y-w),new L(d.x+w,d.y+S),new L(g.x-S,g.y+w)]}return Ne.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Ci(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,t)){if(Oa(s)&&s.subTargetCheck){const o=this._searchPossibleTargets(s._objects,t);o&&this.targets.push(o)}return s}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Oa(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let o=s.length-1;o>0;o--){const c=s[o];if(!Oa(c)||!c.interactive)return c}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let o=DS(e),c=s.width||0,u=s.height||0;c&&u||(_t in s&&Du in s&&(u=Math.abs(s.top-s.bottom)),Ye in s&&Te in s&&(c=Math.abs(s.right-s.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,t||(o=Ci(o,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(o.x/=d,o.y/=d);const g=c===0||u===0?new L(1,1):new L(n.width/c,n.height/u);return o.multiply(g)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=or(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return En(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,s=!1;const o=this.getActiveObjects(),c=[],u=[];e.forEach(d=>{o.includes(d)||(n=!0,d.fire("deselected",{e:t,target:d}),u.push(d))}),o.forEach(d=>{e.includes(d)||(n=!0,d.fire("selected",{e:t,target:d}),c.push(d))}),e.length>0&&o.length>0?(s=!0,n&&this.fire("selection:updated",{e:t,selected:c,deselected:u})):o.length>0?(s=!0,this.fire("selection:created",{e:t,selected:c})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:u})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),s}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,En(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),En(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,s={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),n.fire(Na,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;En(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const s=this._realizeGroupTransformOnObject(e),o=super._toObject(e,t,n);return e.set(s),o}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&En(t)&&this._activeObject===t){const n=Pi(e,["angle","flipX","flipY",Te,kt,Ht,Oi,Di,_t]);return MS(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(s)}}b(ol,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class g_{constructor(e){b(this,"targets",[]),b(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),vi(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const p_=["target","oldTarget","fireCanvas","e"],Mt={passive:!1},mi=(a,e)=>{const t=a.getViewportPoint(e),n=a.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},on=function(a){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return a.addEventListener(...t)},zt=function(a){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return a.removeEventListener(...t)},m_={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Uu extends ol{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),b(this,"_isClick",void 0),b(this,"textEditingManager",new g_(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(on,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,s=this._getEventPrefix();e(mm(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,Mt),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Mt)}removeListeners(){this.addOrRemove(zt,"remove");const e=this._getEventPrefix(),t=tr(this.upperCanvasEl);zt(t,"".concat(e,"up"),this._onMouseUp),zt(t,"touchend",this._onTouchEnd,Mt),zt(t,"".concat(e,"move"),this._onMouseMove,Mt),zt(t,"touchmove",this._onMouseMove,Mt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=D({e},mi(this,e));this.fire("mouse:out",D(D({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",D({},n)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",D(D({},n),{},{target:s})),s&&s.fire("mouseout",D({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",D({e},mi(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void on(this.upperCanvasEl,"drag",this._onDragProgress)}ju(e)}_renderDragEffects(e,t,n){let s=!1;const o=this._dropTarget;o&&o!==t&&o!==n&&(o.clearContextTop(),s=!0),t==null||t.clearContextTop(),n!==t&&(n==null||n.clearContextTop());const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),t&&(c.save(),t.transform(c),t.renderDragSourceEffect(e),c.restore(),s=!0),n&&(c.save(),n.transform(c),n.renderDropTargetEffect(e),c.restore(),s=!0),c.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==At,n=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};zt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:s}=this.findDragTargets(e),o=this._dragSource,c={e,target:n,subTargets:s,dragSource:o,canDrop:!1,dropTarget:void 0};let u;this.fire(t,c),this._fireEnterLeaveEvents(n,c),n&&(n.canDrop(e)&&(u=n),n.fire(t,c));for(let d=0;d<s.length;d++){const g=s[d];g.canDrop(e)&&(u=g),g.fire(t,c)}this._renderDragEffects(e,o,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),s={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",D({e,target:t,subTargets:n,dragSource:this._dragSource},mi(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&ju(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,o=this._getEventPrefix(),c=tr(s);on(c,"touchend",this._onTouchEnd,Mt),t&&on(c,"touchmove",this._onMouseMove,Mt),zt(s,"".concat(o,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();zt(t,"".concat(n,"move"),this._onMouseMove,Mt);const s=tr(t);on(s,"".concat(n,"up"),this._onMouseUp),on(s,"".concat(n,"move"),this._onMouseMove,Mt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=tr(this.upperCanvasEl);zt(n,"touchend",this._onTouchEnd,Mt),zt(n,"touchmove",this._onMouseMove,Mt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{on(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=tr(this.upperCanvasEl);zt(s,"".concat(n,"up"),this._onMouseUp),zt(s,"".concat(n,"move"),this._onMouseMove,Mt),on(t,"".concat(n,"move"),this._onMouseMove,Mt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,o=this._target,{button:c}=e;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,d,g=!1;if(n&&(this._finalizeCurrentTransform(e),g=n.actionPerformed),!s){const p=o===this._activeObject;this.handleSelection(e),g||(g=this._shouldRender(o)||!p&&o===this._activeObject)}if(o){const p=o.findControl(this.getViewportPoint(e),Mu(e)),{key:v,control:y}=p||{};if(d=v,o.selectable&&o!==this._activeObject&&o.activeOn==="up")this.setActiveObject(o,e),g=!0;else if(y){const S=y.getMouseUpHandler(e,o,y);S&&(u=this.getScenePoint(e),S.call(y,e,n,u.x,u.y))}o.isMoving=!1}if(n&&(n.target!==o||n.corner!==d)){const p=n.target&&n.target.controls[n.corner],v=p&&p.getMouseUpHandler(e,n.target,p);u=u||this.getScenePoint(e),v&&v.call(p,e,n,u.x,u.y)}this._setCursorFromEvent(e,o),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,o&&(o.__corner=void 0),g?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:s=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let o=0;o<s.length;o++)s[o]!==n&&s[o].fire(e,t);return t}_handleEvent(e,t){const n=this._target,s=this.targets||[],o=D(D({e,target:n,subTargets:s},mi(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),o),n&&n.fire("mouse".concat(t),o);for(let c=0;c<s.length;c++)s[c]!==n&&s[c].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const c=this.getScenePoint(e);this._groupSelector={x:c.x,y:c.y,deltaY:0,deltaX:0}}if(t){const c=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),Mu(e));if(t===this._activeObject&&(u||!o)){this._setupCurrentTransform(e,t,c);const d=u?u.control:void 0,g=this.getScenePoint(e),p=d&&d.getMouseDownHandler(e,t,d);p&&p.call(d,e,this._currentTransform,g.x,g.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Ci(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,s=this._hoveredTargets,o=this.targets,c=Math.max(s.length,o.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("mouse",{e,target:o[u],oldTarget:s[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,s=this._hoveredTargets,o=this.targets,c=Math.max(s.length,o.length);this.fireSyntheticInOutEvents("drag",D(D({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("drag",D(D({},t),{},{target:o[u],oldTarget:s[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:s,fireCanvas:o,e:c}=t,u=Fe(t,p_);const{targetIn:d,targetOut:g,canvasIn:p,canvasOut:v}=m_[e],y=s!==n;if(s&&y){const S=D(D({},u),{},{e:c,target:s,nextTarget:n},mi(this,c));o&&this.fire(v,S),s.fire(g,S)}if(n&&y){const S=D(D({},u),{},{e:c,target:n,previousTarget:s},mi(this,c));o&&this.fire(p,S),n.fire(d,S)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,s=n.target,o=s.group?Ci(t,void 0,s.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:s,actionHandler:o,target:c}=t,u=!!o&&o(e,t,n.x,n.y);u&&c.setCoords(),s==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const s=En(this._activeObject)?this._activeObject:null,o=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(o){const c=o.control;this.setCursor(c.cursorStyleHandler(e,c,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(c=>{n=c.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,s=En(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||s)&&(s||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(s){const o=n.getObjects();if(t===n){const c=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(o,c)||this.searchPossibleTargets(this._objects,c))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,e)}else{n.isEditing&&n.exitEditing();const o=new(Z.getClass("ActiveSelection"))([],{canvas:this});o.multiSelectAdd(n,t),this._hoveredTarget=o,this._setActiveObject(o,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:s,deltaY:o}=this._groupSelector,c=new L(t,n),u=c.add(new L(s,o)),d=c.min(u),g=c.max(u).subtract(d),p=this.collectObjects({left:d.x,top:d.y,width:g.x,height:g.y},{includeIntersecting:!this.selectionFullyContained}),v=c.eq(u)?p[0]?[p[0]]:[]:p.length>1?p.filter(y=>!y.onSelect({e})).reverse():p;if(v.length===1)this.setActiveObject(v[0],e);else if(v.length>1){const y=Z.getClass("ActiveSelection");this.setActiveObject(new y(v,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Vm={x1:0,y1:0,x2:0,y2:0},v_=D(D({},Vm),{},{r1:0,r2:0}),xi=(a,e)=>isNaN(a)&&typeof e=="number"?e:a,y_=/^(\d+\.\d+)%|(\d+)%$/;function Hm(a){return a&&y_.test(a)}function Ym(a,e){const t=typeof a=="number"?a:typeof a=="string"?parseFloat(a)/(Hm(a)?100:1):NaN;return Ai(0,xi(t,e),1)}const x_=/\s*;\s*/,w_=/\s*:\s*/;function S_(a,e){let t,n;const s=a.getAttribute("style");if(s){const c=s.split(x_);c[c.length-1]===""&&c.pop();for(let u=c.length;u--;){const[d,g]=c[u].split(w_).map(p=>p.trim());d==="stop-color"?t=g:d==="stop-opacity"&&(n=g)}}const o=new be(t||a.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Ym(a.getAttribute("offset"),0),color:o.toRgb(),opacity:xi(parseFloat(n||a.getAttribute("stop-opacity")||""),1)*o.getAlpha()*e}}function C_(a,e){const t=[],n=a.getElementsByTagName("stop"),s=Ym(e,1);for(let o=n.length;o--;)t.push(S_(n[o],s));return t}function Xm(a){return a.nodeName==="linearGradient"||a.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Gm(a){return a.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Zt(a,e){return a.getAttribute(e)}function __(a,e){return function(t,n){let s,{width:o,height:c,gradientUnits:u}=n;return Object.keys(t).reduce((d,g)=>{const p=t[g];return p==="Infinity"?s=1:p==="-Infinity"?s=0:(s=typeof p=="string"?parseFloat(p):p,typeof p=="string"&&Hm(p)&&(s*=.01,u==="pixels"&&(g!=="x1"&&g!=="x2"&&g!=="r2"||(s*=o),g!=="y1"&&g!=="y2"||(s*=c)))),d[g]=s,d},{})}(Xm(a)==="linear"?function(t){return{x1:Zt(t,"x1")||0,y1:Zt(t,"y1")||0,x2:Zt(t,"x2")||"100%",y2:Zt(t,"y2")||0}}(a):function(t){return{x1:Zt(t,"fx")||Zt(t,"cx")||"50%",y1:Zt(t,"fy")||Zt(t,"cy")||"50%",r1:0,x2:Zt(t,"cx")||"50%",y2:Zt(t,"cy")||"50%",r2:Zt(t,"r")||"50%"}}(a),D(D({},e),{},{gradientUnits:Gm(a)}))}class na{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:s={},colorStops:o=[],offsetX:c=0,offsetY:u=0,gradientTransform:d,id:g}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:D(D({},t==="radial"?v_:Vm),s),colorStops:o,offsetX:c,offsetY:u,gradientTransform:d,id:g?"".concat(g,"_").concat(un()):un()})}addColorStop(e){for(const t in e){const n=new be(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return D(D({},Pi(this,e)),{},{type:this.type,coords:D({},this.coords),colorStops:this.colorStops.map(t=>D({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():gt.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map(v=>D({},v)).sort((v,y)=>v.offset-y.offset);let u=-this.offsetX,d=-this.offsetY;var g;o==="objectBoundingBox"?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),(g=e)&&typeof g._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,d-=e.pathOffset.y),s[4]-=u,s[5]-=d;const p=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Ua(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:v,y1:y,x2:S,y2:w}=this.coords;n.push("<linearGradient ",p,' x1="',v,'" y1="',y,'" x2="',S,'" y2="',w,`">
`)}else if(this.type==="radial"){const{x1:v,y1:y,x2:S,y2:w,r1:C,r2:_}=this.coords,T=C>_;n.push("<radialGradient ",p,' cx="',T?v:S,'" cy="',T?y:w,'" r="',T?C:_,'" fx="',T?S:v,'" fy="',T?w:y,`">
`),T&&(c.reverse(),c.forEach(I=>{I.offset=1-I.offset}));const R=Math.min(C,_);if(R>0){const I=R/Math.max(C,_);c.forEach(B=>{B.offset+=I*(1-B.offset)})}}return c.forEach(v=>{let{color:y,offset:S,opacity:w}=v;n.push("<stop ",'offset="',100*S+"%",'" style="stop-color:',y,w!==void 0?";stop-opacity: "+w:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:s,y2:o,r1:c,r2:u}=this.coords,d=this.type==="linear"?e.createLinearGradient(t,n,s,o):e.createRadialGradient(t,n,c,s,o,u);return this.colorStops.forEach(g=>{let{color:p,opacity:v,offset:y}=g;d.addColorStop(y,v!==void 0?new be(p).setAlpha(v).toRgba():p)}),d}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(D(D({},e),{},{colorStops:t?t.map(s=>D({},s)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const s=Gm(e),o=t._findCenterFromElement();return new this(D({id:e.getAttribute("id")||void 0,type:Xm(e),coords:__(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:C_(e,n.opacity),gradientUnits:s,gradientTransform:Iu(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-o.x,offsetY:t.height/2-o.y}:{offsetX:0,offsetY:0}))}}b(na,"type","Gradient"),Z.setClass(na,"gradient"),Z.setClass(na,"linear"),Z.setClass(na,"radial");const A_=["type","source","patternTransform"];class xu{get type(){return"pattern"}set type(e){cn("warn","Setting type has no effect",e)}constructor(e){b(this,"repeat","repeat"),b(this,"offsetX",0),b(this,"offsetY",0),b(this,"crossOrigin",""),this.id=un(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return D(D({},Pi(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:Be(this.offsetX,xe.NUM_FRACTION_DIGITS),offsetY:Be(this.offsetY,xe.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:s,repeat:o,id:c}=this,u=xi(this.offsetX/t,0),d=xi(this.offsetY/n,0),g=o==="repeat-y"||o==="no-repeat"?1+Math.abs(u||0):xi(s.width/t,0),p=o==="repeat-x"||o==="no-repeat"?1+Math.abs(d||0):xi(s.height/n,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(u,'" y="').concat(d,'" width="').concat(g,'" height="').concat(p,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:s,patternTransform:o}=e,c=Fe(e,A_);const u=await Pa(s,D(D({},t),{},{crossOrigin:c.crossOrigin}));return new this(D(D({},c),{},{patternTransform:o&&o.slice(0),source:u}))}}b(xu,"type","Pattern"),Z.setClass(xu),Z.setClass(xu,"pattern");const T_=["path","left","top"],k_=["d"];class bn extends ct{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:o}=t,c=Fe(t,T_);super(),Object.assign(this,bn.ownDefaults),this.setOptions(c),this._setPath(e||[],!0),typeof s=="number"&&this.set(Te,s),typeof o=="number"&&this.set(_t,o)}_setPath(e,t){this.path=r_(Array.isArray(e)?e:h_(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new L(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+n);break;case"M":e.moveTo(s[1]+t,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n,s[5]+t,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=d_(this.path,xe.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=xe.NUM_FRACTION_DIGITS;return" translate(".concat(Be(-this.pathOffset.x,e),", ").concat(Be(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:s}=this._calcDimensions();this.set({width:t,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,fe,fe)}_calcBoundsFromPath(){const e=[];let t=0,n=0,s=0,o=0;for(const c of this.path)switch(c[0]){case"L":s=c[1],o=c[2],e.push({x:t,y:n},{x:s,y:o});break;case"M":s=c[1],o=c[2],t=s,n=o;break;case"C":e.push(...gp(s,o,c[1],c[2],c[3],c[4],c[5],c[6])),s=c[5],o=c[6];break;case"Q":e.push(...gp(s,o,c[1],c[2],c[1],c[2],c[3],c[4])),s=c[3],o=c[4];break;case"Z":s=t,o=n}return Mr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return D(D({},e),{},{pathOffset:new L(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const s=Nr(e,this.ATTRIBUTE_NAMES,n),{d:o}=s;return new this(o,D(D(D({},Fe(s,k_)),t),{},{left:void 0,top:void 0}))}}b(bn,"type","Path"),b(bn,"cacheProperties",[...Ir,"path","fillRule"]),b(bn,"ATTRIBUTE_NAMES",[...fn,"d"]),Z.setClass(bn),Z.setSVGClass(bn);const E_=["left","top","radius"],Km=["radius","startAngle","endAngle","counterClockwise"];class Er extends ct{static getDefaults(){return D(D({},super.getDefaults()),Er.ownDefaults)}constructor(e){super(),Object.assign(this,Er.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Xe(this.startAngle),Xe(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(kt)}getRadiusY(){return this.get("radius")*this.get(Ht)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Km,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=Xe(this.startAngle),s=Xe(this.endAngle),o=Rr(n)*t,c=Fr(n)*t,u=Rr(s)*t,d=Fr(s)*t,g=e>180?1:0,p=this.counterClockwise?0:1;return['<path d="M '.concat(o," ").concat(c," A ").concat(t," ").concat(t," 0 ").concat(g," ").concat(p," ").concat(u," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const s=Nr(e,this.ATTRIBUTE_NAMES,n),{left:o=0,top:c=0,radius:u=0}=s;return new this(D(D({},Fe(s,E_)),{},{radius:u,left:o-u,top:c-u}))}static fromObject(e){return super._fromObject(e)}}b(Er,"type","Circle"),b(Er,"cacheProperties",[...Ir,...Km]),b(Er,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),b(Er,"ATTRIBUTE_NAMES",["cx","cy","r",...fn]),Z.setClass(Er),Z.setSVGClass(Er);const b_=["x1","y1","x2","y2"],O_=["x1","y1","x2","y2"],Wu=["x1","x2","y1","y2"];class On extends ct{constructor(){let[e,t,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,On.ownDefaults),this.setOptions(o),this.x1=e,this.x2=n,this.y1=t,this.y2=s,this._setWidthHeight();const{left:c,top:u}=o;typeof c=="number"&&this.set(Te,c),typeof u=="number"&&this.set(_t,u)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-t);const{left:o,top:c,width:u,height:d}=Mr([{x:e,y:t},{x:n,y:s}]),g=new L(o+u/2,c+d/2);this.setPositionByOrigin(g,fe,fe)}_set(e,t){return super._set(e,t),Wu.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;Vt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new L((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:s,width:o,height:c}=this,u=e<=t?-1:1,d=n<=s?-1:1;return{x1:u*o/2,x2:u*-o/2,y1:d*c/2,y2:d*-c/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,n){const s=Nr(e,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:c=0,x2:u=0,y2:d=0}=s;return new this([o,c,u,d],Fe(s,b_))}static fromObject(e){let{x1:t,y1:n,x2:s,y2:o}=e,c=Fe(e,O_);return this._fromObject(D(D({},c),{},{points:[t,n,s,o]}),{extraParam:"points"})}}b(On,"type","Line"),b(On,"cacheProperties",[...Ir,...Wu]),b(On,"ATTRIBUTE_NAMES",fn.concat(Wu)),Z.setClass(On),Z.setSVGClass(On);class Dn extends ct{static getDefaults(){return D(D({},super.getDefaults()),Dn.ownDefaults)}constructor(e){super(),Object.assign(this,Dn.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}b(Dn,"type","Triangle"),b(Dn,"ownDefaults",{width:100,height:100}),Z.setClass(Dn),Z.setSVGClass(Dn);const Qm=["rx","ry"];class br extends ct{static getDefaults(){return D(D({},super.getDefaults()),br.ownDefaults)}constructor(e){super(),Object.assign(this,br.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(kt)}getRy(){return this.get("ry")*this.get(Ht)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Qm,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,La,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const s=Nr(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function D_(a){if(!a)return[];const e=a.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}b(br,"type","Ellipse"),b(br,"cacheProperties",[...Ir,...Qm]),b(br,"ownDefaults",{rx:0,ry:0}),b(br,"ATTRIBUTE_NAMES",[...fn,"cx","cy","rx","ry"]),Z.setClass(br),Z.setSVGClass(br);const P_=["left","top"],qm={exactBoundingBox:!1};class er extends ct{static getDefaults(){return D(D({},super.getDefaults()),er.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),b(this,"strokeDiff",void 0),Object.assign(this,er.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Te,n),typeof s=="number"&&this.set(_t,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return wC(this.points,e,this.isOpen())}_calcDimensions(e){e=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(g=>g.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new L,strokeOffset:new L,strokeDiff:new L};const n=Mr(t),s=el(D(D({},e),{},{scaleX:1,scaleY:1})),o=Mr(this.points.map(g=>St(g,s,!0))),c=new L(this.scaleX,this.scaleY);let u=n.left+n.width/2,d=n.top+n.height/2;return this.exactBoundingBox&&(u-=d*Math.tan(Xe(this.skewX)),d-=u*Math.tan(Xe(this.skewY))),D(D({},n),{},{pathOffset:new L(u,d),strokeOffset:new L(o.left,o.top).subtract(new L(n.left,n.top)).multiply(c),strokeDiff:new L(n.width,n.height).subtract(new L(o.width,o.height)).multiply(c)})}_findCenterFromElement(){const e=Mr(this.points);return new L(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:s,height:o,pathOffset:c,strokeOffset:u,strokeDiff:d}=this._calcDimensions();this.set({width:s,height:o,pathOffset:c,strokeOffset:u,strokeDiff:d}),e&&this.setPositionByOrigin(new L(t+s/2,n+o/2),fe,fe)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new L(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,n;const{width:u,height:d}=this._calcDimensions(e);c=new L((t=e.width)!==null&&t!==void 0?t:u,(n=e.height)!==null&&n!==void 0?n:d)}else{var s,o;c=new L((s=e.width)!==null&&s!==void 0?s:this.width,(o=e.height)!==null&&o!==void 0?o:this.height)}return c.multiply(new L(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&n&&((e===kt||e===Ht)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:s}=t;return{x:n,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,s=xe.NUM_FRACTION_DIGITS;for(let o=0,c=this.points.length;o<c;o++)e.push(Be(this.points[o].x-t,s),",",Be(this.points[o].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let o=0;o<t;o++){const c=this.points[o];e.lineTo(c.x-n,c.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(D_(e.getAttribute("points")),D(D({},Fe(Nr(e,this.ATTRIBUTE_NAMES,n),P_)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}b(er,"ownDefaults",qm),b(er,"type","Polyline"),b(er,"layoutProperties",[Oi,Di,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),b(er,"cacheProperties",[...Ir,"points"]),b(er,"ATTRIBUTE_NAMES",[...fn]),Z.setClass(er),Z.setSVGClass(er);class ia extends er{isOpen(){return!1}}b(ia,"ownDefaults",qm),b(ia,"type","Polygon"),Z.setClass(ia),Z.setSVGClass(ia);const Jm=["fontSize","fontWeight","fontFamily","fontStyle"],Zm=["underline","overline","linethrough"],$m=[...Jm,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],ev=[...$m,...Zm,"textBackgroundColor","direction"],M_=[...Jm,...Zm,Tt,"strokeWidth",Je,"deltaY","textBackgroundColor"],j_={_reNewline:th,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Te,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Te,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},fr="justify",Ga="justify-left",ks="justify-right",Es="justify-center";class tv extends ct{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const s in t[n])for(const o in t[n][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const s in n)for(const o in n[s])if(n[s][o][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,s,o=0,c=!0,u=0;for(const d in t){n=0;for(const g in t[d]){const p=t[d][g]||{};o++,p[e]!==void 0?(s?p[e]!==s&&(c=!1):s=p[e],p[e]===this[e]&&delete p[e]):c=!1,Object.keys(p).length!==0?n++:delete t[d][g]}n===0&&delete t[d]}for(let d=0;d<this._textLines.length;d++)u+=this._textLines[d].length;c&&o===u&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,s,o;for(s in t){for(o in n=t[s],n)delete n[o][e],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const o=oh(D(D({},this._getStyleDeclaration(n,s)),t),c=>c!==void 0);this._setStyleDeclaration(n,s,o)}getSelectionStyles(e,t,n){const s=[];for(let o=e;o<(t||e);o++)s.push(this.getStyleAtPosition(o,n));return s}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,t,n){for(let s=t;s<(n||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const s=this.styles&&this.styles[e];return s&&(n=s[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return D(D({},Pi(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}b(tv,"_styleProperties",M_);const R_=/  +/g,F_=/"/g;function wu(a,e,t,n,s){return"		".concat(function(o,c){let{left:u,top:d,width:g,height:p}=c,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xe.NUM_FRACTION_DIGITS;const y=Ps(Je,o,!1),[S,w,C,_]=[u,d,g,p].map(T=>Be(T,v));return"<rect ".concat(y,' x="').concat(S,'" y="').concat(w,'" width="').concat(C,'" height="').concat(_,'"></rect>')}(a,{left:e,top:t,width:n,height:s}),`
`)}const L_=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Su;class dt extends tv{static getDefaults(){return D(D({},super.getDefaults()),dt.ownDefaults)}constructor(e,t){super(),b(this,"__charBounds",[]),Object.assign(this,dt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Wm(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(fr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,s,o,c,u;for(let d=0,g=this._textLines.length;d<g;d++)if((this.textAlign===fr||d!==g-1&&!this.isEndOfWrapping(d))&&(s=0,o=this._textLines[d],t=this.getLineWidth(d),t<this.width&&(u=this.textLines[d].match(this._reSpacesAndTabs)))){n=u.length,e=(this.width-t)/n;for(let p=0;p<=o.length;p++)c=this.__charBounds[d][p],this._reSpaceAndTab.test(o[p])?(c.width+=e,c.kernedWidth+=e,c.left+=s,s+=e):c.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Tt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case fe:e.textBaseline="middle";break;case"ascender":e.textBaseline=_t;break;case"descender":e.textBaseline=Du}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,n,s,o,c){this._renderChars(e,t,n,s,o,c)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let o=0,c=this._textLines.length;o<c;o++){const u=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){s+=u;continue}const d=this._textLines[o].length,g=this._getLineLeftOffset(o);let p,v,y=0,S=0,w=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let C=0;C<d;C++){const _=this.__charBounds[o][C];v=this.getValueOfPropertyAt(o,C,"textBackgroundColor"),this.path?(e.save(),e.translate(_.renderLeft,_.renderTop),e.rotate(_.angle),e.fillStyle=v,v&&e.fillRect(-_.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),_.width,u/this.lineHeight),e.restore()):v!==w?(p=n+g+S,this.direction==="rtl"&&(p=this.width-p-y),e.fillStyle=w,w&&e.fillRect(p,s,y,u/this.lineHeight),S=_.left,y=_.width,w=v):y+=_.kernedWidth}v&&!this.path&&(p=n+g+S,this.direction==="rtl"&&(p=this.width-p-y),e.fillStyle=v,e.fillRect(p,s,y,u/this.lineHeight)),s+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,s){const o=As.getFontCache(t),c=this._getFontDeclaration(t),u=n+e,d=n&&c===this._getFontDeclaration(s),g=t.fontSize/this.CACHE_FONT_SIZE;let p,v,y,S;if(n&&o[n]!==void 0&&(y=o[n]),o[e]!==void 0&&(S=p=o[e]),d&&o[u]!==void 0&&(v=o[u],S=v-y),p===void 0||y===void 0||v===void 0){const w=function(){return Su||(Su=mr({width:0,height:0}).getContext("2d")),Su}();this._setTextStyles(w,t,!0),p===void 0&&(S=p=w.measureText(e).width,o[e]=p),y===void 0&&d&&n&&(y=w.measureText(n).width,o[n]=y),d&&v===void 0&&(v=w.measureText(u).width,o[u]=v,S=v-y)}return{width:p*g,kernedWidth:S*g}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,s=0;const o=this.pathSide===Ye,c=this.path,u=this._textLines[e],d=u.length,g=new Array(d);this.__charBounds[e]=g;for(let p=0;p<d;p++){const v=u[p];n=this._getGraphemeBox(v,e,p,t),g[p]=n,s+=n.kernedWidth,t=v}if(g[d]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let p=0;const v=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case Te:p=o?v-s:0;break;case fe:p=(v-s)/2;break;case Ye:p=o?0:v-s}p+=this.pathStartOffset*(o?-1:1);for(let y=o?d-1:0;o?y>=0:y<d;o?y--:y++)n=g[y],p>v?p%=v:p<0&&(p+=v),this._setGraphemeOnPath(p,n),p+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,s=this.path,o=a_(s.path,n,s.segmentsInfo);t.renderLeft=o.x-s.pathOffset.x,t.renderTop=o.y-s.pathOffset.y,t.angle=o.angle+(this.pathSide===Ye?Math.PI:0)}_getGraphemeBox(e,t,n,s,o){const c=this.getCompleteStyleDeclaration(t,n),u=s?this.getCompleteStyleDeclaration(t,n-1):{},d=this._measureChar(e,c,s,u);let g,p=d.kernedWidth,v=d.width;this.charSpacing!==0&&(g=this._getWidthOfCharSpacing(),v+=g,p+=g);const y={width:v,left:0,height:c.fontSize,kernedWidth:p,deltaY:c.deltaY};if(n>0&&!o){const S=this.__charBounds[t][n-1];y.left=S.left+S.width+d.kernedWidth-d.width}return y}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,s=this._textLines[e].length;n<s;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,s=this._textLines.length;n<s;n++)e=this.getHeightOfLine(n),t+=n===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const s=this._getLeftOffset(),o=this._getTopOffset();for(let c=0,u=this._textLines.length;c<u;c++){const d=this.getHeightOfLine(c),g=d/this.lineHeight,p=this._getLineLeftOffset(c);this._renderTextLine(t,e,this._textLines[c],s+p,o+n+g,c),n+=d}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Je))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,s,o,c){const u=this.getHeightOfLine(c),d=this.textAlign.includes(fr),g=this.path,p=!d&&this.charSpacing===0&&this.isEmptyStyles(c)&&!g,v=this.direction==="ltr",y=this.direction==="ltr"?1:-1,S=t.direction;let w,C,_,T,R,I="",B=0;if(t.save(),S!==this.direction&&(t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?Te:Ye),o-=u*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(e,t,c,0,n.join(""),s,o),void t.restore();for(let z=0,G=n.length-1;z<=G;z++)T=z===G||this.charSpacing||g,I+=n[z],_=this.__charBounds[c][z],B===0?(s+=y*(_.kernedWidth-_.width),B+=_.width):B+=_.kernedWidth,d&&!T&&this._reSpaceAndTab.test(n[z])&&(T=!0),T||(w=w||this.getCompleteStyleDeclaration(c,z),C=this.getCompleteStyleDeclaration(c,z+1),T=gh(w,C,!1)),T&&(g?(t.save(),t.translate(_.renderLeft,_.renderTop),t.rotate(_.angle),this._renderChar(e,t,c,z,I,-B/2,0),t.restore()):(R=s,this._renderChar(e,t,c,z,I,R,o)),I="",w=C,s+=y*B,B=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=mr({width:t,height:n}),o=s.getContext("2d");return s.width=t,s.height=n,o.beginPath(),o.moveTo(0,0),o.lineTo(t,0),o.lineTo(t,n),o.lineTo(0,n),o.closePath(),o.translate(t/2,n/2),o.fillStyle=e.toLive(o),this._applyPatternGradientTransform(o,e),o.fill(),o.createPattern(s,"no-repeat")}handleFiller(e,t,n){let s,o;return Vt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,o=-this.height/2,e.translate(s,o),e[t]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:o}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,s,o,c,u){const d=this._getStyleDeclaration(n,s),g=this.getCompleteStyleDeclaration(n,s),p=e==="fillText"&&g.fill,v=e==="strokeText"&&g.stroke&&g.strokeWidth;if(v||p){if(t.save(),t.font=this._getFontDeclaration(g),d.textBackgroundColor&&this._removeShadow(t),d.deltaY&&(u+=d.deltaY),p){const y=this._setFillStyles(t,g);t.fillText(o,c-y.offsetX,u-y.offsetY)}if(v){const y=this._setStrokeStyles(t,g);t.strokeText(o,c-y.offsetX,u-y.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const s=this.get2DCursorLocation(e,!0),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),c=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),u={fontSize:o*n.size,deltaY:c+o*n.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,s=this.textAlign,o=this.direction,c=this.isEndOfWrapping(e);let u=0;return s===fr||s===Es&&!c||s===ks&&!c||s===Ga&&!c?0:(s===fe&&(u=n/2),s===Ye&&(u=n),s===Es&&(u=n/2),s===ks&&(u=n),o==="rtl"&&(s===Ye||s===fr||s===ks?u=0:s===Te||s===Ga?u=-n:s!==fe&&s!==Es||(u=-n/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var s;return(s=this._getStyleDeclaration(e,t)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const s=this._getLeftOffset(),o=this.path,c=this._getWidthOfCharSpacing(),u=this.offsets[t];for(let d=0,g=this._textLines.length;d<g;d++){const p=this.getHeightOfLine(d);if(!this[t]&&!this.styleHas(t,d)){n+=p;continue}const v=this._textLines[d],y=p/this.lineHeight,S=this._getLineLeftOffset(d);let w,C,_=0,T=0,R=this.getValueOfPropertyAt(d,0,t),I=this.getValueOfPropertyAt(d,0,Je);const B=n+y*(1-this._fontSizeFraction);let z=this.getHeightOfChar(d,0),G=this.getValueOfPropertyAt(d,0,"deltaY");for(let K=0,ie=v.length;K<ie;K++){const ce=this.__charBounds[d][K];w=this.getValueOfPropertyAt(d,K,t),C=this.getValueOfPropertyAt(d,K,Je);const we=this.getHeightOfChar(d,K),Se=this.getValueOfPropertyAt(d,K,"deltaY");if(o&&w&&C)e.save(),e.fillStyle=I,e.translate(ce.renderLeft,ce.renderTop),e.rotate(ce.angle),e.fillRect(-ce.kernedWidth/2,u*we+Se,ce.kernedWidth,this.fontSize/15),e.restore();else if((w!==R||C!==I||we!==z||Se!==G)&&T>0){let he=s+S+_;this.direction==="rtl"&&(he=this.width-he-T),R&&I&&(e.fillStyle=I,e.fillRect(he,B+u*z+G,T,this.fontSize/15)),_=ce.left,T=ce.width,R=w,I=C,z=we,G=Se}else T+=ce.kernedWidth}let Q=s+S+_;this.direction==="rtl"&&(Q=this.width-Q-T),e.fillStyle=C,w&&C&&e.fillRect(Q,B+u*z+G,T-c,this.fontSize/15),n+=p}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const c=e.includes("'")||e.includes('"')||e.includes(",")||dt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(o?this.CACHE_FONT_SIZE:s,"px"),c].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return fh(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),s=[`
`];let o=[];for(let c=0;c<t.length;c++)n[c]=this.graphemeSplit(t[c]),o=o.concat(n[c],s);return o.pop(),{_unwrappedLines:n,lines:t,graphemeText:o,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject([...ev,...e])),{},{styles:_C(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let s=!1,o=!1;if(typeof e=="object")for(const c in e)c==="path"&&this.setPathInfo(),s=s||n.includes(c),o=o||c==="path";else s=n.includes(e),o=e==="path";return o&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const s=Nr(e,dt.ATTRIBUTE_NAMES,n),o=D(D({},t),s),{textAnchor:c=Te,textDecoration:u="",dx:d=0,dy:g=0,top:p=0,left:v=0,fontSize:y=eh,strokeWidth:S=1}=o,w=Fe(o,L_),C=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),D({left:v+d,top:p+g,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:y},w)),_=C.getScaledHeight()/C.height,T=((C.height+C.strokeWidth)*C.lineHeight-C.height)*_,R=C.getScaledHeight()+T;let I=0;return c===fe&&(I=C.getScaledWidth()/2),c===Ye&&(I=C.getScaledWidth()),C.set({left:C.left-I,top:C.top-(R-C.fontSize*(.07+C._fontSizeFraction))/C.lineHeight,strokeWidth:S}),C}static fromObject(e){return this._fromObject(D(D({},e),{},{styles:AC(e.styles||{},e.text)}),{extraParam:"text"})}}b(dt,"textLayoutProperties",$m),b(dt,"cacheProperties",[...Ir,...ev]),b(dt,"ownDefaults",j_),b(dt,"type","Text"),b(dt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),b(dt,"ATTRIBUTE_NAMES",fn.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),jm(dt,[class extends Am{_toSVG(){const a=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(a.textTop,a.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(a){return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(a){let{textBgRects:e,textSpans:t}=a;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(F_,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(a,e){const t=[],n=[];let s,o=a;this.backgroundColor&&n.push(...wu(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,u=this._textLines.length;c<u;c++)s=this._getLineLeftOffset(c),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(n,c,e+s,o),this._setSVGTextLineText(t,c,e+s,o),o+=this.getHeightOfLine(c);return{textSpans:t,textBgRects:n}}_createTextCharSpan(a,e,t,n){const s=this.getSvgSpanStyles(e,a!==a.trim()||!!a.match(R_)),o=s?'style="'.concat(s,'"'):"",c=e.deltaY,u=c?' dy="'.concat(Be(c,xe.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Be(t,xe.NUM_FRACTION_DIGITS),'" y="').concat(Be(n,xe.NUM_FRACTION_DIGITS),'" ').concat(u).concat(o,">").concat(SC(a),"</tspan>")}_setSVGTextLineText(a,e,t,n){const s=this.getHeightOfLine(e),o=this.textAlign.includes(fr),c=this._textLines[e];let u,d,g,p,v,y="",S=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let w=0,C=c.length-1;w<=C;w++)v=w===C||this.charSpacing,y+=c[w],g=this.__charBounds[e][w],S===0?(t+=g.kernedWidth-g.width,S+=g.width):S+=g.kernedWidth,o&&!v&&this._reSpaceAndTab.test(c[w])&&(v=!0),v||(u=u||this.getCompleteStyleDeclaration(e,w),d=this.getCompleteStyleDeclaration(e,w+1),v=gh(u,d,!0)),v&&(p=this._getStyleDeclaration(e,w),a.push(this._createTextCharSpan(y,p,t,n)),y="",u=d,this.direction==="rtl"?t-=S:t+=S,S=0)}_setSVGTextLineBg(a,e,t,n){const s=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight;let c,u=0,d=0,g=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let p=0;p<s.length;p++){const{left:v,width:y,kernedWidth:S}=this.__charBounds[e][p];c=this.getValueOfPropertyAt(e,p,"textBackgroundColor"),c!==g?(g&&a.push(...wu(g,t+d,n,u,o)),d=v,u=y,g=c):u+=S}c&&a.push(...wu(g,t+d,n,u,o))}_getSVGLineTopOffset(a){let e,t=0;for(e=0;e<a;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(a){return"".concat(super.getSvgStyles(a)," white-space: pre;")}getSvgSpanStyles(a,e){const{fontFamily:t,strokeWidth:n,stroke:s,fill:o,fontSize:c,fontStyle:u,fontWeight:d,deltaY:g}=a,p=this.getSvgTextDecoration(a);return[s?Ps(Tt,s):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",u?"font-style: ".concat(u,"; "):"",d?"font-weight: ".concat(d,"; "):"",p&&"text-decoration: ".concat(p,"; "),o?Ps(Je,o):"",g?"baseline-shift: ".concat(-g,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(a){return["overline","underline","line-through"].filter(e=>a[e.replace("-","")]).join(" ")}}]),Z.setClass(dt),Z.setSVGClass(dt);class I_{constructor(e){b(this,"target",void 0),b(this,"__mouseDownInPlace",!1),b(this,"__dragStartFired",!1),b(this,"__isDraggingOver",!1),b(this,"__dragStartSelection",void 0),b(this,"__dragImageDisposer",void 0),b(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:s,selectionEnd:o}=t;const c=this.target,u=c.canvas,d=new L(c.flipX?-1:1,c.flipY?-1:1),g=c._getCursorBoundaries(s),p=new L(g.left+g.leftOffset,g.top+g.topOffset).multiply(d).transform(c.calcTransformMatrix()),v=u.getScenePoint(e).subtract(p),y=c.getCanvasRetinaScaling(),S=c.getBoundingRect(),w=p.subtract(new L(S.left,S.top)),C=u.viewportTransform,_=w.add(v).transform(C,!0),T=c.backgroundColor,R=dh(c.styles);c.backgroundColor="";const I={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(I,0,s),c.setSelectionStyles(I,o,c.text.length),c.dirty=!0;const B=c.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=T,c.styles=R,c.dirty=!0,zu(B,{position:"fixed",left:"".concat(-B.width,"px"),border:At,width:"".concat(B.width/y,"px"),height:"".concat(B.height/y,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{B.remove()},tr(e.target||this.target.hiddenTextarea).body.appendChild(B),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(B,_.x,_.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},o=t._text.slice(s.selectionStart,s.selectionEnd).join(""),c=D({text:t.text,value:o},s);e.dataTransfer.setData("text/plain",o),e.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,c)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(o&&!s){const c=this.target,u=c.canvas;let d=c.getSelectionStartFromPointer(n);const{styles:g}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},p=o[Math.max(0,o.length-1)],v=0;if(this.__dragStartSelection){const y=this.__dragStartSelection.selectionStart,S=this.__dragStartSelection.selectionEnd;d>y&&d<=S?d=y:d>S&&(d-=S-y),c.removeChars(y,S),delete this.__dragStartSelection}c._reNewline.test(p)&&(c._reNewline.test(c._text[d])||d===c._text.length)&&(o=o.trimEnd()),e.didDrop=!0,e.dropTarget=c,c.insertChars(o,g,d),u.setActiveObject(c),c.enterEditing(n),c.selectionStart=Math.min(d+v,c._text.length),c.selectionEnd=Math.min(c.selectionStart+o.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(Ia,{index:d+v,action:"drop"}),u.fire("text:changed",{target:c}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,o=this.target.canvas,{selectionStart:c,selectionEnd:u}=this.__dragStartSelection,d=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||At;d===At?(s.selectionStart=c,s.selectionEnd=u,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),d==="move"&&(s.removeChars(c,u),s.selectionStart=s.selectionEnd=c,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Ia,{index:c,action:"dragend"}),o.fire("text:changed",{target:s}),o.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const vp=/[ \n\.,;!\?\-]/;class N_ extends dt{constructor(){super(...arguments),b(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:s,onComplete:o}=e;return bm({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:s,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(t===-1||!th.test(n[e-1]))?e-1:e,o=n[s];for(;s>0&&s<n.length&&!vp.test(o);)s+=t,o=n[s];return t===-1&&vp.test(o)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;tr(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,o=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==o||s!==n&&o!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===o||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const s=n.slice(0,e),o=this.graphemeSplit(s).length;if(e===t)return{selectionStart:o,selectionEnd:o};const c=n.slice(e,t);return{selectionStart:o,selectionEnd:o+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(e,t,n){const s=n.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,o=n.charIndex,c=this.getValueOfPropertyAt(s,o,"fontSize")*this.lineHeight,u=t.leftOffset,d=this.getCanvasRetinaScaling(),g=this.canvas.upperCanvasEl,p=g.width/d,v=g.height/d,y=p-c,S=v-c,w=new L(t.left+u,t.top+t.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new L(g.clientWidth/p,g.clientHeight/v));return w.x<0&&(w.x=0),w.x>y&&(w.x=y),w.y<0&&(w.y=0),w.y>S&&(w.y=S),w.x+=this.canvas._offset.left,w.y+=this.canvas._offset.top,{left:"".concat(w.x,"px"),top:"".concat(w.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Na),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:o,charIndex:c}=this.get2DCursorLocation(t,!0);if(n!==o){if(this.styles[n])for(let u=s;u<this._unwrappedTextLines[n].length;u++)delete this.styles[n][u];if(this.styles[o])for(let u=c;u<this._unwrappedTextLines[o].length;u++){const d=this.styles[o][u];d&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+u-c]=d)}for(let u=n+1;u<=o;u++)delete this.styles[u];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const u=this.styles[n],d=c-s;for(let g=s;g<c;g++)delete u[g];for(const g in this.styles[n]){const p=parseInt(g,10);p>=c&&(u[p-d]=u[g],delete u[g])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const s in this.styles){const o=parseInt(s,10);o>e&&(this.styles[o+t]=n[o],n[o-t]||delete this.styles[o])}}insertNewlineStyleObject(e,t,n,s){const o={},c=this._unwrappedTextLines[e].length,u=c===t;let d=!1;n||(n=1),this.shiftLineStyles(e,n);const g=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const v in this.styles[e]){const y=parseInt(v,10);y>=t&&(d=!0,o[y-t]=this.styles[e][v],u&&t===0||delete this.styles[e][v])}let p=!1;for(d&&!u&&(this.styles[e+n]=o,p=!0),(p||c>t)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:D({},s[n-1])}:g?this.styles[e+n]={0:D({},g)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,s){this.styles||(this.styles={});const o=this.styles[e],c=o?D({},o):{};n||(n=1);for(const d in c){const g=parseInt(d,10);g>=t&&(o[g+n]=c[g],c[g-n]||delete o[g])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=D({},s[n]));return}if(!o)return;const u=o[t?t-1:1];for(;u&&n--;)this.styles[e][t+n]=D({},u)}insertNewStyleBlock(e,t,n){const s=this.get2DCursorLocation(t,!0),o=[0];let c,u=0;for(let d=0;d<e.length;d++)e[d]===`
`?(u++,o[u]=0):o[u]++;for(o[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),u&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+o[0],u),c=1;c<u;c++)o[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,o[c],n):n&&this.styles[s.lineIndex+c]&&n[0]&&(this.styles[s.lineIndex+c][0]=n[0]),n=n&&n.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,o[c],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const o=this.graphemeSplit(e);this.insertNewStyleBlock(o,n,t),this._text=[...this._text.slice(0,n),...o,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Te:this._selectionDirection===Ye&&(this._selectionDirection=Te,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===Ye?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=Ye:this._selectionDirection===Te&&(this._selectionDirection=Ye,this.selectionStart=t),this.selectionEnd=n)}}class B_ extends N_{initHiddenTextarea(){const e=this.canvas&&tr(this.canvas.getElement())||bi(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(c=>{let[u,d]=c;return t.setAttribute(u,d)});const{top:n,left:s,fontSize:o}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(c=>{let[u,d]=c;return t.addEventListener(u,this[d].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(Ia),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,c=s.length,u=this.selectionStart,d=this.selectionEnd,g=u!==d;let p,v,y,S,w=c-o;const C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),_=u>C.selectionStart;g?(v=this._text.slice(u,d),w+=d-u):c<o&&(v=_?this._text.slice(d+w,d):this._text.slice(u,u-w));const T=s.slice(C.selectionEnd-w,C.selectionEnd);if(v&&v.length&&(T.length&&(p=this.getSelectionStyles(u,u+1,!1),p=T.map(()=>p[0])),g?(y=u,S=d):_?(y=d-v.length,S=d):(y=d,S=d+v.length),this.removeStyleFromTo(y,S)),T.length){const{copyPasteData:R}=pr();t&&T.join("")===R.copiedText&&!xe.disableStyleCopyPaste&&(p=R.copiedTextStyle),this.insertNewStyleBlock(T,u,p)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:s}=t;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=pr();e.copiedText=this.getSelectedText(),xe.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,s=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],s+=n.left+n.width),s}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),o=s.lineIndex;if(o===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const c=s.charIndex,u=this._getWidthBeforeCursor(o,c),d=this._getIndexOnLine(o+1,u);return this._textLines[o].slice(c).length+d+1+this.missingNewlineOffset(o)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),o=s.lineIndex;if(o===0||e.metaKey||e.keyCode===33)return-n;const c=s.charIndex,u=this._getWidthBeforeCursor(o,c),d=this._getIndexOnLine(o-1,u),g=this._textLines[o].slice(0,c),p=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+d-g.length+(1-p)}_getIndexOnLine(e,t){const n=this._textLines[e];let s,o,c=this._getLineLeftOffset(e),u=0;for(let d=0,g=n.length;d<g;d++)if(s=this.__charBounds[e][d].width,c+=s,c>t){o=!0;const p=c-s,v=c,y=Math.abs(p-t);u=Math.abs(v-t)<y?d:d-1;break}return o||(u=n.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Ye);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=Ai(0,this.selectionStart,s),this.selectionEnd=Ai(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Te?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Te,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Ye&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Te,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Te&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ye,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Ye,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Cu=a=>!!a.button;class z_ extends B_{constructor(){super(...arguments),b(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new I_(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),ju(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Cu(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Cu(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Cu(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(rr(this.calcTransformMatrix())).add(new L(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,o=0;for(let g=0;g<this._textLines.length&&n<=t.y;g++)n+=this.getHeightOfLine(g),o=g,g>0&&(s+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));let c=Math.abs(this._getLineLeftOffset(o));const u=this._textLines[o].length,d=this.__charBounds[o];for(let g=0;g<u;g++){const p=c+d[g].kernedWidth;if(t.x<=p){Math.abs(t.x-p)<=Math.abs(t.x-c)&&s++;break}c=p,s++}return Math.min(this.flipX?u-s:s,this._text.length)}}const sa="moveCursorUp",oa="moveCursorDown",aa="moveCursorLeft",la="moveCursorRight",ca="exitEditing",U_=D({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:ca,27:ca,33:sa,34:oa,35:la,36:aa,37:aa,38:sa,39:la,40:oa},keysMapRtl:{9:ca,27:ca,33:sa,34:oa,35:aa,36:la,37:la,38:sa,39:aa,40:oa},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Dr extends z_{static getDefaults(){return D(D({},super.getDefaults()),Dr.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,D(D({},Dr.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Uu&&this.canvas.textEditingManager.remove(this),t instanceof Uu&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),o=this._getCursorBoundariesOffsets(e,t);return{left:n,top:s,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:s,lineIndex:o}=this.get2DCursorLocation(e);for(let g=0;g<o;g++)t+=this.getHeightOfLine(g);const c=this._getLineLeftOffset(o),u=this.__charBounds[o][s];u&&(n=u.left),this.charSpacing!==0&&s===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const d={top:t,left:c+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===Ye||this.textAlign===fr||this.textAlign===ks?d.left*=-1:this.textAlign===Te||this.textAlign===Ga?d.left=c-(n>0?n:0):this.textAlign!==fe&&this.textAlign!==Es||(d.left=c-(n>0?n:0))),d}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),s=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,c=this.getValueOfPropertyAt(s,o,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/u,g=this.getValueOfPropertyAt(s,o,"deltaY"),p=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,o,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-d/2,top:p+t.top+g,width:d,height:c}}_renderCursor(e,t,n){const{color:s,opacity:o,left:c,top:u,width:d,height:g}=this.getCursorRenderingData(n,t);e.fillStyle=s,e.globalAlpha=o,e.fillRect(c,u,d,g)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const s=t.selectionStart,o=t.selectionEnd,c=this.textAlign.includes(fr),u=this.get2DCursorLocation(s),d=this.get2DCursorLocation(o),g=u.lineIndex,p=d.lineIndex,v=u.charIndex<0?0:u.charIndex,y=d.charIndex<0?0:d.charIndex;for(let S=g;S<=p;S++){const w=this._getLineLeftOffset(S)||0;let C=this.getHeightOfLine(S),_=0,T=0,R=0;if(S===g&&(T=this.__charBounds[g][v].left),S>=g&&S<p)R=c&&!this.isEndOfWrapping(S)?this.width:this.getLineWidth(S)||5;else if(S===p)if(y===0)R=this.__charBounds[p][y].left;else{const Q=this._getWidthOfCharSpacing();R=this.__charBounds[p][y-1].left+this.__charBounds[p][y-1].width-Q}_=C,(this.lineHeight<1||S===p&&this.lineHeight>1)&&(C/=this.lineHeight);let I=n.left+w+T,B=C,z=0;const G=R-T;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",B=1,z=C):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Ye||this.textAlign===fr||this.textAlign===ks?I=this.width-I-G:this.textAlign===Te||this.textAlign===Ga?I=n.left+w-R:this.textAlign!==fe&&this.textAlign!==Es||(I=n.left+w-R)),e.fillRect(I,n.top+n.topOffset+z,G,B),n.topOffset+=_}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Je)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}b(Dr,"ownDefaults",U_),b(Dr,"type","IText"),Z.setClass(Dr),Z.setClass(Dr,"i-text");class Pn extends Dr{static getDefaults(){return D(D({},super.getDefaults()),Pn.ownDefaults)}constructor(e,t){super(e,D(D({},Pn.ownDefaults),t))}static createControls(){return{controls:vC()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(fr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,s=0;const o={};for(let c=0;c<e.graphemeLines.length;c++)e.graphemeText[s]===`
`&&c>0?(n=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&c>0&&(n++,s++),o[c]={line:t,offset:n},s+=e.graphemeLines[c].length,n+=e.graphemeLines[c].length;return o}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,s=e+1,o=!1;const c=this._styleMap[e],u=this._styleMap[e+1];c&&(e=c.line,n=c.offset),u&&(s=u.line,o=s===e,t=u.offset);const d=e===void 0?this.styles:{line:this.styles[e]};for(const g in d)for(const p in d[g]){const v=parseInt(p,10);if(v>=n&&(!o||v<t))for(const y in d[g][p])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let o=0;o<n.wordsData.length;o++)s.push(...this._wrapLine(o,t,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let s=0;return{wordsData:e.map((o,c)=>{let u=0;const d=t?this.graphemeSplit(o):this.wordSplit(o);return d.length===0?[{word:[],width:0}]:d.map(g=>{const p=t?[g]:this.graphemeSplit(g),v=this._measureWord(p,c,u);return s=Math.max(v,s),u+=p.length+n.length,{word:p,width:v}})}),largestWordWidth:s}}_measureWord(e,t){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0;for(let c=0,u=e.length;c<u;c++)o+=this._getGraphemeBox(e[c],t,c+s,n,!0).kernedWidth,n=e[c];return o}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:s,wordsData:o}=n,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,g=[],p=d?"":" ";let v=0,y=[],S=0,w=0,C=!0;t-=c;const _=Math.max(t,s,this.dynamicMinWidth),T=o[e];let R;for(S=0,R=0;R<T.length;R++){const{word:I,width:B}=T[R];S+=I.length,v+=w+B-u,v>_&&!C?(g.push(y),y=[],v=B,C=!0):v+=u,C||d||y.push(p),y=y.concat(I),w=d?0:this._measureWord([p],e,S),S++,C=!1}return R&&g.push(y),s+c>this.dynamicMinWidth&&(this.dynamicMinWidth=s-u+c),g}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),s=new Array(n.length);for(let o=0;o<n.length;o++)s[o]=n[o].join("");return t.lines=s,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}b(Pn,"type","Textbox"),b(Pn,"textLayoutProperties",[...Dr.textLayoutProperties,"width"]),b(Pn,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Z.setClass(Pn);class yp extends sl{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:s,group:o}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:c,height:u}=Mr(Lm(n,s)),d=new L(c,u);if(s.absolutePositioned)return{center:Ci(s.getRelativeCenterPoint(),void 0,o?o.calcTransformMatrix():void 0),size:d};{const g=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:p=new L,correction:v=new L}=this.calcBoundingBox(t,e)||{};return{center:p.add(g),correction:v.subtract(g),size:d}}return{center:n.getRelativeCenterPoint().add(g),size:d}}}}b(yp,"type","clip-path"),Z.setClass(yp);class xp extends sl{getInitialSize(e,t){let{target:n}=e,{size:s}=t;return new L(n.width||s.x,n.height||s.y)}}b(xp,"type","fixed"),Z.setClass(xp);class W_ extends js{subscribeTargets(e){const t=e.target;e.targets.reduce((n,s)=>(s.parent&&n.add(s.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((s,o)=>(o.parent&&s.add(o.parent),s),new Set).forEach(s=>{!n.some(o=>o.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Mn extends jn{static getDefaults(){return D(D({},super.getDefaults()),Mn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Mn.ownDefaults),this.setOptions(t);const{left:n,top:s,layoutManager:o}=t;this.groupInit(e,{left:n,top:s,layoutManager:o??new W_})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const o=this._objects.findIndex(u=>u.isInFrontOf(s)),c=o===-1?this.size():o;this.insertAt(c,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(cn("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(s=>{const{parent:o}=s;o&&n.add(o)}),e===mh?n.forEach(s=>{s._onAfterObjectsChange(Ha,t)}):n.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=D(D({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(e,s);super._renderControls(e,t),e.restore()}}b(Mn,"type","ActiveSelection"),b(Mn,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Z.setClass(Mn),Z.setClass(Mn,"activeSelection");class V_{constructor(){b(this,"resources",{})}applyFilters(e,t,n,s,o){const c=o.getContext("2d");if(!c)return;c.drawImage(t,0,0,n,s);const u={sourceWidth:n,sourceHeight:s,imageData:c.getImageData(0,0,n,s),originalEl:t,originalImageData:c.getImageData(0,0,n,s),canvasEl:o,ctx:c,filterBackend:this};e.forEach(g=>{g.applyTo(u)});const{imageData:d}=u;return d.width===n&&d.height===s||(o.width=d.width,o.height=d.height),c.putImageData(d,0,0),u}}class rv{constructor(){let{tileSize:e=xe.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};b(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),b(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=mr({width:e,height:t}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,t,n,s,o,c){const u=this.gl,d=o.getContext("2d");if(!u||!d)return;let g;c&&(g=this.getCachedTexture(c,t));const p={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:u,sourceTexture:this.createTexture(u,n,s,g?void 0:t),targetTexture:this.createTexture(u,n,s),originalTexture:g||this.createTexture(u,n,s,g?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},v=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,v),e.forEach(y=>{y&&y.applyTo(p)}),function(y){const S=y.targetCanvas,w=S.width,C=S.height,_=y.destinationWidth,T=y.destinationHeight;w===_&&C===T||(S.width=_,S.height=T)}(p),this.copyGLTo2D(u,p),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(p.sourceTexture),u.deleteTexture(p.targetTexture),u.deleteFramebuffer(v),d.setTransform(1,0,0,1,0,0),p}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,s,o){const{NEAREST:c,TEXTURE_2D:u,RGBA:d,UNSIGNED_BYTE:g,CLAMP_TO_EDGE:p,TEXTURE_MAG_FILTER:v,TEXTURE_MIN_FILTER:y,TEXTURE_WRAP_S:S,TEXTURE_WRAP_T:w}=e,C=e.createTexture();return e.bindTexture(u,C),e.texParameteri(u,v,o||c),e.texParameteri(u,y,o||c),e.texParameteri(u,S,p),e.texParameteri(u,w,p),s?e.texImage2D(u,0,d,d,g,s):e.texImage2D(u,0,d,t,n,0,d,g,null),C}getCachedTexture(e,t,n){const{textureCache:s}=this;if(s[e])return s[e];{const o=this.createTexture(this.gl,t.width,t.height,t,n);return o&&(s[e]=o),o}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,s=t.targetCanvas,o=s.getContext("2d");if(!o)return;o.translate(0,s.height),o.scale(1,-1);const c=n.height-s.height;o.drawImage(n,0,c,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),s=t.destinationWidth,o=t.destinationHeight,c=s*o*4;if(!n)return;const u=new Uint8Array(this.imageBuffer,0,c),d=new Uint8ClampedArray(this.imageBuffer,0,c);e.readPixels(0,0,s,o,e.RGBA,e.UNSIGNED_BYTE,u);const g=new ImageData(d,s,o);n.putImageData(g,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),o=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),o&&(t.vendor=o.toLowerCase())}return this.gpuInfo=t,t}}let _u;function H_(){const{WebGLProbe:a}=pr();return a.queryWebGL(or()),xe.enableGLFiltering&&a.isSupported(xe.textureSize)?new rv({tileSize:xe.textureSize}):new V_}function Au(){return!_u&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(_u=H_()),_u}const Y_=["filters","resizeFilter","src","crossOrigin","type"],nv=["cropX","cropY"];class jt extends ct{static getDefaults(){return D(D({},super.getDefaults()),jt.ownDefaults)}constructor(e,t){super(),b(this,"_lastScaleX",1),b(this,"_lastScaleY",1),b(this,"_filterScalingX",1),b(this,"_filterScalingY",1),this.filters=[],Object.assign(this,jt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(un()),this.setElement(typeof e=="string"?(this.canvas&&tr(this.canvas.getElement())||bi()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(t=e.classList)===null||t===void 0||t.add(jt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Au(!1);t instanceof rv&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&pr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),D(D({},super.toObject([...nv,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,s=-this.height/2;let o=[],c=[],u="",d="";if(!t)return[];if(this.hasCrop()){const g=un();o.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(d).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const g=this.fill;this.fill=null,c=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=g}return o=this.paintFirst!==Je?o.concat(c,e):o.concat(e,c),o}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Pa(e,{crossOrigin:t,signal:n}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,o=n.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&o>t)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=o);const u=mr(c),{width:d,height:g}=c;this._element=u,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=o,Au().applyFilters([e],c,d,g,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(o=>o&&!o.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const o=mr({width:n,height:s});this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);Au().applyFilters(e,this._originalElement,n,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,s=this._filterScalingY,o=this.width,c=this.height,u=Math.max(this.cropX,0),d=Math.max(this.cropY,0),g=t.naturalWidth||t.width,p=t.naturalHeight||t.height,v=u*n,y=d*s,S=Math.min(o*n,g-v),w=Math.min(c*s,p-y),C=-o/2,_=-c/2,T=Math.min(o,g/n-u),R=Math.min(c,p/s-d);t&&e.drawImage(t,v,y,S,w,C,_,T,R)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=ES(this.preserveAspectRatio||""),t=this.width,n=this.height,s={width:t,height:n};let o,c=this._element.width,u=this._element.height,d=1,g=1,p=0,v=0,y=0,S=0;return!e||e.alignX===At&&e.alignY===At?(d=t/c,g=n/u):(e.meetOrSlice==="meet"&&(d=g=qC(this._element,s),o=(t-c*d)/2,e.alignX==="Min"&&(p=-o),e.alignX==="Max"&&(p=o),o=(n-u*g)/2,e.alignY==="Min"&&(v=-o),e.alignY==="Max"&&(v=o)),e.meetOrSlice==="slice"&&(d=g=JC(this._element,s),o=c-t/d,e.alignX==="Mid"&&(y=o/2),e.alignX==="Max"&&(y=o),o=u-n/g,e.alignY==="Mid"&&(S=o/2),e.alignY==="Max"&&(S=o),c=t/d,u=n/g)),{width:c,height:u,scaleX:d,scaleY:g,offsetLeft:p,offsetTop:v,cropX:y,cropY:S}}static fromObject(e,t){let{filters:n,resizeFilter:s,src:o,crossOrigin:c,type:u}=e,d=Fe(e,Y_);return Promise.all([Pa(o,D(D({},t),{},{crossOrigin:c})),n&&Ds(n,t),s&&Ds([s],t),tl(d,t)]).then(g=>{let[p,v=[],[y]=[],S={}]=g;return new this(p,D(D({},d),{},{src:o,filters:v,resizeFilter:y},S))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Pa(e,{crossOrigin:t,signal:n}).then(o=>new this(o,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=Nr(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"],t,s).catch(o=>(cn("log","Unable to parse Image",o),null))}}b(jt,"type","Image"),b(jt,"cacheProperties",[...Ir,...nv]),b(jt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),b(jt,"CSS_CANVAS","canvas-img"),b(jt,"ATTRIBUTE_NAMES",[...fn,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),Z.setClass(jt),Z.setSVGClass(jt);nl(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const al=a=>a.webgl!==void 0,vh="precision highp float",X_=`
    `.concat(vh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),G_=["type"],K_=["type"],Q_=new RegExp(vh,"g");class Ze{get type(){return this.constructor.type}constructor(){let e=Fe(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},G_);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return X_}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=pr();s!=="highp"&&(t=t.replace(Q_,vh.replace("highp",s)));const o=e.createShader(e.VERTEX_SHADER),c=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!o||!c||!u)throw new gr("Vertex, fragment shader or program creation error");if(e.shaderSource(o,n),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new gr("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.shaderSource(c,t),e.compileShader(c),!e.getShaderParameter(c,e.COMPILE_STATUS))throw new gr("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(c)));if(e.attachShader(u,o),e.attachShader(u,c),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new gr('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const d=this.getUniformLocations(e,u)||{};return d.uStepW=e.getUniformLocation(u,"uStepW"),d.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:d}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,s={};for(let o=0;o<n.length;o++)s[n[o]]=e.getUniformLocation(t,n[o]);return s}sendAttributeData(e,t,n){const s=t.aPosition,o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){al(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,s=mr({width:t,height:n});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return D({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Fe(e,K_))}}b(Ze,"type","BaseFilter"),b(Ze,"uniformLocations",[]);const q_={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class ua extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(q_[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new be(this.color).getSource(),s=this.alpha,o=n[0]*s,c=n[1]*s,u=n[2]*s,d=1-s;for(let g=0;g<t.length;g+=4){const p=t[g],v=t[g+1],y=t[g+2];let S,w,C;switch(this.mode){case"multiply":S=p*o/255,w=v*c/255,C=y*u/255;break;case"screen":S=255-(255-p)*(255-o)/255,w=255-(255-v)*(255-c)/255,C=255-(255-y)*(255-u)/255;break;case"add":S=p+o,w=v+c,C=y+u;break;case"difference":S=Math.abs(p-o),w=Math.abs(v-c),C=Math.abs(y-u);break;case"subtract":S=p-o,w=v-c,C=y-u;break;case"darken":S=Math.min(p,o),w=Math.min(v,c),C=Math.min(y,u);break;case"lighten":S=Math.max(p,o),w=Math.max(v,c),C=Math.max(y,u);break;case"overlay":S=o<128?2*p*o/255:255-2*(255-p)*(255-o)/255,w=c<128?2*v*c/255:255-2*(255-v)*(255-c)/255,C=u<128?2*y*u/255:255-2*(255-y)*(255-u)/255;break;case"exclusion":S=o+p-2*o*p/255,w=c+v-2*c*v/255,C=u+y-2*u*y/255;break;case"tint":S=o+p*d,w=c+v*d,C=u+y*d}t[g]=S,t[g+1]=w,t[g+2]=C}}sendUniformData(e,t){const n=new be(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}b(ua,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),b(ua,"type","BlendColor"),b(ua,"uniformLocations",["uColor"]),Z.setClass(ua);const J_={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Z_=["type","image"];class ha extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return J_[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:s},filterBackend:{resources:o}}=e;const c=this.image;o.blendImage||(o.blendImage=or());const u=o.blendImage,d=u.getContext("2d");u.width!==n||u.height!==s?(u.width=n,u.height=s):d.clearRect(0,0,n,s),d.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),d.drawImage(c.getElement(),0,0,n,s);const g=d.getImageData(0,0,n,s).data;for(let p=0;p<t.length;p+=4){const v=t[p],y=t[p+1],S=t[p+2],w=t[p+3],C=g[p],_=g[p+1],T=g[p+2],R=g[p+3];switch(this.mode){case"multiply":t[p]=v*C/255,t[p+1]=y*_/255,t[p+2]=S*T/255,t[p+3]=w*R/255;break;case"mask":t[p+3]=R}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return D(D({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:s}=e,o=Fe(e,Z_);return jt.fromObject(s,t).then(c=>new this(D(D({},o),{},{image:c})))}}b(ha,"type","BlendImage"),b(ha,"defaults",{mode:"multiply",alpha:1}),b(ha,"uniformLocations",["uTransformMatrix","uImage"]),Z.setClass(ha);class da extends Ze{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){al(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:s}}=e;const{width:o,height:c}=n;s.blurLayer1||(s.blurLayer1=or(),s.blurLayer2=or());const u=s.blurLayer1,d=s.blurLayer2;u.width===o&&u.height===c||(d.width=u.width=o,d.height=u.height=c);const g=u.getContext("2d"),p=d.getContext("2d"),v=15,y=.06*this.blur*.5;let S,w,C,_;for(g.putImageData(n,0,0),p.clearRect(0,0,o,c),_=-15;_<=v;_++)S=(Math.random()-.5)/4,w=_/v,C=y*w*o+S,p.globalAlpha=1-Math.abs(w),p.drawImage(u,C,S),g.drawImage(d,0,0),p.globalAlpha=1,p.clearRect(0,0,d.width,d.height);for(_=-15;_<=v;_++)S=(Math.random()-.5)/4,w=_/v,C=y*w*c+S,p.globalAlpha=1-Math.abs(w),p.drawImage(u,S,C),g.drawImage(d,0,0),p.globalAlpha=1,p.clearRect(0,0,d.width,d.height);t.drawImage(u,0,0);const T=t.getImageData(0,0,u.width,u.height);return g.globalAlpha=1,g.clearRect(0,0,u.width,u.height),T}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}b(da,"type","Blur"),b(da,"defaults",{blur:0}),b(da,"uniformLocations",["uDelta"]),Z.setClass(da);class fa extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=n,t[s+1]+=n,t[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}b(fa,"type","Brightness"),b(fa,"defaults",{brightness:0}),b(fa,"uniformLocations",["uBrightness"]),Z.setClass(fa);const iv={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class wi extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let o=0;o<t.length;o+=4){const c=t[o],u=t[o+1],d=t[o+2];if(t[o]=c*n[0]+u*n[1]+d*n[2]+255*n[4],t[o+1]=c*n[5]+u*n[6]+d*n[7]+255*n[9],t[o+2]=c*n[10]+u*n[11]+d*n[12]+255*n[14],!s){const g=t[o+3];t[o]+=g*n[3],t[o+1]+=g*n[8],t[o+2]+=g*n[13],t[o+3]=c*n[15]+u*n[16]+d*n[17]+g*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,o)}toObject(){return D(D({},super.toObject()),{},{matrix:[...this.matrix]})}}function Un(a,e){var t;const n=(b(t=class extends wi{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",a),b(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Z.setClass(n,a),n}b(wi,"type","ColorMatrix"),b(wi,"defaults",iv),b(wi,"uniformLocations",["uColorMatrix","uConstants"]),Z.setClass(wi);Un("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Un("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Un("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Un("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Un("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Un("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Un("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class wp extends Ze{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){al(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>Z.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}b(wp,"type","Composed"),Z.setClass(wp);class ga extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let o=0;o<t.length;o+=4)t[o]=s*(t[o]-128)+128,t[o+1]=s*(t[o+1]-128)+128,t[o+2]=s*(t[o+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}b(ga,"type","Contrast"),b(ga,"defaults",{contrast:0}),b(ga,"uniformLocations",["uContrast"]),Z.setClass(ga);const $_={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class pa extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return $_[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,s=this.matrix,o=Math.round(Math.sqrt(s.length)),c=Math.floor(o/2),u=t.width,d=t.height,g=e.ctx.createImageData(u,d),p=g.data,v=this.opaque?1:0;let y,S,w,C,_,T,R,I,B,z,G,Q,K;for(G=0;G<d;G++)for(z=0;z<u;z++){for(_=4*(G*u+z),y=0,S=0,w=0,C=0,K=0;K<o;K++)for(Q=0;Q<o;Q++)R=G+K-c,T=z+Q-c,R<0||R>=d||T<0||T>=u||(I=4*(R*u+T),B=s[K*o+Q],y+=n[I]*B,S+=n[I+1]*B,w+=n[I+2]*B,v||(C+=n[I+3]*B));p[_]=y,p[_+1]=S,p[_+2]=w,p[_+3]=v?n[_+3]:C}e.imageData=g}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return D(D({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}b(pa,"type","Convolute"),b(pa,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),b(pa,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Z.setClass(pa);const sv="Gamma";class ma extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,s=1/n[0],o=1/n[1],c=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let d=0;d<256;d++)u.r[d]=255*Math.pow(d/255,s),u.g[d]=255*Math.pow(d/255,o),u.b[d]=255*Math.pow(d/255,c);for(let d=0;d<t.length;d+=4)t[d]=u.r[t[d]],t[d+1]=u.g[t[d+1]],t[d+2]=u.b[t[d+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:sv,gamma:this.gamma.concat()}}}b(ma,"type",sv),b(ma,"defaults",{gamma:[1,1,1]}),b(ma,"uniformLocations",["uGamma"]),Z.setClass(ma);const e1={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class va extends Ze{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,s=0;s<t.length;s+=4){const o=t[s],c=t[s+1],u=t[s+2];switch(this.mode){case"average":n=(o+c+u)/3;break;case"lightness":n=(Math.min(o,c,u)+Math.max(o,c,u))/2;break;case"luminosity":n=.21*o+.72*c+.07*u}t[s+2]=t[s+1]=t[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return e1[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}b(va,"type","Grayscale"),b(va,"defaults",{mode:"average"}),b(va,"uniformLocations",["uMode"]),Z.setClass(va);const t1=D(D({},iv),{},{rotation:0});class Tu extends wi{calculateMatrix(){const e=this.rotation*Math.PI,t=Rr(e),n=Fr(e),s=1/3,o=Math.sqrt(s)*n,c=1-t;this.matrix=[t+c/3,s*c-o,s*c+o,0,0,s*c+o,t+s*c,s*c-o,0,0,s*c-o,s*c+o,t+s*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}b(Tu,"type","HueRotation"),b(Tu,"defaults",t1),Z.setClass(Tu);class ya extends Ze{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}b(ya,"type","Invert"),b(ya,"defaults",{alpha:!1,invert:!0}),b(ya,"uniformLocations",["uInvert","uAlpha"]),Z.setClass(ya);class xa extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let s=0;s<t.length;s+=4){const o=(.5-Math.random())*n;t[s]+=o,t[s+1]+=o,t[s+2]+=o}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}b(xa,"type","Noise"),b(xa,"defaults",{noise:0}),b(xa,"uniformLocations",["uNoise","uSeed"]),Z.setClass(xa);class wa extends Ze{applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;for(let o=0;o<s;o+=this.blocksize)for(let c=0;c<n;c+=this.blocksize){const u=4*o*n+4*c,d=t[u],g=t[u+1],p=t[u+2],v=t[u+3];for(let y=o;y<Math.min(o+this.blocksize,s);y++)for(let S=c;S<Math.min(c+this.blocksize,n);S++){const w=4*y*n+4*S;t[w]=d,t[w+1]=g,t[w+2]=p,t[w+3]=v}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}b(wa,"type","Pixelate"),b(wa,"defaults",{blocksize:4}),b(wa,"uniformLocations",["uBlocksize"]),Z.setClass(wa);class Sa extends Ze{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,s=new be(this.color).getSource(),o=[s[0]-n,s[1]-n,s[2]-n],c=[s[0]+n,s[1]+n,s[2]+n];for(let u=0;u<t.length;u+=4){const d=t[u],g=t[u+1],p=t[u+2];d>o[0]&&g>o[1]&&p>o[2]&&d<c[0]&&g<c[1]&&p<c[2]&&(t[u+3]=0)}}sendUniformData(e,t){const n=new be(this.color).getSource(),s=this.distance,o=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],c=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(t.uLow,o),e.uniform4fv(t.uHigh,c)}}b(Sa,"type","RemoveColor"),b(Sa,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),b(Sa,"uniformLocations",["uLow","uHigh"]),Z.setClass(Sa);class Ca extends Ze{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let o=1;o<=n;o++)s[o-1]=e(o*t);return s}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){al(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const o=t.width,c=t.height,u=Math.round(o*n),d=Math.round(c*s);let g;g=this.resizeType==="sliceHack"?this.sliceByTwo(e,o,c,u,d):this.resizeType==="hermite"?this.hermiteFastResize(e,o,c,u,d):this.resizeType==="bilinear"?this.bilinearFiltering(e,o,c,u,d):this.resizeType==="lanczos"?this.lanczosResize(e,o,c,u,d):new ImageData(u,d),e.imageData=g}sliceByTwo(e,t,n,s,o){const c=e.imageData,u=.5;let d=!1,g=!1,p=t*u,v=n*u;const y=e.filterBackend.resources;let S=0,w=0;const C=t;let _=0;y.sliceByTwo||(y.sliceByTwo=or());const T=y.sliceByTwo;(T.width<1.5*t||T.height<n)&&(T.width=1.5*t,T.height=n);const R=T.getContext("2d");for(R.clearRect(0,0,1.5*t,n),R.putImageData(c,0,0),s=Math.floor(s),o=Math.floor(o);!d||!g;)t=p,n=v,s<Math.floor(p*u)?p=Math.floor(p*u):(p=s,d=!0),o<Math.floor(v*u)?v=Math.floor(v*u):(v=o,g=!0),R.drawImage(T,S,w,t,n,C,_,p,v),S=C,w=_,_+=v;return R.getImageData(S,w,s,o)}lanczosResize(e,t,n,s,o){const c=e.imageData.data,u=e.ctx.createImageData(s,o),d=u.data,g=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,v=this.rcpScaleY,y=2/this.rcpScaleX,S=2/this.rcpScaleY,w=Math.ceil(p*this.lanczosLobes/2),C=Math.ceil(v*this.lanczosLobes/2),_={},T={x:0,y:0},R={x:0,y:0};return function I(B){let z,G,Q,K,ie,ce,we,Se,he,me,je;for(T.x=(B+.5)*p,R.x=Math.floor(T.x),z=0;z<o;z++){for(T.y=(z+.5)*v,R.y=Math.floor(T.y),ie=0,ce=0,we=0,Se=0,he=0,G=R.x-w;G<=R.x+w;G++)if(!(G<0||G>=t)){me=Math.floor(1e3*Math.abs(G-T.x)),_[me]||(_[me]={});for(let ke=R.y-C;ke<=R.y+C;ke++)ke<0||ke>=n||(je=Math.floor(1e3*Math.abs(ke-T.y)),_[me][je]||(_[me][je]=g(Math.sqrt(Math.pow(me*y,2)+Math.pow(je*S,2))/1e3)),Q=_[me][je],Q>0&&(K=4*(ke*t+G),ie+=Q,ce+=Q*c[K],we+=Q*c[K+1],Se+=Q*c[K+2],he+=Q*c[K+3]))}K=4*(z*s+B),d[K]=ce/ie,d[K+1]=we/ie,d[K+2]=Se/ie,d[K+3]=he/ie}return++B<s?I(B):u}(0)}bilinearFiltering(e,t,n,s,o){let c,u,d,g,p,v,y,S,w,C,_,T,R,I=0;const B=this.rcpScaleX,z=this.rcpScaleY,G=4*(t-1),Q=e.imageData.data,K=e.ctx.createImageData(s,o),ie=K.data;for(y=0;y<o;y++)for(S=0;S<s;S++)for(p=Math.floor(B*S),v=Math.floor(z*y),w=B*S-p,C=z*y-v,R=4*(v*t+p),_=0;_<4;_++)c=Q[R+_],u=Q[R+4+_],d=Q[R+G+_],g=Q[R+G+4+_],T=c*(1-w)*(1-C)+u*w*(1-C)+d*C*(1-w)+g*w*C,ie[I++]=T;return K}hermiteFastResize(e,t,n,s,o){const c=this.rcpScaleX,u=this.rcpScaleY,d=Math.ceil(c/2),g=Math.ceil(u/2),p=e.imageData.data,v=e.ctx.createImageData(s,o),y=v.data;for(let S=0;S<o;S++)for(let w=0;w<s;w++){const C=4*(w+S*s);let _=0,T=0,R=0,I=0,B=0,z=0,G=0;const Q=(S+.5)*u;for(let K=Math.floor(S*u);K<(S+1)*u;K++){const ie=Math.abs(Q-(K+.5))/g,ce=(w+.5)*c,we=ie*ie;for(let Se=Math.floor(w*c);Se<(w+1)*c;Se++){let he=Math.abs(ce-(Se+.5))/d;const me=Math.sqrt(we+he*he);me>1&&me<-1||(_=2*me*me*me-3*me*me+1,_>0&&(he=4*(Se+K*t),G+=_*p[he+3],R+=_,p[he+3]<255&&(_=_*p[he+3]/250),I+=_*p[he],B+=_*p[he+1],z+=_*p[he+2],T+=_))}}y[C]=I/T,y[C+1]=B/T,y[C+2]=z/T,y[C+3]=G/R}return v}}b(Ca,"type","Resize"),b(Ca,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),b(Ca,"uniformLocations",["uDelta","uTaps"]),Z.setClass(Ca);class _a extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let s=0;s<t.length;s+=4){const o=t[s],c=t[s+1],u=t[s+2],d=Math.max(o,c,u);t[s]+=d!==o?(d-o)*n:0,t[s+1]+=d!==c?(d-c)*n:0,t[s+2]+=d!==u?(d-u)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}b(_a,"type","Saturation"),b(_a,"defaults",{saturation:0}),b(_a,"uniformLocations",["uSaturation"]),Z.setClass(_a);class Aa extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let s=0;s<t.length;s+=4){const o=t[s],c=t[s+1],u=t[s+2],d=Math.max(o,c,u),g=(o+c+u)/3,p=2*Math.abs(d-g)/255*n;t[s]+=d!==o?(d-o)*p:0,t[s+1]+=d!==c?(d-c)*p:0,t[s+2]+=d!==u?(d-u)*p:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}b(Aa,"type","Vibrance"),b(Aa,"defaults",{vibrance:0}),b(Aa,"uniformLocations",["uVibrance"]),Z.setClass(Aa);function r1(){const a=Nn();Ei();const e=N.useRef(null),t=N.useRef(null);N.useEffect(()=>(t.current=new Uu(e.current),()=>t.current.dispose()),[]);const n=s=>{const o=t.current;let c=s.target.files[0],u=new FileReader;u.readAsDataURL(c),u.onload=d=>{let g=d.target.result,p=document.createElement("img");p.src=g,p.alt=c.name,p.onload=function(){let v=new jt(p);v.set({left:0,top:0,scaleY:.05,scaleX:.05}),o.add(v),o.centerObject(v),o.setActiveObject(v)}}};return k.jsxs("div",{children:[k.jsx(hn,{}),k.jsx("input",{type:"file",accept:"image/*",label:"Add Sticker",onChange:n}),k.jsxs("section",{children:[k.jsx("h1",{children:"Add sticker"}),k.jsx("section",{children:k.jsxs("div",{className:"options-r frame-wrapper",children:[k.jsx("canvas",{width:"120",height:"360",style:{border:"1px dotted black"},ref:e}),k.jsx(zn,{layout:a.layout,filter:a.filter,images:a.images,color:a.color})]})}),k.jsx(nr,{className:"btn",to:"/download",role:"button",children:"Continue"})]})]})}const n1=()=>k.jsx(Wp,{children:k.jsx(Ax,{children:k.jsxs(ex,{children:[k.jsx(Ut,{path:"/",element:k.jsx(Vx,{})}),k.jsx(Ut,{path:"/about-us",element:k.jsx(Zx,{})}),k.jsx(Ut,{path:"/select-frame",element:k.jsx(tw,{})}),k.jsx(Ut,{path:"/camera",element:k.jsx(dS,{})}),k.jsx(Ut,{path:"/instructions",element:k.jsx(qx,{})}),k.jsx(Ut,{path:"/select-photos",element:k.jsx(fS,{})}),k.jsx(Ut,{path:"/choose-frame",element:k.jsx(lw,{})}),k.jsx(Ut,{path:"/add-filter",element:k.jsx(nw,{})}),k.jsx(Ut,{path:"/add-sticker",element:k.jsx(r1,{})}),k.jsx(Ut,{path:"/download",element:k.jsx(rS,{})}),k.jsx(Ut,{path:"/try-it",element:k.jsx(gS,{})})]})})});uy.createRoot(document.getElementById("root")).render(k.jsx(N.StrictMode,{children:k.jsx(n1,{})}));
