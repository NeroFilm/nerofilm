(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function El(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Eu={exports:{}},qs={},Au={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function Yy(){if(If)return xe;If=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function _(P,B,fe){this.props=P,this.context=B,this.refs=C,this.updater=fe||S}_.prototype.isReactComponent={},_.prototype.setState=function(P,B){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,B,"setState")},_.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function b(){}b.prototype=_.prototype;function M(P,B,fe){this.props=P,this.context=B,this.refs=C,this.updater=fe||S}var L=M.prototype=new b;L.constructor=M,x(L,_.prototype),L.isPureReactComponent=!0;var z=Array.isArray,V=Object.prototype.hasOwnProperty,$={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function G(P,B,fe){var oe,ve={},ge=null,ke=null;if(B!=null)for(oe in B.ref!==void 0&&(ke=B.ref),B.key!==void 0&&(ge=""+B.key),B)V.call(B,oe)&&!Y.hasOwnProperty(oe)&&(ve[oe]=B[oe]);var be=arguments.length-2;if(be===1)ve.children=fe;else if(1<be){for(var je=Array(be),Fe=0;Fe<be;Fe++)je[Fe]=arguments[Fe+2];ve.children=je}if(P&&P.defaultProps)for(oe in be=P.defaultProps,be)ve[oe]===void 0&&(ve[oe]=be[oe]);return{$$typeof:o,type:P,key:ge,ref:ke,props:ve,_owner:$.current}}function se(P,B){return{$$typeof:o,type:P.type,key:B,ref:P.ref,props:P.props,_owner:P._owner}}function ue(P){return typeof P=="object"&&P!==null&&P.$$typeof===o}function _e(P){var B={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(fe){return B[fe]})}var Ce=/\/+/g;function pe(P,B){return typeof P=="object"&&P!==null&&P.key!=null?_e(""+P.key):B.toString(36)}function de(P,B,fe,oe,ve){var ge=typeof P;(ge==="undefined"||ge==="boolean")&&(P=null);var ke=!1;if(P===null)ke=!0;else switch(ge){case"string":case"number":ke=!0;break;case"object":switch(P.$$typeof){case o:case e:ke=!0}}if(ke)return ke=P,ve=ve(ke),P=oe===""?"."+pe(ke,0):oe,z(ve)?(fe="",P!=null&&(fe=P.replace(Ce,"$&/")+"/"),de(ve,B,fe,"",function(Fe){return Fe})):ve!=null&&(ue(ve)&&(ve=se(ve,fe+(!ve.key||ke&&ke.key===ve.key?"":(""+ve.key).replace(Ce,"$&/")+"/")+P)),B.push(ve)),1;if(ke=0,oe=oe===""?".":oe+":",z(P))for(var be=0;be<P.length;be++){ge=P[be];var je=oe+pe(ge,be);ke+=de(ge,B,fe,je,ve)}else if(je=v(P),typeof je=="function")for(P=je.call(P),be=0;!(ge=P.next()).done;)ge=ge.value,je=oe+pe(ge,be++),ke+=de(ge,B,fe,je,ve);else if(ge==="object")throw B=String(P),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return ke}function we(P,B,fe){if(P==null)return P;var oe=[],ve=0;return de(P,oe,"","",function(ge){return B.call(fe,ge,ve++)}),oe}function Oe(P){if(P._status===-1){var B=P._result;B=B(),B.then(function(fe){(P._status===0||P._status===-1)&&(P._status=1,P._result=fe)},function(fe){(P._status===0||P._status===-1)&&(P._status=2,P._result=fe)}),P._status===-1&&(P._status=0,P._result=B)}if(P._status===1)return P._result.default;throw P._result}var Se={current:null},H={transition:null},Q={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:H,ReactCurrentOwner:$};function K(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:we,forEach:function(P,B,fe){we(P,function(){B.apply(this,arguments)},fe)},count:function(P){var B=0;return we(P,function(){B++}),B},toArray:function(P){return we(P,function(B){return B})||[]},only:function(P){if(!ue(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},xe.Component=_,xe.Fragment=t,xe.Profiler=s,xe.PureComponent=M,xe.StrictMode=r,xe.Suspense=d,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,xe.act=K,xe.cloneElement=function(P,B,fe){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var oe=x({},P.props),ve=P.key,ge=P.ref,ke=P._owner;if(B!=null){if(B.ref!==void 0&&(ge=B.ref,ke=$.current),B.key!==void 0&&(ve=""+B.key),P.type&&P.type.defaultProps)var be=P.type.defaultProps;for(je in B)V.call(B,je)&&!Y.hasOwnProperty(je)&&(oe[je]=B[je]===void 0&&be!==void 0?be[je]:B[je])}var je=arguments.length-2;if(je===1)oe.children=fe;else if(1<je){be=Array(je);for(var Fe=0;Fe<je;Fe++)be[Fe]=arguments[Fe+2];oe.children=be}return{$$typeof:o,type:P.type,key:ve,ref:ge,props:oe,_owner:ke}},xe.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:a,_context:P},P.Consumer=P},xe.createElement=G,xe.createFactory=function(P){var B=G.bind(null,P);return B.type=P,B},xe.createRef=function(){return{current:null}},xe.forwardRef=function(P){return{$$typeof:u,render:P}},xe.isValidElement=ue,xe.lazy=function(P){return{$$typeof:g,_payload:{_status:-1,_result:P},_init:Oe}},xe.memo=function(P,B){return{$$typeof:f,type:P,compare:B===void 0?null:B}},xe.startTransition=function(P){var B=H.transition;H.transition={};try{P()}finally{H.transition=B}},xe.unstable_act=K,xe.useCallback=function(P,B){return Se.current.useCallback(P,B)},xe.useContext=function(P){return Se.current.useContext(P)},xe.useDebugValue=function(){},xe.useDeferredValue=function(P){return Se.current.useDeferredValue(P)},xe.useEffect=function(P,B){return Se.current.useEffect(P,B)},xe.useId=function(){return Se.current.useId()},xe.useImperativeHandle=function(P,B,fe){return Se.current.useImperativeHandle(P,B,fe)},xe.useInsertionEffect=function(P,B){return Se.current.useInsertionEffect(P,B)},xe.useLayoutEffect=function(P,B){return Se.current.useLayoutEffect(P,B)},xe.useMemo=function(P,B){return Se.current.useMemo(P,B)},xe.useReducer=function(P,B,fe){return Se.current.useReducer(P,B,fe)},xe.useRef=function(P){return Se.current.useRef(P)},xe.useState=function(P){return Se.current.useState(P)},xe.useSyncExternalStore=function(P,B,fe){return Se.current.useSyncExternalStore(P,B,fe)},xe.useTransition=function(){return Se.current.useTransition()},xe.version="18.3.1",xe}var Nf;function Al(){return Nf||(Nf=1,Au.exports=Yy()),Au.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf;function Xy(){if(zf)return qs;zf=1;var o=Al(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var g,y={},v=null,S=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(S=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:u,key:v,ref:S,props:y,_owner:s.current}}return qs.Fragment=t,qs.jsx=c,qs.jsxs=c,qs}var Bf;function Gy(){return Bf||(Bf=1,Eu.exports=Xy()),Eu.exports}var k=Gy(),Ta={},Ou={exports:{}},Et={},ju={exports:{}},Du={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf;function qy(){return Wf||(Wf=1,function(o){function e(H,Q){var K=H.length;H.push(Q);e:for(;0<K;){var P=K-1>>>1,B=H[P];if(0<s(B,Q))H[P]=Q,H[K]=B,K=P;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Q=H[0],K=H.pop();if(K!==Q){H[0]=K;e:for(var P=0,B=H.length,fe=B>>>1;P<fe;){var oe=2*(P+1)-1,ve=H[oe],ge=oe+1,ke=H[ge];if(0>s(ve,K))ge<B&&0>s(ke,ve)?(H[P]=ke,H[ge]=K,P=ge):(H[P]=ve,H[oe]=K,P=oe);else if(ge<B&&0>s(ke,K))H[P]=ke,H[ge]=K,P=ge;else break e}}return Q}function s(H,Q){var K=H.sortIndex-Q.sortIndex;return K!==0?K:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();o.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,S=!1,x=!1,C=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(H){for(var Q=t(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=H)r(f),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=t(f)}}function z(H){if(C=!1,L(H),!x)if(t(d)!==null)x=!0,Oe(V);else{var Q=t(f);Q!==null&&Se(z,Q.startTime-H)}}function V(H,Q){x=!1,C&&(C=!1,b(G),G=-1),S=!0;var K=v;try{for(L(Q),y=t(d);y!==null&&(!(y.expirationTime>Q)||H&&!_e());){var P=y.callback;if(typeof P=="function"){y.callback=null,v=y.priorityLevel;var B=P(y.expirationTime<=Q);Q=o.unstable_now(),typeof B=="function"?y.callback=B:y===t(d)&&r(d),L(Q)}else r(d);y=t(d)}if(y!==null)var fe=!0;else{var oe=t(f);oe!==null&&Se(z,oe.startTime-Q),fe=!1}return fe}finally{y=null,v=K,S=!1}}var $=!1,Y=null,G=-1,se=5,ue=-1;function _e(){return!(o.unstable_now()-ue<se)}function Ce(){if(Y!==null){var H=o.unstable_now();ue=H;var Q=!0;try{Q=Y(!0,H)}finally{Q?pe():($=!1,Y=null)}}else $=!1}var pe;if(typeof M=="function")pe=function(){M(Ce)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,we=de.port2;de.port1.onmessage=Ce,pe=function(){we.postMessage(null)}}else pe=function(){_(Ce,0)};function Oe(H){Y=H,$||($=!0,pe())}function Se(H,Q){G=_(function(){H(o.unstable_now())},Q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(H){H.callback=null},o.unstable_continueExecution=function(){x||S||(x=!0,Oe(V))},o.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<H?Math.floor(1e3/H):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return t(d)},o.unstable_next=function(H){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var K=v;v=Q;try{return H()}finally{v=K}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=v;v=H;try{return Q()}finally{v=K}},o.unstable_scheduleCallback=function(H,Q,K){var P=o.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?P+K:P):K=P,H){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=K+B,H={id:g++,callback:Q,priorityLevel:H,startTime:K,expirationTime:B,sortIndex:-1},K>P?(H.sortIndex=K,e(f,H),t(d)===null&&H===t(f)&&(C?(b(G),G=-1):C=!0,Se(z,K-P))):(H.sortIndex=B,e(d,H),x||S||(x=!0,Oe(V))),H},o.unstable_shouldYield=_e,o.unstable_wrapCallback=function(H){var Q=v;return function(){var K=v;v=Q;try{return H.apply(this,arguments)}finally{v=K}}}}(Du)),Du}var Uf;function $y(){return Uf||(Uf=1,ju.exports=qy()),ju.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function Ky(){if(Vf)return Et;Vf=1;var o=Al(),e=$y();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(s[n]=i,n=0;n<i.length;n++)r.add(i[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(n){return d.call(y,n)?!0:d.call(g,n)?!1:f.test(n)?y[n]=!0:(g[n]=!0,!1)}function S(n,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x(n,i,l,h){if(i===null||typeof i>"u"||S(n,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function C(n,i,l,h,p,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];_[i]=new C(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){_[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){_[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){_[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){_[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){_[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(b,M);_[i]=new C(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(b,M);_[i]=new C(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(b,M);_[i]=new C(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){_[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),_.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){_[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function L(n,i,l,h){var p=_.hasOwnProperty(i)?_[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(x(i,l,p,h)&&(l=null),h||p===null?v(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):p.mustUseProperty?n[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,h=p.attributeNamespace,l===null?n.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?n.setAttributeNS(h,i,l):n.setAttribute(i,l))))}var z=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),$=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),_e=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),H=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=H&&n[H]||n["@@iterator"],typeof n=="function"?n:null)}var K=Object.assign,P;function B(n){if(P===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+n}var fe=!1;function oe(n,i){if(!n||fe)return"";fe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(I){var h=I}Reflect.construct(n,[],i)}else{try{i.call()}catch(I){h=I}n.call(i.prototype)}else{try{throw Error()}catch(I){h=I}n()}}catch(I){if(I&&h&&typeof I.stack=="string"){for(var p=I.stack.split(`
`),m=h.stack.split(`
`),w=p.length-1,T=m.length-1;1<=w&&0<=T&&p[w]!==m[T];)T--;for(;1<=w&&0<=T;w--,T--)if(p[w]!==m[T]){if(w!==1||T!==1)do if(w--,T--,0>T||p[w]!==m[T]){var A=`
`+p[w].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=w&&0<=T);break}}}finally{fe=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?B(n):""}function ve(n){switch(n.tag){case 5:return B(n.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return n=oe(n.type,!1),n;case 11:return n=oe(n.type.render,!1),n;case 1:return n=oe(n.type,!0),n;default:return""}}function ge(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case $:return"Portal";case se:return"Profiler";case G:return"StrictMode";case pe:return"Suspense";case de:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _e:return(n.displayName||"Context")+".Consumer";case ue:return(n._context.displayName||"Context")+".Provider";case Ce:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case we:return i=n.displayName||null,i!==null?i:ge(n.type)||"Memo";case Oe:i=n._payload,n=n._init;try{return ge(n(i))}catch{}}return null}function ke(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(i);case 8:return i===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function je(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Fe(n){var i=je(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){h=""+w,m.call(this,w)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function On(n){n._valueTracker||(n._valueTracker=Fe(n))}function jn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return n&&(h=je(n)?n.checked?"true":"false":n.value),n=h,n!==l?(i.setValue(n),!0):!1}function Pr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function di(n,i){var l=i.checked;return K({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function os(n,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=be(i.value!=null?i.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function as(n,i){i=i.checked,i!=null&&L(n,"checked",i,!1)}function gn(n,i){as(n,i);var l=be(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?er(n,i.type,l):i.hasOwnProperty("defaultValue")&&er(n,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function pi(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function er(n,i,l){(i!=="number"||Pr(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var mn=Array.isArray;function tr(n,i,l,h){if(n=n.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=i.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&h&&(n[l].defaultSelected=!0)}else{for(l=""+be(l),i=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,h&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function ls(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return K({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function yo(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(mn(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:be(l)}}function J(n,i){var l=be(i.value),h=be(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function he(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Be(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Be(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var st,nr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,p){MSApp.execUnsafeLocalFunction(function(){return n(i,l,h,p)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=st.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Ut(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cs=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(n){cs.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Dn[i]=Dn[n]})});function fi(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Dn.hasOwnProperty(n)&&Dn[n]?(""+i).trim():i+"px"}function Mr(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=fi(l,i[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,p):n[l]=p}}var us=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fr(n,i){if(i){if(us[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Rr(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=null;function hs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vl=null,gi=null,mi=null;function Zh(n){if(n=Ms(n)){if(typeof Vl!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Wo(i),Vl(n.stateNode,n.type,i))}}function ed(n){gi?mi?mi.push(n):mi=[n]:gi=n}function td(){if(gi){var n=gi,i=mi;if(mi=gi=null,Zh(n),i)for(n=0;n<i.length;n++)Zh(i[n])}}function nd(n,i){return n(i)}function rd(){}var Hl=!1;function id(n,i,l){if(Hl)return n(i,l);Hl=!0;try{return nd(n,i,l)}finally{Hl=!1,(gi!==null||mi!==null)&&(rd(),td())}}function ds(n,i){var l=n.stateNode;if(l===null)return null;var h=Wo(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Yl=!1;if(u)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{Yl=!1}function Qv(n,i,l,h,p,m,w,T,A){var I=Array.prototype.slice.call(arguments,3);try{i.apply(l,I)}catch(U){this.onError(U)}}var fs=!1,xo=null,wo=!1,Xl=null,Jv={onError:function(n){fs=!0,xo=n}};function Zv(n,i,l,h,p,m,w,T,A){fs=!1,xo=null,Qv.apply(Jv,arguments)}function e0(n,i,l,h,p,m,w,T,A){if(Zv.apply(this,arguments),fs){if(fs){var I=xo;fs=!1,xo=null}else throw Error(t(198));wo||(wo=!0,Xl=I)}}function Ir(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function sd(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function od(n){if(Ir(n)!==n)throw Error(t(188))}function t0(n){var i=n.alternate;if(!i){if(i=Ir(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,h=i;;){var p=l.return;if(p===null)break;var m=p.alternate;if(m===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===l)return od(p),n;if(m===h)return od(p),i;m=m.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=m;else{for(var w=!1,T=p.child;T;){if(T===l){w=!0,l=p,h=m;break}if(T===h){w=!0,h=p,l=m;break}T=T.sibling}if(!w){for(T=m.child;T;){if(T===l){w=!0,l=m,h=p;break}if(T===h){w=!0,h=m,l=p;break}T=T.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function ad(n){return n=t0(n),n!==null?ld(n):null}function ld(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ld(n);if(i!==null)return i;n=n.sibling}return null}var cd=e.unstable_scheduleCallback,ud=e.unstable_cancelCallback,n0=e.unstable_shouldYield,r0=e.unstable_requestPaint,$e=e.unstable_now,i0=e.unstable_getCurrentPriorityLevel,Gl=e.unstable_ImmediatePriority,hd=e.unstable_UserBlockingPriority,So=e.unstable_NormalPriority,s0=e.unstable_LowPriority,dd=e.unstable_IdlePriority,Co=null,vn=null;function o0(n){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Co,n,void 0,(n.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:c0,a0=Math.log,l0=Math.LN2;function c0(n){return n>>>=0,n===0?32:31-(a0(n)/l0|0)|0}var _o=64,ko=4194304;function gs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function bo(n,i){var l=n.pendingLanes;if(l===0)return 0;var h=0,p=n.suspendedLanes,m=n.pingedLanes,w=l&268435455;if(w!==0){var T=w&~p;T!==0?h=gs(T):(m&=w,m!==0&&(h=gs(m)))}else w=l&~p,w!==0?h=gs(w):m!==0&&(h=gs(m));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,m=i&-i,p>=m||p===16&&(m&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)l=31-Zt(i),p=1<<l,h|=n[l],i&=~p;return h}function u0(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(n,i){for(var l=n.suspendedLanes,h=n.pingedLanes,p=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Zt(m),T=1<<w,A=p[w];A===-1?((T&l)===0||(T&h)!==0)&&(p[w]=u0(T,i)):A<=i&&(n.expiredLanes|=T),m&=~T}}function ql(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function pd(){var n=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),n}function $l(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function ms(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Zt(i),n[i]=l}function d0(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var p=31-Zt(l),m=1<<p;i[p]=0,h[p]=-1,n[p]=-1,l&=~m}}function Kl(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var h=31-Zt(l),p=1<<h;p&i|n[h]&i&&(n[h]|=i),l&=~p}}var Pe=0;function fd(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var gd,Ql,md,vd,yd,Jl=!1,To=[],rr=null,ir=null,sr=null,vs=new Map,ys=new Map,or=[],p0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xd(n,i){switch(n){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":vs.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(i.pointerId)}}function xs(n,i,l,h,p,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[p]},i!==null&&(i=Ms(i),i!==null&&Ql(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function f0(n,i,l,h,p){switch(i){case"focusin":return rr=xs(rr,n,i,l,h,p),!0;case"dragenter":return ir=xs(ir,n,i,l,h,p),!0;case"mouseover":return sr=xs(sr,n,i,l,h,p),!0;case"pointerover":var m=p.pointerId;return vs.set(m,xs(vs.get(m)||null,n,i,l,h,p)),!0;case"gotpointercapture":return m=p.pointerId,ys.set(m,xs(ys.get(m)||null,n,i,l,h,p)),!0}return!1}function wd(n){var i=Nr(n.target);if(i!==null){var l=Ir(i);if(l!==null){if(i=l.tag,i===13){if(i=sd(l),i!==null){n.blockedOn=i,yd(n.priority,function(){md(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Eo(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=ec(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Lr=h,l.target.dispatchEvent(h),Lr=null}else return i=Ms(l),i!==null&&Ql(i),n.blockedOn=l,!1;i.shift()}return!0}function Sd(n,i,l){Eo(n)&&l.delete(i)}function g0(){Jl=!1,rr!==null&&Eo(rr)&&(rr=null),ir!==null&&Eo(ir)&&(ir=null),sr!==null&&Eo(sr)&&(sr=null),vs.forEach(Sd),ys.forEach(Sd)}function ws(n,i){n.blockedOn===i&&(n.blockedOn=null,Jl||(Jl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,g0)))}function Ss(n){function i(p){return ws(p,n)}if(0<To.length){ws(To[0],n);for(var l=1;l<To.length;l++){var h=To[l];h.blockedOn===n&&(h.blockedOn=null)}}for(rr!==null&&ws(rr,n),ir!==null&&ws(ir,n),sr!==null&&ws(sr,n),vs.forEach(i),ys.forEach(i),l=0;l<or.length;l++)h=or[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<or.length&&(l=or[0],l.blockedOn===null);)wd(l),l.blockedOn===null&&or.shift()}var vi=z.ReactCurrentBatchConfig,Ao=!0;function m0(n,i,l,h){var p=Pe,m=vi.transition;vi.transition=null;try{Pe=1,Zl(n,i,l,h)}finally{Pe=p,vi.transition=m}}function v0(n,i,l,h){var p=Pe,m=vi.transition;vi.transition=null;try{Pe=4,Zl(n,i,l,h)}finally{Pe=p,vi.transition=m}}function Zl(n,i,l,h){if(Ao){var p=ec(n,i,l,h);if(p===null)vc(n,i,h,Oo,l),xd(n,h);else if(f0(p,n,i,l,h))h.stopPropagation();else if(xd(n,h),i&4&&-1<p0.indexOf(n)){for(;p!==null;){var m=Ms(p);if(m!==null&&gd(m),m=ec(n,i,l,h),m===null&&vc(n,i,h,Oo,l),m===p)break;p=m}p!==null&&h.stopPropagation()}else vc(n,i,h,null,l)}}var Oo=null;function ec(n,i,l,h){if(Oo=null,n=hs(h),n=Nr(n),n!==null)if(i=Ir(n),i===null)n=null;else if(l=i.tag,l===13){if(n=sd(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Oo=n,null}function Cd(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i0()){case Gl:return 1;case hd:return 4;case So:case s0:return 16;case dd:return 536870912;default:return 16}default:return 16}}var ar=null,tc=null,jo=null;function _d(){if(jo)return jo;var n,i=tc,l=i.length,h,p="value"in ar?ar.value:ar.textContent,m=p.length;for(n=0;n<l&&i[n]===p[n];n++);var w=l-n;for(h=1;h<=w&&i[l-h]===p[m-h];h++);return jo=p.slice(n,1<h?1-h:void 0)}function Do(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Po(){return!0}function kd(){return!1}function Ft(n){function i(l,h,p,m,w){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(l=n[T],this[T]=l?l(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Po:kd,this.isPropagationStopped=kd,this}return K(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),i}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nc=Ft(yi),Cs=K({},yi,{view:0,detail:0}),y0=Ft(Cs),rc,ic,_s,Mo=K({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_s&&(_s&&n.type==="mousemove"?(rc=n.screenX-_s.screenX,ic=n.screenY-_s.screenY):ic=rc=0,_s=n),rc)},movementY:function(n){return"movementY"in n?n.movementY:ic}}),bd=Ft(Mo),x0=K({},Mo,{dataTransfer:0}),w0=Ft(x0),S0=K({},Cs,{relatedTarget:0}),sc=Ft(S0),C0=K({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=Ft(C0),k0=K({},yi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),b0=Ft(k0),T0=K({},yi,{data:0}),Td=Ft(T0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=O0[n])?!!i[n]:!1}function oc(){return j0}var D0=K({},Cs,{key:function(n){if(n.key){var i=E0[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Do(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?A0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(n){return n.type==="keypress"?Do(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Do(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),P0=Ft(D0),M0=K({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ed=Ft(M0),F0=K({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),R0=Ft(F0),L0=K({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I0=Ft(L0),N0=K({},Mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),z0=Ft(N0),B0=[9,13,27,32],ac=u&&"CompositionEvent"in window,ks=null;u&&"documentMode"in document&&(ks=document.documentMode);var W0=u&&"TextEvent"in window&&!ks,Ad=u&&(!ac||ks&&8<ks&&11>=ks),Od=" ",jd=!1;function Dd(n,i){switch(n){case"keyup":return B0.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xi=!1;function U0(n,i){switch(n){case"compositionend":return Pd(i);case"keypress":return i.which!==32?null:(jd=!0,Od);case"textInput":return n=i.data,n===Od&&jd?null:n;default:return null}}function V0(n,i){if(xi)return n==="compositionend"||!ac&&Dd(n,i)?(n=_d(),jo=tc=ar=null,xi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ad&&i.locale!=="ko"?null:i.data;default:return null}}var H0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Md(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!H0[n.type]:i==="textarea"}function Fd(n,i,l,h){ed(h),i=No(i,"onChange"),0<i.length&&(l=new nc("onChange","change",null,l,h),n.push({event:l,listeners:i}))}var bs=null,Ts=null;function Y0(n){Jd(n,0)}function Fo(n){var i=ki(n);if(jn(i))return n}function X0(n,i){if(n==="change")return i}var Rd=!1;if(u){var lc;if(u){var cc="oninput"in document;if(!cc){var Ld=document.createElement("div");Ld.setAttribute("oninput","return;"),cc=typeof Ld.oninput=="function"}lc=cc}else lc=!1;Rd=lc&&(!document.documentMode||9<document.documentMode)}function Id(){bs&&(bs.detachEvent("onpropertychange",Nd),Ts=bs=null)}function Nd(n){if(n.propertyName==="value"&&Fo(Ts)){var i=[];Fd(i,Ts,n,hs(n)),id(Y0,i)}}function G0(n,i,l){n==="focusin"?(Id(),bs=i,Ts=l,bs.attachEvent("onpropertychange",Nd)):n==="focusout"&&Id()}function q0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fo(Ts)}function $0(n,i){if(n==="click")return Fo(i)}function K0(n,i){if(n==="input"||n==="change")return Fo(i)}function Q0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var en=typeof Object.is=="function"?Object.is:Q0;function Es(n,i){if(en(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!d.call(i,p)||!en(n[p],i[p]))return!1}return!0}function zd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bd(n,i){var l=zd(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=i&&h>=i)return{node:l,offset:i-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=zd(l)}}function Wd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Wd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ud(){for(var n=window,i=Pr();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Pr(n.document)}return i}function uc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function J0(n){var i=Ud(),l=n.focusedElem,h=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Wd(l.ownerDocument.documentElement,l)){if(h!==null&&uc(l)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=l.textContent.length,m=Math.min(h.start,p);h=h.end===void 0?m:Math.min(h.end,p),!n.extend&&m>h&&(p=h,h=m,m=p),p=Bd(l,m);var w=Bd(l,h);p&&w&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),m>h?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Z0=u&&"documentMode"in document&&11>=document.documentMode,wi=null,hc=null,As=null,dc=!1;function Vd(n,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;dc||wi==null||wi!==Pr(h)||(h=wi,"selectionStart"in h&&uc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),As&&Es(As,h)||(As=h,h=No(hc,"onSelect"),0<h.length&&(i=new nc("onSelect","select",null,i,l),n.push({event:i,listeners:h}),i.target=wi)))}function Ro(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Si={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},pc={},Hd={};u&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Lo(n){if(pc[n])return pc[n];if(!Si[n])return n;var i=Si[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Hd)return pc[n]=i[l];return n}var Yd=Lo("animationend"),Xd=Lo("animationiteration"),Gd=Lo("animationstart"),qd=Lo("transitionend"),$d=new Map,Kd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(n,i){$d.set(n,i),a(i,[n])}for(var fc=0;fc<Kd.length;fc++){var gc=Kd[fc],ey=gc.toLowerCase(),ty=gc[0].toUpperCase()+gc.slice(1);lr(ey,"on"+ty)}lr(Yd,"onAnimationEnd"),lr(Xd,"onAnimationIteration"),lr(Gd,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(qd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ny=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Qd(n,i,l){var h=n.type||"unknown-event";n.currentTarget=l,e0(h,i,void 0,n),n.currentTarget=null}function Jd(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],p=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var w=h.length-1;0<=w;w--){var T=h[w],A=T.instance,I=T.currentTarget;if(T=T.listener,A!==m&&p.isPropagationStopped())break e;Qd(p,T,I),m=A}else for(w=0;w<h.length;w++){if(T=h[w],A=T.instance,I=T.currentTarget,T=T.listener,A!==m&&p.isPropagationStopped())break e;Qd(p,T,I),m=A}}}if(wo)throw n=Xl,wo=!1,Xl=null,n}function Le(n,i){var l=i[_c];l===void 0&&(l=i[_c]=new Set);var h=n+"__bubble";l.has(h)||(Zd(i,n,2,!1),l.add(h))}function mc(n,i,l){var h=0;i&&(h|=4),Zd(l,n,h,i)}var Io="_reactListening"+Math.random().toString(36).slice(2);function js(n){if(!n[Io]){n[Io]=!0,r.forEach(function(l){l!=="selectionchange"&&(ny.has(l)||mc(l,!1,n),mc(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Io]||(i[Io]=!0,mc("selectionchange",!1,i))}}function Zd(n,i,l,h){switch(Cd(i)){case 1:var p=m0;break;case 4:p=v0;break;default:p=Zl}l=p.bind(null,i,l,n),p=void 0,!Yl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?n.addEventListener(i,l,{capture:!0,passive:p}):n.addEventListener(i,l,!0):p!==void 0?n.addEventListener(i,l,{passive:p}):n.addEventListener(i,l,!1)}function vc(n,i,l,h,p){var m=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var T=h.stateNode.containerInfo;if(T===p||T.nodeType===8&&T.parentNode===p)break;if(w===4)for(w=h.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===p||A.nodeType===8&&A.parentNode===p))return;w=w.return}for(;T!==null;){if(w=Nr(T),w===null)return;if(A=w.tag,A===5||A===6){h=m=w;continue e}T=T.parentNode}}h=h.return}id(function(){var I=m,U=hs(l),X=[];e:{var W=$d.get(n);if(W!==void 0){var Z=nc,ne=n;switch(n){case"keypress":if(Do(l)===0)break e;case"keydown":case"keyup":Z=P0;break;case"focusin":ne="focus",Z=sc;break;case"focusout":ne="blur",Z=sc;break;case"beforeblur":case"afterblur":Z=sc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=w0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=R0;break;case Yd:case Xd:case Gd:Z=_0;break;case qd:Z=I0;break;case"scroll":Z=y0;break;case"wheel":Z=z0;break;case"copy":case"cut":case"paste":Z=b0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Ed}var re=(i&4)!==0,Ke=!re&&n==="scroll",F=re?W!==null?W+"Capture":null:W;re=[];for(var j=I,R;j!==null;){R=j;var q=R.stateNode;if(R.tag===5&&q!==null&&(R=q,F!==null&&(q=ds(j,F),q!=null&&re.push(Ds(j,q,R)))),Ke)break;j=j.return}0<re.length&&(W=new Z(W,ne,null,l,U),X.push({event:W,listeners:re}))}}if((i&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",W&&l!==Lr&&(ne=l.relatedTarget||l.fromElement)&&(Nr(ne)||ne[Pn]))break e;if((Z||W)&&(W=U.window===U?U:(W=U.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(ne=l.relatedTarget||l.toElement,Z=I,ne=ne?Nr(ne):null,ne!==null&&(Ke=Ir(ne),ne!==Ke||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(Z=null,ne=I),Z!==ne)){if(re=bd,q="onMouseLeave",F="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(re=Ed,q="onPointerLeave",F="onPointerEnter",j="pointer"),Ke=Z==null?W:ki(Z),R=ne==null?W:ki(ne),W=new re(q,j+"leave",Z,l,U),W.target=Ke,W.relatedTarget=R,q=null,Nr(U)===I&&(re=new re(F,j+"enter",ne,l,U),re.target=R,re.relatedTarget=Ke,q=re),Ke=q,Z&&ne)t:{for(re=Z,F=ne,j=0,R=re;R;R=Ci(R))j++;for(R=0,q=F;q;q=Ci(q))R++;for(;0<j-R;)re=Ci(re),j--;for(;0<R-j;)F=Ci(F),R--;for(;j--;){if(re===F||F!==null&&re===F.alternate)break t;re=Ci(re),F=Ci(F)}re=null}else re=null;Z!==null&&ep(X,W,Z,re,!1),ne!==null&&Ke!==null&&ep(X,Ke,ne,re,!0)}}e:{if(W=I?ki(I):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var ie=X0;else if(Md(W))if(Rd)ie=K0;else{ie=q0;var le=G0}else(Z=W.nodeName)&&Z.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ie=$0);if(ie&&(ie=ie(n,I))){Fd(X,ie,l,U);break e}le&&le(n,W,I),n==="focusout"&&(le=W._wrapperState)&&le.controlled&&W.type==="number"&&er(W,"number",W.value)}switch(le=I?ki(I):window,n){case"focusin":(Md(le)||le.contentEditable==="true")&&(wi=le,hc=I,As=null);break;case"focusout":As=hc=wi=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,Vd(X,l,U);break;case"selectionchange":if(Z0)break;case"keydown":case"keyup":Vd(X,l,U)}var ce;if(ac)e:{switch(n){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else xi?Dd(n,l)&&(me="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(me="onCompositionStart");me&&(Ad&&l.locale!=="ko"&&(xi||me!=="onCompositionStart"?me==="onCompositionEnd"&&xi&&(ce=_d()):(ar=U,tc="value"in ar?ar.value:ar.textContent,xi=!0)),le=No(I,me),0<le.length&&(me=new Td(me,n,null,l,U),X.push({event:me,listeners:le}),ce?me.data=ce:(ce=Pd(l),ce!==null&&(me.data=ce)))),(ce=W0?U0(n,l):V0(n,l))&&(I=No(I,"onBeforeInput"),0<I.length&&(U=new Td("onBeforeInput","beforeinput",null,l,U),X.push({event:U,listeners:I}),U.data=ce))}Jd(X,i)})}function Ds(n,i,l){return{instance:n,listener:i,currentTarget:l}}function No(n,i){for(var l=i+"Capture",h=[];n!==null;){var p=n,m=p.stateNode;p.tag===5&&m!==null&&(p=m,m=ds(n,l),m!=null&&h.unshift(Ds(n,m,p)),m=ds(n,i),m!=null&&h.push(Ds(n,m,p))),n=n.return}return h}function Ci(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ep(n,i,l,h,p){for(var m=i._reactName,w=[];l!==null&&l!==h;){var T=l,A=T.alternate,I=T.stateNode;if(A!==null&&A===h)break;T.tag===5&&I!==null&&(T=I,p?(A=ds(l,m),A!=null&&w.unshift(Ds(l,A,T))):p||(A=ds(l,m),A!=null&&w.push(Ds(l,A,T)))),l=l.return}w.length!==0&&n.push({event:i,listeners:w})}var ry=/\r\n?/g,iy=/\u0000|\uFFFD/g;function tp(n){return(typeof n=="string"?n:""+n).replace(ry,`
`).replace(iy,"")}function zo(n,i,l){if(i=tp(i),tp(n)!==i&&l)throw Error(t(425))}function Bo(){}var yc=null,xc=null;function wc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,sy=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,oy=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(n){return np.resolve(null).then(n).catch(ay)}:Sc;function ay(n){setTimeout(function(){throw n})}function Cc(n,i){var l=i,h=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){n.removeChild(p),Ss(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Ss(i)}function cr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function rp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var _i=Math.random().toString(36).slice(2),yn="__reactFiber$"+_i,Ps="__reactProps$"+_i,Pn="__reactContainer$"+_i,_c="__reactEvents$"+_i,ly="__reactListeners$"+_i,cy="__reactHandles$"+_i;function Nr(n){var i=n[yn];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Pn]||l[yn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=rp(n);n!==null;){if(l=n[yn])return l;n=rp(n)}return i}n=l,l=n.parentNode}return null}function Ms(n){return n=n[yn]||n[Pn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ki(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Wo(n){return n[Ps]||null}var kc=[],bi=-1;function ur(n){return{current:n}}function Ie(n){0>bi||(n.current=kc[bi],kc[bi]=null,bi--)}function Re(n,i){bi++,kc[bi]=n.current,n.current=i}var hr={},dt=ur(hr),Ct=ur(!1),zr=hr;function Ti(n,i){var l=n.type.contextTypes;if(!l)return hr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},m;for(m in l)p[m]=i[m];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function _t(n){return n=n.childContextTypes,n!=null}function Uo(){Ie(Ct),Ie(dt)}function ip(n,i,l){if(dt.current!==hr)throw Error(t(168));Re(dt,i),Re(Ct,l)}function sp(n,i,l){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,ke(n)||"Unknown",p));return K({},l,h)}function Vo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hr,zr=dt.current,Re(dt,n),Re(Ct,Ct.current),!0}function op(n,i,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=sp(n,i,zr),h.__reactInternalMemoizedMergedChildContext=n,Ie(Ct),Ie(dt),Re(dt,n)):Ie(Ct),Re(Ct,l)}var Mn=null,Ho=!1,bc=!1;function ap(n){Mn===null?Mn=[n]:Mn.push(n)}function uy(n){Ho=!0,ap(n)}function dr(){if(!bc&&Mn!==null){bc=!0;var n=0,i=Pe;try{var l=Mn;for(Pe=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}Mn=null,Ho=!1}catch(p){throw Mn!==null&&(Mn=Mn.slice(n+1)),cd(Gl,dr),p}finally{Pe=i,bc=!1}}return null}var Ei=[],Ai=0,Yo=null,Xo=0,Vt=[],Ht=0,Br=null,Fn=1,Rn="";function Wr(n,i){Ei[Ai++]=Xo,Ei[Ai++]=Yo,Yo=n,Xo=i}function lp(n,i,l){Vt[Ht++]=Fn,Vt[Ht++]=Rn,Vt[Ht++]=Br,Br=n;var h=Fn;n=Rn;var p=32-Zt(h)-1;h&=~(1<<p),l+=1;var m=32-Zt(i)+p;if(30<m){var w=p-p%5;m=(h&(1<<w)-1).toString(32),h>>=w,p-=w,Fn=1<<32-Zt(i)+p|l<<p|h,Rn=m+n}else Fn=1<<m|l<<p|h,Rn=n}function Tc(n){n.return!==null&&(Wr(n,1),lp(n,1,0))}function Ec(n){for(;n===Yo;)Yo=Ei[--Ai],Ei[Ai]=null,Xo=Ei[--Ai],Ei[Ai]=null;for(;n===Br;)Br=Vt[--Ht],Vt[Ht]=null,Rn=Vt[--Ht],Vt[Ht]=null,Fn=Vt[--Ht],Vt[Ht]=null}var Rt=null,Lt=null,Ne=!1,tn=null;function cp(n,i){var l=qt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function up(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Rt=n,Lt=cr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Rt=n,Lt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Br!==null?{id:Fn,overflow:Rn}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=qt(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,Rt=n,Lt=null,!0):!1;default:return!1}}function Ac(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Oc(n){if(Ne){var i=Lt;if(i){var l=i;if(!up(n,i)){if(Ac(n))throw Error(t(418));i=cr(l.nextSibling);var h=Rt;i&&up(n,i)?cp(h,l):(n.flags=n.flags&-4097|2,Ne=!1,Rt=n)}}else{if(Ac(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ne=!1,Rt=n}}}function hp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rt=n}function Go(n){if(n!==Rt)return!1;if(!Ne)return hp(n),Ne=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!wc(n.type,n.memoizedProps)),i&&(i=Lt)){if(Ac(n))throw dp(),Error(t(418));for(;i;)cp(n,i),i=cr(i.nextSibling)}if(hp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){Lt=cr(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}Lt=null}}else Lt=Rt?cr(n.stateNode.nextSibling):null;return!0}function dp(){for(var n=Lt;n;)n=cr(n.nextSibling)}function Oi(){Lt=Rt=null,Ne=!1}function jc(n){tn===null?tn=[n]:tn.push(n)}var hy=z.ReactCurrentBatchConfig;function Fs(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var p=h,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var T=p.refs;w===null?delete T[m]:T[m]=w},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function qo(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function pp(n){var i=n._init;return i(n._payload)}function fp(n){function i(F,j){if(n){var R=F.deletions;R===null?(F.deletions=[j],F.flags|=16):R.push(j)}}function l(F,j){if(!n)return null;for(;j!==null;)i(F,j),j=j.sibling;return null}function h(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function p(F,j){return F=wr(F,j),F.index=0,F.sibling=null,F}function m(F,j,R){return F.index=R,n?(R=F.alternate,R!==null?(R=R.index,R<j?(F.flags|=2,j):R):(F.flags|=2,j)):(F.flags|=1048576,j)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function T(F,j,R,q){return j===null||j.tag!==6?(j=Su(R,F.mode,q),j.return=F,j):(j=p(j,R),j.return=F,j)}function A(F,j,R,q){var ie=R.type;return ie===Y?U(F,j,R.props.children,q,R.key):j!==null&&(j.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Oe&&pp(ie)===j.type)?(q=p(j,R.props),q.ref=Fs(F,j,R),q.return=F,q):(q=ya(R.type,R.key,R.props,null,F.mode,q),q.ref=Fs(F,j,R),q.return=F,q)}function I(F,j,R,q){return j===null||j.tag!==4||j.stateNode.containerInfo!==R.containerInfo||j.stateNode.implementation!==R.implementation?(j=Cu(R,F.mode,q),j.return=F,j):(j=p(j,R.children||[]),j.return=F,j)}function U(F,j,R,q,ie){return j===null||j.tag!==7?(j=$r(R,F.mode,q,ie),j.return=F,j):(j=p(j,R),j.return=F,j)}function X(F,j,R){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Su(""+j,F.mode,R),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case V:return R=ya(j.type,j.key,j.props,null,F.mode,R),R.ref=Fs(F,null,j),R.return=F,R;case $:return j=Cu(j,F.mode,R),j.return=F,j;case Oe:var q=j._init;return X(F,q(j._payload),R)}if(mn(j)||Q(j))return j=$r(j,F.mode,R,null),j.return=F,j;qo(F,j)}return null}function W(F,j,R,q){var ie=j!==null?j.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return ie!==null?null:T(F,j,""+R,q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case V:return R.key===ie?A(F,j,R,q):null;case $:return R.key===ie?I(F,j,R,q):null;case Oe:return ie=R._init,W(F,j,ie(R._payload),q)}if(mn(R)||Q(R))return ie!==null?null:U(F,j,R,q,null);qo(F,R)}return null}function Z(F,j,R,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number")return F=F.get(R)||null,T(j,F,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case V:return F=F.get(q.key===null?R:q.key)||null,A(j,F,q,ie);case $:return F=F.get(q.key===null?R:q.key)||null,I(j,F,q,ie);case Oe:var le=q._init;return Z(F,j,R,le(q._payload),ie)}if(mn(q)||Q(q))return F=F.get(R)||null,U(j,F,q,ie,null);qo(j,q)}return null}function ne(F,j,R,q){for(var ie=null,le=null,ce=j,me=j=0,lt=null;ce!==null&&me<R.length;me++){ce.index>me?(lt=ce,ce=null):lt=ce.sibling;var Ae=W(F,ce,R[me],q);if(Ae===null){ce===null&&(ce=lt);break}n&&ce&&Ae.alternate===null&&i(F,ce),j=m(Ae,j,me),le===null?ie=Ae:le.sibling=Ae,le=Ae,ce=lt}if(me===R.length)return l(F,ce),Ne&&Wr(F,me),ie;if(ce===null){for(;me<R.length;me++)ce=X(F,R[me],q),ce!==null&&(j=m(ce,j,me),le===null?ie=ce:le.sibling=ce,le=ce);return Ne&&Wr(F,me),ie}for(ce=h(F,ce);me<R.length;me++)lt=Z(ce,F,me,R[me],q),lt!==null&&(n&&lt.alternate!==null&&ce.delete(lt.key===null?me:lt.key),j=m(lt,j,me),le===null?ie=lt:le.sibling=lt,le=lt);return n&&ce.forEach(function(Sr){return i(F,Sr)}),Ne&&Wr(F,me),ie}function re(F,j,R,q){var ie=Q(R);if(typeof ie!="function")throw Error(t(150));if(R=ie.call(R),R==null)throw Error(t(151));for(var le=ie=null,ce=j,me=j=0,lt=null,Ae=R.next();ce!==null&&!Ae.done;me++,Ae=R.next()){ce.index>me?(lt=ce,ce=null):lt=ce.sibling;var Sr=W(F,ce,Ae.value,q);if(Sr===null){ce===null&&(ce=lt);break}n&&ce&&Sr.alternate===null&&i(F,ce),j=m(Sr,j,me),le===null?ie=Sr:le.sibling=Sr,le=Sr,ce=lt}if(Ae.done)return l(F,ce),Ne&&Wr(F,me),ie;if(ce===null){for(;!Ae.done;me++,Ae=R.next())Ae=X(F,Ae.value,q),Ae!==null&&(j=m(Ae,j,me),le===null?ie=Ae:le.sibling=Ae,le=Ae);return Ne&&Wr(F,me),ie}for(ce=h(F,ce);!Ae.done;me++,Ae=R.next())Ae=Z(ce,F,me,Ae.value,q),Ae!==null&&(n&&Ae.alternate!==null&&ce.delete(Ae.key===null?me:Ae.key),j=m(Ae,j,me),le===null?ie=Ae:le.sibling=Ae,le=Ae);return n&&ce.forEach(function(Hy){return i(F,Hy)}),Ne&&Wr(F,me),ie}function Ke(F,j,R,q){if(typeof R=="object"&&R!==null&&R.type===Y&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case V:e:{for(var ie=R.key,le=j;le!==null;){if(le.key===ie){if(ie=R.type,ie===Y){if(le.tag===7){l(F,le.sibling),j=p(le,R.props.children),j.return=F,F=j;break e}}else if(le.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Oe&&pp(ie)===le.type){l(F,le.sibling),j=p(le,R.props),j.ref=Fs(F,le,R),j.return=F,F=j;break e}l(F,le);break}else i(F,le);le=le.sibling}R.type===Y?(j=$r(R.props.children,F.mode,q,R.key),j.return=F,F=j):(q=ya(R.type,R.key,R.props,null,F.mode,q),q.ref=Fs(F,j,R),q.return=F,F=q)}return w(F);case $:e:{for(le=R.key;j!==null;){if(j.key===le)if(j.tag===4&&j.stateNode.containerInfo===R.containerInfo&&j.stateNode.implementation===R.implementation){l(F,j.sibling),j=p(j,R.children||[]),j.return=F,F=j;break e}else{l(F,j);break}else i(F,j);j=j.sibling}j=Cu(R,F.mode,q),j.return=F,F=j}return w(F);case Oe:return le=R._init,Ke(F,j,le(R._payload),q)}if(mn(R))return ne(F,j,R,q);if(Q(R))return re(F,j,R,q);qo(F,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,j!==null&&j.tag===6?(l(F,j.sibling),j=p(j,R),j.return=F,F=j):(l(F,j),j=Su(R,F.mode,q),j.return=F,F=j),w(F)):l(F,j)}return Ke}var ji=fp(!0),gp=fp(!1),$o=ur(null),Ko=null,Di=null,Dc=null;function Pc(){Dc=Di=Ko=null}function Mc(n){var i=$o.current;Ie($o),n._currentValue=i}function Fc(n,i,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===l)break;n=n.return}}function Pi(n,i){Ko=n,Dc=Di=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(kt=!0),n.firstContext=null)}function Yt(n){var i=n._currentValue;if(Dc!==n)if(n={context:n,memoizedValue:i,next:null},Di===null){if(Ko===null)throw Error(t(308));Di=n,Ko.dependencies={lanes:0,firstContext:n}}else Di=Di.next=n;return i}var Ur=null;function Rc(n){Ur===null?Ur=[n]:Ur.push(n)}function mp(n,i,l,h){var p=i.interleaved;return p===null?(l.next=l,Rc(i)):(l.next=p.next,p.next=l),i.interleaved=l,Ln(n,h)}function Ln(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var pr=!1;function Lc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function In(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function fr(n,i,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Te&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Ln(n,l)}return p=h.interleaved,p===null?(i.next=i,Rc(h)):(i.next=p.next,p.next=i),h.interleaved=i,Ln(n,l)}function Qo(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,Kl(n,l)}}function yp(n,i){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?p=m=w:m=m.next=w,l=l.next}while(l!==null);m===null?p=m=i:m=m.next=i}else p=m=i;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Jo(n,i,l,h){var p=n.updateQueue;pr=!1;var m=p.firstBaseUpdate,w=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var A=T,I=A.next;A.next=null,w===null?m=I:w.next=I,w=A;var U=n.alternate;U!==null&&(U=U.updateQueue,T=U.lastBaseUpdate,T!==w&&(T===null?U.firstBaseUpdate=I:T.next=I,U.lastBaseUpdate=A))}if(m!==null){var X=p.baseState;w=0,U=I=A=null,T=m;do{var W=T.lane,Z=T.eventTime;if((h&W)===W){U!==null&&(U=U.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ne=n,re=T;switch(W=i,Z=l,re.tag){case 1:if(ne=re.payload,typeof ne=="function"){X=ne.call(Z,X,W);break e}X=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=re.payload,W=typeof ne=="function"?ne.call(Z,X,W):ne,W==null)break e;X=K({},X,W);break e;case 2:pr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=p.effects,W===null?p.effects=[T]:W.push(T))}else Z={eventTime:Z,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},U===null?(I=U=Z,A=X):U=U.next=Z,w|=W;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;W=T,T=W.next,W.next=null,p.lastBaseUpdate=W,p.shared.pending=null}}while(!0);if(U===null&&(A=X),p.baseState=A,p.firstBaseUpdate=I,p.lastBaseUpdate=U,i=p.shared.interleaved,i!==null){p=i;do w|=p.lane,p=p.next;while(p!==i)}else m===null&&(p.shared.lanes=0);Yr|=w,n.lanes=w,n.memoizedState=X}}function xp(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Rs={},xn=ur(Rs),Ls=ur(Rs),Is=ur(Rs);function Vr(n){if(n===Rs)throw Error(t(174));return n}function Ic(n,i){switch(Re(Is,i),Re(Ls,n),Re(xn,Rs),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ge(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Ge(i,n)}Ie(xn),Re(xn,i)}function Mi(){Ie(xn),Ie(Ls),Ie(Is)}function wp(n){Vr(Is.current);var i=Vr(xn.current),l=Ge(i,n.type);i!==l&&(Re(Ls,n),Re(xn,l))}function Nc(n){Ls.current===n&&(Ie(xn),Ie(Ls))}var We=ur(0);function Zo(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var zc=[];function Bc(){for(var n=0;n<zc.length;n++)zc[n]._workInProgressVersionPrimary=null;zc.length=0}var ea=z.ReactCurrentDispatcher,Wc=z.ReactCurrentBatchConfig,Hr=0,Ue=null,tt=null,ot=null,ta=!1,Ns=!1,zs=0,dy=0;function pt(){throw Error(t(321))}function Uc(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!en(n[l],i[l]))return!1;return!0}function Vc(n,i,l,h,p,m){if(Hr=m,Ue=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ea.current=n===null||n.memoizedState===null?my:vy,n=l(h,p),Ns){m=0;do{if(Ns=!1,zs=0,25<=m)throw Error(t(301));m+=1,ot=tt=null,i.updateQueue=null,ea.current=yy,n=l(h,p)}while(Ns)}if(ea.current=ia,i=tt!==null&&tt.next!==null,Hr=0,ot=tt=Ue=null,ta=!1,i)throw Error(t(300));return n}function Hc(){var n=zs!==0;return zs=0,n}function wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ue.memoizedState=ot=n:ot=ot.next=n,ot}function Xt(){if(tt===null){var n=Ue.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=ot===null?Ue.memoizedState:ot.next;if(i!==null)ot=i,tt=n;else{if(n===null)throw Error(t(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?Ue.memoizedState=ot=n:ot=ot.next=n}return ot}function Bs(n,i){return typeof i=="function"?i(n):i}function Yc(n){var i=Xt(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=tt,p=h.baseQueue,m=l.pending;if(m!==null){if(p!==null){var w=p.next;p.next=m.next,m.next=w}h.baseQueue=p=m,l.pending=null}if(p!==null){m=p.next,h=h.baseState;var T=w=null,A=null,I=m;do{var U=I.lane;if((Hr&U)===U)A!==null&&(A=A.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),h=I.hasEagerState?I.eagerState:n(h,I.action);else{var X={lane:U,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};A===null?(T=A=X,w=h):A=A.next=X,Ue.lanes|=U,Yr|=U}I=I.next}while(I!==null&&I!==m);A===null?w=h:A.next=T,en(h,i.memoizedState)||(kt=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=A,l.lastRenderedState=h}if(n=l.interleaved,n!==null){p=n;do m=p.lane,Ue.lanes|=m,Yr|=m,p=p.next;while(p!==n)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Xc(n){var i=Xt(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,p=l.pending,m=i.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do m=n(m,w.action),w=w.next;while(w!==p);en(m,i.memoizedState)||(kt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,h]}function Sp(){}function Cp(n,i){var l=Ue,h=Xt(),p=i(),m=!en(h.memoizedState,p);if(m&&(h.memoizedState=p,kt=!0),h=h.queue,Gc(bp.bind(null,l,h,n),[n]),h.getSnapshot!==i||m||ot!==null&&ot.memoizedState.tag&1){if(l.flags|=2048,Ws(9,kp.bind(null,l,h,p,i),void 0,null),at===null)throw Error(t(349));(Hr&30)!==0||_p(l,i,p)}return p}function _p(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Ue.updateQueue,i===null?(i={lastEffect:null,stores:null},Ue.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function kp(n,i,l,h){i.value=l,i.getSnapshot=h,Tp(i)&&Ep(n)}function bp(n,i,l){return l(function(){Tp(i)&&Ep(n)})}function Tp(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!en(n,l)}catch{return!0}}function Ep(n){var i=Ln(n,1);i!==null&&on(i,n,1,-1)}function Ap(n){var i=wn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:n},i.queue=n,n=n.dispatch=gy.bind(null,Ue,n),[i.memoizedState,n]}function Ws(n,i,l,h){return n={tag:n,create:i,destroy:l,deps:h,next:null},i=Ue.updateQueue,i===null?(i={lastEffect:null,stores:null},Ue.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,i.lastEffect=n)),n}function Op(){return Xt().memoizedState}function na(n,i,l,h){var p=wn();Ue.flags|=n,p.memoizedState=Ws(1|i,l,void 0,h===void 0?null:h)}function ra(n,i,l,h){var p=Xt();h=h===void 0?null:h;var m=void 0;if(tt!==null){var w=tt.memoizedState;if(m=w.destroy,h!==null&&Uc(h,w.deps)){p.memoizedState=Ws(i,l,m,h);return}}Ue.flags|=n,p.memoizedState=Ws(1|i,l,m,h)}function jp(n,i){return na(8390656,8,n,i)}function Gc(n,i){return ra(2048,8,n,i)}function Dp(n,i){return ra(4,2,n,i)}function Pp(n,i){return ra(4,4,n,i)}function Mp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Fp(n,i,l){return l=l!=null?l.concat([n]):null,ra(4,4,Mp.bind(null,i,n),l)}function qc(){}function Rp(n,i){var l=Xt();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Uc(i,h[1])?h[0]:(l.memoizedState=[n,i],n)}function Lp(n,i){var l=Xt();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Uc(i,h[1])?h[0]:(n=n(),l.memoizedState=[n,i],n)}function Ip(n,i,l){return(Hr&21)===0?(n.baseState&&(n.baseState=!1,kt=!0),n.memoizedState=l):(en(l,i)||(l=pd(),Ue.lanes|=l,Yr|=l,n.baseState=!0),i)}function py(n,i){var l=Pe;Pe=l!==0&&4>l?l:4,n(!0);var h=Wc.transition;Wc.transition={};try{n(!1),i()}finally{Pe=l,Wc.transition=h}}function Np(){return Xt().memoizedState}function fy(n,i,l){var h=yr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},zp(n))Bp(i,l);else if(l=mp(n,i,l,h),l!==null){var p=yt();on(l,n,h,p),Wp(l,i,h)}}function gy(n,i,l){var h=yr(n),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(zp(n))Bp(i,p);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,T=m(w,l);if(p.hasEagerState=!0,p.eagerState=T,en(T,w)){var A=i.interleaved;A===null?(p.next=p,Rc(i)):(p.next=A.next,A.next=p),i.interleaved=p;return}}catch{}finally{}l=mp(n,i,p,h),l!==null&&(p=yt(),on(l,n,h,p),Wp(l,i,h))}}function zp(n){var i=n.alternate;return n===Ue||i!==null&&i===Ue}function Bp(n,i){Ns=ta=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Wp(n,i,l){if((l&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,Kl(n,l)}}var ia={readContext:Yt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},my={readContext:Yt,useCallback:function(n,i){return wn().memoizedState=[n,i===void 0?null:i],n},useContext:Yt,useEffect:jp,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,na(4194308,4,Mp.bind(null,i,n),l)},useLayoutEffect:function(n,i){return na(4194308,4,n,i)},useInsertionEffect:function(n,i){return na(4,2,n,i)},useMemo:function(n,i){var l=wn();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var h=wn();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=fy.bind(null,Ue,n),[h.memoizedState,n]},useRef:function(n){var i=wn();return n={current:n},i.memoizedState=n},useState:Ap,useDebugValue:qc,useDeferredValue:function(n){return wn().memoizedState=n},useTransition:function(){var n=Ap(!1),i=n[0];return n=py.bind(null,n[1]),wn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var h=Ue,p=wn();if(Ne){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),at===null)throw Error(t(349));(Hr&30)!==0||_p(h,i,l)}p.memoizedState=l;var m={value:l,getSnapshot:i};return p.queue=m,jp(bp.bind(null,h,m,n),[n]),h.flags|=2048,Ws(9,kp.bind(null,h,m,l,i),void 0,null),l},useId:function(){var n=wn(),i=at.identifierPrefix;if(Ne){var l=Rn,h=Fn;l=(h&~(1<<32-Zt(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=zs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=dy++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},vy={readContext:Yt,useCallback:Rp,useContext:Yt,useEffect:Gc,useImperativeHandle:Fp,useInsertionEffect:Dp,useLayoutEffect:Pp,useMemo:Lp,useReducer:Yc,useRef:Op,useState:function(){return Yc(Bs)},useDebugValue:qc,useDeferredValue:function(n){var i=Xt();return Ip(i,tt.memoizedState,n)},useTransition:function(){var n=Yc(Bs)[0],i=Xt().memoizedState;return[n,i]},useMutableSource:Sp,useSyncExternalStore:Cp,useId:Np,unstable_isNewReconciler:!1},yy={readContext:Yt,useCallback:Rp,useContext:Yt,useEffect:Gc,useImperativeHandle:Fp,useInsertionEffect:Dp,useLayoutEffect:Pp,useMemo:Lp,useReducer:Xc,useRef:Op,useState:function(){return Xc(Bs)},useDebugValue:qc,useDeferredValue:function(n){var i=Xt();return tt===null?i.memoizedState=n:Ip(i,tt.memoizedState,n)},useTransition:function(){var n=Xc(Bs)[0],i=Xt().memoizedState;return[n,i]},useMutableSource:Sp,useSyncExternalStore:Cp,useId:Np,unstable_isNewReconciler:!1};function nn(n,i){if(n&&n.defaultProps){i=K({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function $c(n,i,l,h){i=n.memoizedState,l=l(h,i),l=l==null?i:K({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var sa={isMounted:function(n){return(n=n._reactInternals)?Ir(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var h=yt(),p=yr(n),m=In(h,p);m.payload=i,l!=null&&(m.callback=l),i=fr(n,m,p),i!==null&&(on(i,n,p,h),Qo(i,n,p))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var h=yt(),p=yr(n),m=In(h,p);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=fr(n,m,p),i!==null&&(on(i,n,p,h),Qo(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=yt(),h=yr(n),p=In(l,h);p.tag=2,i!=null&&(p.callback=i),i=fr(n,p,h),i!==null&&(on(i,n,h,l),Qo(i,n,h))}};function Up(n,i,l,h,p,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,m,w):i.prototype&&i.prototype.isPureReactComponent?!Es(l,h)||!Es(p,m):!0}function Vp(n,i,l){var h=!1,p=hr,m=i.contextType;return typeof m=="object"&&m!==null?m=Yt(m):(p=_t(i)?zr:dt.current,h=i.contextTypes,m=(h=h!=null)?Ti(n,p):hr),i=new i(l,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=sa,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=m),i}function Hp(n,i,l,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==n&&sa.enqueueReplaceState(i,i.state,null)}function Kc(n,i,l,h){var p=n.stateNode;p.props=l,p.state=n.memoizedState,p.refs={},Lc(n);var m=i.contextType;typeof m=="object"&&m!==null?p.context=Yt(m):(m=_t(i)?zr:dt.current,p.context=Ti(n,m)),p.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&($c(n,i,m,l),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&sa.enqueueReplaceState(p,p.state,null),Jo(n,l,p,h),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function Fi(n,i){try{var l="",h=i;do l+=ve(h),h=h.return;while(h);var p=l}catch(m){p=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:p,digest:null}}function Qc(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function Jc(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var xy=typeof WeakMap=="function"?WeakMap:Map;function Yp(n,i,l){l=In(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){da||(da=!0,pu=h),Jc(n,i)},l}function Xp(n,i,l){l=In(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;l.payload=function(){return h(p)},l.callback=function(){Jc(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){Jc(n,i),typeof h!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),l}function Gp(n,i,l){var h=n.pingCache;if(h===null){h=n.pingCache=new xy;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(l)||(p.add(l),n=My.bind(null,n,i,l),i.then(n,n))}function qp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function $p(n,i,l,h,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=In(-1,1),i.tag=2,fr(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var wy=z.ReactCurrentOwner,kt=!1;function vt(n,i,l,h){i.child=n===null?gp(i,null,l,h):ji(i,n.child,l,h)}function Kp(n,i,l,h,p){l=l.render;var m=i.ref;return Pi(i,p),h=Vc(n,i,l,h,m,p),l=Hc(),n!==null&&!kt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,Nn(n,i,p)):(Ne&&l&&Tc(i),i.flags|=1,vt(n,i,h,p),i.child)}function Qp(n,i,l,h,p){if(n===null){var m=l.type;return typeof m=="function"&&!wu(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=m,Jp(n,i,m,h,p)):(n=ya(l.type,null,h,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&p)===0){var w=m.memoizedProps;if(l=l.compare,l=l!==null?l:Es,l(w,h)&&n.ref===i.ref)return Nn(n,i,p)}return i.flags|=1,n=wr(m,h),n.ref=i.ref,n.return=i,i.child=n}function Jp(n,i,l,h,p){if(n!==null){var m=n.memoizedProps;if(Es(m,h)&&n.ref===i.ref)if(kt=!1,i.pendingProps=h=m,(n.lanes&p)!==0)(n.flags&131072)!==0&&(kt=!0);else return i.lanes=n.lanes,Nn(n,i,p)}return Zc(n,i,l,h,p)}function Zp(n,i,l){var h=i.pendingProps,p=h.children,m=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Li,It),It|=l;else{if((l&1073741824)===0)return n=m!==null?m.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Re(Li,It),It|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:l,Re(Li,It),It|=h}else m!==null?(h=m.baseLanes|l,i.memoizedState=null):h=l,Re(Li,It),It|=h;return vt(n,i,p,l),i.child}function ef(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Zc(n,i,l,h,p){var m=_t(l)?zr:dt.current;return m=Ti(i,m),Pi(i,p),l=Vc(n,i,l,h,m,p),h=Hc(),n!==null&&!kt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,Nn(n,i,p)):(Ne&&h&&Tc(i),i.flags|=1,vt(n,i,l,p),i.child)}function tf(n,i,l,h,p){if(_t(l)){var m=!0;Vo(i)}else m=!1;if(Pi(i,p),i.stateNode===null)aa(n,i),Vp(i,l,h),Kc(i,l,h,p),h=!0;else if(n===null){var w=i.stateNode,T=i.memoizedProps;w.props=T;var A=w.context,I=l.contextType;typeof I=="object"&&I!==null?I=Yt(I):(I=_t(l)?zr:dt.current,I=Ti(i,I));var U=l.getDerivedStateFromProps,X=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function";X||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==h||A!==I)&&Hp(i,w,h,I),pr=!1;var W=i.memoizedState;w.state=W,Jo(i,h,w,p),A=i.memoizedState,T!==h||W!==A||Ct.current||pr?(typeof U=="function"&&($c(i,l,U,h),A=i.memoizedState),(T=pr||Up(i,l,T,h,W,A,I))?(X||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=A),w.props=h,w.state=A,w.context=I,h=T):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,vp(n,i),T=i.memoizedProps,I=i.type===i.elementType?T:nn(i.type,T),w.props=I,X=i.pendingProps,W=w.context,A=l.contextType,typeof A=="object"&&A!==null?A=Yt(A):(A=_t(l)?zr:dt.current,A=Ti(i,A));var Z=l.getDerivedStateFromProps;(U=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==X||W!==A)&&Hp(i,w,h,A),pr=!1,W=i.memoizedState,w.state=W,Jo(i,h,w,p);var ne=i.memoizedState;T!==X||W!==ne||Ct.current||pr?(typeof Z=="function"&&($c(i,l,Z,h),ne=i.memoizedState),(I=pr||Up(i,l,I,h,W,ne,A)||!1)?(U||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ne,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ne,A)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ne),w.props=h,w.state=ne,w.context=A,h=I):(typeof w.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(i.flags|=1024),h=!1)}return eu(n,i,l,h,m,p)}function eu(n,i,l,h,p,m){ef(n,i);var w=(i.flags&128)!==0;if(!h&&!w)return p&&op(i,l,!1),Nn(n,i,m);h=i.stateNode,wy.current=i;var T=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&w?(i.child=ji(i,n.child,null,m),i.child=ji(i,null,T,m)):vt(n,i,T,m),i.memoizedState=h.state,p&&op(i,l,!0),i.child}function nf(n){var i=n.stateNode;i.pendingContext?ip(n,i.pendingContext,i.pendingContext!==i.context):i.context&&ip(n,i.context,!1),Ic(n,i.containerInfo)}function rf(n,i,l,h,p){return Oi(),jc(p),i.flags|=256,vt(n,i,l,h),i.child}var tu={dehydrated:null,treeContext:null,retryLane:0};function nu(n){return{baseLanes:n,cachePool:null,transitions:null}}function sf(n,i,l){var h=i.pendingProps,p=We.current,m=!1,w=(i.flags&128)!==0,T;if((T=w)||(T=n!==null&&n.memoizedState===null?!1:(p&2)!==0),T?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Re(We,p&1),n===null)return Oc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,n=h.fallback,m?(h=i.mode,m=i.child,w={mode:"hidden",children:w},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=xa(w,h,0,null),n=$r(n,h,l,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=nu(l),i.memoizedState=tu,n):ru(i,w));if(p=n.memoizedState,p!==null&&(T=p.dehydrated,T!==null))return Sy(n,i,w,h,T,p,l);if(m){m=h.fallback,w=i.mode,p=n.child,T=p.sibling;var A={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=A,i.deletions=null):(h=wr(p,A),h.subtreeFlags=p.subtreeFlags&14680064),T!==null?m=wr(T,m):(m=$r(m,w,l,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,w=n.child.memoizedState,w=w===null?nu(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~l,i.memoizedState=tu,h}return m=n.child,n=m.sibling,h=wr(m,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=h,i.memoizedState=null,h}function ru(n,i){return i=xa({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function oa(n,i,l,h){return h!==null&&jc(h),ji(i,n.child,null,l),n=ru(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Sy(n,i,l,h,p,m,w){if(l)return i.flags&256?(i.flags&=-257,h=Qc(Error(t(422))),oa(n,i,w,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=h.fallback,p=i.mode,h=xa({mode:"visible",children:h.children},p,0,null),m=$r(m,p,w,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,(i.mode&1)!==0&&ji(i,n.child,null,w),i.child.memoizedState=nu(w),i.memoizedState=tu,m);if((i.mode&1)===0)return oa(n,i,w,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var T=h.dgst;return h=T,m=Error(t(419)),h=Qc(m,h,void 0),oa(n,i,w,h)}if(T=(w&n.childLanes)!==0,kt||T){if(h=at,h!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|w))!==0?0:p,p!==0&&p!==m.retryLane&&(m.retryLane=p,Ln(n,p),on(h,n,p,-1))}return xu(),h=Qc(Error(t(421))),oa(n,i,w,h)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=Fy.bind(null,n),p._reactRetry=i,null):(n=m.treeContext,Lt=cr(p.nextSibling),Rt=i,Ne=!0,tn=null,n!==null&&(Vt[Ht++]=Fn,Vt[Ht++]=Rn,Vt[Ht++]=Br,Fn=n.id,Rn=n.overflow,Br=i),i=ru(i,h.children),i.flags|=4096,i)}function of(n,i,l){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Fc(n.return,i,l)}function iu(n,i,l,h,p){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=l,m.tailMode=p)}function af(n,i,l){var h=i.pendingProps,p=h.revealOrder,m=h.tail;if(vt(n,i,h.children,l),h=We.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&of(n,l,i);else if(n.tag===19)of(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Re(We,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)n=l.alternate,n!==null&&Zo(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),iu(i,!1,p,l,m);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&Zo(n)===null){i.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}iu(i,!0,l,null,m);break;case"together":iu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function aa(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Nn(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Yr|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=wr(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=wr(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Cy(n,i,l){switch(i.tag){case 3:nf(i),Oi();break;case 5:wp(i);break;case 1:_t(i.type)&&Vo(i);break;case 4:Ic(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;Re($o,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Re(We,We.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?sf(n,i,l):(Re(We,We.current&1),n=Nn(n,i,l),n!==null?n.sibling:null);Re(We,We.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(n.flags&128)!==0){if(h)return af(n,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Re(We,We.current),h)break;return null;case 22:case 23:return i.lanes=0,Zp(n,i,l)}return Nn(n,i,l)}var lf,su,cf,uf;lf=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},su=function(){},cf=function(n,i,l,h){var p=n.memoizedProps;if(p!==h){n=i.stateNode,Vr(xn.current);var m=null;switch(l){case"input":p=di(n,p),h=di(n,h),m=[];break;case"select":p=K({},p,{value:void 0}),h=K({},h,{value:void 0}),m=[];break;case"textarea":p=ls(n,p),h=ls(n,h),m=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Bo)}Fr(l,h);var w;l=null;for(I in p)if(!h.hasOwnProperty(I)&&p.hasOwnProperty(I)&&p[I]!=null)if(I==="style"){var T=p[I];for(w in T)T.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(s.hasOwnProperty(I)?m||(m=[]):(m=m||[]).push(I,null));for(I in h){var A=h[I];if(T=p!=null?p[I]:void 0,h.hasOwnProperty(I)&&A!==T&&(A!=null||T!=null))if(I==="style")if(T){for(w in T)!T.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in A)A.hasOwnProperty(w)&&T[w]!==A[w]&&(l||(l={}),l[w]=A[w])}else l||(m||(m=[]),m.push(I,l)),l=A;else I==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,T=T?T.__html:void 0,A!=null&&T!==A&&(m=m||[]).push(I,A)):I==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push(I,""+A):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(s.hasOwnProperty(I)?(A!=null&&I==="onScroll"&&Le("scroll",n),m||T===A||(m=[])):(m=m||[]).push(I,A))}l&&(m=m||[]).push("style",l);var I=m;(i.updateQueue=I)&&(i.flags|=4)}},uf=function(n,i,l,h){l!==h&&(i.flags|=4)};function Us(n,i){if(!Ne)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(i)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=h,n.childLanes=l,i}function _y(n,i,l){var h=i.pendingProps;switch(Ec(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return _t(i.type)&&Uo(),ft(i),null;case 3:return h=i.stateNode,Mi(),Ie(Ct),Ie(dt),Bc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Go(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tn!==null&&(mu(tn),tn=null))),su(n,i),ft(i),null;case 5:Nc(i);var p=Vr(Is.current);if(l=i.type,n!==null&&i.stateNode!=null)cf(n,i,l,h,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return ft(i),null}if(n=Vr(xn.current),Go(i)){h=i.stateNode,l=i.type;var m=i.memoizedProps;switch(h[yn]=i,h[Ps]=m,n=(i.mode&1)!==0,l){case"dialog":Le("cancel",h),Le("close",h);break;case"iframe":case"object":case"embed":Le("load",h);break;case"video":case"audio":for(p=0;p<Os.length;p++)Le(Os[p],h);break;case"source":Le("error",h);break;case"img":case"image":case"link":Le("error",h),Le("load",h);break;case"details":Le("toggle",h);break;case"input":os(h,m),Le("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Le("invalid",h);break;case"textarea":yo(h,m),Le("invalid",h)}Fr(l,m),p=null;for(var w in m)if(m.hasOwnProperty(w)){var T=m[w];w==="children"?typeof T=="string"?h.textContent!==T&&(m.suppressHydrationWarning!==!0&&zo(h.textContent,T,n),p=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(m.suppressHydrationWarning!==!0&&zo(h.textContent,T,n),p=["children",""+T]):s.hasOwnProperty(w)&&T!=null&&w==="onScroll"&&Le("scroll",h)}switch(l){case"input":On(h),pi(h,m,!0);break;case"textarea":On(h),he(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=Bo)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Be(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(l,{is:h.is}):(n=w.createElement(l),l==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,l),n[yn]=i,n[Ps]=h,lf(n,i,!1,!1),i.stateNode=n;e:{switch(w=Rr(l,h),l){case"dialog":Le("cancel",n),Le("close",n),p=h;break;case"iframe":case"object":case"embed":Le("load",n),p=h;break;case"video":case"audio":for(p=0;p<Os.length;p++)Le(Os[p],n);p=h;break;case"source":Le("error",n),p=h;break;case"img":case"image":case"link":Le("error",n),Le("load",n),p=h;break;case"details":Le("toggle",n),p=h;break;case"input":os(n,h),p=di(n,h),Le("invalid",n);break;case"option":p=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},p=K({},h,{value:void 0}),Le("invalid",n);break;case"textarea":yo(n,h),p=ls(n,h),Le("invalid",n);break;default:p=h}Fr(l,p),T=p;for(m in T)if(T.hasOwnProperty(m)){var A=T[m];m==="style"?Mr(n,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&nr(n,A)):m==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&Ut(n,A):typeof A=="number"&&Ut(n,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(s.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Le("scroll",n):A!=null&&L(n,m,A,w))}switch(l){case"input":On(n),pi(n,h,!1);break;case"textarea":On(n),he(n);break;case"option":h.value!=null&&n.setAttribute("value",""+be(h.value));break;case"select":n.multiple=!!h.multiple,m=h.value,m!=null?tr(n,!!h.multiple,m,!1):h.defaultValue!=null&&tr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=Bo)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ft(i),null;case 6:if(n&&i.stateNode!=null)uf(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=Vr(Is.current),Vr(xn.current),Go(i)){if(h=i.stateNode,l=i.memoizedProps,h[yn]=i,(m=h.nodeValue!==l)&&(n=Rt,n!==null))switch(n.tag){case 3:zo(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zo(h.nodeValue,l,(n.mode&1)!==0)}m&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[yn]=i,i.stateNode=h}return ft(i),null;case 13:if(Ie(We),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ne&&Lt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)dp(),Oi(),i.flags|=98560,m=!1;else if(m=Go(i),h!==null&&h.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[yn]=i}else Oi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),m=!1}else tn!==null&&(mu(tn),tn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(We.current&1)!==0?nt===0&&(nt=3):xu())),i.updateQueue!==null&&(i.flags|=4),ft(i),null);case 4:return Mi(),su(n,i),n===null&&js(i.stateNode.containerInfo),ft(i),null;case 10:return Mc(i.type._context),ft(i),null;case 17:return _t(i.type)&&Uo(),ft(i),null;case 19:if(Ie(We),m=i.memoizedState,m===null)return ft(i),null;if(h=(i.flags&128)!==0,w=m.rendering,w===null)if(h)Us(m,!1);else{if(nt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Zo(n),w!==null){for(i.flags|=128,Us(m,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)m=l,n=h,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Re(We,We.current&1|2),i.child}n=n.sibling}m.tail!==null&&$e()>Ii&&(i.flags|=128,h=!0,Us(m,!1),i.lanes=4194304)}else{if(!h)if(n=Zo(w),n!==null){if(i.flags|=128,h=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Us(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Ne)return ft(i),null}else 2*$e()-m.renderingStartTime>Ii&&l!==1073741824&&(i.flags|=128,h=!0,Us(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(l=m.last,l!==null?l.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=$e(),i.sibling=null,l=We.current,Re(We,h?l&1|2:l&1),i):(ft(i),null);case 22:case 23:return yu(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(It&1073741824)!==0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function ky(n,i){switch(Ec(i),i.tag){case 1:return _t(i.type)&&Uo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Mi(),Ie(Ct),Ie(dt),Bc(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Nc(i),null;case 13:if(Ie(We),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Oi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ie(We),null;case 4:return Mi(),null;case 10:return Mc(i.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var la=!1,gt=!1,by=typeof WeakSet=="function"?WeakSet:Set,te=null;function Ri(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){qe(n,i,h)}else l.current=null}function ou(n,i,l){try{l()}catch(h){qe(n,i,h)}}var hf=!1;function Ty(n,i){if(yc=Ao,n=Ud(),uc(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var w=0,T=-1,A=-1,I=0,U=0,X=n,W=null;t:for(;;){for(var Z;X!==l||p!==0&&X.nodeType!==3||(T=w+p),X!==m||h!==0&&X.nodeType!==3||(A=w+h),X.nodeType===3&&(w+=X.nodeValue.length),(Z=X.firstChild)!==null;)W=X,X=Z;for(;;){if(X===n)break t;if(W===l&&++I===p&&(T=w),W===m&&++U===h&&(A=w),(Z=X.nextSibling)!==null)break;X=W,W=X.parentNode}X=Z}l=T===-1||A===-1?null:{start:T,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(xc={focusedElem:n,selectionRange:l},Ao=!1,te=i;te!==null;)if(i=te,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,te=n;else for(;te!==null;){i=te;try{var ne=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var re=ne.memoizedProps,Ke=ne.memoizedState,F=i.stateNode,j=F.getSnapshotBeforeUpdate(i.elementType===i.type?re:nn(i.type,re),Ke);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var R=i.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(q){qe(i,i.return,q)}if(n=i.sibling,n!==null){n.return=i.return,te=n;break}te=i.return}return ne=hf,hf=!1,ne}function Vs(n,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&n)===n){var m=p.destroy;p.destroy=void 0,m!==void 0&&ou(i,l,m)}p=p.next}while(p!==h)}}function ca(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function au(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function df(n){var i=n.alternate;i!==null&&(n.alternate=null,df(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[yn],delete i[Ps],delete i[_c],delete i[ly],delete i[cy])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function pf(n){return n.tag===5||n.tag===3||n.tag===4}function ff(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lu(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Bo));else if(h!==4&&(n=n.child,n!==null))for(lu(n,i,l),n=n.sibling;n!==null;)lu(n,i,l),n=n.sibling}function cu(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(cu(n,i,l),n=n.sibling;n!==null;)cu(n,i,l),n=n.sibling}var ct=null,rn=!1;function gr(n,i,l){for(l=l.child;l!==null;)gf(n,i,l),l=l.sibling}function gf(n,i,l){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Co,l)}catch{}switch(l.tag){case 5:gt||Ri(l,i);case 6:var h=ct,p=rn;ct=null,gr(n,i,l),ct=h,rn=p,ct!==null&&(rn?(n=ct,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):ct.removeChild(l.stateNode));break;case 18:ct!==null&&(rn?(n=ct,l=l.stateNode,n.nodeType===8?Cc(n.parentNode,l):n.nodeType===1&&Cc(n,l),Ss(n)):Cc(ct,l.stateNode));break;case 4:h=ct,p=rn,ct=l.stateNode.containerInfo,rn=!0,gr(n,i,l),ct=h,rn=p;break;case 0:case 11:case 14:case 15:if(!gt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var m=p,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&ou(l,i,w),p=p.next}while(p!==h)}gr(n,i,l);break;case 1:if(!gt&&(Ri(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(T){qe(l,i,T)}gr(n,i,l);break;case 21:gr(n,i,l);break;case 22:l.mode&1?(gt=(h=gt)||l.memoizedState!==null,gr(n,i,l),gt=h):gr(n,i,l);break;default:gr(n,i,l)}}function mf(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new by),i.forEach(function(h){var p=Ry.bind(null,n,h);l.has(h)||(l.add(h),h.then(p,p))})}}function sn(n,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var m=n,w=i,T=w;e:for(;T!==null;){switch(T.tag){case 5:ct=T.stateNode,rn=!1;break e;case 3:ct=T.stateNode.containerInfo,rn=!0;break e;case 4:ct=T.stateNode.containerInfo,rn=!0;break e}T=T.return}if(ct===null)throw Error(t(160));gf(m,w,p),ct=null,rn=!1;var A=p.alternate;A!==null&&(A.return=null),p.return=null}catch(I){qe(p,i,I)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)vf(i,n),i=i.sibling}function vf(n,i){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sn(i,n),Sn(n),h&4){try{Vs(3,n,n.return),ca(3,n)}catch(re){qe(n,n.return,re)}try{Vs(5,n,n.return)}catch(re){qe(n,n.return,re)}}break;case 1:sn(i,n),Sn(n),h&512&&l!==null&&Ri(l,l.return);break;case 5:if(sn(i,n),Sn(n),h&512&&l!==null&&Ri(l,l.return),n.flags&32){var p=n.stateNode;try{Ut(p,"")}catch(re){qe(n,n.return,re)}}if(h&4&&(p=n.stateNode,p!=null)){var m=n.memoizedProps,w=l!==null?l.memoizedProps:m,T=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{T==="input"&&m.type==="radio"&&m.name!=null&&as(p,m),Rr(T,w);var I=Rr(T,m);for(w=0;w<A.length;w+=2){var U=A[w],X=A[w+1];U==="style"?Mr(p,X):U==="dangerouslySetInnerHTML"?nr(p,X):U==="children"?Ut(p,X):L(p,U,X,I)}switch(T){case"input":gn(p,m);break;case"textarea":J(p,m);break;case"select":var W=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!m.multiple;var Z=m.value;Z!=null?tr(p,!!m.multiple,Z,!1):W!==!!m.multiple&&(m.defaultValue!=null?tr(p,!!m.multiple,m.defaultValue,!0):tr(p,!!m.multiple,m.multiple?[]:"",!1))}p[Ps]=m}catch(re){qe(n,n.return,re)}}break;case 6:if(sn(i,n),Sn(n),h&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,m=n.memoizedProps;try{p.nodeValue=m}catch(re){qe(n,n.return,re)}}break;case 3:if(sn(i,n),Sn(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ss(i.containerInfo)}catch(re){qe(n,n.return,re)}break;case 4:sn(i,n),Sn(n);break;case 13:sn(i,n),Sn(n),p=n.child,p.flags&8192&&(m=p.memoizedState!==null,p.stateNode.isHidden=m,!m||p.alternate!==null&&p.alternate.memoizedState!==null||(du=$e())),h&4&&mf(n);break;case 22:if(U=l!==null&&l.memoizedState!==null,n.mode&1?(gt=(I=gt)||U,sn(i,n),gt=I):sn(i,n),Sn(n),h&8192){if(I=n.memoizedState!==null,(n.stateNode.isHidden=I)&&!U&&(n.mode&1)!==0)for(te=n,U=n.child;U!==null;){for(X=te=U;te!==null;){switch(W=te,Z=W.child,W.tag){case 0:case 11:case 14:case 15:Vs(4,W,W.return);break;case 1:Ri(W,W.return);var ne=W.stateNode;if(typeof ne.componentWillUnmount=="function"){h=W,l=W.return;try{i=h,ne.props=i.memoizedProps,ne.state=i.memoizedState,ne.componentWillUnmount()}catch(re){qe(h,l,re)}}break;case 5:Ri(W,W.return);break;case 22:if(W.memoizedState!==null){wf(X);continue}}Z!==null?(Z.return=W,te=Z):wf(X)}U=U.sibling}e:for(U=null,X=n;;){if(X.tag===5){if(U===null){U=X;try{p=X.stateNode,I?(m=p.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(T=X.stateNode,A=X.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,T.style.display=fi("display",w))}catch(re){qe(n,n.return,re)}}}else if(X.tag===6){if(U===null)try{X.stateNode.nodeValue=I?"":X.memoizedProps}catch(re){qe(n,n.return,re)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break e;for(;X.sibling===null;){if(X.return===null||X.return===n)break e;U===X&&(U=null),X=X.return}U===X&&(U=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:sn(i,n),Sn(n),h&4&&mf(n);break;case 21:break;default:sn(i,n),Sn(n)}}function Sn(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(pf(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Ut(p,""),h.flags&=-33);var m=ff(n);cu(n,m,p);break;case 3:case 4:var w=h.stateNode.containerInfo,T=ff(n);lu(n,T,w);break;default:throw Error(t(161))}}catch(A){qe(n,n.return,A)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ey(n,i,l){te=n,yf(n)}function yf(n,i,l){for(var h=(n.mode&1)!==0;te!==null;){var p=te,m=p.child;if(p.tag===22&&h){var w=p.memoizedState!==null||la;if(!w){var T=p.alternate,A=T!==null&&T.memoizedState!==null||gt;T=la;var I=gt;if(la=w,(gt=A)&&!I)for(te=p;te!==null;)w=te,A=w.child,w.tag===22&&w.memoizedState!==null?Sf(p):A!==null?(A.return=w,te=A):Sf(p);for(;m!==null;)te=m,yf(m),m=m.sibling;te=p,la=T,gt=I}xf(n)}else(p.subtreeFlags&8772)!==0&&m!==null?(m.return=p,te=m):xf(n)}}function xf(n){for(;te!==null;){var i=te;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:gt||ca(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!gt)if(l===null)h.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:nn(i.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&xp(i,m,h);break;case 3:var w=i.updateQueue;if(w!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}xp(i,w,l)}break;case 5:var T=i.stateNode;if(l===null&&i.flags&4){l=T;var A=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var I=i.alternate;if(I!==null){var U=I.memoizedState;if(U!==null){var X=U.dehydrated;X!==null&&Ss(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gt||i.flags&512&&au(i)}catch(W){qe(i,i.return,W)}}if(i===n){te=null;break}if(l=i.sibling,l!==null){l.return=i.return,te=l;break}te=i.return}}function wf(n){for(;te!==null;){var i=te;if(i===n){te=null;break}var l=i.sibling;if(l!==null){l.return=i.return,te=l;break}te=i.return}}function Sf(n){for(;te!==null;){var i=te;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ca(4,i)}catch(A){qe(i,l,A)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(A){qe(i,p,A)}}var m=i.return;try{au(i)}catch(A){qe(i,m,A)}break;case 5:var w=i.return;try{au(i)}catch(A){qe(i,w,A)}}}catch(A){qe(i,i.return,A)}if(i===n){te=null;break}var T=i.sibling;if(T!==null){T.return=i.return,te=T;break}te=i.return}}var Ay=Math.ceil,ua=z.ReactCurrentDispatcher,uu=z.ReactCurrentOwner,Gt=z.ReactCurrentBatchConfig,Te=0,at=null,Ze=null,ut=0,It=0,Li=ur(0),nt=0,Hs=null,Yr=0,ha=0,hu=0,Ys=null,bt=null,du=0,Ii=1/0,zn=null,da=!1,pu=null,mr=null,pa=!1,vr=null,fa=0,Xs=0,fu=null,ga=-1,ma=0;function yt(){return(Te&6)!==0?$e():ga!==-1?ga:ga=$e()}function yr(n){return(n.mode&1)===0?1:(Te&2)!==0&&ut!==0?ut&-ut:hy.transition!==null?(ma===0&&(ma=pd()),ma):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:Cd(n.type)),n)}function on(n,i,l,h){if(50<Xs)throw Xs=0,fu=null,Error(t(185));ms(n,l,h),((Te&2)===0||n!==at)&&(n===at&&((Te&2)===0&&(ha|=l),nt===4&&xr(n,ut)),Tt(n,h),l===1&&Te===0&&(i.mode&1)===0&&(Ii=$e()+500,Ho&&dr()))}function Tt(n,i){var l=n.callbackNode;h0(n,i);var h=bo(n,n===at?ut:0);if(h===0)l!==null&&ud(l),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(l!=null&&ud(l),i===1)n.tag===0?uy(_f.bind(null,n)):ap(_f.bind(null,n)),oy(function(){(Te&6)===0&&dr()}),l=null;else{switch(fd(h)){case 1:l=Gl;break;case 4:l=hd;break;case 16:l=So;break;case 536870912:l=dd;break;default:l=So}l=Df(l,Cf.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Cf(n,i){if(ga=-1,ma=0,(Te&6)!==0)throw Error(t(327));var l=n.callbackNode;if(Ni()&&n.callbackNode!==l)return null;var h=bo(n,n===at?ut:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=va(n,h);else{i=h;var p=Te;Te|=2;var m=bf();(at!==n||ut!==i)&&(zn=null,Ii=$e()+500,Gr(n,i));do try{Dy();break}catch(T){kf(n,T)}while(!0);Pc(),ua.current=m,Te=p,Ze!==null?i=0:(at=null,ut=0,i=nt)}if(i!==0){if(i===2&&(p=ql(n),p!==0&&(h=p,i=gu(n,p))),i===1)throw l=Hs,Gr(n,0),xr(n,h),Tt(n,$e()),l;if(i===6)xr(n,h);else{if(p=n.current.alternate,(h&30)===0&&!Oy(p)&&(i=va(n,h),i===2&&(m=ql(n),m!==0&&(h=m,i=gu(n,m))),i===1))throw l=Hs,Gr(n,0),xr(n,h),Tt(n,$e()),l;switch(n.finishedWork=p,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:qr(n,bt,zn);break;case 3:if(xr(n,h),(h&130023424)===h&&(i=du+500-$e(),10<i)){if(bo(n,0)!==0)break;if(p=n.suspendedLanes,(p&h)!==h){yt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=Sc(qr.bind(null,n,bt,zn),i);break}qr(n,bt,zn);break;case 4:if(xr(n,h),(h&4194240)===h)break;for(i=n.eventTimes,p=-1;0<h;){var w=31-Zt(h);m=1<<w,w=i[w],w>p&&(p=w),h&=~m}if(h=p,h=$e()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Ay(h/1960))-h,10<h){n.timeoutHandle=Sc(qr.bind(null,n,bt,zn),h);break}qr(n,bt,zn);break;case 5:qr(n,bt,zn);break;default:throw Error(t(329))}}}return Tt(n,$e()),n.callbackNode===l?Cf.bind(null,n):null}function gu(n,i){var l=Ys;return n.current.memoizedState.isDehydrated&&(Gr(n,i).flags|=256),n=va(n,i),n!==2&&(i=bt,bt=l,i!==null&&mu(i)),n}function mu(n){bt===null?bt=n:bt.push.apply(bt,n)}function Oy(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],m=p.getSnapshot;p=p.value;try{if(!en(m(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xr(n,i){for(i&=~hu,i&=~ha,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Zt(i),h=1<<l;n[l]=-1,i&=~h}}function _f(n){if((Te&6)!==0)throw Error(t(327));Ni();var i=bo(n,0);if((i&1)===0)return Tt(n,$e()),null;var l=va(n,i);if(n.tag!==0&&l===2){var h=ql(n);h!==0&&(i=h,l=gu(n,h))}if(l===1)throw l=Hs,Gr(n,0),xr(n,i),Tt(n,$e()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,qr(n,bt,zn),Tt(n,$e()),null}function vu(n,i){var l=Te;Te|=1;try{return n(i)}finally{Te=l,Te===0&&(Ii=$e()+500,Ho&&dr())}}function Xr(n){vr!==null&&vr.tag===0&&(Te&6)===0&&Ni();var i=Te;Te|=1;var l=Gt.transition,h=Pe;try{if(Gt.transition=null,Pe=1,n)return n()}finally{Pe=h,Gt.transition=l,Te=i,(Te&6)===0&&dr()}}function yu(){It=Li.current,Ie(Li)}function Gr(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,sy(l)),Ze!==null)for(l=Ze.return;l!==null;){var h=l;switch(Ec(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Uo();break;case 3:Mi(),Ie(Ct),Ie(dt),Bc();break;case 5:Nc(h);break;case 4:Mi();break;case 13:Ie(We);break;case 19:Ie(We);break;case 10:Mc(h.type._context);break;case 22:case 23:yu()}l=l.return}if(at=n,Ze=n=wr(n.current,null),ut=It=i,nt=0,Hs=null,hu=ha=Yr=0,bt=Ys=null,Ur!==null){for(i=0;i<Ur.length;i++)if(l=Ur[i],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,m=l.pending;if(m!==null){var w=m.next;m.next=p,h.next=w}l.pending=h}Ur=null}return n}function kf(n,i){do{var l=Ze;try{if(Pc(),ea.current=ia,ta){for(var h=Ue.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}ta=!1}if(Hr=0,ot=tt=Ue=null,Ns=!1,zs=0,uu.current=null,l===null||l.return===null){nt=1,Hs=i,Ze=null;break}e:{var m=n,w=l.return,T=l,A=i;if(i=ut,T.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var I=A,U=T,X=U.tag;if((U.mode&1)===0&&(X===0||X===11||X===15)){var W=U.alternate;W?(U.updateQueue=W.updateQueue,U.memoizedState=W.memoizedState,U.lanes=W.lanes):(U.updateQueue=null,U.memoizedState=null)}var Z=qp(w);if(Z!==null){Z.flags&=-257,$p(Z,w,T,m,i),Z.mode&1&&Gp(m,I,i),i=Z,A=I;var ne=i.updateQueue;if(ne===null){var re=new Set;re.add(A),i.updateQueue=re}else ne.add(A);break e}else{if((i&1)===0){Gp(m,I,i),xu();break e}A=Error(t(426))}}else if(Ne&&T.mode&1){var Ke=qp(w);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),$p(Ke,w,T,m,i),jc(Fi(A,T));break e}}m=A=Fi(A,T),nt!==4&&(nt=2),Ys===null?Ys=[m]:Ys.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var F=Yp(m,A,i);yp(m,F);break e;case 1:T=A;var j=m.type,R=m.stateNode;if((m.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(mr===null||!mr.has(R)))){m.flags|=65536,i&=-i,m.lanes|=i;var q=Xp(m,T,i);yp(m,q);break e}}m=m.return}while(m!==null)}Ef(l)}catch(ie){i=ie,Ze===l&&l!==null&&(Ze=l=l.return);continue}break}while(!0)}function bf(){var n=ua.current;return ua.current=ia,n===null?ia:n}function xu(){(nt===0||nt===3||nt===2)&&(nt=4),at===null||(Yr&268435455)===0&&(ha&268435455)===0||xr(at,ut)}function va(n,i){var l=Te;Te|=2;var h=bf();(at!==n||ut!==i)&&(zn=null,Gr(n,i));do try{jy();break}catch(p){kf(n,p)}while(!0);if(Pc(),Te=l,ua.current=h,Ze!==null)throw Error(t(261));return at=null,ut=0,nt}function jy(){for(;Ze!==null;)Tf(Ze)}function Dy(){for(;Ze!==null&&!n0();)Tf(Ze)}function Tf(n){var i=jf(n.alternate,n,It);n.memoizedProps=n.pendingProps,i===null?Ef(n):Ze=i,uu.current=null}function Ef(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=_y(l,i,It),l!==null){Ze=l;return}}else{if(l=ky(l,i),l!==null){l.flags&=32767,Ze=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nt=6,Ze=null;return}}if(i=i.sibling,i!==null){Ze=i;return}Ze=i=n}while(i!==null);nt===0&&(nt=5)}function qr(n,i,l){var h=Pe,p=Gt.transition;try{Gt.transition=null,Pe=1,Py(n,i,l,h)}finally{Gt.transition=p,Pe=h}return null}function Py(n,i,l,h){do Ni();while(vr!==null);if((Te&6)!==0)throw Error(t(327));l=n.finishedWork;var p=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=l.lanes|l.childLanes;if(d0(n,m),n===at&&(Ze=at=null,ut=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||pa||(pa=!0,Df(So,function(){return Ni(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=Gt.transition,Gt.transition=null;var w=Pe;Pe=1;var T=Te;Te|=4,uu.current=null,Ty(n,l),vf(l,n),J0(xc),Ao=!!yc,xc=yc=null,n.current=l,Ey(l),r0(),Te=T,Pe=w,Gt.transition=m}else n.current=l;if(pa&&(pa=!1,vr=n,fa=p),m=n.pendingLanes,m===0&&(mr=null),o0(l.stateNode),Tt(n,$e()),i!==null)for(h=n.onRecoverableError,l=0;l<i.length;l++)p=i[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(da)throw da=!1,n=pu,pu=null,n;return(fa&1)!==0&&n.tag!==0&&Ni(),m=n.pendingLanes,(m&1)!==0?n===fu?Xs++:(Xs=0,fu=n):Xs=0,dr(),null}function Ni(){if(vr!==null){var n=fd(fa),i=Gt.transition,l=Pe;try{if(Gt.transition=null,Pe=16>n?16:n,vr===null)var h=!1;else{if(n=vr,vr=null,fa=0,(Te&6)!==0)throw Error(t(331));var p=Te;for(Te|=4,te=n.current;te!==null;){var m=te,w=m.child;if((te.flags&16)!==0){var T=m.deletions;if(T!==null){for(var A=0;A<T.length;A++){var I=T[A];for(te=I;te!==null;){var U=te;switch(U.tag){case 0:case 11:case 15:Vs(8,U,m)}var X=U.child;if(X!==null)X.return=U,te=X;else for(;te!==null;){U=te;var W=U.sibling,Z=U.return;if(df(U),U===I){te=null;break}if(W!==null){W.return=Z,te=W;break}te=Z}}}var ne=m.alternate;if(ne!==null){var re=ne.child;if(re!==null){ne.child=null;do{var Ke=re.sibling;re.sibling=null,re=Ke}while(re!==null)}}te=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,te=w;else e:for(;te!==null;){if(m=te,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Vs(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,te=F;break e}te=m.return}}var j=n.current;for(te=j;te!==null;){w=te;var R=w.child;if((w.subtreeFlags&2064)!==0&&R!==null)R.return=w,te=R;else e:for(w=j;te!==null;){if(T=te,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:ca(9,T)}}catch(ie){qe(T,T.return,ie)}if(T===w){te=null;break e}var q=T.sibling;if(q!==null){q.return=T.return,te=q;break e}te=T.return}}if(Te=p,dr(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Co,n)}catch{}h=!0}return h}finally{Pe=l,Gt.transition=i}}return!1}function Af(n,i,l){i=Fi(l,i),i=Yp(n,i,1),n=fr(n,i,1),i=yt(),n!==null&&(ms(n,1,i),Tt(n,i))}function qe(n,i,l){if(n.tag===3)Af(n,n,l);else for(;i!==null;){if(i.tag===3){Af(i,n,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(mr===null||!mr.has(h))){n=Fi(l,n),n=Xp(i,n,1),i=fr(i,n,1),n=yt(),i!==null&&(ms(i,1,n),Tt(i,n));break}}i=i.return}}function My(n,i,l){var h=n.pingCache;h!==null&&h.delete(i),i=yt(),n.pingedLanes|=n.suspendedLanes&l,at===n&&(ut&l)===l&&(nt===4||nt===3&&(ut&130023424)===ut&&500>$e()-du?Gr(n,0):hu|=l),Tt(n,i)}function Of(n,i){i===0&&((n.mode&1)===0?i=1:(i=ko,ko<<=1,(ko&130023424)===0&&(ko=4194304)));var l=yt();n=Ln(n,i),n!==null&&(ms(n,i,l),Tt(n,l))}function Fy(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Of(n,l)}function Ry(n,i){var l=0;switch(n.tag){case 13:var h=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Of(n,l)}var jf;jf=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||Ct.current)kt=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return kt=!1,Cy(n,i,l);kt=(n.flags&131072)!==0}else kt=!1,Ne&&(i.flags&1048576)!==0&&lp(i,Xo,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;aa(n,i),n=i.pendingProps;var p=Ti(i,dt.current);Pi(i,l),p=Vc(null,i,h,n,p,l);var m=Hc();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,_t(h)?(m=!0,Vo(i)):m=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Lc(i),p.updater=sa,i.stateNode=p,p._reactInternals=i,Kc(i,h,n,l),i=eu(null,i,h,!0,m,l)):(i.tag=0,Ne&&m&&Tc(i),vt(null,i,p,l),i=i.child),i;case 16:h=i.elementType;e:{switch(aa(n,i),n=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=Iy(h),n=nn(h,n),p){case 0:i=Zc(null,i,h,n,l);break e;case 1:i=tf(null,i,h,n,l);break e;case 11:i=Kp(null,i,h,n,l);break e;case 14:i=Qp(null,i,h,nn(h.type,n),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),Zc(n,i,h,p,l);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),tf(n,i,h,p,l);case 3:e:{if(nf(i),n===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,p=m.element,vp(n,i),Jo(i,h,null,l);var w=i.memoizedState;if(h=w.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){p=Fi(Error(t(423)),i),i=rf(n,i,h,l,p);break e}else if(h!==p){p=Fi(Error(t(424)),i),i=rf(n,i,h,l,p);break e}else for(Lt=cr(i.stateNode.containerInfo.firstChild),Rt=i,Ne=!0,tn=null,l=gp(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Oi(),h===p){i=Nn(n,i,l);break e}vt(n,i,h,l)}i=i.child}return i;case 5:return wp(i),n===null&&Oc(i),h=i.type,p=i.pendingProps,m=n!==null?n.memoizedProps:null,w=p.children,wc(h,p)?w=null:m!==null&&wc(h,m)&&(i.flags|=32),ef(n,i),vt(n,i,w,l),i.child;case 6:return n===null&&Oc(i),null;case 13:return sf(n,i,l);case 4:return Ic(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=ji(i,null,h,l):vt(n,i,h,l),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),Kp(n,i,h,p,l);case 7:return vt(n,i,i.pendingProps,l),i.child;case 8:return vt(n,i,i.pendingProps.children,l),i.child;case 12:return vt(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,m=i.memoizedProps,w=p.value,Re($o,h._currentValue),h._currentValue=w,m!==null)if(en(m.value,w)){if(m.children===p.children&&!Ct.current){i=Nn(n,i,l);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var T=m.dependencies;if(T!==null){w=m.child;for(var A=T.firstContext;A!==null;){if(A.context===h){if(m.tag===1){A=In(-1,l&-l),A.tag=2;var I=m.updateQueue;if(I!==null){I=I.shared;var U=I.pending;U===null?A.next=A:(A.next=U.next,U.next=A),I.pending=A}}m.lanes|=l,A=m.alternate,A!==null&&(A.lanes|=l),Fc(m.return,l,i),T.lanes|=l;break}A=A.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=l,T=w.alternate,T!==null&&(T.lanes|=l),Fc(w,l,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}vt(n,i,p.children,l),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,Pi(i,l),p=Yt(p),h=h(p),i.flags|=1,vt(n,i,h,l),i.child;case 14:return h=i.type,p=nn(h,i.pendingProps),p=nn(h.type,p),Qp(n,i,h,p,l);case 15:return Jp(n,i,i.type,i.pendingProps,l);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),aa(n,i),i.tag=1,_t(h)?(n=!0,Vo(i)):n=!1,Pi(i,l),Vp(i,h,p),Kc(i,h,p,l),eu(null,i,h,!0,n,l);case 19:return af(n,i,l);case 22:return Zp(n,i,l)}throw Error(t(156,i.tag))};function Df(n,i){return cd(n,i)}function Ly(n,i,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(n,i,l,h){return new Ly(n,i,l,h)}function wu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Iy(n){if(typeof n=="function")return wu(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ce)return 11;if(n===we)return 14}return 2}function wr(n,i){var l=n.alternate;return l===null?(l=qt(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ya(n,i,l,h,p,m){var w=2;if(h=n,typeof n=="function")wu(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case Y:return $r(l.children,p,m,i);case G:w=8,p|=8;break;case se:return n=qt(12,l,i,p|2),n.elementType=se,n.lanes=m,n;case pe:return n=qt(13,l,i,p),n.elementType=pe,n.lanes=m,n;case de:return n=qt(19,l,i,p),n.elementType=de,n.lanes=m,n;case Se:return xa(l,p,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:w=10;break e;case _e:w=9;break e;case Ce:w=11;break e;case we:w=14;break e;case Oe:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=qt(w,l,i,p),i.elementType=n,i.type=h,i.lanes=m,i}function $r(n,i,l,h){return n=qt(7,n,h,i),n.lanes=l,n}function xa(n,i,l,h){return n=qt(22,n,h,i),n.elementType=Se,n.lanes=l,n.stateNode={isHidden:!1},n}function Su(n,i,l){return n=qt(6,n,null,i),n.lanes=l,n}function Cu(n,i,l){return i=qt(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Ny(n,i,l,h,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function _u(n,i,l,h,p,m,w,T,A){return n=new Ny(n,i,l,T,A),i===1?(i=1,m===!0&&(i|=8)):i=0,m=qt(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lc(m),n}function zy(n,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:h==null?null:""+h,children:n,containerInfo:i,implementation:l}}function Pf(n){if(!n)return hr;n=n._reactInternals;e:{if(Ir(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(_t(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(_t(l))return sp(n,l,i)}return i}function Mf(n,i,l,h,p,m,w,T,A){return n=_u(l,h,!0,n,p,m,w,T,A),n.context=Pf(null),l=n.current,h=yt(),p=yr(l),m=In(h,p),m.callback=i??null,fr(l,m,p),n.current.lanes=p,ms(n,p,h),Tt(n,h),n}function wa(n,i,l,h){var p=i.current,m=yt(),w=yr(p);return l=Pf(l),i.context===null?i.context=l:i.pendingContext=l,i=In(m,w),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=fr(p,i,w),n!==null&&(on(n,p,w,m),Qo(n,p,w)),w}function Sa(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ff(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function ku(n,i){Ff(n,i),(n=n.alternate)&&Ff(n,i)}function By(){return null}var Rf=typeof reportError=="function"?reportError:function(n){console.error(n)};function bu(n){this._internalRoot=n}Ca.prototype.render=bu.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wa(n,i,null,null)},Ca.prototype.unmount=bu.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Xr(function(){wa(null,n,null,null)}),i[Pn]=null}};function Ca(n){this._internalRoot=n}Ca.prototype.unstable_scheduleHydration=function(n){if(n){var i=vd();n={blockedOn:null,target:n,priority:i};for(var l=0;l<or.length&&i!==0&&i<or[l].priority;l++);or.splice(l,0,n),l===0&&wd(n)}};function Tu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Lf(){}function Wy(n,i,l,h,p){if(p){if(typeof h=="function"){var m=h;h=function(){var I=Sa(w);m.call(I)}}var w=Mf(i,h,n,0,null,!1,!1,"",Lf);return n._reactRootContainer=w,n[Pn]=w.current,js(n.nodeType===8?n.parentNode:n),Xr(),w}for(;p=n.lastChild;)n.removeChild(p);if(typeof h=="function"){var T=h;h=function(){var I=Sa(A);T.call(I)}}var A=_u(n,0,!1,null,null,!1,!1,"",Lf);return n._reactRootContainer=A,n[Pn]=A.current,js(n.nodeType===8?n.parentNode:n),Xr(function(){wa(i,A,l,h)}),A}function ka(n,i,l,h,p){var m=l._reactRootContainer;if(m){var w=m;if(typeof p=="function"){var T=p;p=function(){var A=Sa(w);T.call(A)}}wa(i,w,n,p)}else w=Wy(l,i,n,p,h);return Sa(w)}gd=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=gs(i.pendingLanes);l!==0&&(Kl(i,l|1),Tt(i,$e()),(Te&6)===0&&(Ii=$e()+500,dr()))}break;case 13:Xr(function(){var h=Ln(n,1);if(h!==null){var p=yt();on(h,n,1,p)}}),ku(n,1)}},Ql=function(n){if(n.tag===13){var i=Ln(n,134217728);if(i!==null){var l=yt();on(i,n,134217728,l)}ku(n,134217728)}},md=function(n){if(n.tag===13){var i=yr(n),l=Ln(n,i);if(l!==null){var h=yt();on(l,n,i,h)}ku(n,i)}},vd=function(){return Pe},yd=function(n,i){var l=Pe;try{return Pe=n,i()}finally{Pe=l}},Vl=function(n,i,l){switch(i){case"input":if(gn(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==n&&h.form===n.form){var p=Wo(h);if(!p)throw Error(t(90));jn(h),gn(h,p)}}}break;case"textarea":J(n,l);break;case"select":i=l.value,i!=null&&tr(n,!!l.multiple,i,!1)}},nd=vu,rd=Xr;var Uy={usingClientEntryPoint:!1,Events:[Ms,ki,Wo,ed,td,vu]},Gs={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vy={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ad(n),n===null?null:n.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||By,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{Co=ba.inject(Vy),vn=ba}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy,Et.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(i))throw Error(t(200));return zy(n,i,null,l)},Et.createRoot=function(n,i){if(!Tu(n))throw Error(t(299));var l=!1,h="",p=Rf;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=_u(n,1,!1,null,null,l,!1,h,p),n[Pn]=i.current,js(n.nodeType===8?n.parentNode:n),new bu(i)},Et.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ad(i),n=n===null?null:n.stateNode,n},Et.flushSync=function(n){return Xr(n)},Et.hydrate=function(n,i,l){if(!_a(i))throw Error(t(200));return ka(null,n,i,!0,l)},Et.hydrateRoot=function(n,i,l){if(!Tu(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,m="",w=Rf;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),i=Mf(i,null,n,1,l??null,p,!1,m,w),n[Pn]=i.current,js(n),h)for(n=0;n<h.length;n++)l=h[n],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new Ca(i)},Et.render=function(n,i,l){if(!_a(i))throw Error(t(200));return ka(null,n,i,!1,l)},Et.unmountComponentAtNode=function(n){if(!_a(n))throw Error(t(40));return n._reactRootContainer?(Xr(function(){ka(null,null,n,!1,function(){n._reactRootContainer=null,n[Pn]=null})}),!0):!1},Et.unstable_batchedUpdates=vu,Et.unstable_renderSubtreeIntoContainer=function(n,i,l,h){if(!_a(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ka(n,i,l,!1,h)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var Hf;function Qy(){if(Hf)return Ou.exports;Hf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Ou.exports=Ky(),Ou.exports}var Yf;function Jy(){if(Yf)return Ta;Yf=1;var o=Qy();return Ta.createRoot=o.createRoot,Ta.hydrateRoot=o.hydrateRoot,Ta}var Zy=Jy(),E=Al();const ex=El(E);var $s={},Xf;function tx(){if(Xf)return $s;Xf=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.parse=c,$s.serialize=f;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,S){const x=new a,C=v.length;if(C<2)return x;const _=(S==null?void 0:S.decode)||g;let b=0;do{const M=v.indexOf("=",b);if(M===-1)break;const L=v.indexOf(";",b),z=L===-1?C:L;if(M>z){b=v.lastIndexOf(";",M-1)+1;continue}const V=u(v,b,M),$=d(v,M,V),Y=v.slice(V,$);if(x[Y]===void 0){let G=u(v,M+1,z),se=d(v,z,G);const ue=_(v.slice(G,se));x[Y]=ue}b=z+1}while(b<C);return x}function u(v,S,x){do{const C=v.charCodeAt(S);if(C!==32&&C!==9)return S}while(++S<x);return x}function d(v,S,x){for(;S>x;){const C=v.charCodeAt(--S);if(C!==32&&C!==9)return S+1}return x}function f(v,S,x){const C=(x==null?void 0:x.encode)||encodeURIComponent;if(!o.test(v))throw new TypeError(`argument name is invalid: ${v}`);const _=C(S);if(!e.test(_))throw new TypeError(`argument val is invalid: ${S}`);let b=v+"="+_;if(!x)return b;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);b+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);b+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);b+="; Path="+x.path}if(x.expires){if(!y(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);b+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(b+="; HttpOnly"),x.secure&&(b+="; Secure"),x.partitioned&&(b+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return b}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return s.call(v)==="[object Date]"}return $s}tx();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gf="popstate";function nx(o={}){function e(s,a){let{pathname:c="/",search:u="",hash:d=""}=oi(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Zu("",{pathname:c,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof a=="string"?a:ro(a))}function r(s,a){pn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return ix(e,t,r,o)}function Xe(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}function pn(o,e){if(!o){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rx(){return Math.random().toString(36).substring(2,10)}function qf(o,e){return{usr:o.state,key:o.key,idx:e}}function Zu(o,e,t=null,r){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof e=="string"?oi(e):e,state:t,key:e&&e.key||r||rx()}}function ro({pathname:o="/",search:e="",hash:t=""}){return e&&e!=="?"&&(o+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(o+=t.charAt(0)==="#"?t:"#"+t),o}function oi(o){let e={};if(o){let t=o.indexOf("#");t>=0&&(e.hash=o.substring(t),o=o.substring(0,t));let r=o.indexOf("?");r>=0&&(e.search=o.substring(r),o=o.substring(0,r)),o&&(e.pathname=o)}return e}function ix(o,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let _=g(),b=_==null?null:_-f;f=_,d&&d({action:u,location:C.location,delta:b})}function v(_,b){u="PUSH";let M=Zu(C.location,_,b);t&&t(M,_),f=g()+1;let L=qf(M,f),z=C.createHref(M);try{c.pushState(L,"",z)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(z)}a&&d&&d({action:u,location:C.location,delta:1})}function S(_,b){u="REPLACE";let M=Zu(C.location,_,b);t&&t(M,_),f=g();let L=qf(M,f),z=C.createHref(M);c.replaceState(L,"",z),a&&d&&d({action:u,location:C.location,delta:0})}function x(_){let b=s.location.origin!=="null"?s.location.origin:s.location.href,M=typeof _=="string"?_:ro(_);return M=M.replace(/ $/,"%20"),Xe(b,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,b)}let C={get action(){return u},get location(){return o(s,c)},listen(_){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Gf,y),d=_,()=>{s.removeEventListener(Gf,y),d=null}},createHref(_){return e(s,_)},createURL:x,encodeLocation(_){let b=x(_);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:S,go(_){return c.go(_)}};return C}function sm(o,e,t="/"){return sx(o,e,t,!1)}function sx(o,e,t,r){let s=typeof e=="string"?oi(e):e,a=qn(s.pathname||"/",t);if(a==null)return null;let c=om(o);ox(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=vx(a);u=gx(c[d],f,r)}return u}function om(o,e=[],t=[],r=""){let s=(a,c,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Xe(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=Yn([r,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(Xe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),om(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:px(f,a.index),routesMeta:g})};return o.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let d of am(a.path))s(a,c,d)}),e}function am(o){let e=o.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=am(r.join("/")),u=[];return u.push(...c.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...c),u.map(d=>o.startsWith("/")&&d===""?"/":d)}function ox(o){o.sort((e,t)=>e.score!==t.score?t.score-e.score:fx(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ax=/^:[\w-]+$/,lx=3,cx=2,ux=1,hx=10,dx=-2,$f=o=>o==="*";function px(o,e){let t=o.split("/"),r=t.length;return t.some($f)&&(r+=dx),e&&(r+=cx),t.filter(s=>!$f(s)).reduce((s,a)=>s+(ax.test(a)?lx:a===""?ux:hx),r)}function fx(o,e){return o.length===e.length&&o.slice(0,-1).every((r,s)=>r===e[s])?o[o.length-1]-e[e.length-1]:0}function gx(o,e,t=!1){let{routesMeta:r}=o,s={},a="/",c=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=cl({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=cl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Yn([a,y.pathname]),pathnameBase:Sx(Yn([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Yn([a,y.pathnameBase]))}return c}function cl(o,e){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[t,r]=mx(o.path,o.caseSensitive,o.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let x=u[v]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const S=u[v];return y&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:o}}function mx(o,e=!1,t=!0){pn(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let r=[],s="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(r.push({paramName:"*"}),s+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":o!==""&&o!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vx(o){try{return o.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pn(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),o}}function qn(o,e){if(e==="/")return o;if(!o.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=o.charAt(t);return r&&r!=="/"?null:o.slice(t)||"/"}function yx(o,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof o=="string"?oi(o):o;return{pathname:t?t.startsWith("/")?t:xx(t,e):e,search:Cx(r),hash:_x(s)}}function xx(o,e){let t=e.replace(/\/+$/,"").split("/");return o.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pu(o,e,t,r){return`Cannot include a '${o}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wx(o){return o.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function lm(o){let e=wx(o);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function cm(o,e,t,r=!1){let s;typeof o=="string"?s=oi(o):(s={...o},Xe(!s.pathname||!s.pathname.includes("?"),Pu("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Pu("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Pu("#","search","hash",s)));let a=o===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=yx(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Yn=o=>o.join("/").replace(/\/\/+/g,"/"),Sx=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),Cx=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,_x=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function kx(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var um=["POST","PUT","PATCH","DELETE"];new Set(um);var bx=["GET",...um];new Set(bx);var Ji=E.createContext(null);Ji.displayName="DataRouter";var Ol=E.createContext(null);Ol.displayName="DataRouterState";var hm=E.createContext({isTransitioning:!1});hm.displayName="ViewTransition";var Tx=E.createContext(new Map);Tx.displayName="Fetchers";var Ex=E.createContext(null);Ex.displayName="Await";var An=E.createContext(null);An.displayName="Navigation";var uo=E.createContext(null);uo.displayName="Location";var Qn=E.createContext({outlet:null,matches:[],isDataRoute:!1});Qn.displayName="Route";var Ch=E.createContext(null);Ch.displayName="RouteError";function Ax(o,{relative:e}={}){Xe(ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=E.useContext(An),{hash:s,pathname:a,search:c}=po(o,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Yn([t,a])),r.createHref({pathname:u,search:c,hash:s})}function ho(){return E.useContext(uo)!=null}function ai(){return Xe(ho(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(uo).location}var dm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pm(o){E.useContext(An).static||E.useLayoutEffect(o)}function Er(){let{isDataRoute:o}=E.useContext(Qn);return o?Wx():Ox()}function Ox(){Xe(ho(),"useNavigate() may be used only in the context of a <Router> component.");let o=E.useContext(Ji),{basename:e,navigator:t}=E.useContext(An),{matches:r}=E.useContext(Qn),{pathname:s}=ai(),a=JSON.stringify(lm(r)),c=E.useRef(!1);return pm(()=>{c.current=!0}),E.useCallback((d,f={})=>{if(pn(c.current,dm),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=cm(d,JSON.parse(a),s,f.relative==="path");o==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Yn([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,a,s,o])}E.createContext(null);function po(o,{relative:e}={}){let{matches:t}=E.useContext(Qn),{pathname:r}=ai(),s=JSON.stringify(lm(t));return E.useMemo(()=>cm(o,JSON.parse(s),r,e==="path"),[o,s,r,e])}function jx(o,e){return fm(o,e)}function fm(o,e,t,r){var M;Xe(ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=E.useContext(An),{matches:c}=E.useContext(Qn),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let L=y&&y.path||"";gm(f,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=ai(),S;if(e){let L=typeof e=="string"?oi(e):e;Xe(g==="/"||((M=L.pathname)==null?void 0:M.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),S=L}else S=v;let x=S.pathname||"/",C=x;if(g!=="/"){let L=g.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(L.length).join("/")}let _=!a&&t&&t.matches&&t.matches.length>0?t.matches:sm(o,{pathname:C});pn(y||_!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),pn(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Rx(_&&_.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:Yn([g,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:Yn([g,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),c,t,r);return e&&b?E.createElement(uo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},b):b}function Dx(){let o=Bx(),e=kx(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),t=o instanceof Error?o.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",o),c=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:a},"ErrorBoundary")," or"," ",E.createElement("code",{style:a},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:s},t):null,c)}var Px=E.createElement(Dx,null),Mx=class extends E.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,e){return e.location!==o.location||e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:e.error,location:e.location,revalidation:o.revalidation||e.revalidation}}componentDidCatch(o,e){console.error("React Router caught the following error during render",o,e)}render(){return this.state.error!==void 0?E.createElement(Qn.Provider,{value:this.props.routeContext},E.createElement(Ch.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fx({routeContext:o,match:e,children:t}){let r=E.useContext(Ji);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(Qn.Provider,{value:o},t)}function Rx(o,e=[],t=null,r=null){if(o==null){if(!t)return null;if(t.errors)o=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)o=t.matches;else return null}let s=o,a=t==null?void 0:t.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Xe(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(t)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:y}=t,v=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,g)=>{let y,v=!1,S=null,x=null;t&&(y=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||Px,c&&(u<0&&g===0?(gm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):u===g&&(v=!0,x=f.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,g+1)),_=()=>{let b;return y?b=S:v?b=x:f.route.Component?b=E.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,E.createElement(Fx,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?E.createElement(Mx,{location:t.location,revalidation:t.revalidation,component:S,error:y,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}function _h(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lx(o){let e=E.useContext(Ji);return Xe(e,_h(o)),e}function Ix(o){let e=E.useContext(Ol);return Xe(e,_h(o)),e}function Nx(o){let e=E.useContext(Qn);return Xe(e,_h(o)),e}function kh(o){let e=Nx(o),t=e.matches[e.matches.length-1];return Xe(t.route.id,`${o} can only be used on routes that contain a unique "id"`),t.route.id}function zx(){return kh("useRouteId")}function Bx(){var r;let o=E.useContext(Ch),e=Ix("useRouteError"),t=kh("useRouteError");return o!==void 0?o:(r=e.errors)==null?void 0:r[t]}function Wx(){let{router:o}=Lx("useNavigate"),e=kh("useNavigate"),t=E.useRef(!1);return pm(()=>{t.current=!0}),E.useCallback(async(s,a={})=>{pn(t.current,dm),t.current&&(typeof s=="number"?o.navigate(s):await o.navigate(s,{fromRouteId:e,...a}))},[o,e])}var Kf={};function gm(o,e,t){!e&&!Kf[o]&&(Kf[o]=!0,pn(!1,t))}E.memo(Ux);function Ux({routes:o,future:e,state:t}){return fm(o,void 0,t,e)}function Bt(o){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vx({basename:o="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){Xe(!ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=o.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof t=="string"&&(t=oi(t));let{pathname:d="/",search:f="",hash:g="",state:y=null,key:v="default"}=t,S=E.useMemo(()=>{let x=qn(d,c);return x==null?null:{location:{pathname:x,search:f,hash:g,state:y,key:v},navigationType:r}},[c,d,f,g,y,v,r]);return pn(S!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:E.createElement(An.Provider,{value:u},E.createElement(uo.Provider,{children:e,value:S}))}function Hx({children:o,location:e}){return jx(eh(o),e)}function eh(o,e=[]){let t=[];return E.Children.forEach(o,(r,s)=>{if(!E.isValidElement(r))return;let a=[...e,s];if(r.type===E.Fragment){t.push.apply(t,eh(r.props.children,a));return}Xe(r.type===Bt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=eh(r.props.children,a)),t.push(c)}),t}var tl="get",nl="application/x-www-form-urlencoded";function jl(o){return o!=null&&typeof o.tagName=="string"}function Yx(o){return jl(o)&&o.tagName.toLowerCase()==="button"}function Xx(o){return jl(o)&&o.tagName.toLowerCase()==="form"}function Gx(o){return jl(o)&&o.tagName.toLowerCase()==="input"}function qx(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function $x(o,e){return o.button===0&&(!e||e==="_self")&&!qx(o)}var Ea=null;function Kx(){if(Ea===null)try{new FormData(document.createElement("form"),0),Ea=!1}catch{Ea=!0}return Ea}var Qx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mu(o){return o!=null&&!Qx.has(o)?(pn(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nl}"`),null):o}function Jx(o,e){let t,r,s,a,c;if(Xx(o)){let u=o.getAttribute("action");r=u?qn(u,e):null,t=o.getAttribute("method")||tl,s=Mu(o.getAttribute("enctype"))||nl,a=new FormData(o)}else if(Yx(o)||Gx(o)&&(o.type==="submit"||o.type==="image")){let u=o.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=o.getAttribute("formaction")||u.getAttribute("action");if(r=d?qn(d,e):null,t=o.getAttribute("formmethod")||u.getAttribute("method")||tl,s=Mu(o.getAttribute("formenctype"))||Mu(u.getAttribute("enctype"))||nl,a=new FormData(u,o),!Kx()){let{name:f,type:g,value:y}=o;if(g==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,y)}}else{if(jl(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=tl,r=null,s=nl,c=o}return a&&s==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:c}}function bh(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}async function Zx(o,e){if(o.id in e)return e[o.id];try{let t=await import(o.module);return e[o.id]=t,t}catch(t){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ew(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function tw(o,e,t){let r=await Promise.all(o.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await Zx(a,t);return c.links?c.links():[]}return[]}));return sw(r.flat(1).filter(ew).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Qf(o,e,t,r,s,a){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>{var g;return t[f].pathname!==d.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{var y;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(o,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function nw(o,e,{includeHydrateFallback:t}={}){return rw(o.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function rw(o){return[...new Set(o)]}function iw(o){let e={},t=Object.keys(o).sort();for(let r of t)e[r]=o[r];return e}function sw(o,e){let t=new Set;return new Set(e),o.reduce((r,s)=>{let a=JSON.stringify(iw(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function ow(o,e){let t=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return t.pathname==="/"?t.pathname="_root.data":e&&qn(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function mm(){let o=E.useContext(Ji);return bh(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function aw(){let o=E.useContext(Ol);return bh(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Th=E.createContext(void 0);Th.displayName="FrameworkContext";function vm(){let o=E.useContext(Th);return bh(o,"You must render this element inside a <HydratedRouter> element"),o}function lw(o,e){let t=E.useContext(Th),[r,s]=E.useState(!1),[a,c]=E.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=E.useRef(null);E.useEffect(()=>{if(o==="render"&&c(!0),o==="viewport"){let C=b=>{b.forEach(M=>{c(M.isIntersecting)})},_=new IntersectionObserver(C,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[o]),E.useEffect(()=>{if(r){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[r]);let S=()=>{s(!0)},x=()=>{s(!1),c(!1)};return t?o!=="intent"?[a,v,{}]:[a,v,{onFocus:Ks(u,S),onBlur:Ks(d,x),onMouseEnter:Ks(f,S),onMouseLeave:Ks(g,x),onTouchStart:Ks(y,S)}]:[!1,v,{}]}function Ks(o,e){return t=>{o&&o(t),t.defaultPrevented||e(t)}}function cw({page:o,...e}){let{router:t}=mm(),r=E.useMemo(()=>sm(t.routes,o,t.basename),[t.routes,o,t.basename]);return r?E.createElement(hw,{page:o,matches:r,...e}):null}function uw(o){let{manifest:e,routeModules:t}=vm(),[r,s]=E.useState([]);return E.useEffect(()=>{let a=!1;return tw(o,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[o,e,t]),r}function hw({page:o,matches:e,...t}){let r=ai(),{manifest:s,routeModules:a}=vm(),{basename:c}=mm(),{loaderData:u,matches:d}=aw(),f=E.useMemo(()=>Qf(o,e,d,s,r,"data"),[o,e,d,s,r]),g=E.useMemo(()=>Qf(o,e,d,s,r,"assets"),[o,e,d,s,r]),y=E.useMemo(()=>{if(o===r.pathname+r.search+r.hash)return[];let x=new Set,C=!1;if(e.forEach(b=>{var L;let M=s.routes[b.route.id];!M||!M.hasLoader||(!f.some(z=>z.route.id===b.route.id)&&b.route.id in u&&((L=a[b.route.id])!=null&&L.shouldRevalidate)||M.hasClientLoader?C=!0:x.add(b.route.id))}),x.size===0)return[];let _=ow(o,c);return C&&x.size>0&&_.searchParams.set("_routes",e.filter(b=>x.has(b.route.id)).map(b=>b.route.id).join(",")),[_.pathname+_.search]},[c,u,r,s,f,e,o,a]),v=E.useMemo(()=>nw(g,s),[g,s]),S=uw(g);return E.createElement(E.Fragment,null,y.map(x=>E.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),v.map(x=>E.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),S.map(({key:x,link:C})=>E.createElement("link",{key:x,...C})))}function dw(...o){return e=>{o.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ym=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ym&&(window.__reactRouterVersion="7.3.0")}catch{}function pw({basename:o,children:e,window:t}){let r=E.useRef();r.current==null&&(r.current=nx({window:t,v5Compat:!0}));let s=r.current,[a,c]=E.useState({action:s.action,location:s.location}),u=E.useCallback(d=>{E.startTransition(()=>c(d))},[c]);return E.useLayoutEffect(()=>s.listen(u),[s,u]),E.createElement(Vx,{basename:o,children:e,location:a.location,navigationType:a.action,navigator:s})}var xm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qt=E.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},S){let{basename:x}=E.useContext(An),C=typeof f=="string"&&xm.test(f),_,b=!1;if(typeof f=="string"&&C&&(_=f,ym))try{let se=new URL(window.location.href),ue=f.startsWith("//")?new URL(se.protocol+f):new URL(f),_e=qn(ue.pathname,x);ue.origin===se.origin&&_e!=null?f=_e+ue.search+ue.hash:b=!0}catch{pn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=Ax(f,{relative:s}),[L,z,V]=lw(r,v),$=vw(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y});function Y(se){e&&e(se),se.defaultPrevented||$(se)}let G=E.createElement("a",{...v,...V,href:_||M,onClick:b||a?e:Y,ref:dw(S,z),target:d,"data-discover":!C&&t==="render"?"true":void 0});return L&&!C?E.createElement(E.Fragment,null,G,E.createElement(cw,{page:M})):G});Qt.displayName="Link";var fw=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:c,viewTransition:u,children:d,...f},g){let y=po(c,{relative:f.relative}),v=ai(),S=E.useContext(Ol),{navigator:x,basename:C}=E.useContext(An),_=S!=null&&Cw(y)&&u===!0,b=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,M=v.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(M=M.toLowerCase(),L=L?L.toLowerCase():null,b=b.toLowerCase()),L&&C&&(L=qn(L,C)||L);const z=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let V=M===b||!s&&M.startsWith(b)&&M.charAt(z)==="/",$=L!=null&&(L===b||!s&&L.startsWith(b)&&L.charAt(b.length)==="/"),Y={isActive:V,isPending:$,isTransitioning:_},G=V?e:void 0,se;typeof r=="function"?se=r(Y):se=[r,V?"active":null,$?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let ue=typeof a=="function"?a(Y):a;return E.createElement(Qt,{...f,"aria-current":G,className:se,ref:g,style:ue,to:c,viewTransition:u},typeof d=="function"?d(Y):d)});fw.displayName="NavLink";var gw=E.forwardRef(({discover:o="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:c=tl,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},S)=>{let x=ww(),C=Sw(u,{relative:f}),_=c.toLowerCase()==="get"?"get":"post",b=typeof u=="string"&&xm.test(u),M=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let z=L.nativeEvent.submitter,V=(z==null?void 0:z.getAttribute("formmethod"))||c;x(z||L.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:s,state:a,relative:f,preventScrollReset:g,viewTransition:y})};return E.createElement("form",{ref:S,method:_,action:C,onSubmit:r?d:M,...v,"data-discover":!b&&o==="render"?"true":void 0})});gw.displayName="Form";function mw(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wm(o){let e=E.useContext(Ji);return Xe(e,mw(o)),e}function vw(o,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:c}={}){let u=Er(),d=ai(),f=po(o,{relative:a});return E.useCallback(g=>{if($x(g,e)){g.preventDefault();let y=t!==void 0?t:ro(d)===ro(f);u(o,{replace:y,state:r,preventScrollReset:s,relative:a,viewTransition:c})}},[d,u,f,t,r,e,o,s,a,c])}var yw=0,xw=()=>`__${String(++yw)}__`;function ww(){let{router:o}=wm("useSubmit"),{basename:e}=E.useContext(An),t=zx();return E.useCallback(async(r,s={})=>{let{action:a,method:c,encType:u,formData:d,body:f}=Jx(r,e);if(s.navigate===!1){let g=s.fetcherKey||xw();await o.fetch(g,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await o.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[o,e,t])}function Sw(o,{relative:e}={}){let{basename:t}=E.useContext(An),r=E.useContext(Qn);Xe(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...po(o||".",{relative:e})},c=ai();if(o==null){a.search=c.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();a.search=g?`?${g}`:""}}return(!o||o===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Yn([t,a.pathname])),ro(a)}function Cw(o,e={}){let t=E.useContext(hm);Xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wm("useViewTransitionState"),s=po(o,{relative:e.relative});if(!t.isTransitioning)return!1;let a=qn(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=qn(t.nextLocation.pathname,r)||t.nextLocation.pathname;return cl(s.pathname,c)!=null||cl(s.pathname,a)!=null}new TextEncoder;const _w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABPoAAABsCAYAAADzCtzhAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAArKSURBVHgB7d1tiKVlHcfx/+qappJKqYmaJ6FSM0yNTCnMREsTqQhTKxgqg4qM6JVKQhAV0psKjCJIrVCDSi0pDJIwDTXKiB6wZy3Ch9x8TFdd/V/cZ9nZ2TkzZ2Zn9rqu2c8HfszOzH1W9tzfV7fnnDsCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBpdo36XpQ7M3dyblPuvoB26JOW6ZPWaZSa9EdvNEtN+qM3mm3UMblbchtzz+Weyl0Q0AZ90jJ90jqNUpP+6I1mqUl/9EazC1gX9ZSrr7fnjpjz83tzx+UenPWz8srDE2I4meUE/i53V+7pgNWhT1qmT1qnUWrSH73RLDXpj95otmEzuWdiuPo6e4/nThofs0fuvBhOxOxjHsldkdszYHXMhD5p10zok7bNhEapZyb0R19mQrPUMxP6oy8zodlmXRbbnpiyDbn9crvlPhHDyXpuwt4esDr0Scv0Ses0Sk36ozeapSb90RvNLmKXqOdvMTzBc30jhhP07txnY+Erra8PWB36pGX6pHUapSb90RvNUpP+6I1mG3ZY7s7Y+qrqNbl9c3vnbo3JV18376KA1aFPWqZPWqdRatIfvdEsNemP3mi2ceVllTO5z8fw0snNrzA8OBZ+mWVZeW/1qwJWjz5pmT5pnUapSX/0RrPUpD96o9kGlZNQrrSWk3Ngbv2c35e7pzwUk09M+eDFSwNWhz5pmT5pnUapSX/0RrPUpD96o9lGlZNycQy3Q34s95/cT3Mfii3voX5h7saY/8Q8m/tibveAladPWqZPWqdRatIfvdEsNemP3mi2UXvlboj5n/RNuetiuCpb7B/D+6zvj+Gq68O5H+VOy60LWHn6pGX6pHUapSb90RvNUpP+6I1ml2BH/yPLE/uDGE7SJL+M4T3WG8bfHxbDyzE3jFdO3um543J7xHA19ycxXM2F7aFPWqZPWqdRatIfvdEsNemP3mi2YR+Nye+Vnr3PzfPY8h7sr8b877cuV2jPD/9Hge2jT1qmT1qnUWrSH73RLDXpj95otmGXxHQn577cIbMet0/uphhekrnQY44MWD590jJ90jqNUpP+6I1mqUl/9EazS7BL7Fh/nvK4A3Jnz/q+XL09JRa+yloe8+aA5dMnLdMnrdMoNemP3miWmvRHbzS7BDv6Qt8dMdwdZRonjr+WO6KcGtveNnmucgeVRwKWT5+0TJ+0TqPUpD96o1lq0h+90ewS7OgLff/K/X7KY8utk3fNPZV7YorjH4zhgxRhufRJy/RJ6zRKTfqjN5qlJv3RG80uwY6+0FdubXzVlMeW91JvGv/5ytyTCxxbTsz7c/+NpSl3Wjk6d3wMH9DIzk2ftEyftE6j1KQ/eqNZatIfvdFs48rtkO+NxT9E8UtzHvee3N25p2PLByn+P3dt7thY2l1SyrFn5f40/nvK3/nP3MXBzk6ftEyftE6j1KQ/eqNZatIfvdFs4y6M4QmZdGLK79405zHl1Ycvzb0h987cybH8K6evyz06z3+3XOk9NdjZ6ZOW6ZPWaZSa9EdvNEtN+qM3mm1YeVJ/GJNPzvW53XLH5C7P/Tr3sxiukr4ktt/VC/y3Lw92dvqkZfqkdRqlJv3RG81Sk/7ojWYb97LcH2LbJ+fm8e9enXt4nt/fPv79cpUPZbwhJp+ciwL0Sdv0Ses0Sk36ozeapSb90RvNNq68fPIzuV/kbs19JIYPNSxP4KQrpeXWx5+e8u8/IfeV3Ldyn8odMf55+bDFx2L+E//igIE+aZk+aZ1GqUl/9Eaz1KQ/eqPZTt0Yk6+UXjHF48/JPTTnceVOKh+OIYALcr/NPZC7L3dN7uCA6eiTlumT1mmUmvRHbzRLTfqjN5pt2Mdiyx1R5m5mkccem7tnwmPLCTtjfNyese1V10Nzb8wdFCvzHm7WJn3SMn3SOo1Sk/7ojWapSX/0RrMNK1dKL8s9Hlue2PI+6/Lyyd0XeFy5o8p3YvIV3LLbYuu7rJTHnJu7JYY7qDwxPu6vua/lXhmwNX3SMn3SOo1Sk/7ojWapSX/0RrONWxfDE3Ne7vwY3he9yyKPOTzm/+DF2duYO3PWYz4w/tmk48tJOilga/qkZfqkdRqlJv3RG81Sk/7ojWbXmAtj4ROzeZ8cH79v7u4pjv9Vbp+A7aNPWqZPWqdRatIfvdEsNemP3qyZZhe7otmb9bmzpjz2gPHX8t7qaT448ajcKGD59EnL9EnrNEpN+qM3mqUm/dGbNdXsWrvQt3fuFVMeu2789anc36c4ftN4sFz6pGX6pHUapSb90RvNUpP+6M2aanatXegbxfS3Nf7L+Gu5TfKlMbyveiG3xnQnESYZhT5p1yj0SdtGoVHqGYX+6MsoNEs9o9AffRmFZpt1Yky+jfLslbuvHDrrceWK7Dm5P85z7JO578dwi2TYHvqkZfqkdRqlJv3RG81Sk/7ozZpqdn2sLeU2yuumOO7a3L9nfV9OwndzN+WOz52c2y33WAxXX++M4YTC9tAnLdMnrdMoNemP3miWmvRHb9ZUs9P8Q3rymtzPc/stcEy50vq23D0xXOg8JYaTUf78j9xvcnfF8H5rWEn6pGX6pHUapSb90RvNUpP+6I1mG1auwn47Jr/M8sHcaeNjy8n4Qu6JOcc8mrsud3TAytInLdMnrdMoNemP3miWmvRHbzTbuFHuxtzDseUJ/1/u6txxs44rJ2ljTD6RD+ReHrCyRqFP2jUKfdK2UWiUekahP/oyCs1Szyj0R19Godmmlbckn5B7b+5duWNze8455pKYfGI2r7x0c9+AlaVPWqZPWqdRatIfvdEsNemP3mi2E3vlTs99PPfW8ffF+2Lxk/NM7uyA1aNPWqZPWqdRatIfvdEsNemP3mi2UeVuJ1+O4cMQy5P9bO6O3OG5/XP3x+In6IMBq0OftEyftE6j1KQ/eqNZatIfvdFsw14bW07M7JWXUR6YOy+GD0ycdGLKyXxLwOrQJy3TJ63TKDXpj95olpr0R28027Bzcpti2ye9nLBzx8eckbt7wnFfj23fjw0rRZ+0TJ+0TqPUpD96o1lq0h+96brZ9bG23ZZ7OveCOT8v3x85/vOPczfn3pE7MXdIDCfv+tz3YnhvNawGfdIyfdI6jVKT/uiNZqlJf/RGs437Zgwvm5x9dbU84efOc+y6gB1Ln7RMn7ROo9SkP3qjWWrSH73RbMMOyl2Z2xDDiXkyd1Vun4D69EnL9EnrNEpN+qM3mqUm/dGbbpvdWa46lrcoH5U7PvdQDC+x3BjQBn3SMn3SOo1Sk/7ojWapSX/0RrMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACLex5wBIfJ3UmjGAAAAABJRU5ErkJggg==",kw="/nerofilm/assets/Cutselection-DKX518Km.png",bw="/nerofilm/assets/ComputerView-wwVtzhvU.png",Tw="/nerofilm/assets/PhotoSelection-CF4rubsB.png",Ew="/nerofilm/assets/AddFilter-BBf6Q0Gp.png",Aw="/nerofilm/assets/FrameColor-DRoZpDOv.png",Ow="/nerofilm/assets/DownloadShare-BxLEDuUJ.png",jw="/nerofilm/assets/homepic1-fdG370ZF.png",Dw="/nerofilm/assets/homepic2-BSEdrWLe.png",Eh=()=>k.jsxs("header",{className:"header",children:[k.jsx("div",{className:"logo",children:k.jsx(Qt,{to:"/",children:"NeroFilm"})}),k.jsx("nav",{children:k.jsxs("ul",{className:"header-nav",children:[k.jsx("li",{children:k.jsx(Qt,{to:"/frame-layout",children:"Try It"})}),k.jsx("li",{children:k.jsx(Qt,{to:"/about",children:"About"})})]})})]}),Ah=()=>k.jsxs("footer",{className:"footer",children:[k.jsx("div",{className:"logo-small",children:"NeroFilm"}),k.jsxs("div",{className:"footer-right",children:[k.jsx(Qt,{to:"/privacy-policy",className:"privacy-policy-link",children:"Privacy Policy"}),k.jsx("a",{href:"mailto:contact.nerofilm@gmail.com",className:"footer-email",children:"contact.nerofilm@gmail.com"})]})]}),Pw=()=>{const o=Er();return E.useEffect(()=>{window.scrollTo(0,0)},[]),k.jsxs("div",{children:[k.jsx(Eh,{}),k.jsxs("div",{className:"home-container",children:[k.jsxs("div",{className:"home-main-content",children:[k.jsxs("div",{className:"home-left-content",children:[k.jsx("h1",{className:"home-logo-text",children:"NeroFilm"}),k.jsxs("p",{className:"home-slogan",children:["No photobooth nearby? ",k.jsx("br",{})," Your camera is all you need"]}),k.jsx("button",{className:"global-button",onClick:()=>o("/frame-layout"),children:"Try It Now!"})]}),k.jsxs("div",{className:"home-right-content",children:[k.jsx("img",{src:jw,alt:"HomePic1",className:"home-image1"}),k.jsx("img",{src:Dw,alt:"HomePic2",className:"home-image2"})]})]}),k.jsx("div",{className:"home-paw-container",children:k.jsx("img",{src:_w,alt:"Paw Icon",className:"home-paw"})}),k.jsxs("div",{className:"home-sections",children:[k.jsxs("h3",{className:"home-heading-1",children:["Cherish Memories ",k.jsx("br",{})," Relive Moments"]}),k.jsxs("div",{className:"home-section",children:[k.jsx("h3",{className:"home-heading-2",children:"Select Frame Layout"}),k.jsx("img",{src:kw,alt:"Cut Icon",className:"home-large-image"})]}),k.jsxs("div",{className:"home-section",children:[k.jsx("h3",{className:"home-heading-2",children:"Capture the Moment"}),k.jsx("img",{src:bw,alt:"Computer Icon",className:"home-large-image"})]}),k.jsxs("div",{className:"home-section",children:[k.jsx("h3",{className:"home-heading-2",children:"Select Photos"}),k.jsx("img",{src:Tw,alt:"Photo Icon",className:"home-large-image"})]}),k.jsxs("div",{className:"home-section",children:[k.jsx("h3",{className:"home-heading-2",children:"Add Filter"}),k.jsx("img",{src:Ew,alt:"Filter Icon",className:"home-large-image"})]}),k.jsxs("div",{className:"home-section",children:[k.jsx("h3",{className:"home-heading-2",children:"Add Frame Color"}),k.jsx("img",{src:Aw,alt:"Frame Icon",className:"home-large-image"})]}),k.jsxs("div",{className:"home-section",children:[k.jsxs("h3",{className:"home-heading-2",children:["Download & Share ",k.jsx("br",{})," with Friends!"]}),k.jsx("img",{src:Ow,alt:"Download Icon",className:"home-large-image"})]})]}),k.jsx("div",{className:"home-button-container",children:k.jsx("button",{className:"global-button",onClick:()=>o("/frame-layout"),children:"Try It Now!"})})]}),k.jsx(Ah,{})]})};var Fu={exports:{}},Ru,Jf;function Mw(){if(Jf)return Ru;Jf=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ru=o,Ru}var Lu,Zf;function Fw(){if(Zf)return Lu;Zf=1;var o=Mw();function e(){}function t(){}return t.resetWarningCache=e,Lu=function(){function r(c,u,d,f,g,y){if(y!==o){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Lu}var eg;function Rw(){return eg||(eg=1,Fu.exports=Fw()()),Fu.exports}var Lw=Rw();const ae=El(Lw),Sm={layout:"original",images:[],allImages:[],filter:"default",design:"black"},tg={original:{desktop:{height:360,width:120},mobile:{height:300,width:100}},wide:{desktop:{height:360,width:240},mobile:{height:300,width:200}}},Cm=E.createContext(),_m=E.createContext();function Ar(){return E.useContext(Cm)}function Zi(){return E.useContext(_m)}function km({children:o}){const[e,t]=E.useState(Sm);function r(s){t(s)}return k.jsx(Cm.Provider,{value:e,children:k.jsx(_m.Provider,{value:r,children:o})})}km.propTypes={children:ae.node};const Iw=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),k.jsxs("div",{children:[k.jsx(Eh,{}),k.jsx("div",{className:"about-container",children:k.jsx("div",{className:"about-content-wrapper",children:k.jsxs("div",{className:"about-text-section",children:[k.jsx("h1",{className:"about-heading",children:"WHO ARE WE"}),k.jsxs("div",{className:"about-text-container",children:[k.jsx("p",{className:"about-paragraph",children:"Bridging the past and present, we bring the classic photobooth experience into the digital ageno bulky setups, just your device's camera."}),k.jsx("p",{className:"about-paragraph",children:"With photobooths rising in popularity, we're making them more accessible than ever."}),k.jsx("p",{className:"about-paragraph",children:"Whether you're a small business looking to attract customers or someone without a photobooth nearby, our platform lets you capture the fun anytime, anywhere."})]})]})})}),k.jsx(Ah,{})]})),Nw="/nerofilm/assets/default-image-9bdNzeyV.png";function li({layout:o,images:e=[],filter:t,design:r,stickers:s}){const[a,c]=E.useState([]);return E.useEffect(()=>{const u=[];for(let d=0;d<4;d++)u.push(e[d]||Nw);c(u)},[e]),k.jsxs("div",{className:`frame frame-${o} frame-${r}`,style:{backgroundImage:`url(${r})`,backgroundSize:"cover",backgroundPosition:"center"},children:[k.jsx("p",{className:"frame-logo",children:"NeroFilm"}),a.map((u,d)=>k.jsx("div",{className:"img-wrapper",children:k.jsx("img",{className:`img frame-${t}`,src:u,alt:`image ${d+1}`})},d)),s&&k.jsx("img",{className:"frame-stickers",src:s})]})}li.propTypes={images:ae.arrayOf(ae.string).isRequired,filter:ae.string.isRequired,layout:ae.oneOf(["original","wide"]).isRequired,design:ae.string.isRequired,stickers:ae.string};function zw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const bm=E.forwardRef(zw);function Bw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const Ww=E.forwardRef(Bw);function Uw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Vw=E.forwardRef(Uw);function Hw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Yw=E.forwardRef(Hw);function Xw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Gw=E.forwardRef(Xw);function qw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 0 1-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 0 0-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409"}))}const $w=E.forwardRef(qw);function Kw({title:o,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?E.createElement("title",{id:e},o):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Qw=E.forwardRef(Kw),Or=()=>{const o=Er();return k.jsxs("header",{className:"white-back-header",children:[k.jsx("div",{className:"white-logo",children:k.jsx(Qt,{to:"/",children:"NeroFilm"})}),k.jsx("button",{onClick:()=>o(-1),className:"white-back-header-back",children:k.jsx(bm,{className:"white-icon"})})]})};function ci(){E.useEffect(()=>(window.onbeforeunload=()=>!0,()=>{window.onbeforeunload=null}),[])}const Jw="/nerofilm/assets/MouseClick-CHil4oU_.mp3",Oh=()=>{new Audio(Jw).play()};function Zw(){const o=["original","wide"],e=Ar(),t=Zi();ci();const r=E.useRef(!1),s=a=>{Oh(),t({...e,layout:a})};return E.useEffect(()=>{r.current||(t(Sm),r.current=!0)},[t]),k.jsxs("div",{children:[k.jsx(Or,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{className:"options-heading",children:"Select Frame Layout"}),k.jsx("div",{className:"options-r",children:k.jsx("ul",{className:"frame-options",children:o.map((a,c)=>k.jsxs("li",{onClick:()=>s(a),children:[k.jsx("div",{className:e.layout===a?"frame-selected":"frame",children:k.jsx(li,{images:e.images,filter:e.filter,layout:a,design:e.design})}),k.jsx("p",{className:"frame-desc",children:a==="original"?"4 Cut Original":"4 Cut Wide"})]},c))})}),k.jsx(Qt,{className:"btn",to:"/instructions",role:"button",children:"Continue"})]})]})}const e1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23F5F5F5'%20stroke='%23DADADA'/%3e%3c/svg%3e",t1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%236E6E6E'%20stroke='%23DADADA'/%3e%3c/svg%3e",n1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23B5AA92'%20stroke='%23DADADA'/%3e%3c/svg%3e",r1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23FBE9E9'%20stroke='%23DADADA'/%3e%3c/svg%3e";function Dl({options:o,onClick:e,selected:t}){return k.jsx("ul",{className:"options",children:o.map((r,s)=>k.jsxs("li",{className:"option",onClick:()=>{e(r.name),Oh()},children:[k.jsx("img",{className:t===r.name?"option-img-selected option-img":"option-img",src:r.image,alt:r.name}),k.jsx("p",{children:r.name})]},s))})}Dl.propTypes={options:ae.arrayOf(ae.shape({name:ae.string.isRequired,image:ae.string.isRequired})).isRequired,onClick:ae.func.isRequired,selected:ae.string.isRequired};function i1(){ci();const o=Ar(),e=Zi(),t=[{name:"default",image:e1},{name:"bw",image:t1},{name:"vintage",image:n1},{name:"beauty",image:r1}];return k.jsxs("div",{children:[k.jsx(Or,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{className:"options-heading",children:"Add filter"}),k.jsxs("section",{className:"options-r",children:[k.jsx(li,{layout:o.layout,filter:o.filter,images:o.images,design:o.design}),k.jsxs("div",{className:"options-box",children:[k.jsx("p",{className:"options-box-label",children:"Filters"}),k.jsx(Dl,{options:t,onClick:r=>e({...o,filter:r}),selected:o.filter})]})]}),k.jsx(Qt,{className:"btn",to:"/sticker",role:"button",children:"Continue"})]})]})}const s1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%232E2E2E'%20stroke='%23DADADA'/%3e%3c/svg%3e",o1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23FEFEFE'%20stroke='%23DADADA'/%3e%3c/svg%3e",a1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23F6C7D1'%20stroke='%23DADADA'/%3e%3c/svg%3e",l1="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0.5'%20y='0.5'%20width='63'%20height='63'%20rx='7.5'%20fill='%23B4D8EF'%20stroke='%23DADADA'/%3e%3c/svg%3e";function th({images:o,setSelected:e}){const t=async r=>{try{const s=await fetch(`https://nerofilm-backend.vercel.app/api/unsplash/download?photoId=${r}`);console.log("Download triggered for photoId:",r),console.log(s)}catch(s){console.error("Error triggering download:",s)}};return k.jsx("ul",{className:"unsplash-grid",children:o.map(r=>k.jsxs("li",{onClick:()=>{e(r.urls.regular),t(r.id)},children:[k.jsx("img",{className:"unsplash-img",alt:r.alt_description,src:r.urls.regular}),k.jsxs("p",{className:"unsplash-attr",children:["by"," ",k.jsxs("a",{target:"_blank",href:`https://unsplash.com/@${r.user.username}?utm_source=NeroFilm&utm_medium=referral`,children:[r.user.first_name&&r.user.first_name,r.user.last_name&&` ${r.user.last_name}`," "]})]})]},r.id))})}th.propTypes={images:ae.arrayOf(ae.shape({id:ae.string.isRequired,alt_description:ae.string,urls:ae.shape({thumb:ae.string.isRequired}).isRequired,links:ae.shape({html:ae.string.isRequired}).isRequired,user:ae.shape({first_name:ae.string,last_name:ae.string}).isRequired})).isRequired,setSelected:ae.func.isRequired};function Tm({setSelected:o}){const[e,t]=E.useState([]),[r,s]=E.useState([]),[a,c]=E.useState(""),[u,d]=E.useState(!1);E.useEffect(()=>{async function g(){try{const y=await fetch("https://nerofilm-backend.vercel.app/api/unsplash/random");if(!y.ok)throw new Error("Failed to fetch random photos");const v=await y.json();console.log(v),t(v)}catch(y){console.error(y),d(!0)}}g()},[]);async function f(g){g.preventDefault(),console.log("handling search for",a);try{const y=await fetch(`https://nerofilm-backend.vercel.app/api/unsplash/search?query=${a}`);if(!y.ok)throw new Error("Failed to fetch search photos");const v=await y.json();console.log("search photos"),console.log(v),s(v.results)}catch(y){console.error(y),d(!0)}}return k.jsxs("div",{className:"unsplash",children:[k.jsxs("p",{className:"unsplash-link",children:["Photos from ","",k.jsx("a",{target:"_blank",href:"https://unsplash.com/?utm_source=NeroFilm&utm_medium=referral",children:"Unsplash"})]}),k.jsx("form",{onSubmit:f,children:k.jsx("input",{className:"search-bar",type:"text",placeholder:"Search for an image",value:a,onChange:g=>{c(g.target.value)},onSubmit:g=>f(g)})}),u?k.jsxs("div",{className:"unsplash-empty-state",children:[k.jsx("b",{children:"Failed to fetch photos from Unsplash"}),k.jsx("p",{children:"Please try again later"})]}):r.length>0?k.jsx("div",{children:k.jsx(th,{images:r,setSelected:o})}):k.jsx("div",{children:e.length>0?k.jsx(th,{images:e,setSelected:o}):k.jsx("div",{className:"unsplash-empty-state",children:k.jsx("p",{children:"Loading photos..."})})})]})}Tm.propTypes={setSelected:ae.func.isRequired};const c1="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20457.19%20104.19'%3e%3cpath%20d='M59.88%2038.66h27.53v48.75H0V38.66h27.53v24.37h32.35zm93%2025c0%208.25-5.45%2013.13-12.9%2013.13-7.28%200-12.81-4.88-12.81-13.13V24.41h-12.22v39.13c0%2015.45%2011%2025.21%2025.06%2025.21s25.15-9.76%2025.15-25.21V24.41h-12.25zm43.7-21.13c-4.7%200-9.94%202-12.6%206.57v-5.41h-11.45v43.64h11.81v-25.1c0-5%203-9%208.16-9%205.68%200%208.08%203.82%208.08%208.7v25.4h11.8V59.82c.03-9.59-4.94-17.31-15.77-17.31zm43.31%2018.37l-6.48-1.33c-2.47-.5-4-1.77-4-3.9%200-2.49%202.23-4.35%205.33-4.35%204.36%200%206.09%202.25%206.51%204.88h10.18c-.08-6-4.83-13.84-16.51-13.84-9.41%200-16.33%206.47-16.33%2014.28%200%206.13%203.81%2011.19%2012.24%2013l6.05%201.33c3.37.71%204.7%202.31%204.7%204.26%200%202.31-2.14%204.35-6%204.35-4.71%200-7.27-2.68-7.87-5.79h-10.5c.59%206.53%205.32%2014.84%2018.46%2014.84%2011.45%200%2017.22-7.28%2017.22-14.38-.01-6.36-4.36-11.59-12.97-13.37zm63.19%204.53c0%2013.22-8.26%2023-20.59%2023-6%200-10.48-2.4-12.61-5.33v21.13h-11.8V43.67h11.45v5.41c2-3.37%206.83-6.39%2013.4-6.39%2012.81%200%2020.18%209.76%2020.18%2022.72zm-11.63.09c0-7.72-4.79-12.25-10.83-12.25s-10.91%204.53-10.91%2012.25%204.88%2012.33%2010.91%2012.33%2010.91-4.54%2010.91-12.35zm68-21.83h11.45v43.64h-11.8v-5.31c-2%203.5-6.57%206.38-12.61%206.38-12.33%200-20.59-9.77-20.59-23%200-13%207.37-22.72%2020.15-22.72%206.57%200%2011.32%203.05%2013.4%206.39zm-.18%2021.83c0-7.72-4.88-12.25-10.91-12.25s-10.83%204.51-10.83%2012.23%204.79%2012.33%2010.83%2012.33%2010.92-4.6%2010.92-12.33zm-50.66%2021.81h11.8V24.41h-11.8zm132.35-44.81c-4.17%200-9%201.41-11.81%204.78V24.41h-11.8v62.91h11.8V61.68c.27-4.8%203.2-8.52%208.17-8.52%205.68%200%208.08%203.83%208.07%208.71v25.47h11.81V59.82c-.01-9.59-5.15-17.3-16.24-17.3zm-42%2018.36l-6.43-1.33c-2.47-.5-4-1.77-4-3.9%200-2.49%202.22-4.35%205.33-4.35%204.35%200%206.08%202.25%206.5%204.88h10.17c-.08-6-4.83-13.84-16.51-13.84-9.41%200-16.33%206.47-16.33%2014.28%200%206.13%203.82%2011.19%2012.25%2013l6%201.33c3.37.71%204.7%202.31%204.7%204.26%200%202.31-2.14%204.35-6%204.35-4.71%200-7.27-2.68-7.87-5.79h-10.49c.58%206.53%205.31%2014.84%2018.45%2014.84%2011.45%200%2017.22-7.28%2017.22-14.38%200-6.34-4.35-11.57-12.95-13.35zM59.88%200H27.53v24.37h32.35z'/%3e%3c/svg%3e";function u1(){ci();const[o,e]=E.useState(""),[t,r]=E.useState("gallery"),s=Ar(),a=Zi(),c=[{name:"black",image:s1},{name:"white",image:o1},{name:"pink",image:a1},{name:"blue",image:l1}];return E.useEffect(()=>{o&&o!==s.design&&(console.log("updating frame"),a(u=>({...u,design:o})))},[a,s.design,o]),k.jsxs("div",{children:[k.jsx(Or,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{className:"options-heading",children:"Choose frame"}),k.jsxs("section",{className:"options-r",children:[k.jsx(li,{images:s.images,filter:s.filter,layout:s.layout,design:s.design}),k.jsxs("div",{className:"options-box",children:[k.jsxs("ul",{className:"tabs",children:[k.jsx("li",{className:t=="gallery"&&"selected-tab",onClick:()=>{r("gallery")},children:"Gallery"}),k.jsx("li",{className:t=="unsplash"&&"selected-tab",onClick:()=>{r("unsplash")},children:k.jsx("img",{className:"unsplash-logo",src:c1,alt:"Unsplash"})})]}),t=="gallery"?k.jsx(Dl,{options:c,onClick:u=>e(u),selected:s.design}):k.jsx(Tm,{setSelected:e})]})]}),k.jsx(Qt,{className:"btn",to:"/filter",role:"btn",children:"Continue"})]})]})}function h1(o,e){if(o.match(/^[a-z]+:\/\//i))return o;if(o.match(/^\/\//))return window.location.protocol+o;if(o.match(/^[a-z]+:/i))return o;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),s=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(s),e&&(r.href=e),s.href=o,s.href}const d1=(()=>{let o=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(o+=1,`u${e()}${o}`)})();function kr(o){const e=[];for(let t=0,r=o.length;t<r;t++)e.push(o[t]);return e}let zi=null;function Em(o={}){return zi||(o.includeStyleProperties?(zi=o.includeStyleProperties,zi):(zi=kr(window.getComputedStyle(document.documentElement)),zi))}function ul(o,e){const r=(o.ownerDocument.defaultView||window).getComputedStyle(o).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function p1(o){const e=ul(o,"border-left-width"),t=ul(o,"border-right-width");return o.clientWidth+e+t}function f1(o){const e=ul(o,"border-top-width"),t=ul(o,"border-bottom-width");return o.clientHeight+e+t}function Am(o,e={}){const t=e.width||p1(o),r=e.height||f1(o);return{width:t,height:r}}function g1(){let o,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(o=parseInt(t,10),Number.isNaN(o)&&(o=1)),o||window.devicePixelRatio||1}const Nt=16384;function m1(o){(o.width>Nt||o.height>Nt)&&(o.width>Nt&&o.height>Nt?o.width>o.height?(o.height*=Nt/o.width,o.width=Nt):(o.width*=Nt/o.height,o.height=Nt):o.width>Nt?(o.height*=Nt/o.width,o.width=Nt):(o.width*=Nt/o.height,o.height=Nt))}function hl(o){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=o})}async function v1(o){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(o)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function y1(o,e,t){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${t}`),s.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(o),v1(s)}const Ot=(o,e)=>{if(o instanceof e)return!0;const t=Object.getPrototypeOf(o);return t===null?!1:t.constructor.name===e.name||Ot(t,e)};function x1(o){const e=o.getPropertyValue("content");return`${o.cssText} content: '${e.replace(/'|"/g,"")}';`}function w1(o,e){return Em(e).map(t=>{const r=o.getPropertyValue(t),s=o.getPropertyPriority(t);return`${t}: ${r}${s?" !important":""};`}).join(" ")}function S1(o,e,t,r){const s=`.${o}:${e}`,a=t.cssText?x1(t):w1(t,r);return document.createTextNode(`${s}{${a}}`)}function ng(o,e,t,r){const s=window.getComputedStyle(o,t),a=s.getPropertyValue("content");if(a===""||a==="none")return;const c=d1();try{e.className=`${e.className} ${c}`}catch{return}const u=document.createElement("style");u.appendChild(S1(c,t,s,r)),e.appendChild(u)}function C1(o,e,t){ng(o,e,":before",t),ng(o,e,":after",t)}const rg="application/font-woff",ig="image/jpeg",_1={woff:rg,woff2:rg,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ig,jpeg:ig,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function k1(o){const e=/\.([^./]*?)$/g.exec(o);return e?e[1]:""}function jh(o){const e=k1(o).toLowerCase();return _1[e]||""}function b1(o){return o.split(/,/)[1]}function nh(o){return o.search(/^(data:)/)!==-1}function T1(o,e){return`data:${e};base64,${o}`}async function Om(o,e,t){const r=await fetch(o,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,c)=>{const u=new FileReader;u.onerror=c,u.onloadend=()=>{try{a(t({res:r,result:u.result}))}catch(d){c(d)}},u.readAsDataURL(s)})}const Iu={};function E1(o,e,t){let r=o.replace(/\?.*/,"");return t&&(r=o),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Dh(o,e,t){const r=E1(o,e,t.includeQueryParams);if(Iu[r]!=null)return Iu[r];t.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+new Date().getTime());let s;try{const a=await Om(o,t.fetchRequestInit,({res:c,result:u})=>(e||(e=c.headers.get("Content-Type")||""),b1(u)));s=T1(a,e)}catch(a){s=t.imagePlaceholder||"";let c=`Failed to fetch resource: ${o}`;a&&(c=typeof a=="string"?a:a.message),c&&console.warn(c)}return Iu[r]=s,s}async function A1(o){const e=o.toDataURL();return e==="data:,"?o.cloneNode(!1):hl(e)}async function O1(o,e){if(o.currentSrc){const a=document.createElement("canvas"),c=a.getContext("2d");a.width=o.clientWidth,a.height=o.clientHeight,c==null||c.drawImage(o,0,0,a.width,a.height);const u=a.toDataURL();return hl(u)}const t=o.poster,r=jh(t),s=await Dh(t,r,e);return hl(s)}async function j1(o,e){var t;try{if(!((t=o==null?void 0:o.contentDocument)===null||t===void 0)&&t.body)return await Pl(o.contentDocument.body,e,!0)}catch{}return o.cloneNode(!1)}async function D1(o,e){return Ot(o,HTMLCanvasElement)?A1(o):Ot(o,HTMLVideoElement)?O1(o,e):Ot(o,HTMLIFrameElement)?j1(o,e):o.cloneNode(jm(o))}const P1=o=>o.tagName!=null&&o.tagName.toUpperCase()==="SLOT",jm=o=>o.tagName!=null&&o.tagName.toUpperCase()==="SVG";async function M1(o,e,t){var r,s;if(jm(e))return e;let a=[];return P1(o)&&o.assignedNodes?a=kr(o.assignedNodes()):Ot(o,HTMLIFrameElement)&&(!((r=o.contentDocument)===null||r===void 0)&&r.body)?a=kr(o.contentDocument.body.childNodes):a=kr(((s=o.shadowRoot)!==null&&s!==void 0?s:o).childNodes),a.length===0||Ot(o,HTMLVideoElement)||await a.reduce((c,u)=>c.then(()=>Pl(u,t)).then(d=>{d&&e.appendChild(d)}),Promise.resolve()),e}function F1(o,e,t){const r=e.style;if(!r)return;const s=window.getComputedStyle(o);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):Em(t).forEach(a=>{let c=s.getPropertyValue(a);a==="font-size"&&c.endsWith("px")&&(c=`${Math.floor(parseFloat(c.substring(0,c.length-2)))-.1}px`),Ot(o,HTMLIFrameElement)&&a==="display"&&c==="inline"&&(c="block"),a==="d"&&e.getAttribute("d")&&(c=`path(${e.getAttribute("d")})`),r.setProperty(a,c,s.getPropertyPriority(a))})}function R1(o,e){Ot(o,HTMLTextAreaElement)&&(e.innerHTML=o.value),Ot(o,HTMLInputElement)&&e.setAttribute("value",o.value)}function L1(o,e){if(Ot(o,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(s=>o.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function I1(o,e,t){return Ot(e,Element)&&(F1(o,e,t),C1(o,e,t),R1(o,e),L1(o,e)),e}async function N1(o,e){const t=o.querySelectorAll?o.querySelectorAll("use"):[];if(t.length===0)return o;const r={};for(let a=0;a<t.length;a++){const u=t[a].getAttribute("xlink:href");if(u){const d=o.querySelector(u),f=document.querySelector(u);!d&&f&&!r[u]&&(r[u]=await Pl(f,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",c=document.createElementNS(a,"svg");c.setAttribute("xmlns",a),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const u=document.createElementNS(a,"defs");c.appendChild(u);for(let d=0;d<s.length;d++)u.appendChild(s[d]);o.appendChild(c)}return o}async function Pl(o,e,t){return!t&&e.filter&&!e.filter(o)?null:Promise.resolve(o).then(r=>D1(r,e)).then(r=>M1(o,r,e)).then(r=>I1(o,r,e)).then(r=>N1(r,e))}const Dm=/url\((['"]?)([^'"]+?)\1\)/g,z1=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,B1=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function W1(o){const e=o.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function U1(o){const e=[];return o.replace(Dm,(t,r,s)=>(e.push(s),t)),e.filter(t=>!nh(t))}async function V1(o,e,t,r,s){try{const a=t?h1(e,t):e,c=jh(e);let u;return s||(u=await Dh(a,c,r)),o.replace(W1(e),`$1${u}$3`)}catch{}return o}function H1(o,{preferredFontFormat:e}){return e?o.replace(B1,t=>{for(;;){const[r,,s]=z1.exec(t)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):o}function Pm(o){return o.search(Dm)!==-1}async function Mm(o,e,t){if(!Pm(o))return o;const r=H1(o,t);return U1(r).reduce((a,c)=>a.then(u=>V1(u,c,e,t)),Promise.resolve(r))}async function Bi(o,e,t){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(o);if(s){const a=await Mm(s,null,t);return e.style.setProperty(o,a,e.style.getPropertyPriority(o)),!0}return!1}async function Y1(o,e){await Bi("background",o,e)||await Bi("background-image",o,e),await Bi("mask",o,e)||await Bi("-webkit-mask",o,e)||await Bi("mask-image",o,e)||await Bi("-webkit-mask-image",o,e)}async function X1(o,e){const t=Ot(o,HTMLImageElement);if(!(t&&!nh(o.src))&&!(Ot(o,SVGImageElement)&&!nh(o.href.baseVal)))return;const r=t?o.src:o.href.baseVal,s=await Dh(r,jh(r),e);await new Promise((a,c)=>{o.onload=a,o.onerror=e.onImageErrorHandler?(...d)=>{try{a(e.onImageErrorHandler(...d))}catch(f){c(f)}}:c;const u=o;u.decode&&(u.decode=a),u.loading==="lazy"&&(u.loading="eager"),t?(o.srcset="",o.src=s):o.href.baseVal=s})}async function G1(o,e){const r=kr(o.childNodes).map(s=>Fm(s,e));await Promise.all(r).then(()=>o)}async function Fm(o,e){Ot(o,Element)&&(await Y1(o,e),await X1(o,e),await G1(o,e))}function q1(o,e){const{style:t}=o;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{t[s]=r[s]}),o}const sg={};async function og(o){let e=sg[o];if(e!=null)return e;const r=await(await fetch(o)).text();return e={url:o,cssText:r},sg[o]=e,e}async function ag(o,e){let t=o.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async c=>{let u=c.replace(r,"$1");return u.startsWith("https://")||(u=new URL(u,o.url).href),Om(u,e.fetchRequestInit,({result:d})=>(t=t.replace(c,`url(${d})`),[c,d]))});return Promise.all(a).then(()=>t)}function lg(o){if(o==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=o.replace(t,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=s.exec(r);if(d===null)break;e.push(d[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,c="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(c,"gi");for(;;){let d=a.exec(r);if(d===null){if(d=u.exec(r),d===null)break;a.lastIndex=u.lastIndex}else u.lastIndex=a.lastIndex;e.push(d[0])}return e}async function $1(o,e){const t=[],r=[];return o.forEach(s=>{if("cssRules"in s)try{kr(s.cssRules||[]).forEach((a,c)=>{if(a.type===CSSRule.IMPORT_RULE){let u=c+1;const d=a.href,f=og(d).then(g=>ag(g,e)).then(g=>lg(g).forEach(y=>{try{s.insertRule(y,y.startsWith("@import")?u+=1:s.cssRules.length)}catch(v){console.error("Error inserting rule from remote css",{rule:y,error:v})}})).catch(g=>{console.error("Error loading remote css",g.toString())});r.push(f)}})}catch(a){const c=o.find(u=>u.href==null)||document.styleSheets[0];s.href!=null&&r.push(og(s.href).then(u=>ag(u,e)).then(u=>lg(u).forEach(d=>{c.insertRule(d,c.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(o.forEach(s=>{if("cssRules"in s)try{kr(s.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),t))}function K1(o){return o.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Pm(e.style.getPropertyValue("src")))}async function Q1(o,e){if(o.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=kr(o.ownerDocument.styleSheets),r=await $1(t,e);return K1(r)}function Rm(o){return o.trim().replace(/["']/g,"")}function J1(o){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(Rm(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(o),e}async function Z1(o,e){const t=await Q1(o,e),r=J1(o);return(await Promise.all(t.filter(a=>r.has(Rm(a.style.fontFamily))).map(a=>{const c=a.parentStyleSheet?a.parentStyleSheet.href:null;return Mm(a.cssText,c,e)}))).join(`
`)}async function e2(o,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Z1(o,e);if(t){const r=document.createElement("style"),s=document.createTextNode(t);r.appendChild(s),o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r)}}async function t2(o,e={}){const{width:t,height:r}=Am(o,e),s=await Pl(o,e,!0);return await e2(s,e),await Fm(s,e),q1(s,e),await y1(s,t,r)}async function n2(o,e={}){const{width:t,height:r}=Am(o,e),s=await t2(o,e),a=await hl(s),c=document.createElement("canvas"),u=c.getContext("2d"),d=e.pixelRatio||g1(),f=e.canvasWidth||t,g=e.canvasHeight||r;return c.width=f*d,c.height=g*d,e.skipAutoScale||m1(c),c.style.width=`${f}`,c.style.height=`${g}`,e.backgroundColor&&(u.fillStyle=e.backgroundColor,u.fillRect(0,0,c.width,c.height)),u.drawImage(a,0,0,c.width,c.height),c}async function cg(o,e={}){return(await n2(o,e)).toDataURL()}const r2="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63.5%2032C63.5%2049.397%2049.397%2063.5%2032%2063.5C14.603%2063.5%200.5%2049.397%200.5%2032C0.5%2014.603%2014.603%200.5%2032%200.5C49.397%200.5%2063.5%2014.603%2063.5%2032Z'%20fill='%23FEFEFE'%20stroke='%23DADADA'/%3e%3cpath%20d='M26%2029V22H38V29'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26%2038H24C23.4696%2038%2022.9609%2037.7893%2022.5858%2037.4142C22.2107%2037.0391%2022%2036.5304%2022%2036V31C22%2030.4696%2022.2107%2029.9609%2022.5858%2029.5858C22.9609%2029.2107%2023.4696%2029%2024%2029H40C40.5304%2029%2041.0391%2029.2107%2041.4142%2029.5858C41.7893%2029.9609%2042%2030.4696%2042%2031V36C42%2036.5304%2041.7893%2037.0391%2041.4142%2037.4142C41.0391%2037.7893%2040.5304%2038%2040%2038H38'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M38%2034H26V42H38V34Z'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",i2="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Circle%20background%20--%3e%3ccircle%20cx='32'%20cy='32'%20r='31.5'%20fill='%23FEFEFE'%20stroke='%23DADADA'%20/%3e%3c!--%20Smaller,%20centered%20Share%20icon%20--%3e%3ccircle%20cx='42'%20cy='22'%20r='3'%20stroke='%236E6E6E'%20stroke-width='2'%20fill='none'/%3e%3ccircle%20cx='22'%20cy='32'%20r='3'%20stroke='%236E6E6E'%20stroke-width='2'%20fill='none'/%3e%3ccircle%20cx='42'%20cy='42'%20r='3'%20stroke='%236E6E6E'%20stroke-width='2'%20fill='none'/%3e%3cpath%20d='M24.5%2030.5L39.5%2023.5'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cpath%20d='M24.5%2033.5L39.5%2040.5'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3c/svg%3e",Lm=async(o,e,t)=>{if(!o||o.length===0){alert("No photos found.");return}t(!0);const r=e.current,s=r.getContext("2d"),a=new Image;a.src=o[0],a.onload=async()=>{r.width=a.width,r.height=a.height;const c=r.captureStream(),u=new MediaRecorder(c,{mimeType:"video/webm"}),d=[];u.ondataavailable=g=>d.push(g.data),u.onstop=()=>{const g=new Blob(d,{type:"video/webm"}),y=URL.createObjectURL(g),v=document.createElement("a");v.href=y,v.download="timelapse.webm",v.click(),URL.revokeObjectURL(y),t(!1)},u.start();const f=o.slice(0,16);for(let g=0;g<f.length;g++){const y=new Image;y.src=f[g],await new Promise(v=>{y.onload=()=>{s.clearRect(0,0,r.width,r.height),s.drawImage(y,0,0,r.width,r.height),setTimeout(v,300)}})}u.stop()}};function s2(){ci();const o=Ar(),e=E.useRef(null),t=E.useRef(null),[r,s]=E.useState(""),[a,c]=E.useState(!1),u=[{name:"share",image:i2},{name:"print",image:r2}];E.useEffect(()=>{cg(e.current,{cacheBust:!1,width:e.current.offsetWidth*4,height:e.current.offsetHeight*4,style:{transform:"scale(4)",transformOrigin:"top left"}}).then(v=>{s(v)})},[]);const d=()=>{const v=document.createElement("a");v.download="nerofilm.png",v.href=r,v.click()},f=()=>{const v=document.createElement("iframe");v.style.position="fixed",v.style.right="0",v.style.bottom="0",v.style.width="0",v.style.height="0",v.style.border="0",document.body.appendChild(v);const S=v.contentWindow.document;S.open(),S.write(`
      <html>
        <head>
          <title>Print Image</title>
          <style>
            @page {
              size: letter;
              margin: 0;
            }
            body {
              margin: 0;
              padding: 0;
            }
            img {
              width: ${o.layout==="original"?"2":"4"}in;
              height: 6in;
              position: absolute;
              top: 0;
              left: 0;
            }
          </style>
        </head>
        <body>
          <img id="printImage" src="${r}" alt="Printable" />
          <script>
            const image = document.getElementById('printImage');
            image.onload = function () {
              setTimeout(() => {
                window.focus();
                window.print();
              }, 250);
            };
          <\/script>
        </body>
      </html>
    `),S.close()},g=async()=>{if(e.current)try{const v=await cg(e.current,{cacheBust:!0,width:e.current.offsetWidth*4,height:e.current.offsetHeight*4,style:{transform:"scale(4)",transformOrigin:"top left"}}),x=await(await fetch(v)).blob(),_={title:"NeroFilm",files:[new File([x],"nerofilm.png",{type:x.type})],text:"Check out my photo strip!  Take your own at https://nerofilm.co "};if(navigator.canShare&&navigator.canShare(_))await navigator.share(_);else{const b=document.createElement("a");b.download="nerofilm.png",b.href=v,b.click(),alert("Sharing not supported  image downloaded instead.")}}catch(v){console.error("Sharing failed:",v),alert("Something went wrong. Please try again.")}},y=v=>{switch(v){case"share":g();break;case"print":f();break}};return k.jsxs("div",{children:[k.jsx(Or,{}),k.jsx("canvas",{ref:t,style:{display:"none"}})," ",k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{className:"options-heading",children:"Download & share"}),k.jsxs("section",{className:"options-r",children:[k.jsx("div",{ref:e,style:{display:"inline-block"},children:k.jsx(li,{images:o.images,filter:o.filter,layout:o.layout,design:o.design,stickers:o.stickers})}),k.jsx(Dl,{options:u,onClick:v=>y(v),selected:o.filter})]}),k.jsxs("section",{className:"btns",children:[k.jsx("button",{className:"btn",onClick:d,children:"Download Image"}),k.jsx("button",{className:"btn",onClick:()=>Lm(o.allImages||o.images,t,c),disabled:a,children:a?"Generating Timelapse...":"Download Timelapse"}),k.jsx("a",{href:"https://buy.stripe.com/test_dR6eVV79J8X33pS3cc?client_reference_id=test",className:"btn btn-secondary",target:"_blank",rel:"noreferrer",children:"Buy photo strip"})]})]})]})}var rl={exports:{}},o2=rl.exports,ug;function a2(){return ug||(ug=1,function(o,e){(function(r,s){o.exports=s(Al())})(o2,function(t){return function(r){var s={};function a(c){if(s[c])return s[c].exports;var u=s[c]={i:c,l:!1,exports:{}};return r[c].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=r,a.c=s,a.d=function(c,u,d){a.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:d})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,u){if(u&1&&(c=a(c)),u&8||u&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),u&2&&typeof c!="string")for(var f in c)a.d(d,f,(function(g){return c[g]}).bind(null,f));return d},a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,"a",u),u},a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},a.p="",a(a.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,s,a){a.r(s);var c=a("react"),u=function(){var v=function(S,x){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,_){C.__proto__=_}||function(C,_){for(var b in _)_.hasOwnProperty(b)&&(C[b]=_[b])},v(S,x)};return function(S,x){v(S,x);function C(){this.constructor=S}S.prototype=x===null?Object.create(x):(C.prototype=x.prototype,new C)}}(),d=function(){return d=Object.assign||function(v){for(var S,x=1,C=arguments.length;x<C;x++){S=arguments[x];for(var _ in S)Object.prototype.hasOwnProperty.call(S,_)&&(v[_]=S[_])}return v},d.apply(this,arguments)},f=function(v,S){var x={};for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&S.indexOf(C)<0&&(x[C]=v[C]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,C=Object.getOwnPropertySymbols(v);_<C.length;_++)S.indexOf(C[_])<0&&Object.prototype.propertyIsEnumerable.call(v,C[_])&&(x[C[_]]=v[C[_]]);return x};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var x=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return x?new Promise(function(C,_){x.call(navigator,S,C,_)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function g(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var y=function(v){u(S,v);function S(x){var C=v.call(this,x)||this;return C.canvas=null,C.ctx=null,C.requestUserMediaId=0,C.unmounted=!1,C.state={hasUserMedia:!1},C}return S.prototype.componentDidMount=function(){var x=this,C=x.state,_=x.props;if(this.unmounted=!1,!g()){_.onUserMediaError("getUserMedia not supported");return}C.hasUserMedia||this.requestUserMedia(),_.children&&typeof _.children!="function"&&console.warn("children must be a function")},S.prototype.componentDidUpdate=function(x){var C=this.props;if(!g()){C.onUserMediaError("getUserMedia not supported");return}var _=JSON.stringify(x.audioConstraints)!==JSON.stringify(C.audioConstraints),b=JSON.stringify(x.videoConstraints)!==JSON.stringify(C.videoConstraints),M=x.minScreenshotWidth!==C.minScreenshotWidth,L=x.minScreenshotHeight!==C.minScreenshotHeight;(b||M||L)&&(this.canvas=null,this.ctx=null),(_||b)&&(this.stopAndCleanup(),this.requestUserMedia())},S.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},S.stopMediaStream=function(x){x&&(x.getVideoTracks&&x.getAudioTracks?(x.getVideoTracks().map(function(C){x.removeTrack(C),C.stop()}),x.getAudioTracks().map(function(C){x.removeTrack(C),C.stop()})):x.stop())},S.prototype.stopAndCleanup=function(){var x=this.state;x.hasUserMedia&&(S.stopMediaStream(this.stream),x.src&&window.URL.revokeObjectURL(x.src))},S.prototype.getScreenshot=function(x){var C=this,_=C.state,b=C.props;if(!_.hasUserMedia)return null;var M=this.getCanvas(x);return M&&M.toDataURL(b.screenshotFormat,b.screenshotQuality)},S.prototype.getCanvas=function(x){var C=this,_=C.state,b=C.props;if(!this.video||!_.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var M=this.video.videoWidth,L=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var z=M/L;M=b.minScreenshotWidth||this.video.clientWidth,L=M/z,b.minScreenshotHeight&&L<b.minScreenshotHeight&&(L=b.minScreenshotHeight,M=L*z)}this.canvas=document.createElement("canvas"),this.canvas.width=(x==null?void 0:x.width)||M,this.canvas.height=(x==null?void 0:x.height)||L,this.ctx=this.canvas.getContext("2d")}var V=this,$=V.ctx,Y=V.canvas;return $&&Y&&(Y.width=(x==null?void 0:x.width)||Y.width,Y.height=(x==null?void 0:x.height)||Y.height,b.mirrored&&($.translate(Y.width,0),$.scale(-1,1)),$.imageSmoothingEnabled=b.imageSmoothing,$.drawImage(this.video,0,0,(x==null?void 0:x.width)||Y.width,(x==null?void 0:x.height)||Y.height),b.mirrored&&($.scale(-1,1),$.translate(-Y.width,0))),Y},S.prototype.requestUserMedia=function(){var x=this,C=this.props,_=function(L,z){var V={video:typeof z<"u"?z:!0};C.audio&&(V.audio=typeof L<"u"?L:!0),x.requestUserMediaId++;var $=x.requestUserMediaId;navigator.mediaDevices.getUserMedia(V).then(function(Y){x.unmounted||$!==x.requestUserMediaId?S.stopMediaStream(Y):x.handleUserMedia(null,Y)}).catch(function(Y){x.handleUserMedia(Y)})};if("mediaDevices"in navigator)_(C.audioConstraints,C.videoConstraints);else{var b=function(L){return{optional:[{sourceId:L}]}},M=function(L){var z=L.deviceId;return typeof z=="string"?z:Array.isArray(z)&&z.length>0?z[0]:typeof z=="object"&&z.ideal?z.ideal:null};MediaStreamTrack.getSources(function(L){var z=null,V=null;L.forEach(function(G){G.kind==="audio"?z=G.id:G.kind==="video"&&(V=G.id)});var $=M(C.audioConstraints);$&&(z=$);var Y=M(C.videoConstraints);Y&&(V=Y),_(b(z),b(V))})}},S.prototype.handleUserMedia=function(x,C){var _=this.props;if(x||!C){this.setState({hasUserMedia:!1}),_.onUserMediaError(x);return}this.stream=C;try{this.video&&(this.video.srcObject=C),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(C)})}_.onUserMedia(C)},S.prototype.render=function(){var x=this,C=this,_=C.state,b=C.props,M=b.audio;b.forceScreenshotSourceSize;var L=b.disablePictureInPicture;b.onUserMedia,b.onUserMediaError,b.screenshotFormat,b.screenshotQuality,b.minScreenshotWidth,b.minScreenshotHeight,b.audioConstraints,b.videoConstraints,b.imageSmoothing;var z=b.mirrored,V=b.style,$=V===void 0?{}:V,Y=b.children,G=f(b,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),se=z?d(d({},$),{transform:($.transform||"")+" scaleX(-1)"}):$,ue={getScreenshot:this.getScreenshot.bind(this)};return c.createElement(c.Fragment,null,c.createElement("video",d({autoPlay:!0,disablePictureInPicture:L,src:_.src,muted:!M,playsInline:!0,ref:function(_e){x.video=_e},style:se},G)),Y&&Y(ue))},S.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},S}(c.Component);s.default=y},react:function(r,s){r.exports=t}}).default})}(rl)),rl.exports}var l2=a2();const c2=El(l2),u2=()=>{const o=Er();return k.jsxs("header",{className:"black-back-header",children:[k.jsx("div",{className:"black-logo",children:k.jsx(Qt,{to:"/",children:"NeroFilm"})}),k.jsx("button",{onClick:()=>o(-1),className:"black-back-header-back",children:k.jsx(bm,{className:"black-icon"})})]})},h2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZqSURBVHgB7V07TFxXEJ3dYotAQwQmRWxLuIGGxm4SxZ1lrKRJaJPWfer0oXbrOqQ1VSKQXAUpbkIKGrYxErhJsqvgwqbYAjzn7Vy8e9l9M/f99n040tVbe+/73MOZmfvuZ7ZFM8Tl5eUcH1a5LHK5K8cl+XrRq37Opc/lvRxRjrictlqt9zQjtKhAjBC2xuU+XScpKRyZB1y6RRJaCIFMHAjboCFxn1D+2OdywEQeUM7IjUBR22MuT6gY0iYBynxBQ1X2KAdkTmBJiPMBIv9gEncoY2RKIJP3kA+blJ1vyxqRIpnIfcoImRDIxCFyPqWhj6sC4Bt/zcKsUxPI5CE4QHVlMVcr0C3aTqvGxASKr/uWhr4uDeb4Wp/xcQGfucxz6cjnUaBrMuDyjssZCjf+TP6dBnt8nW1KiEQEisn+yOUOJQCfv8yH21LmKAW48e/4ev/xx9f8+V9KhlMuz5KYdDCBQt5PFB4oOnzuKj/kKh87lANAJh8OuYDQUGUiwGyFkhhEYELycifOB99rwPc65mOXwogMJtFMYELy8Nq2XhRxPkYUeRxwWhCJJgITkDfP53zBx2UqAYTIl2RXo5lEK4E/kz1gzFR1MUAEPxSztgCBZUsbmGiTAibiezKSx3UfSCkbeQCeCc+2bqyPNn+nVYolUF7NTP08rvslDdVXdqzLs1qwIS8KUzGVQPF7P5ANX3NZoepghdv3jbHupnAxEXEKhOmqr2f4a3L5lKqHBaMSwcHTaV9OJFBM9z7pgD+pkvJ8QIkPDPXWhJNrmKbATdKxGuCQywy0w+K7N+X9fwzXCORKlvE8vPDXgTwHtGVeqQNOHvv/OUagOMuHpONRSbsqSdGRjr+GJ74KfQW6KcY4wG9of60qYtlgyggoYyr0CdR8X91M1wfaplnWWL/4ikBmX52nxV+opupz6FhUKNO0EUYVqHVbQFyVuyxWgEBNhVdvJxGBzChsWwsetwwXrgMsKlxzwcQp0DKbVmff58MSTKI6jkDNfJdr7vt8dGTeJg6R6EwK5Ivdo+bhtvJ9JLq2+L/Y6MuDireoYeA2f65UWYQfhALvKhXnG2a+EaTN2pTrKgjUAsgCNReaH1wCgVrnubEEGsY574DApZQXqTM0E14EgbGjzuxMUy29qDIMbddNmJrx9jENattVBVLKxT9VhqH3sajOC98gHjcEpsQNgSkBAvtKnZntApo1ZFFSHM4tChxQc6G1vacqkCNRYxVoaHukwNg1cAYZ1xlnyvd9EHiS8iK1BYvnf6VK3xJEkq58rzzYhN8qVY5A4FFcDTHhxvlBtNvgvk7bXMltZI7DG2oYZO9JHHpY/uu6MbH7arli4whkvFa+j9ZaOwKPlMrwg43pD4r5ar4/Et0ogefKRa2r2+uAQ0OdjwoUP6ipECc0QYUDg//bd9sfRl/l9pSTBg1R4bEh+l7FjCsC+STVjKnmKhTiNJH0RpNZ+IMJFhVa/ENVcWhQ31jeBZ/AXbKpsHZvJ0KctikR4wZjsaLtXQTkaSoEXlGNTFm2x740VEXwGHvpmDQeCBWqIzQ1M2WL6fYmpU25RqCo0JJfpVuTqAwhWNoxkZOJI9KSycJy0b8obDNz2XBstKS/p2X3iBvSf056QAHZf1IFxwwx1ifPrgEc/DLty3bMDVzeKcvD/EbVUiKe9Xdj3W0/cIwidlKJT0REtkTlSIkVCSxdo/KAvZaSmMcyKwcVasP+Dohm8Iul6+Kgq4Jnk+ez4MSSkMeaMwELkJB0YslYf55v/qhEK1vR8X8VMEGGbtxWnOk6hKQ9CSJRgI0567MiEqojezfFwUxedA8KQBISRY3YU7FSZOIdPnQvLi667XY7xJ0EkRfdiwKRUImOSKz2z02RKYgDgsmL7kkJICQi+Zi2wn8asHHnHgjNgEwMbL6ReZukgxwIks9CyQNS5Q/kxiOrxwalgChzQRazo1jS3+Ez0t/9Q+mnXNFNeyGvsMHIIgEjNimCyComYNxh4nYpBbJKAQqTBomWTB9lAKLy8yQm6yOPJLRIlxQUYAoEAsVOq2xJaH1I5o+vqDxEuoHi3aS+bhryTMQNs8Y2slkqMjfiHIpKBQ/fiGJJqZIWIAo+bldmGnNF0T9GgEjtfogAbydZKRPBAFONIOwoL7VNQqEE+hBC0RkHqe6nMNz+Zb9b1B85IhicyOdCCfPxAeLlcaKMZEaKAAAAAElFTkSuQmCC",d2="/nerofilm/assets/CamShutter-CEMIM7zw.wav",p2=()=>{ci();const o=Er(),e=Ar(),t=Zi(),r=E.useRef(new Audio(d2)),s=E.useRef(null),[a,c]=E.useState(null),[u,d]=E.useState(!1),[f,g]=E.useState(0),[y,v]=E.useState(!1),[S,x]=E.useState(null);E.useEffect(()=>{c(!0)},[]);const C=(M=!1)=>{const L=s.current.video,z=document.createElement("canvas");z.width=1920,z.height=1080;const V=z.getContext("2d");V.translate(z.width,0),V.scale(-1,1),V.drawImage(L,0,0,z.width,z.height);const $=z.toDataURL("image/png");M||(r.current.currentTime=0,r.current.play().catch(Y=>console.log("Audio play failed:",Y)),v(!0),setTimeout(()=>v(!1),200)),t(Y=>{const G=[...Y.allImages,$].slice(-16);return{...Y,allImages:G}})},_=(M,L)=>{M>0?(x(M),setTimeout(()=>_(M-1,L),1e3)):(x(null),L())},b=()=>{if(u)return;d(!0),g(0);let M=8;const L=()=>{if(M===0){d(!1),x(null),o("/photo-selection");return}_(3,()=>{C(),g(z=>z+1),setTimeout(()=>{C(!0),M--,setTimeout(L,500)},500)})};L()};return k.jsxs("div",{children:[k.jsx(u2,{}),k.jsxs("div",{className:`camera-page ${e.layout==="wide"?"wide-mode":"original-mode"}`,children:[a===null&&k.jsxs("div",{className:"camera-access-message",children:[k.jsx(Qw,{className:"camera-image"}),k.jsx("h2",{children:"Allow Camera Access"}),k.jsx("p",{children:"To take your photo, allow camera access."})]}),a===!1&&k.jsxs("div",{className:"camera-access-message",children:[k.jsx($w,{className:"camera-image"}),k.jsx("h2",{children:"Camera Access Disabled"}),k.jsx("p",{children:"Please enable camera access in your browser settings."})]}),a===!0&&k.jsx(k.Fragment,{children:k.jsxs("div",{className:"all-together",children:[u?k.jsxs("h2",{className:"count-display",children:[f,"/8"]}):k.jsx("h2",{className:"camera-instructions",children:"Click to start taking photos"}),k.jsxs("div",{className:`camera-preview-screen ${e.layout}`,children:[k.jsx(c2,{className:"webcam",ref:s,audio:!1,mirrored:!0,screenshotFormat:"image/png",videoConstraints:{width:{ideal:1920},height:{ideal:1080},facingMode:"user"}}),y&&k.jsx("div",{className:"flash-overlay"}),k.jsx("div",{className:"camera-layer",children:k.jsxs("button",{className:"shutter-button",onClick:b,disabled:u,children:[k.jsx("img",{src:h2,alt:"Shutter",className:"shutter-icon"}),u&&k.jsx("div",{className:`countdown-timer ${S===null?"hidden":""}`,children:S!==null?S:k.jsx("span",{children:""})})]})})]})]})})]})]})};function f2(){ci();const o=Er(),e=Ar(),t=Zi(),[r,s]=E.useState([]);function a(u){Oh(),r.includes(u)?s(r.filter(d=>d!=u)):r.length<4&&s([...r,u])}function c(){r.length==4&&(t({...e,images:r}),o("/frame-design"))}return k.jsxs("div",{children:[k.jsx(Or,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{className:"options-heading",children:"Select photos"}),k.jsxs("div",{className:"options-r",children:[k.jsx(li,{filter:e.filter,images:r,layout:e.layout,design:e.design}),k.jsx("ul",{className:"image-options",children:e.allImages.filter((u,d)=>d%2===0).map((u,d)=>k.jsxs("li",{className:`${r.includes(u)?"image-option image-selected":"image-option"}
                      ${e.layout==="original"?"image-original":"image-wide"}
                    `,onClick:()=>a(u),children:[k.jsx("p",{className:r.includes(u)?"selected-num num":"num",children:r.indexOf(u)+1}),k.jsx("img",{src:u,alt:`image ${d}`})]},d))})]}),k.jsx("button",{className:"btn",onClick:()=>c(),children:"Continue"})]})]})}const g2=()=>{const[o,e]=E.useState(!1),t=Er();E.useEffect(()=>{localStorage.getItem("skipInstructions")==="true"&&t("/camera",{replace:!0})},[t]);const r=()=>{o&&(localStorage.setItem("skipInstructions","true"),t("/camera",{replace:!0}))};return k.jsxs("div",{children:[k.jsx(Or,{}),k.jsx("div",{className:"instruction-box",children:k.jsxs("div",{className:"texts-box",children:[k.jsx("h2",{children:"Before Taking Your Photos"}),k.jsxs("ul",{className:"instructions",children:[k.jsxs("li",{children:[k.jsx(Vw,{className:"icons"}),"The timer is set for 3 seconds"]}),k.jsxs("li",{children:[k.jsx(Ww,{className:"icons"}),"Press the button to start the shoot"]}),k.jsxs("li",{children:[k.jsx(Gw,{className:"icons"}),"You'll get 8 photospick your favorite 4!"]}),k.jsxs("li",{children:[k.jsx(Yw,{className:"icons"}),"Enable camera access in settings if needed"]})]}),k.jsxs("div",{className:"checkbox",children:[k.jsx("input",{type:"checkbox",id:"dont-show-again",checked:o,onChange:()=>e(!o)}),k.jsx("label",{htmlFor:"dont-show-again",children:"Do not show this page again"})]}),k.jsx(Qt,{className:"ready-btn",to:"/camera",onClick:r,children:"Im Ready!"})]})})]})};function O(o,e,t){return(e=function(r){var s=function(a,c){if(typeof a!="object"||!a)return a;var u=a[Symbol.toPrimitive];if(u!==void 0){var d=u.call(a,c);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function hg(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,r)}return t}function D(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hg(Object(t),!0).forEach(function(r){O(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):hg(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function ze(o,e){if(o==null)return{};var t,r,s=function(c,u){if(c==null)return{};var d={};for(var f in c)if({}.hasOwnProperty.call(c,f)){if(u.indexOf(f)>=0)continue;d[f]=c[f]}return d}(o,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(o,t)&&(s[t]=o[t])}return s}function jr(o,e){return e||(e=o.slice(0)),Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(e)}}))}class dg{constructor(){O(this,"browserShadowBlurConstant",1),O(this,"DPI",96),O(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),O(this,"perfLimitSizeTotal",2097152),O(this,"maxCacheSideLimit",4096),O(this,"minCacheSideLimit",256),O(this,"disableStyleCopyPaste",!1),O(this,"enableGLFiltering",!0),O(this,"textureSize",4096),O(this,"forceGLPutImageData",!1),O(this,"cachesBoundsOfCurve",!1),O(this,"fontPaths",{}),O(this,"NUM_FRACTION_DIGITS",4)}}const Ee=new class extends dg{constructor(o){super(),this.configure(o)}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,o)}addFonts(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=D(D({},this.fontPaths),o)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(o=>{delete this.fontPaths[o]})}clearFonts(){this.fontPaths={}}restoreDefaults(o){const e=new dg,t=(o==null?void 0:o.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},br=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[o]("fabric",...t)};class bn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class m2 extends bn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class v2{}class y2 extends v2{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),br("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const x2={};let pg;const Tn=()=>pg||(pg={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new y2,dispose(){},copyPasteData:x2}),es=()=>Tn().document,Ph=()=>Tn().window,Im=()=>{var o;return Math.max((o=Ee.devicePixelRatio)!==null&&o!==void 0?o:Ph().devicePixelRatio,1)},Zs=new class{constructor(){O(this,"charWidthsCache",{}),O(this,"boundsOfCurveCache",{})}getFontCache(o){let{fontFamily:e,fontStyle:t,fontWeight:r}=o;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[a]||(s[a]={}),s[a]}clearFontCache(o){(o=(o||"").toLowerCase())?this.charWidthsCache[o]&&delete this.charWidthsCache[o]:this.charWidthsCache={}}limitDimsByArea(o){const{perfLimitSizeTotal:e}=Ee,t=Math.sqrt(e*o);return[Math.floor(t),Math.floor(e/t)]}},rh="6.6.1";function il(){}const fo=Math.PI/2,dl=2*Math.PI,Mh=Math.PI/180,St=Object.freeze([1,0,0,1,0,0]),Fh=16,Cr=.4477152502,ye="center",De="left",jt="top",ih="bottom",Qe="right",Dt="none",Rh=/\r?\n/,Nm="moving",Ml="scaling",zm="rotating",Lh="rotate",Bm="skewing",io="resizing",w2="modifyPoly",S2="modifyPath",pl="changed",Fl="scale",Mt="scaleX",Jt="scaleY",ts="skewX",ns="skewY",rt="fill",Pt="stroke",fl="modified",Wi="json",Nu="svg",ee=new class{constructor(){this[Wi]=new Map,this[Nu]=new Map}has(o){return this[Wi].has(o)}getClass(o){const e=this[Wi].get(o);if(!e)throw new bn("No class registered for ".concat(o));return e}setClass(o,e){e?this[Wi].set(e,o):(this[Wi].set(o.type,o),this[Wi].set(o.type.toLowerCase(),o))}getSVGClass(o){return this[Nu].get(o)}setSVGClass(o,e){this[Nu].set(e??o.type.toLowerCase(),o)}},gl=new class extends Array{remove(o){const e=this.indexOf(o);e>-1&&this.splice(e,1)}cancelAll(){const o=this.splice(0);return o.forEach(e=>e.abort()),o}cancelByCanvas(o){if(!o)return[];const e=this.filter(t=>{var r;return t.target===o||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===o});return e.forEach(t=>t.abort()),e}cancelByTarget(o){if(!o)return[];const e=this.filter(t=>t.target===o);return e.forEach(t=>t.abort()),e}};class C2{constructor(){O(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,a]=r;this.on(s,a)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[a,c]=s;r.push(this.once(a,c))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];t.call(this,...a),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,a]=r;this._removeEventListener(s,a)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let a=0;a<s.length;a++)s[a].call(this,t||{})}}const Vi=(o,e)=>{const t=o.indexOf(e);return t!==-1&&o.splice(t,1),o},$n=o=>{if(o===0)return 1;switch(Math.abs(o)/fo){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},Kn=o=>{if(o===0)return 0;const e=o/fo,t=Math.sign(o);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(o)};class N{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new N(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new N(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new N(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new N(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new N(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new N(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new N(this.x/e.x,this.y/e.y)}scalarDivide(e){return new N(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new N(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new N(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new N(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new N(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ih;const r=Kn(e),s=$n(e),a=this.subtract(t);return new N(a.x*s-a.y*r,a.x*r+a.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new N(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Ih=new N(0,0),sl=o=>!!o&&Array.isArray(o._objects);function Wm(o){class e extends o{constructor(){super(...arguments),O(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];const c=this._objects.push(...s);return s.forEach(u=>this._onObjectAdded(u)),c}insertAt(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return this._objects.splice(r,0,...a),a.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const r=this._objects,s=[];for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return c.forEach(d=>{const f=r.indexOf(d);f!==-1&&(r.splice(f,1),s.push(d),this._onObjectRemoved(d))}),s}forEachObject(r){this.getObjects().forEach((s,a,c)=>r(s,a,c))}getObjects(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length===0?[...this._objects]:this._objects.filter(c=>c.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(a=>a instanceof e&&a.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Vi(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Vi(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const a=this._objects.indexOf(r);if(a!==0){const c=this.findNewLowerIndex(r,a,s);return Vi(this._objects,r),this._objects.splice(c,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const a=this._objects.indexOf(r);if(a!==this._objects.length-1){const c=this.findNewUpperIndex(r,a,s);return Vi(this._objects,r),this._objects.splice(c,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(Vi(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,a){let c;if(a){c=s;for(let u=s-1;u>=0;--u)if(r.isOverlapping(this._objects[u])){c=u;break}}else c=s-1;return c}findNewUpperIndex(r,s,a){let c;if(a){c=s;for(let u=s+1;u<this._objects.length;++u)if(r.isOverlapping(this._objects[u])){c=u;break}}else c=s+1;return c}collectObjects(r){let{left:s,top:a,width:c,height:u}=r,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],g=new N(s,a),y=g.add(new N(c,u));for(let v=this._objects.length-1;v>=0;v--){const S=this._objects[v];S.selectable&&S.visible&&(d&&S.intersectsWithRect(g,y)||S.isContainedWithinRect(g,y)||d&&S.containsPoint(g)||d&&S.containsPoint(y))&&f.push(S)}return f}}return e}class Um extends C2{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function ol(o){return Ph().requestAnimationFrame(o)}function _2(o){return Ph().cancelAnimationFrame(o)}let k2=0;const Tr=()=>k2++,fn=()=>{const o=es().createElement("canvas");if(!o||o.getContext===void 0)throw new bn("Failed to create `canvas` element");return o},b2=()=>es().createElement("img"),En=o=>{const e=fn();return e.width=o.width,e.height=o.height,e},Vm=(o,e,t)=>o.toDataURL("image/".concat(e),t),Hm=(o,e,t)=>new Promise((r,s)=>{o.toBlob(r,"image/".concat(e),t)}),Je=o=>o*Mh,ii=o=>o/Mh,T2=o=>o.every((e,t)=>e===St[t]),At=(o,e,t)=>new N(o).transform(e,t),hn=o=>{const e=1/(o[0]*o[3]-o[1]*o[2]),t=[e*o[3],-e*o[1],-e*o[2],e*o[0],0,0],{x:r,y:s}=new N(o[4],o[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},ht=(o,e,t)=>[o[0]*e[0]+o[2]*e[1],o[1]*e[0]+o[3]*e[1],o[0]*e[2]+o[2]*e[3],o[1]*e[2]+o[3]*e[3],t?0:o[0]*e[4]+o[2]*e[5]+o[4],t?0:o[1]*e[4]+o[3]*e[5]+o[5]],Nh=(o,e)=>o.reduceRight((t,r)=>r&&t?ht(r,t,e):r||t,void 0)||St.concat(),Ym=o=>{let[e,t]=o;return Math.atan2(t,e)},ml=o=>{const e=Ym(o),t=Math.pow(o[0],2)+Math.pow(o[1],2),r=Math.sqrt(t),s=(o[0]*o[3]-o[2]*o[1])/r,a=Math.atan2(o[0]*o[2]+o[1]*o[3],t);return{angle:ii(e),scaleX:r,scaleY:s,skewX:ii(a),skewY:0,translateX:o[4]||0,translateY:o[5]||0}},go=function(o){return[1,0,0,1,o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function mo(){let{angle:o=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Je(o),s=$n(r),a=Kn(r);return[s,a,-a,s,e?e-(s*e-a*t):0,t?t-(a*e+s*t):0]}const zh=function(o){return[o,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,0,0]},Xm=o=>Math.tan(Je(o)),Gm=o=>[1,0,Xm(o),1,0,0],qm=o=>[1,Xm(o),0,1,0,0],Rl=o=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:a=0,skewY:c=0}=o,u=zh(r?-e:e,s?-t:t);return a&&(u=ht(u,Gm(a),!0)),c&&(u=ht(u,qm(c),!0)),u},E2=o=>{const{translateX:e=0,translateY:t=0,angle:r=0}=o;let s=go(e,t);r&&(s=ht(s,mo({angle:r})));const a=Rl(o);return T2(a)||(s=ht(s,a)),s},al=function(o){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new m2("loadImage"));const a=b2();let c;e&&(c=function(d){a.src="",s(d)},e.addEventListener("abort",c,{once:!0}));const u=function(){a.onload=a.onerror=null,c&&(e==null||e.removeEventListener("abort",c)),r(a)};o?(a.onload=u,a.onerror=function(){c&&(e==null||e.removeEventListener("abort",c)),s(new bn("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=o):u()})},so=function(o){let{signal:e,reviver:t=il}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const a=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(o.map(c=>ee.getClass(c.type).fromObject(c,{signal:e}).then(u=>(t(c,u),a.push(u),u)))).then(r).catch(c=>{a.forEach(u=>{u.dispose&&u.dispose()}),s(c)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Ll=function(o){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const a=Object.values(o).map(u=>u&&u.type&&ee.has(u.type)?so([u],{signal:e}).then(d=>{let[f]=d;return s.push(f),f}):u),c=Object.keys(o);Promise.all(a).then(u=>u.reduce((d,f,g)=>(d[c[g]]=f,d),{})).then(t).catch(u=>{s.forEach(d=>{d.dispose&&d.dispose()}),r(u)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},rs=function(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in o&&(e[t]=o[t]),e),{})},Bh=(o,e)=>Object.keys(o).reduce((t,r)=>(e(o[r],r,o)&&(t[r]=o[r]),t),{}),fg={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},zu=(o,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o),gg=(o,e,t,r)=>{o/=255,e/=255,t/=255;const s=Math.max(o,e,t),a=Math.min(o,e,t);let c,u;const d=(s+a)/2;if(s===a)c=u=0;else{const f=s-a;switch(u=d>.5?f/(2-s-a):f/(s+a),s){case o:c=(e-t)/f+(e<t?6:0);break;case e:c=(t-o)/f+2;break;case t:c=(o-e)/f+4}c/=6}return[Math.round(360*c),Math.round(100*u),Math.round(100*d),r]},mg=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(o)/(o.endsWith("%")?100:1)},Aa=o=>Math.min(Math.round(o),255).toString(16).toUpperCase().padStart(2,"0"),vg=o=>{let[e,t,r,s=1]=o;const a=Math.round(.3*e+.59*t+.11*r);return[a,a,a,s]};class Me{constructor(e){if(O(this,"isUnrecognised",!1),e)if(e instanceof Me)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,a=1]=e;this.setSource([t,r,s,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in fg&&(e=fg[e]),e==="transparent"?[255,255,255,0]:Me.sourceFromHex(e)||Me.sourceFromRgb(e)||Me.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=gg(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=gg(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(Aa(e)).concat(Aa(t)).concat(Aa(r)).concat(Aa(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(vg(this.getSource())),this}toBlackWhite(e){const[t,,,r]=vg(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof Me||(e=new Me(e));const t=this.getSource(),r=e.getSource(),[s,a,c]=t.map((u,d)=>Math.round(.5*u+.5*r[d]));return this.setSource([s,a,c,t[3]]),this}static fromRgb(e){return Me.fromRgba(e)}static fromRgba(e){return new Me(Me.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,a]=t.slice(1,4).map(c=>{const u=parseFloat(c);return c.endsWith("%")?Math.round(2.55*u):u});return[r,s,a,mg(t[4])]}}static fromHsl(e){return Me.fromHsla(e)}static fromHsla(e){return new Me(Me.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(Me.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let c,u,d;if(s===0)c=u=d=a;else{const f=a<=.5?a*(s+1):a+s-a*s,g=2*a-f;c=zu(g,f,r+1/3),u=zu(g,f,r),d=zu(g,f,r-1/3)}return[Math.round(255*c),Math.round(255*u),Math.round(255*d),mg(t[4])]}static fromHex(e){return new Me(Me.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(d=>d+d):t.match(/.{2}/g);const[s,a,c,u=255]=r.map(d=>parseInt(d,16));return[s,a,c,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?ii(r):t.includes("turn")?360*r:r}}const Ye=(o,e)=>parseFloat(Number(o).toFixed(e)),Gi=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fh;const t=/\D{0,2}$/.exec(o),r=parseFloat(o),s=Ee.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},A2=o=>{const[e,t]=o.trim().split(" "),[r,s]=(a=e)&&a!==Dt?[a.slice(1,4),a.slice(5,8)]:a===Dt?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},vl=o=>"matrix("+o.map(e=>Ye(e,Ee.NUM_FRACTION_DIGITS)).join(" ")+")",oo=function(o,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new Me(e),c=a.getAlpha();t=a.toRgb(),c!==1&&(r=c.toString())}else t="none";return s?"".concat(o,": ").concat(t,"; ").concat(r?"".concat(o,"-opacity: ").concat(r,"; "):""):"".concat(o,'="').concat(t,'" ').concat(r?"".concat(o,'-opacity="').concat(r,'" '):"")},Kt=o=>!!o&&o.toLive!==void 0,yg=o=>!!o&&typeof o.toObject=="function",xg=o=>!!o&&o.offsetX!==void 0&&"source"in o,Kr=o=>!!o&&"multiSelectionStacking"in o;function $m(o){const e=o&&un(o);let t=0,r=0;if(!o||!e)return{left:t,top:r};let s=o;const a=e.documentElement,c=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=c.scrollLeft||a.scrollLeft||0,r=c.scrollTop||a.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const un=o=>o.ownerDocument||null,Km=o=>{var e;return((e=o.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},Qm=function(o,e,t){let{width:r,height:s}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;o.width=r,o.height=s,a>1&&(o.setAttribute("width",(r*a).toString()),o.setAttribute("height",(s*a).toString()),e.scale(a,a))},sh=(o,e)=>{let{width:t,height:r}=e;t&&(o.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(o.style.height=typeof r=="number"?"".concat(r,"px"):r)};function wg(o){return o.onselectstart!==void 0&&(o.onselectstart=()=>!1),o.style.userSelect=Dt,o}class Jm{constructor(e){O(this,"_originalCanvasStyle",void 0),O(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&es().getElementById(e)||fn();var r;if(t.hasAttribute("data-fabric"))throw new bn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;Qm(r,s,e,t)}setCSSDimensions(e){sh(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&un(e),s={left:0,top:0};if(!r)return s;const a=((t=Km(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(a.borderLeftWidth,10)||0,s.top+=parseInt(a.borderTopWidth,10)||0,s.left+=parseInt(a.paddingLeft,10)||0,s.top+=parseInt(a.paddingTop,10)||0;let c={left:0,top:0};const u=r.documentElement;e.getBoundingClientRect!==void 0&&(c=e.getBoundingClientRect());const d=$m(e);return{left:c.left+d.left-(u.clientLeft||0)+s.left,top:c.top+d.top-(u.clientTop||0)+s.top}}(this.lower.el)}dispose(){Tn().dispose(this.lower.el),delete this.lower}}const O2={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...St]};class vo extends Wm(Um){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return vo.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Jm(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const a=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(br("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Im():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=D({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],a=At(e,hn(s));s[0]=t,s[3]=t;const c=At(a,s);s[4]+=r.x-c.x,s[5]+=r.y-c.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new N(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new N(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ol(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=hn(this.viewportTransform),s=At({x:0,y:0},r),a=At({x:e,y:t},r),c=s.min(a),u=s.max(a);return this.vptCoords={tl:c,tr:new N(u.x,c.y),bl:new N(c.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(_2(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],a=this.viewportTransform,c=this["".concat(t,"Vpt")];if(!r&&!s)return;const u=Kt(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?r.toLive(e):r,c&&e.transform(...a),u){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const d=r.gradientTransform||r.patternTransform;d&&e.transform(...d)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:d}=this;this.skipOffscreen=c,c&&e.transform(...a),s.render(e),this.skipOffscreen=d,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new N(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new N(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new N(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new N(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new N(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return At(this.getCenterPoint(),hn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,ye,ye),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return D(D(D({version:rh},rs(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),a}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,a=this.overlayImage,c=this.backgroundColor,u=this.overlayColor;return Kt(c)?c.excludeFromExport||(r.background=c.toObject(t)):c&&(r.background=c),Kt(u)?u.excludeFromExport||(r.overlay=u.toObject(t)):u&&(r.overlay=u),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),a&&!a.excludeFromExport&&(r.overlayImage=this._toObject(a,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),a=Ee.NUM_FRACTION_DIGITS,c=t.viewBox;let u;if(c)u='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;u='viewBox="'.concat(Ye(-d[4]/d[0],a)," ").concat(Ye(-d[5]/d[3],a)," ").concat(Ye(this.width/d[0],a)," ").concat(Ye(this.height/d[3],a),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",rh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Tr()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Kt(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,a={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(a,{additionalTransform:r?vl(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Ee.fontPaths;this._objects.forEach(function a(c){e.push(c),sl(c)&&c._objects.forEach(a)}),e.forEach(a=>{if(!(c=a)||typeof c._renderText!="function")return;var c;const{styles:u,fontFamily:d}=a;!t[d]&&r[d]&&(t[d]=!0,u&&Object.values(u).forEach(f=>{Object.values(f).forEach(g=>{let{fontFamily:y=""}=g;!t[y]&&r[y]&&(t[y]=!0)})}))});const s=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(r[a],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Kt(r)){const s=r.repeat||"",a=this.width,c=this.height,u=this["".concat(t,"Vpt")]?vl(hn(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(a/2,",").concat(c/2,')" x="').concat(r.offsetX-a/2,'" y="').concat(r.offsetY-c/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!xg(r)?a:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!xg(r)?c:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new bn("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:c,background:u,overlayImage:d,overlay:f,clipPath:g}=s,y=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([so(a,{reviver:t,signal:r}),Ll({backgroundImage:c,backgroundColor:u,overlayImage:d,overlayColor:f,clipPath:g},{signal:r})]).then(v=>{let[S,x]=v;return this.clear(),this.add(...S),this.set(s),this.set(x),this.renderOnAddRemove=y,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=En(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,c=s*(a?this.getRetinaScaling():1);return Vm(this.toCanvasElement(c,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,c=s*(a?this.getRetinaScaling():1);return Hm(this.toCanvasElement(c,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:a,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,d=(r||this.height)*e,f=this.getZoom(),g=this.width,y=this.height,v=this.skipControlsDrawing,S=f*e,x=this.viewportTransform,C=[S,0,0,S,(x[4]-(s||0))*e,(x[5]-(a||0))*e],_=this.enableRetinaScaling,b=En({width:u,height:d}),M=c?this._objects.filter(L=>c(L)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=C,this.width=u,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),M),this.viewportTransform=x,this.width=g,this.height=y,this.calcViewportBoundaries(),this.enableRetinaScaling=_,this.skipControlsDrawing=v,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),gl.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}O(vo,"ownDefaults",O2);const j2=["touchstart","touchmove","touchend"],D2=o=>{const e=$m(o.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(o);return new N(t.clientX+e.left,t.clientY+e.top)},oh=o=>j2.includes(o.type)||o.pointerType==="touch",ah=o=>{o.preventDefault(),o.stopPropagation()},Xn=o=>{let e=0,t=0,r=0,s=0;for(let a=0,c=o.length;a<c;a++){const{x:u,y:d}=o[a];(u>r||!a)&&(r=u),(u<e||!a)&&(e=u),(d>s||!a)&&(s=d),(d<t||!a)&&(t=d)}return{left:e,top:t,width:r-e,height:s-t}},P2=["translateX","translateY","scaleX","scaleY"],M2=(o,e)=>yl(o,ht(e,o.calcOwnMatrix())),yl=(o,e)=>{const t=ml(e),{translateX:r,translateY:s,scaleX:a,scaleY:c}=t,u=ze(t,P2),d=new N(r,s);o.flipX=!1,o.flipY=!1,Object.assign(o,u),o.set({scaleX:a,scaleY:c}),o.setPositionByOrigin(d,ye,ye)},F2=o=>{o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},Zm=o=>({scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}),Wh=(o,e,t)=>{const r=o/2,s=e/2,a=[new N(-r,-s),new N(r,-s),new N(-r,s),new N(r,s)].map(u=>u.transform(t)),c=Xn(a);return new N(c.width,c.height)},Il=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:St;return ht(hn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:St),o)},qi=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:St,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St;return o.transform(Il(e,t))},R2=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:St,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St;return o.transform(Il(e,t),!0)},L2=(o,e,t)=>{const r=Il(e,t);return yl(o,ht(r,o.calcOwnMatrix())),r},ev=(o,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(o),D(D({},e),{},{target:r})),r.fire(o,e)},I2={left:-.5,top:-.5,center:0,bottom:.5,right:.5},et=o=>typeof o=="string"?I2[o]:o-.5,xl="not-allowed";function tv(o){return et(o.originX)===et(ye)&&et(o.originY)===et(ye)}function Sg(o){return .5-et(o)}const dn=(o,e)=>o[e],nv=(o,e,t,r)=>({e:o,transform:e,pointer:new N(t,r)});function rv(o,e){const t=o.getTotalAngle()+ii(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function Uh(o,e,t,r,s){var a;let{target:c,corner:u}=o;const d=c.controls[u],f=((a=c.canvas)===null||a===void 0?void 0:a.getZoom())||1,g=c.padding/f,y=function(v,S,x,C){const _=v.getRelativeCenterPoint(),b=x!==void 0&&C!==void 0?v.translateToGivenOrigin(_,ye,ye,x,C):new N(v.left,v.top);return(v.angle?S.rotate(-Je(v.angle),_):S).subtract(b)}(c,new N(r,s),e,t);return y.x>=g&&(y.x-=g),y.x<=-g&&(y.x+=g),y.y>=g&&(y.y-=g),y.y<=g&&(y.y+=g),y.x-=d.offsetX,y.y-=d.offsetY,y}const N2=(o,e,t,r)=>{const{target:s,offsetX:a,offsetY:c}=e,u=t-a,d=r-c,f=!dn(s,"lockMovementX")&&s.left!==u,g=!dn(s,"lockMovementY")&&s.top!==d;return f&&s.set(De,u),g&&s.set(jt,d),(f||g)&&ev(Nm,nv(o,e,t,r)),f||g};class iv{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Dt,a=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",y=e?"":this.getSvgFilter(),v=oo(rt,this.fill);return[oo(Pt,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",d,"; ",v,"fill-rule: ",t,"; ","opacity: ",f,";",y,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(vl(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=s?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,y=this.stroke,v=this.fill,S=this.shadow,x=[],C=e.indexOf("COMMON_PARTS");let _;d&&(d.clipPathId="CLIPPATH_".concat(Tr()),_='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(r),`</clipPath>
`)),g&&x.push("<g ",u,this.getSvgCommons(),` >
`),x.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`);const b=[c,f,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[C]=b,Kt(v)&&x.push(v.toSVG(this)),Kt(y)&&x.push(y.toSVG(this)),S&&x.push(S.toSVG(this)),d&&x.push(_),x.push(e.join("")),x.push(`</g>
`),g&&x.push(`</g>
`),r?r(x.join("")):x.join("")}addPaintOrder(){return this.paintFirst!==rt?' paint-order="'.concat(this.paintFirst,'" '):""}}function Nl(o){return new RegExp("^("+o.join("|")+")\\b","i")}var Cg;const si=String.raw(Cg||(Cg=jr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),z2=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+si+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+si+"))?\\s+(.*)"),B2={cx:De,x:De,r:"radius",cy:jt,y:jt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Bu="font-size",Wu="clip-path";Nl(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Nl(["symbol","image","marker","pattern","view","svg"]);const _g=Nl(["symbol","g","a","svg","clipPath","defs"]),W2=new N(1,0),sv=new N,ov=(o,e)=>o.rotate(e),lh=(o,e)=>new N(e).subtract(o),ch=o=>o.distanceFrom(sv),uh=(o,e)=>Math.atan2(eo(o,e),V2(o,e)),U2=o=>uh(W2,o),Vh=o=>o.eq(sv)?o:o.scalarDivide(ch(o)),av=function(o){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Vh(new N(-o.y,o.x).scalarMultiply(e?1:-1))},eo=(o,e)=>o.x*e.y-o.y*e.x,V2=(o,e)=>o.x*e.x+o.y*e.y,kg=(o,e,t)=>{if(o.eq(e)||o.eq(t))return!0;const r=eo(e,t),s=eo(e,o),a=eo(t,o);return r>=0?s>=0&&a<=0:!(s<=0&&a>=0)},bg="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Tg=new RegExp("(?:\\s|^)"+bg+bg+"("+si+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Gn{constructor(e){const t=typeof e=="string"?Gn.parseShadow(e):e;Object.assign(this,Gn.ownDefaults,t),this.id=Tr()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,a=0]=(Tg.exec(t)||[]).map(c=>parseFloat(c)||0);return{color:(t.replace(Tg,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=ov(new N(this.offsetX,this.offsetY),Je(-e.angle)),r=new Me(this.color);let s=40,a=40;return e.width&&e.height&&(s=100*Ye((Math.abs(t.x)+this.blur)/e.width,Ee.NUM_FRACTION_DIGITS)+20,a=100*Ye((Math.abs(t.y)+this.blur)/e.height,Ee.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Ye(this.blur?this.blur/2:0,Ee.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Ye(t.x,Ee.NUM_FRACTION_DIGITS),'" dy="').concat(Ye(t.y,Ee.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Gn.ownDefaults;return this.includeDefaultValues?e:Bh(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}O(Gn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),O(Gn,"type","shadow"),ee.setClass(Gn,"shadow");const Ki=(o,e,t)=>Math.max(o,Math.min(e,t)),H2=[jt,De,Mt,Jt,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",ts,ns],Jn=[rt,Pt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Y2={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:De,originY:jt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:rt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},X2=(o,e,t,r)=>-t*Math.cos(o/r*fo)+t+e,G2=()=>!1;class Hh{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:a=0,easing:c=X2,onStart:u=il,onChange:d=il,onComplete:f=il,abort:g=G2,target:y}=e;O(this,"_state","pending"),O(this,"durationProgress",0),O(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=a,this.easing=c,this._onStart=u,this._onChange=d,this._onComplete=f,this._abort=g,this.target=y,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ol(e),this.delay):ol(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:a}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ol(this.tick)))}register(){gl.push(this)}unregister(){gl.remove(this)}abort(){this._state="aborted",this.unregister()}}const q2=["startValue","endValue"];class $2 extends Hh{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(D(D({},ze(e,q2)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const K2=["startValue","endValue"];class Q2 extends Hh{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(D(D({},ze(e,K2)),{},{startValue:t,byValue:r.map((s,a)=>s-t[a])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const J2=["startValue","endValue","easing","onChange","onComplete","abort"],Z2=(o,e,t,r)=>e+t*(1-Math.cos(o/r*fo)),Uu=o=>o&&((e,t,r)=>o(new Me(e).toRgba(),t,r));class eS extends Hh{constructor(e){let{startValue:t,endValue:r,easing:s=Z2,onChange:a,onComplete:c,abort:u}=e,d=ze(e,J2);const f=new Me(t).getSource(),g=new Me(r).getSource();super(D(D({},d),{},{startValue:f,byValue:g.map((y,v)=>y-f[v]),easing:s,onChange:Uu(a),onComplete:Uu(c),abort:Uu(u)}))}calculate(e){const[t,r,s,a]=this.startValue.map((u,d)=>this.easing(e,u,this.byValue[d],this.duration,d)),c=[...[t,r,s].map(Math.round),Ki(0,a,1)];return{value:c,valueProgress:c.map((u,d)=>this.byValue[d]!==0?Math.abs((u-this.startValue[d])/this.byValue[d]):0).find(u=>u!==0)||0}}}function lv(o){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(o)?new Q2(o):new $2(o);return e.start(),e}function tS(o){const e=new eS(o);return e.start(),e}class Ve{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const a=lh(t,r),c=lh(t,e).divide(a);return s?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(e,t){const r=new N(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let s=0;for(let a=0;a<t.length;a++){const c=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,r);if(c.includes(e))return!0;s+=+(c.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,d=t.y-e.y,f=s.x-r.x,g=s.y-r.y,y=e.x-r.x,v=e.y-r.y,S=f*v-g*y,x=u*v-d*y,C=g*u-f*d;if(C!==0){const _=S/C,b=x/C;return(a||0<=_&&_<=1)&&(c||0<=b&&b<=1)?new Ve("Intersection").append(new N(e.x+_*u,e.y+_*d)):new Ve}if(S===0||x===0){const _=a||c||Ve.isPointContained(e,r,s)||Ve.isPointContained(t,r,s)||Ve.isPointContained(r,e,t)||Ve.isPointContained(s,e,t);return new Ve(_?"Coincident":void 0)}return new Ve("Parallel")}static intersectSegmentLine(e,t,r,s){return Ve.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return Ve.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Ve,c=r.length;for(let u,d,f,g=0;g<c;g++){if(u=r[g],d=r[(g+1)%c],f=Ve.intersectLineLine(e,t,u,d,s,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,r){return Ve.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Ve,s=e.length,a=[];for(let c=0;c<s;c++){const u=e[c],d=e[(c+1)%s],f=Ve.intersectSegmentPolygon(u,d,t);f.status==="Coincident"?(a.push(f),r.append(u,d)):r.append(...f.points)}return a.length>0&&a.length===e.length?new Ve("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),a=t.max(r),c=new N(a.x,s.y),u=new N(s.x,a.y);return Ve.intersectPolygonPolygon(e,[s,c,a,u])}}class nS extends Um{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?At(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=At(e,hn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new N(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,r,s];if(this.group){const c=this.group.calcTransformMatrix();return a.map(u=>At(u,c))}return a}intersectsWithRect(e,t){return Ve.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ve.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:a,height:c}=this.getBoundingRect();return r>=e.x&&r+a<=t.x&&s>=e.y&&s+c<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ve.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Xn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Mt,e),this._set(Jt,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?ii(Ym(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||St.concat()}calcACoords(){const e=mo({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=go(t,r),a=ht(s,e),c=this._getTransformedDimensions(),u=c.x/2,d=c.y/2;return{tl:At({x:-u,y:-d},a),tr:At({x:u,y:-d},a),bl:At({x:-u,y:d},a),br:At({x:u,y:d},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,et(this.originX),et(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((a,c)=>a===r[c])?s.value:(this.group&&(t=ht(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=E2(s);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new N(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,a=0;this.strokeUniform&&(s=0,a=r);const c=t.width+s,u=t.height+s;let d;return d=t.skewX===0&&t.skewY===0?new N(c*t.scaleX,u*t.scaleY):Wh(c,u,Rl(t)),d.scalarAdd(a)}translateToGivenOrigin(e,t,r,s,a){let c=e.x,u=e.y;const d=et(s)-et(t),f=et(a)-et(r);if(d||f){const g=this._getTransformedDimensions();c+=d*g.x,u+=f*g.y}return new N(c,u)}translateToCenterPoint(e,t,r){if(t===ye&&r===ye)return e;const s=this.translateToGivenOrigin(e,t,r,ye,ye);return this.angle?s.rotate(Je(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,ye,ye,t,r);return this.angle?s.rotate(Je(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?At(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new N(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),a=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),De,jt)}}const rS=["type"],iS=["extraParam"];let Bn=class ll extends nS{static getDefaults(){return ll.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){br("warn","Setting type has no effect",e)}constructor(e){super(),O(this,"_cacheContext",null),Object.assign(this,ll.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=fn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=Ee.maxCacheSideLimit,a=Ee.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=Ee.perfLimitSizeTotal)return t<a&&(e.width=a),r<a&&(e.height=a),e;const c=t/r,[u,d]=Zs.limitDimsByArea(c),f=Ki(a,u,s),g=Ki(a,d,s);return t>f&&(e.zoomX/=t/f,e.width=f,e.capped=!0),r>g&&(e.zoomY/=r/g,e.height=g,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:a,zoomY:c,x:u,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=r!==e.width||s!==e.height,g=this.zoomX!==a||this.zoomY!==c;if(!e||!t)return!1;if(f||g){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const y=u/2,v=d/2;return this.cacheTranslationX=Math.round(e.width/2-y)+y,this.cacheTranslationY=Math.round(e.height/2-v)+v,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,c),this.zoomX=a,this.zoomY=c,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new N(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=ml(this.calcTransformMatrix());return new N(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Mt&&e!==Jt||(t=this._constrainScale(t)),e===Mt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Gn||(t=new Gn(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:a}=this,{width:c,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:a,width:c,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Pt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=a}createClipPathLayer(e,t){const r=En(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(a=>{a.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=hn(this.calcTransformMatrix());s.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Kt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Kt(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[a,,,c]=(r==null?void 0:r.viewportTransform)||St,u=a*s,d=c*s,f=t.nonScaling?new N(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Ee.browserShadowBlurConstant*(u+d)*(f.x+f.y)/4,e.shadowOffsetX=t.offsetX*u*f.x,e.shadowOffsetY=t.offsetY*d*f.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Kt(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,a):e.transform(1,0,0,1,s,a),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Pt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),c=s.x/this.scaleX/a,u=s.y/this.scaleY/a,d=En({width:Math.ceil(c),height:Math.ceil(u)}),f=d.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,u),f.lineTo(0,u),f.closePath(),f.translate(c/2,u/2),f.scale(s.zoomX/this.scaleX/a,s.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,t),f.fillStyle=t.toLive(e),f.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/s.zoomX,a*this.scaleY/s.zoomY),e.strokeStyle=(r=f.createPattern(d,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new N(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(ee.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Zm(this),r=this.group,s=this.shadow,a=Math.abs,c=e.enableRetinaScaling?Im():1,u=(e.multiplier||1)*c,d=e.canvasProvider||(M=>new vo(M,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&F2(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&L2(this,this.getViewportTransform()),this.setCoords();const f=fn(),g=this.getBoundingRect(),y=this.shadow,v=new N;if(y){const M=y.blur,L=y.nonScaling?new N(1,1):this.getObjectScaling();v.x=2*Math.round(a(y.offsetX)+M)*a(L.x),v.y=2*Math.round(a(y.offsetY)+M)*a(L.y)}const S=g.width+v.x,x=g.height+v.y;f.width=Math.ceil(S),f.height=Math.ceil(x);const C=d(f);e.format==="jpeg"&&(C.backgroundColor="#fff"),this.setPositionByOrigin(new N(C.width/2,C.height/2),ye,ye);const _=this.canvas;C._objects=[this],this.set("canvas",C),this.setCoords();const b=C.toCanvasElement(u||1,e);return this.set("canvas",_),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),C._objects=[],C.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Vm(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Hm(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:a,y:c}=this.getRelativeCenterPoint();this.originX=ye,this.originY=ye,this.left=a,this.top=c}if(this.set("angle",e),t){const{x:a,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=a,this.top=c,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){gl.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Tn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[a,c]=s;return r[a]=this._animate(a,c,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),a=this.constructor.colorProperties.includes(s[s.length-1]),{abort:c,startValue:u,onChange:d,onComplete:f}=r,g=D(D({},r),{},{target:this,startValue:u??s.reduce((y,v)=>y[v],this),endValue:t,abort:c==null?void 0:c.bind(this),onChange:(y,v,S)=>{s.reduce((x,C,_)=>(_===s.length-1&&(x[C]=y),x[C]),this),d&&d(y,v,S)},onComplete:(y,v,S)=>{this.setCoords(),f&&f(y,v,S)}});return a?tS(g):lv(g)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,a=0;a<t.length;a++){if(s=t[a],s===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let c=0;c<r.length;c++){if(this===r[c])return{fork:[],otherFork:[e,...r.slice(0,c)],common:[this,...t]};if(s===r[c])return{fork:[this,...t.slice(0,a)],otherFork:[e,...r.slice(0,c)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),a=t.otherFork.pop(),c=r._objects.indexOf(s),u=r._objects.indexOf(a);return c>-1&&c>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(ll.customProperties,this.constructor.customProperties||[]);let t;const r=Ee.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:c,shadow:u,strokeDashArray:d,left:f,top:g,originX:y,originY:v,width:S,height:x,strokeWidth:C,strokeLineCap:_,strokeDashOffset:b,strokeLineJoin:M,strokeUniform:L,strokeMiterLimit:z,scaleX:V,scaleY:$,angle:Y,flipX:G,flipY:se,opacity:ue,visible:_e,backgroundColor:Ce,fillRule:pe,paintFirst:de,globalCompositeOperation:we,skewX:Oe,skewY:Se}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const H=K=>Ye(K,r),Q=D(D({},rs(this,e)),{},{type:this.constructor.type,version:rh,originX:y,originY:v,left:H(f),top:H(g),width:H(S),height:H(x),fill:yg(a)?a.toObject():a,stroke:yg(c)?c.toObject():c,strokeWidth:H(C),strokeDashArray:d&&d.concat(),strokeLineCap:_,strokeDashOffset:b,strokeLineJoin:M,strokeUniform:L,strokeMiterLimit:H(z),scaleX:H(V),scaleY:H($),angle:H(Y),flipX:G,flipY:se,opacity:H(ue),shadow:u&&u.toObject(),visible:_e,backgroundColor:Ce,fillRule:pe,paintFirst:de,globalCompositeOperation:we,skewX:H(Oe),skewY:H(Se)},t?{clipPath:t}:null);return this.includeDefaultValues?Q:this._removeDefaultValues(Q)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Bh(e,(s,a)=>{if(a===De||a===jt||a==="type")return!0;const c=r[a];return s!==c&&!(Array.isArray(s)&&Array.isArray(c)&&s.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=ze(e,rS),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,a=ze(r,iS);return Ll(t,a).then(c=>s?(delete c[s],new this(t[s],c)):new this(c))}static fromObject(e,t){return this._fromObject(e,t)}};O(Bn,"stateProperties",H2),O(Bn,"cacheProperties",Jn),O(Bn,"ownDefaults",Y2),O(Bn,"type","FabricObject"),O(Bn,"colorProperties",[rt,Pt,"backgroundColor"]),O(Bn,"customProperties",[]),ee.setClass(Bn),ee.setClass(Bn,"object");const is=(o,e,t)=>(r,s,a,c)=>{const u=e(r,s,a,c);return u&&ev(o,D(D({},nv(r,s,a,c)),t)),u};function ss(o){return(e,t,r,s)=>{const{target:a,originX:c,originY:u}=t,d=a.getRelativeCenterPoint(),f=a.translateToOriginPoint(d,c,u),g=o(e,t,r,s);return a.setPositionByOrigin(f,t.originX,t.originY),g}}const Eg=is(io,ss((o,e,t,r)=>{const s=Uh(e,e.originX,e.originY,t,r);if(et(e.originX)===et(ye)||et(e.originX)===et(Qe)&&s.x<0||et(e.originX)===et(De)&&s.x>0){const{target:a}=e,c=a.strokeWidth/(a.strokeUniform?a.scaleX:1),u=tv(e)?2:1,d=a.width,f=Math.abs(s.x*u/a.scaleX)-c;return a.set("width",Math.max(f,1)),d!==a.width}return!1}));function sS(o,e,t,r,s){r=r||{};const a=this.sizeX||r.cornerSize||s.cornerSize,c=this.sizeY||r.cornerSize||s.cornerSize,u=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,d=u?Pt:rt,f=!u&&(r.cornerStrokeColor||s.cornerStrokeColor);let g,y=e,v=t;o.save(),o.fillStyle=r.cornerColor||s.cornerColor||"",o.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",a>c?(g=a,o.scale(1,c/a),v=t*a/c):c>a?(g=c,o.scale(a/c,1),y=e*c/a):g=a,o.beginPath(),o.arc(y,v,g/2,0,dl,!1),o[d](),f&&o.stroke(),o.restore()}function oS(o,e,t,r,s){r=r||{};const a=this.sizeX||r.cornerSize||s.cornerSize,c=this.sizeY||r.cornerSize||s.cornerSize,u=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,d=u?Pt:rt,f=!u&&(r.cornerStrokeColor||s.cornerStrokeColor),g=a/2,y=c/2;o.save(),o.fillStyle=r.cornerColor||s.cornerColor||"",o.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",o.translate(e,t);const v=s.getTotalAngle();o.rotate(Je(v)),o["".concat(d,"Rect")](-g,-y,a,c),f&&o.strokeRect(-g,-y,a,c),o.restore()}class ln{constructor(e){O(this,"visible",!0),O(this,"actionName",Fl),O(this,"angle",0),O(this,"x",0),O(this,"y",0),O(this,"offsetX",0),O(this,"offsetY",0),O(this,"sizeX",0),O(this,"sizeY",0),O(this,"touchSizeX",0),O(this,"touchSizeY",0),O(this,"cursorStyle","crosshair"),O(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var a;let{tl:c,tr:u,br:d,bl:f}=s;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&Ve.isPointInPolygon(r,[c,u,d,f])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new N(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,a,c){const u=Nh([go(r,s),mo({angle:e}),zh((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new N(-.5,-.5).transform(u),tr:new N(.5,-.5).transform(u),br:new N(.5,.5).transform(u),bl:new N(-.5,.5).transform(u)}}render(e,t,r,s,a){((s=s||{}).cornerStyle||a.cornerStyle)==="circle"?sS.call(this,e,t,r,s,a):oS.call(this,e,t,r,s,a)}}const aS=(o,e,t)=>t.lockRotation?xl:e.cursorStyle,lS=is(zm,ss((o,e,t,r)=>{let{target:s,ex:a,ey:c,theta:u,originX:d,originY:f}=e;const g=s.translateToOriginPoint(s.getRelativeCenterPoint(),d,f);if(dn(s,"lockRotation"))return!1;const y=Math.atan2(c-g.y,a-g.x),v=Math.atan2(r-g.y,t-g.x);let S=ii(v-y+u);if(s.snapAngle&&s.snapAngle>0){const C=s.snapAngle,_=s.snapThreshold||C,b=Math.ceil(S/C)*C,M=Math.floor(S/C)*C;Math.abs(S-M)<_?S=M:Math.abs(S-b)<_&&(S=b)}S<0&&(S=360+S),S%=360;const x=s.angle!==S;return s.angle=S,x}));function cv(o,e){const t=e.canvas,r=o[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function uv(o,e,t){const r=dn(o,"lockScalingX"),s=dn(o,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:a,height:c,strokeWidth:u}=o;return a===0&&u===0&&e!=="y"||c===0&&u===0&&e!=="x"}const cS=["e","se","s","sw","w","nw","n","ne","e"],Js=(o,e,t)=>{const r=cv(o,t);if(uv(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return xl;const s=rv(t,e);return"".concat(cS[s],"-resize")};function Yh(o,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,c=s.by,u=cv(o,a);let d,f,g,y,v,S;if(uv(a,c,u))return!1;if(e.gestureScale)f=e.scaleX*e.gestureScale,g=e.scaleY*e.gestureScale;else{if(d=Uh(e,e.originX,e.originY,t,r),v=c!=="y"?Math.sign(d.x||e.signX||1):1,S=c!=="x"?Math.sign(d.y||e.signY||1):1,e.signX||(e.signX=v),e.signY||(e.signY=S),dn(a,"lockScalingFlip")&&(e.signX!==v||e.signY!==S))return!1;if(y=a._getTransformedDimensions(),u&&!c){const _=Math.abs(d.x)+Math.abs(d.y),{original:b}=e,M=_/(Math.abs(y.x*b.scaleX/a.scaleX)+Math.abs(y.y*b.scaleY/a.scaleY));f=b.scaleX*M,g=b.scaleY*M}else f=Math.abs(d.x*a.scaleX/y.x),g=Math.abs(d.y*a.scaleY/y.y);tv(e)&&(f*=2,g*=2),e.signX!==v&&c!=="y"&&(e.originX=Sg(e.originX),f*=-1,e.signX=v),e.signY!==S&&c!=="x"&&(e.originY=Sg(e.originY),g*=-1,e.signY=S)}const x=a.scaleX,C=a.scaleY;return c?(c==="x"&&a.set(Mt,f),c==="y"&&a.set(Jt,g)):(!dn(a,"lockScalingX")&&a.set(Mt,f),!dn(a,"lockScalingY")&&a.set(Jt,g)),x!==a.scaleX||C!==a.scaleY}const Oa=is(Ml,ss((o,e,t,r)=>Yh(o,e,t,r))),uS=is(Ml,ss((o,e,t,r)=>Yh(o,e,t,r,{by:"x"}))),hS=is(Ml,ss((o,e,t,r)=>Yh(o,e,t,r,{by:"y"}))),dS=["target","ex","ey","skewingSide"],Vu={x:{counterAxis:"y",scale:Mt,skew:ts,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Jt,skew:ns,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},pS=["ns","nesw","ew","nwse"],fS=(o,e,t)=>{if(e.x!==0&&dn(t,"lockSkewingY")||e.y!==0&&dn(t,"lockSkewingX"))return xl;const r=rv(t,e)%4;return"".concat(pS[r],"-resize")};function hv(o,e,t,r,s){const{target:a}=t,{counterAxis:c,origin:u,lockSkewing:d,skew:f,flip:g}=Vu[o];if(dn(a,d))return!1;const{origin:y,flip:v}=Vu[c],S=et(t[y])*(a[v]?-1:1),x=-Math.sign(S)*(a[g]?-1:1),C=.5*-((a[f]===0&&Uh(t,ye,ye,r,s)[o]>0||a[f]>0?1:-1)*x)+.5;return is(Bm,ss((b,M,L,z)=>function(V,$,Y){let{target:G,ex:se,ey:ue,skewingSide:_e}=$,Ce=ze($,dS);const{skew:pe}=Vu[V],de=Y.subtract(new N(se,ue)).divide(new N(G.scaleX,G.scaleY))[V],we=G[pe],Oe=Ce[pe],Se=Math.tan(Je(Oe)),H=V==="y"?G._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:G._getTransformedDimensions({scaleX:1,scaleY:1}).y,Q=2*de*_e/Math.max(H,1)+Se,K=ii(Math.atan(Q));G.set(pe,K);const P=we!==G[pe];if(P&&V==="y"){const{skewX:B,scaleX:fe}=G,oe=G._getTransformedDimensions({skewY:we}),ve=G._getTransformedDimensions(),ge=B!==0?oe.x/ve.x:1;ge!==1&&G.set(Mt,ge*fe)}return P}(o,M,new N(L,z))))(e,D(D({},t),{},{[u]:C,skewingSide:x}),r,s)}const gS=(o,e,t,r)=>hv("x",o,e,t,r),mS=(o,e,t,r)=>hv("y",o,e,t,r);function zl(o,e){return o[e.canvas.altActionKey]}const ja=(o,e,t)=>{const r=zl(o,t);return e.x===0?r?ts:Jt:e.y===0?r?ns:Mt:""},Hi=(o,e,t)=>zl(o,t)?fS(0,e,t):Js(o,e,t),Ag=(o,e,t,r)=>zl(o,e.target)?mS(o,e,t,r):uS(o,e,t,r),Og=(o,e,t,r)=>zl(o,e.target)?gS(o,e,t,r):hS(o,e,t,r),dv=()=>({ml:new ln({x:-.5,y:0,cursorStyleHandler:Hi,actionHandler:Ag,getActionName:ja}),mr:new ln({x:.5,y:0,cursorStyleHandler:Hi,actionHandler:Ag,getActionName:ja}),mb:new ln({x:0,y:.5,cursorStyleHandler:Hi,actionHandler:Og,getActionName:ja}),mt:new ln({x:0,y:-.5,cursorStyleHandler:Hi,actionHandler:Og,getActionName:ja}),tl:new ln({x:-.5,y:-.5,cursorStyleHandler:Js,actionHandler:Oa}),tr:new ln({x:.5,y:-.5,cursorStyleHandler:Js,actionHandler:Oa}),bl:new ln({x:-.5,y:.5,cursorStyleHandler:Js,actionHandler:Oa}),br:new ln({x:.5,y:.5,cursorStyleHandler:Js,actionHandler:Oa}),mtr:new ln({x:0,y:-.5,actionHandler:lS,cursorStyleHandler:aS,offsetY:-40,withConnection:!0,actionName:Lh})}),vS=()=>({mr:new ln({x:.5,y:0,actionHandler:Eg,cursorStyleHandler:Hi,actionName:io}),ml:new ln({x:-.5,y:0,actionHandler:Eg,cursorStyleHandler:Hi,actionName:io})}),yS=()=>D(D({},dv()),vS());class ao extends Bn{static getDefaults(){return D(D({},super.getDefaults()),ao.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),ao.ownDefaults),this.setOptions(e)}static createControls(){return{controls:dv()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(Fl))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[a,c]=r[s],u=this.controls[a];if(u.shouldActivate(a,this,e,t?c.touchCorner:c.corner))return this.__corner=a,{key:a,control:u,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=go(t.x,t.y),s=mo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=ht(r,s),c=ht(e,a),u=ht(c,[1/e[0],0,0,1/e[3],0,0]),d=this.group?ml(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const f=this._calculateCurrentDimensions(d),g={};return this.forEachControl((y,v)=>{const S=y.positionHandler(f,u,this,y);g[v]=Object.assign(S,this._calcCornerCoords(y,S))}),g}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Je(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=D({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,a=D({hasBorders:r,hasControls:s},t),c=this.getViewportTransform(),u=a.hasBorders,d=a.hasControls,f=ht(c,this.calcTransformMatrix()),g=ml(f);e.save(),e.translate(g.translateX,g.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),e.rotate(Je(this.group?g.angle:this.angle)),u&&this.drawBorders(e,g,t),d&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const a=Wh(this.width,this.height,Rl(t)),c=this.isStrokeAccountedForInDimensions()?Ih:(this.strokeUniform?new N().scalarAdd(this.canvas?this.canvas.getZoom():1):new N(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=a.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,a)=>{s.withConnection&&s.getVisibility(this,a)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:a,cornerColor:c}=this,u=D({cornerStrokeColor:s,cornerDashArray:a,cornerColor:c},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((d,f)=>{if(d.getVisibility(this,f)){const g=this.oCoords[f];d.render(e,g.x,g.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,a=this.height+4;return t.clearRect(-s/2,-a/2,s,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function pv(o,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(o.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),o}O(ao,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class mt extends ao{}pv(mt,[iv]),ee.setClass(mt),ee.setClass(mt,"object");const xS=(o,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:a}=o.getImageData(e-r,t-r,s,s);for(let c=3;c<a.length;c+=4)if(a[c]>0)return!1;return!0};class fv{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new N(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new N(1/this.options.scaleX,1/this.options.scaleY):new N(1,1)}createSideVector(e,t){const r=lh(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new N(e);return t.y+=t.x*Math.tan(Je(this.options.skewY)),t.x+=t.y*Math.tan(Je(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const wS=new N;class $i extends fv{static getOrthogonalRotationFactor(e,t){const r=t?uh(e,t):U2(e);return Math.abs(r)<fo?-1:1}constructor(e,t,r,s){super(s),O(this,"AB",void 0),O(this,"AC",void 0),O(this,"alpha",void 0),O(this,"bisector",void 0),this.A=new N(e),this.B=new N(t),this.C=new N(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=uh(this.AB,this.AC),this.bisector=Vh(ov(this.AB.eq(wS)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),a=av(s),c=$i.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,r*c)}projectBevel(){const e=[];return(this.alpha%dl==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),a=this.options.strokeUniform?ch(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ch(s)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new N($i.getOrthogonalRotationFactor(this.bisector),$i.getOrthogonalRotationFactor(new N(this.bisector.y,this.bisector.x)));return[new N(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new N(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(a=>{kg(a,e,t)&&r.push(this.A.add(a))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:a,scaleX:c,scaleY:u,strokeUniform:d}=this.options,f=new N(Math.tan(Je(s)),Math.tan(Je(a))),g=this.strokeProjectionMagnitude,y=d?g/u/Math.sqrt(1/u**2+1/c**2*f.y**2):g/Math.sqrt(1+f.y**2),v=new N(Math.sqrt(Math.max(g**2-y**2,0)),y),S=d?g/Math.sqrt(1+f.x**2*(1/u)**2/(1/c+1/c*f.x*f.y)**2):g/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),x=new N(S,Math.sqrt(Math.max(g**2-S**2,0)));return[x,x.scalarMultiply(-1),v,v.scalarMultiply(-1)].map(C=>this.applySkew(d?C.multiply(this.strokeUniformScalar):C)).forEach(C=>{kg(C,e,t)&&r.push(this.applySkew(this.A).add(C))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%dl==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),a=e[t?1:0].subtract(r),c=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=eo(s,c)>0,d=u?s:a,f=u?a:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(d,f)):e.push(...this.projectRoundNoSkew(d,f)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class jg extends fv{constructor(e,t,r){super(r),this.A=new N(e),this.T=new N(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(av(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new N(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new $i(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new N(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(Vh(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const SS=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(o.length===0)return r;const s=o.reduce((a,c)=>(a[a.length-1].eq(c)||a.push(new N(c)),a),[new N(o[0])]);if(s.length===1)t=!0;else if(!t){const a=s[0],c=((u,d)=>{for(let f=u.length-1;f>=0;f--)if(d(u[f],f,u))return f;return-1})(s,u=>!u.eq(a));s.splice(c+1)}return s.forEach((a,c,u)=>{let d,f;c===0?(f=u[1],d=t?a:u[u.length-1]):c===u.length-1?(d=u[c-1],f=t?a:u[0]):(d=u[c-1],f=u[c+1]),t&&u.length===1?r.push(...new jg(a,a,e).project()):!t||c!==0&&c!==u.length-1?r.push(...new $i(a,d,f,e).project()):r.push(...new jg(a,c===0?f:d,e).project())}),r},Xh=o=>{const e={};return Object.keys(o).forEach(t=>{e[t]={},Object.keys(o[t]).forEach(r=>{e[t][r]=D({},o[t][r])})}),e},CS=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Gh=o=>{const e=[];for(let t,r=0;r<o.length;r++)(t=_S(o,r))!==!1&&e.push(t);return e},_S=(o,e)=>{const t=o.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return o.charAt(e);if(55296<=t&&t<=56319){if(o.length<=e+1)throw"High surrogate without following low surrogate";const s=o.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return o.charAt(e)+o.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=o.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},qh=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.fill!==e.fill||o.stroke!==e.stroke||o.strokeWidth!==e.strokeWidth||o.fontSize!==e.fontSize||o.fontFamily!==e.fontFamily||o.fontWeight!==e.fontWeight||o.fontStyle!==e.fontStyle||o.textBackgroundColor!==e.textBackgroundColor||o.deltaY!==e.deltaY||t&&(o.overline!==e.overline||o.underline!==e.underline||o.linethrough!==e.linethrough)},kS=(o,e)=>{const t=e.split(`
`),r=[];let s=-1,a={};o=Xh(o);for(let c=0;c<t.length;c++){const u=Gh(t[c]);if(o[c])for(let d=0;d<u.length;d++){s++;const f=o[c][d];f&&Object.keys(f).length>0&&(qh(a,f,!0)?r.push({start:s,end:s+1,style:f}):r[r.length-1].end++),a=f||{}}else s+=u.length,a={}}return r},bS=(o,e)=>{if(!Array.isArray(o))return Xh(o);const t=e.split(Rh),r={};let s=-1,a=0;for(let c=0;c<t.length;c++){const u=Gh(t[c]);for(let d=0;d<u.length;d++)s++,o[a]&&o[a].start<=s&&s<o[a].end&&(r[c]=r[c]||{},r[c][d]=D({},o[a].style),s===o[a].end-1&&a++)}return r},Dr=["display","transform",rt,"fill-opacity","fill-rule","opacity",Pt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Dg(o,e){const t=o.nodeName,r=o.getAttribute("class"),s=o.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+t,"i"),e=e.replace(c,""),s&&e.length&&(c=new RegExp("#"+s+a,"i"),e=e.replace(c,"")),r&&e.length){const u=r.split(" ");for(let d=u.length;d--;)c=new RegExp("\\."+u[d]+a,"i"),e=e.replace(c,"")}return e.length===0}function TS(o,e){let t=!0;const r=Dg(o,e.pop());return r&&e.length&&(t=function(s,a){let c,u=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&a.length;)u&&(c=a.pop()),u=Dg(s=s.parentElement,c);return a.length===0}(o,e)),r&&t&&e.length===0}const ES=o=>{var e;return(e=B2[o])!==null&&e!==void 0?e:o},AS=new RegExp("(".concat(si,")"),"gi"),OS=o=>o.replace(AS," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Pg,Mg,Fg,Rg,Lg,Ig,Ng;const wt="(".concat(si,")"),jS=String.raw(Pg||(Pg=jr(["(skewX)(",")"],["(skewX)\\(","\\)"])),wt),DS=String.raw(Mg||(Mg=jr(["(skewY)(",")"],["(skewY)\\(","\\)"])),wt),PS=String.raw(Fg||(Fg=jr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),wt,wt,wt),MS=String.raw(Rg||(Rg=jr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),wt,wt),FS=String.raw(Lg||(Lg=jr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),wt,wt),RS=String.raw(Ig||(Ig=jr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),wt,wt,wt,wt,wt,wt),$h="(?:".concat(RS,"|").concat(FS,"|").concat(PS,"|").concat(MS,"|").concat(jS,"|").concat(DS,")"),LS="(?:".concat($h,"*)"),IS=String.raw(Ng||(Ng=jr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),LS),NS=new RegExp(IS),zS=new RegExp($h),BS=new RegExp($h,"g");function hh(o){const e=[];if(!(o=OS(o).replace(/\s*([()])\s*/gi,"$1"))||o&&!NS.test(o))return[...St];for(const t of o.matchAll(BS)){const r=zS.exec(t[0]);if(!r)continue;let s=St;const a=r.filter(x=>!!x),[,c,...u]=a,[d,f,g,y,v,S]=u.map(x=>parseFloat(x));switch(c){case"translate":s=go(d,f);break;case Lh:s=mo({angle:d},{x:f,y:g});break;case Fl:s=zh(d,f);break;case ts:s=Gm(d);break;case ns:s=qm(d);break;case"matrix":s=[d,f,g,y,v,S]}e.push(s)}return Nh(e)}function WS(o,e,t,r){const s=Array.isArray(e);let a,c=e;if(o!==rt&&o!==Pt||e!==Dt){if(o==="strokeUniform")return e==="non-scaling-stroke";if(o==="strokeDashArray")c=e===Dt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(o==="transformMatrix")c=t&&t.transformMatrix?ht(t.transformMatrix,hh(e)):hh(e);else if(o==="visible")c=e!==Dt&&e!=="hidden",t&&t.visible===!1&&(c=!1);else if(o==="opacity")c=parseFloat(e),t&&t.opacity!==void 0&&(c*=t.opacity);else if(o==="textAnchor")c=e==="start"?De:e==="end"?Qe:ye;else if(o==="charSpacing")a=Gi(e,r)/r*1e3;else if(o==="paintFirst"){const u=e.indexOf(rt),d=e.indexOf(Pt);c=rt,(u>-1&&d>-1&&d<u||u===-1&&d>-1)&&(c=Pt)}else{if(o==="href"||o==="xlink:href"||o==="font"||o==="id")return e;if(o==="imageSmoothing")return e==="optimizeQuality";a=s?e.map(Gi):Gi(e,r)}}else c="";return!s&&isNaN(a)?c:a}function US(o,e){const t=o.match(z2);if(!t)return;const r=t[1],s=t[3],a=t[4],c=t[5],u=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(e.fontSize=Gi(a)),u&&(e.fontFamily=u),c&&(e.lineHeight=c==="normal"?1:c)}function VS(o,e){o.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function HS(o){const e={},t=o.getAttribute("style");return t&&(typeof t=="string"?VS(t,e):function(r,s){Object.entries(r).forEach(a=>{let[c,u]=a;u!==void 0&&(s[c.toLowerCase()]=u)})}(t,e)),e}const YS={stroke:"strokeOpacity",fill:"fillOpacity"};function Zn(o,e,t){if(!o)return{};let r,s={},a=Fh;o.parentNode&&_g.test(o.parentNode.nodeName)&&(s=Zn(o.parentElement,e,t),s.fontSize&&(r=a=Gi(s.fontSize)));const c=D(D(D({},e.reduce((f,g)=>{const y=o.getAttribute(g);return y&&(f[g]=y),f},{})),function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(const v in g)TS(f,v.split(" "))&&(y=D(D({},y),g[v]));return y}(o,t)),HS(o));c[Wu]&&o.setAttribute(Wu,c[Wu]),c[Bu]&&(r=Gi(c[Bu],a),c[Bu]="".concat(r));const u={};for(const f in c){const g=ES(f),y=WS(g,c[f],s,r);u[g]=y}u&&u.font&&US(u.font,u);const d=D(D({},s),u);return _g.test(o.nodeName)?d:function(f){const g=mt.getDefaults();return Object.entries(YS).forEach(y=>{let[v,S]=y;if(f[S]===void 0||f[v]==="")return;if(f[v]===void 0){if(!g[v])return;f[v]=g[v]}if(f[v].indexOf("url(")===0)return;const x=new Me(f[v]);f[v]=x.setAlpha(Ye(x.getAlpha()*f[S],2)).toRgba()}),f}(d)}const XS=["left","top","width","height","visible"],gv=["rx","ry"];class _n extends mt{static getDefaults(){return D(D({},super.getDefaults()),_n.ownDefaults)}constructor(e){super(),Object.assign(this,_n.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,a=-r/2,c=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,r/2):0,d=c!==0||u!==0;e.beginPath(),e.moveTo(s+c,a),e.lineTo(s+t-c,a),d&&e.bezierCurveTo(s+t-Cr*c,a,s+t,a+Cr*u,s+t,a+u),e.lineTo(s+t,a+r-u),d&&e.bezierCurveTo(s+t,a+r-Cr*u,s+t-Cr*c,a+r,s+t-c,a+r),e.lineTo(s+c,a+r),d&&e.bezierCurveTo(s+Cr*c,a+r,s,a+r-Cr*u,s,a+r-u),e.lineTo(s,a+u),d&&e.bezierCurveTo(s,a+Cr*u,s+Cr*c,a,s+c,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...gv,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=Zn(e,this.ATTRIBUTE_NAMES,r),{left:a=0,top:c=0,width:u=0,height:d=0,visible:f=!0}=s,g=ze(s,XS);return new this(D(D(D({},t),g),{},{left:a,top:c,width:u,height:d,visible:!!(f&&u&&d)}))}}O(_n,"type","Rect"),O(_n,"cacheProperties",[...Jn,...gv]),O(_n,"ownDefaults",{rx:0,ry:0}),O(_n,"ATTRIBUTE_NAMES",[...Dr,"x","y","rx","ry","width","height"]),ee.setClass(_n),ee.setSVGClass(_n);const Vn="initialization",wl="added",Kh="removed",Sl="imperative",mv=(o,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:a,group:c}=e,u=c&&c!==o?Il(c.calcTransformMatrix(),o.calcTransformMatrix()):null,d=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),f=!e.isStrokeAccountedForInDimensions(),g=t&&f?R2(new N(r,r),void 0,o.calcTransformMatrix()):Ih,y=!t&&f?r:0,v=Wh(s+y,a+y,Nh([u,e.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[d.subtract(v),d.add(v)]};class Bl{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===Vn||t===Sl||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==Vn&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===Sl&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:c,width:u,height:d}=Xn(e.map(y=>mv(s,y)).reduce((y,v)=>y.concat(v),[])),f=new N(u,d),g=new N(a,c).add(f.scalarDivide(2));if(r===Vn){const y=this.getInitialSize(t,{size:f,center:g});return{center:g,relativeCorrection:new N(0,0),size:y}}return{center:g.transform(s.calcOwnMatrix()),size:f}}}O(Bl,"type","strategy");class dh extends Bl{shouldPerformLayout(e){return!0}}O(dh,"type","fit-content"),ee.setClass(dh);const GS=["strategy"],qS=["target","strategy","bubbles","prevStrategy"],vv="layoutManager";class lo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new dh;O(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=D(D({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[fl,Nm,io,zm,Ml,Bm,pl,w2,S2].map(s=>e.on(s,a=>this.performLayout(s===fl?{type:"object_modified",trigger:s,e:a,target:r}:{type:"object_modifying",trigger:s,e:a,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===Vn||r===wl?this.subscribeTargets(e):r===Kh&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===Sl&&e.deep){const a=ze(e,GS);t.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout(D(D({},a),{},{bubbles:!1,target:c})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,a=r.calcLayoutResult(e,t.getObjects());if(!a)return;const c=s===Vn?new N:t.getRelativeCenterPoint(),{center:u,correction:d=new N,relativeCorrection:f=new N}=a,g=c.subtract(u).add(d).transform(s===Vn?St:hn(t.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:c,nextCenter:u,offset:g}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:a}=t;var c,u;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===Vn?r.set({left:(c=e.x)!==null&&c!==void 0?c:a.x+s.x*et(r.originX),top:(u=e.y)!==null&&u!==void 0?u:a.y+s.y*et(r.originY)}):(r.setPositionByOrigin(a,ye,ye),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:a,prevStrategy:c}=e,u=ze(e,qS),{canvas:d}=r;r.fire("layout:after",{context:e,result:t}),d&&d.fire("object:layout:after",{context:e,result:t,target:r});const f=r.parent;a&&f!=null&&f.layoutManager&&((u.path||(u.path=[])).push(r),f.layoutManager.performLayout(D(D({},u),{},{target:f}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:vv,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ee.setClass(lo,vv);const $S=["type","objects","layoutManager"];class KS extends lo{performLayout(){}}class ri extends Wm(mt){static getDefaults(){return D(D({},super.getDefaults()),ri.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),O(this,"_activeObjects",[]),O(this,"__objectSelectionTracker",void 0),O(this,"__objectSelectionDisposer",void 0),Object.assign(this,ri.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new lo,this.layoutManager.performLayout({type:Vn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(br("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(br("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...s);return this._onAfterObjectsChange(wl,s),a}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const a=this._filterObjectsBeforeEnteringGroup(r),c=super.insertAt(e,...a);return this._onAfterObjectsChange(wl,a),c}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Kh,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const a=s.indexOf(r);a>-1&&(s.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&yl(e,ht(hn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(yl(e,ht(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=mt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var s;const c=this._objects[a];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&c.group!==this?(e.save(),e.transform(...hn(this.calcTransformMatrix())),c.render(e),e.restore()):c.group===this&&c.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(D({target:this,type:Sl},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const a=s.includeDefaultValues;s.includeDefaultValues=r;const c=s[e||"toObject"](t);return s.includeDefaultValues=a,c})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return D(D(D({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=_n.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:a}=e,c=ze(e,$S);return Promise.all([so(s,t),Ll(c,t)]).then(u=>{let[d,f]=u;const g=new this(d,D(D(D({},c),f),{},{layoutManager:new KS}));if(a){const y=ee.getClass(a.type),v=ee.getClass(a.strategy);g.layoutManager=new y(new v)}else g.layoutManager=new lo;return g.layoutManager.subscribeTargets({type:Vn,target:g,targets:g.getObjects()}),g.setCoords(),g})}}O(ri,"type","Group"),O(ri,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ee.setClass(ri);const QS=(o,e)=>Math.min(e.width/o.width,e.height/o.height),JS=(o,e)=>Math.max(e.width/o.width,e.height/o.height),ph="\\s*,?\\s*",Qs="".concat(ph,"(").concat(si,")"),ZS="".concat(Qs).concat(Qs).concat(Qs).concat(ph,"([01])").concat(ph,"([01])").concat(Qs).concat(Qs),eC={m:"l",M:"L"},tC=(o,e,t,r,s,a,c,u,d,f,g)=>{const y=$n(o),v=Kn(o),S=$n(e),x=Kn(e),C=t*s*S-r*a*x+c,_=r*s*S+t*a*x+u;return["C",f+d*(-t*s*v-r*a*y),g+d*(-r*s*v+t*a*y),C+d*(t*s*x+r*a*S),_+d*(r*s*x-t*a*S),C,_]},zg=(o,e,t,r)=>{const s=Math.atan2(e,o),a=Math.atan2(r,t);return a>=s?a-s:2*Math.PI-(s-a)};function Bg(o,e,t,r,s,a,c,u){let d;if(Ee.cachesBoundsOfCurve&&(d=[...arguments].join(),Zs.boundsOfCurveCache[d]))return Zs.boundsOfCurveCache[d];const f=Math.sqrt,g=Math.abs,y=[],v=[[0,0],[0,0]];let S=6*o-12*t+6*s,x=-3*o+9*t-9*s+3*c,C=3*t-3*o;for(let z=0;z<2;++z){if(z>0&&(S=6*e-12*r+6*a,x=-3*e+9*r-9*a+3*u,C=3*r-3*e),g(x)<1e-12){if(g(S)<1e-12)continue;const se=-C/S;0<se&&se<1&&y.push(se);continue}const V=S*S-4*C*x;if(V<0)continue;const $=f(V),Y=(-S+$)/(2*x);0<Y&&Y<1&&y.push(Y);const G=(-S-$)/(2*x);0<G&&G<1&&y.push(G)}let _=y.length;const b=_,M=yv(o,e,t,r,s,a,c,u);for(;_--;){const{x:z,y:V}=M(y[_]);v[0][_]=z,v[1][_]=V}v[0][b]=o,v[1][b]=e,v[0][b+1]=c,v[1][b+1]=u;const L=[new N(Math.min(...v[0]),Math.min(...v[1])),new N(Math.max(...v[0]),Math.max(...v[1]))];return Ee.cachesBoundsOfCurve&&(Zs.boundsOfCurveCache[d]=L),L}const nC=(o,e,t)=>{let[r,s,a,c,u,d,f,g]=t;const y=((v,S,x,C,_,b,M)=>{if(x===0||C===0)return[];let L=0,z=0,V=0;const $=Math.PI,Y=M*Mh,G=Kn(Y),se=$n(Y),ue=.5*(-se*v-G*S),_e=.5*(-se*S+G*v),Ce=x**2,pe=C**2,de=_e**2,we=ue**2,Oe=Ce*pe-Ce*de-pe*we;let Se=Math.abs(x),H=Math.abs(C);if(Oe<0){const Fe=Math.sqrt(1-Oe/(Ce*pe));Se*=Fe,H*=Fe}else V=(_===b?-1:1)*Math.sqrt(Oe/(Ce*de+pe*we));const Q=V*Se*_e/H,K=-V*H*ue/Se,P=se*Q-G*K+.5*v,B=G*Q+se*K+.5*S;let fe=zg(1,0,(ue-Q)/Se,(_e-K)/H),oe=zg((ue-Q)/Se,(_e-K)/H,(-ue-Q)/Se,(-_e-K)/H);b===0&&oe>0?oe-=2*$:b===1&&oe<0&&(oe+=2*$);const ve=Math.ceil(Math.abs(oe/$*2)),ge=[],ke=oe/ve,be=8/3*Math.sin(ke/4)*Math.sin(ke/4)/Math.sin(ke/2);let je=fe+ke;for(let Fe=0;Fe<ve;Fe++)ge[Fe]=tC(fe,je,se,G,Se,H,P,B,be,L,z),L=ge[Fe][5],z=ge[Fe][6],fe=je,je+=ke;return ge})(f-o,g-e,s,a,u,d,c);for(let v=0,S=y.length;v<S;v++)y[v][1]+=o,y[v][2]+=e,y[v][3]+=o,y[v][4]+=e,y[v][5]+=o,y[v][6]+=e;return y},rC=o=>{let e=0,t=0,r=0,s=0;const a=[];let c,u=0,d=0;for(const f of o){const g=[...f];let y;switch(g[0]){case"l":g[1]+=e,g[2]+=t;case"L":e=g[1],t=g[2],y=["L",e,t];break;case"h":g[1]+=e;case"H":e=g[1],y=["L",e,t];break;case"v":g[1]+=t;case"V":t=g[1],y=["L",e,t];break;case"m":g[1]+=e,g[2]+=t;case"M":e=g[1],t=g[2],r=g[1],s=g[2],y=["M",e,t];break;case"c":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t,g[5]+=e,g[6]+=t;case"C":u=g[3],d=g[4],e=g[5],t=g[6],y=["C",g[1],g[2],u,d,e,t];break;case"s":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"S":c==="C"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=g[3],t=g[4],y=["C",u,d,g[1],g[2],e,t],u=y[3],d=y[4];break;case"q":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"Q":u=g[1],d=g[2],e=g[3],t=g[4],y=["Q",u,d,e,t];break;case"t":g[1]+=e,g[2]+=t;case"T":c==="Q"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=g[1],t=g[2],y=["Q",u,d,e,t];break;case"a":g[6]+=e,g[7]+=t;case"A":nC(e,t,g).forEach(v=>a.push(v)),e=g[6],t=g[7];break;case"z":case"Z":e=r,t=s,y=["Z"]}y?(a.push(y),c=y[0]):c=""}return a},Cl=(o,e,t,r)=>Math.sqrt((t-o)**2+(r-e)**2),yv=(o,e,t,r,s,a,c,u)=>d=>{const f=d**3,g=(S=>3*S**2*(1-S))(d),y=(S=>3*S*(1-S)**2)(d),v=(S=>(1-S)**3)(d);return new N(c*f+s*g+t*y+o*v,u*f+a*g+r*y+e*v)},xv=o=>o**2,wv=o=>2*o*(1-o),Sv=o=>(1-o)**2,iC=(o,e,t,r,s,a,c,u)=>d=>{const f=xv(d),g=wv(d),y=Sv(d),v=3*(y*(t-o)+g*(s-t)+f*(c-s)),S=3*(y*(r-e)+g*(a-r)+f*(u-a));return Math.atan2(S,v)},sC=(o,e,t,r,s,a)=>c=>{const u=xv(c),d=wv(c),f=Sv(c);return new N(s*u+t*d+o*f,a*u+r*d+e*f)},oC=(o,e,t,r,s,a)=>c=>{const u=1-c,d=2*(u*(t-o)+c*(s-t)),f=2*(u*(r-e)+c*(a-r));return Math.atan2(f,d)},Wg=(o,e,t)=>{let r=new N(e,t),s=0;for(let a=1;a<=100;a+=1){const c=o(a/100);s+=Cl(r.x,r.y,c.x,c.y),r=c}return s},aC=(o,e)=>{let t,r=0,s=0,a={x:o.x,y:o.y},c=D({},a),u=.01,d=0;const f=o.iterator,g=o.angleFinder;for(;s<e&&u>1e-4;)c=f(r),d=r,t=Cl(a.x,a.y,c.x,c.y),t+s>e?(r-=u,u/=2):(a=c,r+=u,s+=t);return D(D({},c),{},{angle:g(d)})},Cv=o=>{let e,t,r=0,s=0,a=0,c=0,u=0;const d=[];for(const f of o){const g={x:s,y:a,command:f[0],length:0};switch(f[0]){case"M":t=g,t.x=c=s=f[1],t.y=u=a=f[2];break;case"L":t=g,t.length=Cl(s,a,f[1],f[2]),s=f[1],a=f[2];break;case"C":e=yv(s,a,f[1],f[2],f[3],f[4],f[5],f[6]),t=g,t.iterator=e,t.angleFinder=iC(s,a,f[1],f[2],f[3],f[4],f[5],f[6]),t.length=Wg(e,s,a),s=f[5],a=f[6];break;case"Q":e=sC(s,a,f[1],f[2],f[3],f[4]),t=g,t.iterator=e,t.angleFinder=oC(s,a,f[1],f[2],f[3],f[4]),t.length=Wg(e,s,a),s=f[3],a=f[4];break;case"Z":t=g,t.destX=c,t.destY=u,t.length=Cl(s,a,c,u),s=c,a=u}r+=t.length,d.push(t)}return d.push({length:r,x:s,y:a}),d},lC=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cv(o),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],a=e/s.length,c=o[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return D(D({},new N(s.x,s.y).lerp(new N(s.destX,s.destY),a)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return D(D({},new N(s.x,s.y).lerp(new N(c[1],c[2]),a)),{},{angle:Math.atan2(c[2]-s.y,c[1]-s.x)});case"C":case"Q":return aC(s,e)}},cC=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Ug=new RegExp(ZS,"g"),uC=new RegExp(si,"gi"),hC={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},dC=o=>{var e;const t=[],r=(e=o.match(cC))!==null&&e!==void 0?e:[];for(const s of r){const a=s[0];if(a==="z"||a==="Z"){t.push([a]);continue}const c=hC[a.toLowerCase()];let u=[];if(a==="a"||a==="A"){Ug.lastIndex=0;for(let d=null;d=Ug.exec(s);)u.push(...d.slice(1))}else u=s.match(uC)||[];for(let d=0;d<u.length;d+=c){const f=new Array(c),g=eC[a];f[0]=d>0&&g?g:a;for(let y=0;y<c;y++)f[y+1]=parseFloat(u[d+y]);t.push(f)}}return t},pC=(o,e)=>o.map(t=>t.map((r,s)=>s===0||e===void 0?r:Ye(r,e)).join(" ")).join(" ");function fh(o,e){const t=o.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,a]=r;return t.setProperty(s,a)}))}class fC extends Jm{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),O(this,"upper",void 0),O(this,"container",void 0);const{el:s}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(r),s.parentNode&&s.parentNode.replaceChild(c,s),c.append(s,a),this.container=c}createUpperCanvas(){const{el:e}=this.lower,t=fn();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=es().createElement("div");return e.setAttribute("data-fabric","wrapper"),fh(e,{position:"relative"}),wg(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;fh(e,D(D({},r),{},{"touch-action":s?"manipulation":Dt})),wg(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;Qm(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),sh(this.upper.el,e),sh(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Tn().dispose(this.upper.el),delete this.upper,delete this.container}}class Wl extends vo{constructor(){super(...arguments),O(this,"targets",[]),O(this,"_hoveredTargets",[]),O(this,"_objectsToRender",void 0),O(this,"_currentTransform",null),O(this,"_groupSelector",null),O(this,"contextTopDirty",!1)}static getDefaults(){return D(D({},super.getDefaults()),Wl.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new fC(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+s,-r+s),a.transform(...this.viewportTransform);const c=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=c,a.restore();const u=Math.round(s*this.getRetinaScaling());return xS(a,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===Fl||t===Mt||t===Jt||t===io?s=this.centeredScaling||e.centeredScaling:t===Lh&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Qe:["mr","tr","br"].includes(t)&&(r.x=De),["tl","mt","tr"].includes(t)?r.y=ih:["bl","mb","br"].includes(t)&&(r.y=jt)),r}_setupCurrentTransform(e,t,r){var s;const a=t.group?qi(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:c="",control:u}=t.getActiveControl()||{},d=r&&u?(s=u.getActionHandler(e,t,u))===null||s===void 0?void 0:s.bind(u):N2,f=((S,x,C,_)=>{if(!x||!S)return"drag";const b=_.controls[x];return b.getActionName(C,b,_)})(r,c,e,t),g=e[this.centeredKey],y=this._shouldCenterTransform(t,f,g)?{x:ye,y:ye}:this._getOriginFromCorner(t,c),v={target:t,action:f,actionHandler:d,actionPerformed:!1,corner:c,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:y.x,originY:y.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Je(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:g,original:D(D({},Zm(t)),{},{originX:y.x,originY:y.y})};this._currentTransform=v,this.fire("before:transform",{e,transform:v})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:a}=this._groupSelector,c=new N(t,r).transform(this.viewportTransform),u=new N(t+s,r+a).transform(this.viewportTransform),d=this.selectionLineWidth/2;let f=Math.min(c.x,u.x),g=Math.min(c.y,u.y),y=Math.max(c.x,u.x),v=Math.max(c.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(f,g,y-f,v-g)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,f+=d,g+=d,y-=d,v-=d,mt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(f,g,y-f,v-g))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,oh(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&c&&c!==r?(this.targets=a,r):c}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),a=e.padding/s;if(a){const[c,u,d,f]=r,g=Math.atan2(u.y-c.y,u.x-c.x),y=$n(g)*a,v=Kn(g)*a,S=y+v,x=y-v;r=[new N(c.x-x,c.y-S),new N(u.x+S,u.y-x),new N(d.x+x,d.y+S),new N(f.x-S,f.y+x)]}return Ve.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,qi(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(sl(s)&&s.subTargetCheck){const a=this._searchPossibleTargets(s._objects,t);a&&this.targets.push(a)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&sl(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let a=s.length-1;a>0;a--){const c=s[a];if(!sl(c)||!c.interactive)return c}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let a=D2(e),c=s.width||0,u=s.height||0;c&&u||(jt in s&&ih in s&&(u=Math.abs(s.top-s.bottom)),Qe in s&&De in s&&(c=Math.abs(s.right-s.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=qi(a,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(a.x/=d,a.y/=d);const f=c===0||u===0?new N(1,1):new N(r.width/c,r.height/u);return a.multiply(f)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=fn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Kr(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const a=this.getActiveObjects(),c=[],u=[];e.forEach(d=>{a.includes(d)||(r=!0,d.fire("deselected",{e:t,target:d}),u.push(d))}),a.forEach(d=>{e.includes(d)||(r=!0,d.fire("selected",{e:t,target:d}),c.push(d))}),e.length>0&&a.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:c,deselected:u})):a.length>0?(s=!0,this.fire("selection:created",{e:t,selected:c})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:u})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Kr(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Kr(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(fl,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Kr(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,r);return e.set(s),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Kr(t)&&this._activeObject===t){const r=rs(e,["angle","flipX","flipY",De,Mt,Jt,ts,ns,jt]);return M2(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}O(Wl,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class gC{constructor(e){O(this,"targets",[]),O(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Vi(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const mC=["target","oldTarget","fireCanvas","e"],zt={passive:!1},Ui=(o,e)=>{const t=o.getViewportPoint(e),r=o.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},_r=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return o.addEventListener(...t)},$t=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return o.removeEventListener(...t)},vC={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class gh extends Wl{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),O(this,"_isClick",void 0),O(this,"textEditingManager",new gC(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(_r,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(Km(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,zt),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,zt)}removeListeners(){this.addOrRemove($t,"remove");const e=this._getEventPrefix(),t=un(this.upperCanvasEl);$t(t,"".concat(e,"up"),this._onMouseUp),$t(t,"touchend",this._onTouchEnd,zt),$t(t,"".concat(e,"move"),this._onMouseMove,zt),$t(t,"touchmove",this._onMouseMove,zt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=D({e},Ui(this,e));this.fire("mouse:out",D(D({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",D({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",D(D({},r),{},{target:s})),s&&s.fire("mouseout",D({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",D({e},Ui(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void _r(this.upperCanvasEl,"drag",this._onDragProgress)}ah(e)}_renderDragEffects(e,t,r){let s=!1;const a=this._dropTarget;a&&a!==t&&a!==r&&(a.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),t&&(c.save(),t.transform(c),t.renderDragSourceEffect(e),c.restore(),s=!0),r&&(c.save(),r.transform(c),r.renderDropTargetEffect(e),c.restore(),s=!0),c.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Dt,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};$t(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),a=this._dragSource,c={e,target:r,subTargets:s,dragSource:a,canDrop:!1,dropTarget:void 0};let u;this.fire(t,c),this._fireEnterLeaveEvents(r,c),r&&(r.canDrop(e)&&(u=r),r.fire(t,c));for(let d=0;d<s.length;d++){const f=s[d];f.canDrop(e)&&(u=f),f.fire(t,c)}this._renderDragEffects(e,a,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",D({e,target:t,subTargets:r,dragSource:this._dragSource},Ui(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&ah(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,a=this._getEventPrefix(),c=un(s);_r(c,"touchend",this._onTouchEnd,zt),t&&_r(c,"touchmove",this._onMouseMove,zt),$t(s,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();$t(t,"".concat(r,"move"),this._onMouseMove,zt);const s=un(t);_r(s,"".concat(r,"up"),this._onMouseUp),_r(s,"".concat(r,"move"),this._onMouseMove,zt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=un(this.upperCanvasEl);$t(r,"touchend",this._onTouchEnd,zt),$t(r,"touchmove",this._onMouseMove,zt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{_r(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=un(this.upperCanvasEl);$t(s,"".concat(r,"up"),this._onMouseUp),$t(s,"".concat(r,"move"),this._onMouseMove,zt),_r(t,"".concat(r,"move"),this._onMouseMove,zt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,a=this._target,{button:c}=e;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,d,f=!1;if(r&&(this._finalizeCurrentTransform(e),f=r.actionPerformed),!s){const g=a===this._activeObject;this.handleSelection(e),f||(f=this._shouldRender(a)||!g&&a===this._activeObject)}if(a){const g=a.findControl(this.getViewportPoint(e),oh(e)),{key:y,control:v}=g||{};if(d=y,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),f=!0;else if(v){const S=v.getMouseUpHandler(e,a,v);S&&(u=this.getScenePoint(e),S.call(v,e,r,u.x,u.y))}a.isMoving=!1}if(r&&(r.target!==a||r.corner!==d)){const g=r.target&&r.target.controls[r.corner],y=g&&g.getMouseUpHandler(e,r.target,g);u=u||this.getScenePoint(e),y&&y.call(g,e,r,u.x,u.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let a=0;a<s.length;a++)s[a]!==r&&s[a].fire(e,t);return t}_handleEvent(e,t){const r=this._target,s=this.targets||[],a=D(D({e,target:r,subTargets:s},Ui(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),a),r&&r.fire("mouse".concat(t),a);for(let c=0;c<s.length;c++)s[c]!==r&&s[c].fire("mouse".concat(t),a)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),a=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,a=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const c=this.getScenePoint(e);this._groupSelector={x:c.x,y:c.y,deltaY:0,deltaX:0}}if(t){const c=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),oh(e));if(t===this._activeObject&&(u||!a)){this._setupCurrentTransform(e,t,c);const d=u?u.control:void 0,f=this.getScenePoint(e),g=d&&d.getMouseDownHandler(e,t,d);g&&g.call(d,e,this._currentTransform,f.x,f.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=qi(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,a=this.targets,c=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("mouse",{e,target:a[u],oldTarget:s[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,a=this.targets,c=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("drag",D(D({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("drag",D(D({},t),{},{target:a[u],oldTarget:s[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:a,e:c}=t,u=ze(t,mC);const{targetIn:d,targetOut:f,canvasIn:g,canvasOut:y}=vC[e],v=s!==r;if(s&&v){const S=D(D({},u),{},{e:c,target:s,nextTarget:r},Ui(this,c));a&&this.fire(y,S),s.fire(f,S)}if(r&&v){const S=D(D({},u),{},{e:c,target:r,previousTarget:s},Ui(this,c));a&&this.fire(g,S),r.fire(d,S)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,a=s.group?qi(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,a),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:a,target:c}=t,u=!!a&&a(e,t,r.x,r.y);u&&c.setCoords(),s==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=Kr(this._activeObject)?this._activeObject:null,a=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(a){const c=a.control;this.setCursor(c.cursorStyleHandler(e,c,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(c=>{r=c.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=Kr(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const a=r.getObjects();if(t===r){const c=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,c)||this.searchPossibleTargets(this._objects,c))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{r.isEditing&&r.exitEditing();const a=new(ee.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(r,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:a}=this._groupSelector,c=new N(t,r),u=c.add(new N(s,a)),d=c.min(u),f=c.max(u).subtract(d),g=this.collectObjects({left:d.x,top:d.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),y=c.eq(u)?g[0]?[g[0]]:[]:g.length>1?g.filter(v=>!v.onSelect({e})).reverse():g;if(y.length===1)this.setActiveObject(y[0],e);else if(y.length>1){const v=ee.getClass("ActiveSelection");this.setActiveObject(new v(y,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const _v={x1:0,y1:0,x2:0,y2:0},yC=D(D({},_v),{},{r1:0,r2:0}),Yi=(o,e)=>isNaN(o)&&typeof e=="number"?e:o,xC=/^(\d+\.\d+)%|(\d+)%$/;function kv(o){return o&&xC.test(o)}function bv(o,e){const t=typeof o=="number"?o:typeof o=="string"?parseFloat(o)/(kv(o)?100:1):NaN;return Ki(0,Yi(t,e),1)}const wC=/\s*;\s*/,SC=/\s*:\s*/;function CC(o,e){let t,r;const s=o.getAttribute("style");if(s){const c=s.split(wC);c[c.length-1]===""&&c.pop();for(let u=c.length;u--;){const[d,f]=c[u].split(SC).map(g=>g.trim());d==="stop-color"?t=f:d==="stop-opacity"&&(r=f)}}const a=new Me(t||o.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:bv(o.getAttribute("offset"),0),color:a.toRgb(),opacity:Yi(parseFloat(r||o.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function _C(o,e){const t=[],r=o.getElementsByTagName("stop"),s=bv(e,1);for(let a=r.length;a--;)t.push(CC(r[a],s));return t}function Tv(o){return o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Ev(o){return o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function an(o,e){return o.getAttribute(e)}function kC(o,e){return function(t,r){let s,{width:a,height:c,gradientUnits:u}=r;return Object.keys(t).reduce((d,f)=>{const g=t[f];return g==="Infinity"?s=1:g==="-Infinity"?s=0:(s=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&kv(g)&&(s*=.01,u==="pixels"&&(f!=="x1"&&f!=="x2"&&f!=="r2"||(s*=a),f!=="y1"&&f!=="y2"||(s*=c)))),d[f]=s,d},{})}(Tv(o)==="linear"?function(t){return{x1:an(t,"x1")||0,y1:an(t,"y1")||0,x2:an(t,"x2")||"100%",y2:an(t,"y2")||0}}(o):function(t){return{x1:an(t,"fx")||an(t,"cx")||"50%",y1:an(t,"fy")||an(t,"cy")||"50%",r1:0,x2:an(t,"cx")||"50%",y2:an(t,"cy")||"50%",r2:an(t,"r")||"50%"}}(o),D(D({},e),{},{gradientUnits:Ev(o)}))}class Da{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:a=[],offsetX:c=0,offsetY:u=0,gradientTransform:d,id:f}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:D(D({},t==="radial"?yC:_v),s),colorStops:a,offsetX:c,offsetY:u,gradientTransform:d,id:f?"".concat(f,"_").concat(Tr()):Tr()})}addColorStop(e){for(const t in e){const r=new Me(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return D(D({},rs(this,e)),{},{type:this.type,coords:D({},this.coords),colorStops:this.colorStops.map(t=>D({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():St.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map(y=>D({},y)).sort((y,v)=>y.offset-v.offset);let u=-this.offsetX,d=-this.offsetY;var f;a==="objectBoundingBox"?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),(f=e)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,d-=e.pathOffset.y),s[4]-=u,s[5]-=d;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(vl(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:y,y1:v,x2:S,y2:x}=this.coords;r.push("<linearGradient ",g,' x1="',y,'" y1="',v,'" x2="',S,'" y2="',x,`">
`)}else if(this.type==="radial"){const{x1:y,y1:v,x2:S,y2:x,r1:C,r2:_}=this.coords,b=C>_;r.push("<radialGradient ",g,' cx="',b?y:S,'" cy="',b?v:x,'" r="',b?C:_,'" fx="',b?S:y,'" fy="',b?x:v,`">
`),b&&(c.reverse(),c.forEach(L=>{L.offset=1-L.offset}));const M=Math.min(C,_);if(M>0){const L=M/Math.max(C,_);c.forEach(z=>{z.offset+=L*(1-z.offset)})}}return c.forEach(y=>{let{color:v,offset:S,opacity:x}=y;r.push("<stop ",'offset="',100*S+"%",'" style="stop-color:',v,x!==void 0?";stop-opacity: "+x:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:a,r1:c,r2:u}=this.coords,d=this.type==="linear"?e.createLinearGradient(t,r,s,a):e.createRadialGradient(t,r,c,s,a,u);return this.colorStops.forEach(f=>{let{color:g,opacity:y,offset:v}=f;d.addColorStop(v,y!==void 0?new Me(g).setAlpha(y).toRgba():g)}),d}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(D(D({},e),{},{colorStops:t?t.map(s=>D({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=Ev(e),a=t._findCenterFromElement();return new this(D({id:e.getAttribute("id")||void 0,type:Tv(e),coords:kC(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:_C(e,r.opacity),gradientUnits:s,gradientTransform:hh(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}O(Da,"type","Gradient"),ee.setClass(Da,"gradient"),ee.setClass(Da,"linear"),ee.setClass(Da,"radial");const bC=["type","source","patternTransform"];class Hu{get type(){return"pattern"}set type(e){br("warn","Setting type has no effect",e)}constructor(e){O(this,"repeat","repeat"),O(this,"offsetX",0),O(this,"offsetY",0),O(this,"crossOrigin",""),this.id=Tr(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return D(D({},rs(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Ye(this.offsetX,Ee.NUM_FRACTION_DIGITS),offsetY:Ye(this.offsetY,Ee.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:a,id:c}=this,u=Yi(this.offsetX/t,0),d=Yi(this.offsetY/r,0),f=a==="repeat-y"||a==="no-repeat"?1+Math.abs(u||0):Yi(s.width/t,0),g=a==="repeat-x"||a==="no-repeat"?1+Math.abs(d||0):Yi(s.height/r,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(u,'" y="').concat(d,'" width="').concat(f,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:a}=e,c=ze(e,bC);const u=await al(s,D(D({},t),{},{crossOrigin:c.crossOrigin}));return new this(D(D({},c),{},{patternTransform:a&&a.slice(0),source:u}))}}O(Hu,"type","Pattern"),ee.setClass(Hu),ee.setClass(Hu,"pattern");const TC=["path","left","top"],EC=["d"];class Qr extends mt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:a}=t,c=ze(t,TC);super(),Object.assign(this,Qr.ownDefaults),this.setOptions(c),this._setPath(e||[],!0),typeof s=="number"&&this.set(De,s),typeof a=="number"&&this.set(jt,a)}_setPath(e,t){this.path=rC(Array.isArray(e)?e:dC(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new N(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=pC(this.path,Ee.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Ee.NUM_FRACTION_DIGITS;return" translate(".concat(Ye(-this.pathOffset.x,e),", ").concat(Ye(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,ye,ye)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,a=0;for(const c of this.path)switch(c[0]){case"L":s=c[1],a=c[2],e.push({x:t,y:r},{x:s,y:a});break;case"M":s=c[1],a=c[2],t=s,r=a;break;case"C":e.push(...Bg(s,a,c[1],c[2],c[3],c[4],c[5],c[6])),s=c[5],a=c[6];break;case"Q":e.push(...Bg(s,a,c[1],c[2],c[1],c[2],c[3],c[4])),s=c[3],a=c[4];break;case"Z":s=t,a=r}return Xn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return D(D({},e),{},{pathOffset:new N(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=Zn(e,this.ATTRIBUTE_NAMES,r),{d:a}=s;return new this(a,D(D(D({},ze(s,EC)),t),{},{left:void 0,top:void 0}))}}O(Qr,"type","Path"),O(Qr,"cacheProperties",[...Jn,"path","fillRule"]),O(Qr,"ATTRIBUTE_NAMES",[...Dr,"d"]),ee.setClass(Qr),ee.setSVGClass(Qr);const AC=["left","top","radius"],Av=["radius","startAngle","endAngle","counterClockwise"];class Wn extends mt{static getDefaults(){return D(D({},super.getDefaults()),Wn.ownDefaults)}constructor(e){super(),Object.assign(this,Wn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Je(this.startAngle),Je(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Mt)}getRadiusY(){return this.get("radius")*this.get(Jt)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Av,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Je(this.startAngle),s=Je(this.endAngle),a=$n(r)*t,c=Kn(r)*t,u=$n(s)*t,d=Kn(s)*t,f=e>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(c," A ").concat(t," ").concat(t," 0 ").concat(f," ").concat(g," ").concat(u," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=Zn(e,this.ATTRIBUTE_NAMES,r),{left:a=0,top:c=0,radius:u=0}=s;return new this(D(D({},ze(s,AC)),{},{radius:u,left:a-u,top:c-u}))}static fromObject(e){return super._fromObject(e)}}O(Wn,"type","Circle"),O(Wn,"cacheProperties",[...Jn,...Av]),O(Wn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),O(Wn,"ATTRIBUTE_NAMES",["cx","cy","r",...Dr]),ee.setClass(Wn),ee.setSVGClass(Wn);const OC=["x1","y1","x2","y2"],jC=["x1","y1","x2","y2"],mh=["x1","x2","y1","y2"];class Jr extends mt{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Jr.ownDefaults),this.setOptions(a),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:c,top:u}=a;typeof c=="number"&&this.set(De,c),typeof u=="number"&&this.set(jt,u)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:a,top:c,width:u,height:d}=Xn([{x:e,y:t},{x:r,y:s}]),f=new N(a+u/2,c+d/2);this.setPositionByOrigin(f,ye,ye)}_set(e,t){return super._set(e,t),mh.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;Kt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new N((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:a,height:c}=this,u=e<=t?-1:1,d=r<=s?-1:1;return{x1:u*a/2,x2:u*-a/2,y1:d*c/2,y2:d*-c/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=Zn(e,this.ATTRIBUTE_NAMES,r),{x1:a=0,y1:c=0,x2:u=0,y2:d=0}=s;return new this([a,c,u,d],ze(s,OC))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:a}=e,c=ze(e,jC);return this._fromObject(D(D({},c),{},{points:[t,r,s,a]}),{extraParam:"points"})}}O(Jr,"type","Line"),O(Jr,"cacheProperties",[...Jn,...mh]),O(Jr,"ATTRIBUTE_NAMES",Dr.concat(mh)),ee.setClass(Jr),ee.setSVGClass(Jr);class ei extends mt{static getDefaults(){return D(D({},super.getDefaults()),ei.ownDefaults)}constructor(e){super(),Object.assign(this,ei.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}O(ei,"type","Triangle"),O(ei,"ownDefaults",{width:100,height:100}),ee.setClass(ei),ee.setSVGClass(ei);const Ov=["rx","ry"];class Un extends mt{static getDefaults(){return D(D({},super.getDefaults()),Un.ownDefaults)}constructor(e){super(),Object.assign(this,Un.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Mt)}getRy(){return this.get("ry")*this.get(Jt)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Ov,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,dl,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=Zn(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function DC(o){if(!o)return[];const e=o.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}O(Un,"type","Ellipse"),O(Un,"cacheProperties",[...Jn,...Ov]),O(Un,"ownDefaults",{rx:0,ry:0}),O(Un,"ATTRIBUTE_NAMES",[...Dr,"cx","cy","rx","ry"]),ee.setClass(Un),ee.setSVGClass(Un);const PC=["left","top"],jv={exactBoundingBox:!1};class cn extends mt{static getDefaults(){return D(D({},super.getDefaults()),cn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),O(this,"strokeDiff",void 0),Object.assign(this,cn.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(De,r),typeof s=="number"&&this.set(jt,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return SS(this.points,e,this.isOpen())}_calcDimensions(e){e=D({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(f=>f.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new N,strokeOffset:new N,strokeDiff:new N};const r=Xn(t),s=Rl(D(D({},e),{},{scaleX:1,scaleY:1})),a=Xn(this.points.map(f=>At(f,s,!0))),c=new N(this.scaleX,this.scaleY);let u=r.left+r.width/2,d=r.top+r.height/2;return this.exactBoundingBox&&(u-=d*Math.tan(Je(this.skewX)),d-=u*Math.tan(Je(this.skewY))),D(D({},r),{},{pathOffset:new N(u,d),strokeOffset:new N(a.left,a.top).subtract(new N(r.left,r.top)).multiply(c),strokeDiff:new N(r.width,r.height).subtract(new N(a.width,a.height)).multiply(c)})}_findCenterFromElement(){const e=Xn(this.points);return new N(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:a,pathOffset:c,strokeOffset:u,strokeDiff:d}=this._calcDimensions();this.set({width:s,height:a,pathOffset:c,strokeOffset:u,strokeDiff:d}),e&&this.setPositionByOrigin(new N(t+s/2,r+a/2),ye,ye)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new N(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,r;const{width:u,height:d}=this._calcDimensions(e);c=new N((t=e.width)!==null&&t!==void 0?t:u,(r=e.height)!==null&&r!==void 0?r:d)}else{var s,a;c=new N((s=e.width)!==null&&s!==void 0?s:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return c.multiply(new N(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===Mt||e===Jt)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=Ee.NUM_FRACTION_DIGITS;for(let a=0,c=this.points.length;a<c;a++)e.push(Ye(this.points[a].x-t,s),",",Ye(this.points[a].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let a=0;a<t;a++){const c=this.points[a];e.lineTo(c.x-r,c.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(DC(e.getAttribute("points")),D(D({},ze(Zn(e,this.ATTRIBUTE_NAMES,r),PC)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}O(cn,"ownDefaults",jv),O(cn,"type","Polyline"),O(cn,"layoutProperties",[ts,ns,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),O(cn,"cacheProperties",[...Jn,"points"]),O(cn,"ATTRIBUTE_NAMES",[...Dr]),ee.setClass(cn),ee.setSVGClass(cn);class Pa extends cn{isOpen(){return!1}}O(Pa,"ownDefaults",jv),O(Pa,"type","Polygon"),ee.setClass(Pa),ee.setSVGClass(Pa);const Dv=["fontSize","fontWeight","fontFamily","fontStyle"],Pv=["underline","overline","linethrough"],Mv=[...Dv,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Fv=[...Mv,...Pv,"textBackgroundColor","direction"],MC=[...Dv,...Pv,Pt,"strokeWidth",rt,"deltaY","textBackgroundColor"],FC={_reNewline:Rh,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:De,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:De,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},kn="justify",_l="justify-left",to="justify-right",no="justify-center";class Rv extends mt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const a in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const a in r[s])if(r[s][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,a=0,c=!0,u=0;for(const d in t){r=0;for(const f in t[d]){const g=t[d][f]||{};a++,g[e]!==void 0?(s?g[e]!==s&&(c=!1):s=g[e],g[e]===this[e]&&delete g[e]):c=!1,Object.keys(g).length!==0?r++:delete t[d][f]}r===0&&delete t[d]}for(let d=0;d<this._textLines.length;d++)u+=this._textLines[d].length;c&&a===u&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,a;for(s in t){for(a in r=t[s],r)delete r[a][e],Object.keys(r[a]).length===0&&delete r[a];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const a=Bh(D(D({},this._getStyleDeclaration(r,s)),t),c=>c!==void 0);this._setStyleDeclaration(r,s,a)}getSelectionStyles(e,t,r){const s=[];for(let a=e;a<(t||e);a++)s.push(this.getStyleAtPosition(a,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return D(D({},rs(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}O(Rv,"_styleProperties",MC);const RC=/  +/g,LC=/"/g;function Yu(o,e,t,r,s){return"		".concat(function(a,c){let{left:u,top:d,width:f,height:g}=c,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ee.NUM_FRACTION_DIGITS;const v=oo(rt,a,!1),[S,x,C,_]=[u,d,f,g].map(b=>Ye(b,y));return"<rect ".concat(v,' x="').concat(S,'" y="').concat(x,'" width="').concat(C,'" height="').concat(_,'"></rect>')}(o,{left:e,top:t,width:r,height:s}),`
`)}const IC=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Xu;class xt extends Rv{static getDefaults(){return D(D({},super.getDefaults()),xt.ownDefaults)}constructor(e,t){super(),O(this,"__charBounds",[]),Object.assign(this,xt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Cv(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(kn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,a,c,u;for(let d=0,f=this._textLines.length;d<f;d++)if((this.textAlign===kn||d!==f-1&&!this.isEndOfWrapping(d))&&(s=0,a=this._textLines[d],t=this.getLineWidth(d),t<this.width&&(u=this.textLines[d].match(this._reSpacesAndTabs)))){r=u.length,e=(this.width-t)/r;for(let g=0;g<=a.length;g++)c=this.__charBounds[d][g],this._reSpaceAndTab.test(a[g])?(c.width+=e,c.kernedWidth+=e,c.left+=s,s+=e):c.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Pt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ye:e.textBaseline="middle";break;case"ascender":e.textBaseline=jt;break;case"descender":e.textBaseline=ih}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,a,c){this._renderChars(e,t,r,s,a,c)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let a=0,c=this._textLines.length;a<c;a++){const u=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){s+=u;continue}const d=this._textLines[a].length,f=this._getLineLeftOffset(a);let g,y,v=0,S=0,x=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let C=0;C<d;C++){const _=this.__charBounds[a][C];y=this.getValueOfPropertyAt(a,C,"textBackgroundColor"),this.path?(e.save(),e.translate(_.renderLeft,_.renderTop),e.rotate(_.angle),e.fillStyle=y,y&&e.fillRect(-_.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),_.width,u/this.lineHeight),e.restore()):y!==x?(g=r+f+S,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=x,x&&e.fillRect(g,s,v,u/this.lineHeight),S=_.left,v=_.width,x=y):v+=_.kernedWidth}y&&!this.path&&(g=r+f+S,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=y,e.fillRect(g,s,v,u/this.lineHeight)),s+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const a=Zs.getFontCache(t),c=this._getFontDeclaration(t),u=r+e,d=r&&c===this._getFontDeclaration(s),f=t.fontSize/this.CACHE_FONT_SIZE;let g,y,v,S;if(r&&a[r]!==void 0&&(v=a[r]),a[e]!==void 0&&(S=g=a[e]),d&&a[u]!==void 0&&(y=a[u],S=y-v),g===void 0||v===void 0||y===void 0){const x=function(){return Xu||(Xu=En({width:0,height:0}).getContext("2d")),Xu}();this._setTextStyles(x,t,!0),g===void 0&&(S=g=x.measureText(e).width,a[e]=g),v===void 0&&d&&r&&(v=x.measureText(r).width,a[r]=v),d&&y===void 0&&(y=x.measureText(u).width,a[u]=y,S=y-v)}return{width:g*f,kernedWidth:S*f}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const a=this.pathSide===Qe,c=this.path,u=this._textLines[e],d=u.length,f=new Array(d);this.__charBounds[e]=f;for(let g=0;g<d;g++){const y=u[g];r=this._getGraphemeBox(y,e,g,t),f[g]=r,s+=r.kernedWidth,t=y}if(f[d]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let g=0;const y=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case De:g=a?y-s:0;break;case ye:g=(y-s)/2;break;case Qe:g=a?0:y-s}g+=this.pathStartOffset*(a?-1:1);for(let v=a?d-1:0;a?v>=0:v<d;a?v--:v++)r=f[v],g>y?g%=y:g<0&&(g+=y),this._setGraphemeOnPath(g,r),g+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,a=lC(s.path,r,s.segmentsInfo);t.renderLeft=a.x-s.pathOffset.x,t.renderTop=a.y-s.pathOffset.y,t.angle=a.angle+(this.pathSide===Qe?Math.PI:0)}_getGraphemeBox(e,t,r,s,a){const c=this.getCompleteStyleDeclaration(t,r),u=s?this.getCompleteStyleDeclaration(t,r-1):{},d=this._measureChar(e,c,s,u);let f,g=d.kernedWidth,y=d.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),y+=f,g+=f);const v={width:y,left:0,height:c.fontSize,kernedWidth:g,deltaY:c.deltaY};if(r>0&&!a){const S=this.__charBounds[t][r-1];v.left=S.left+S.width+d.kernedWidth-d.width}return v}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),a=this._getTopOffset();for(let c=0,u=this._textLines.length;c<u;c++){const d=this.getHeightOfLine(c),f=d/this.lineHeight,g=this._getLineLeftOffset(c);this._renderTextLine(t,e,this._textLines[c],s+g,a+r+f,c),r+=d}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(rt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,a,c){const u=this.getHeightOfLine(c),d=this.textAlign.includes(kn),f=this.path,g=!d&&this.charSpacing===0&&this.isEmptyStyles(c)&&!f,y=this.direction==="ltr",v=this.direction==="ltr"?1:-1,S=t.direction;let x,C,_,b,M,L="",z=0;if(t.save(),S!==this.direction&&(t.canvas.setAttribute("dir",y?"ltr":"rtl"),t.direction=y?"ltr":"rtl",t.textAlign=y?De:Qe),a-=u*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(e,t,c,0,r.join(""),s,a),void t.restore();for(let V=0,$=r.length-1;V<=$;V++)b=V===$||this.charSpacing||f,L+=r[V],_=this.__charBounds[c][V],z===0?(s+=v*(_.kernedWidth-_.width),z+=_.width):z+=_.kernedWidth,d&&!b&&this._reSpaceAndTab.test(r[V])&&(b=!0),b||(x=x||this.getCompleteStyleDeclaration(c,V),C=this.getCompleteStyleDeclaration(c,V+1),b=qh(x,C,!1)),b&&(f?(t.save(),t.translate(_.renderLeft,_.renderTop),t.rotate(_.angle),this._renderChar(e,t,c,V,L,-z/2,0),t.restore()):(M=s,this._renderChar(e,t,c,V,L,M,a)),L="",x=C,s+=v*z,z=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=En({width:t,height:r}),a=s.getContext("2d");return s.width=t,s.height=r,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,r),a.lineTo(0,r),a.closePath(),a.translate(t/2,r/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,a;return Kt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,a=-this.height/2,e.translate(s,a),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:a}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,a,c,u){const d=this._getStyleDeclaration(r,s),f=this.getCompleteStyleDeclaration(r,s),g=e==="fillText"&&f.fill,y=e==="strokeText"&&f.stroke&&f.strokeWidth;if(y||g){if(t.save(),t.font=this._getFontDeclaration(f),d.textBackgroundColor&&this._removeShadow(t),d.deltaY&&(u+=d.deltaY),g){const v=this._setFillStyles(t,f);t.fillText(a,c-v.offsetX,u-v.offsetY)}if(y){const v=this._setStrokeStyles(t,f);t.strokeText(a,c-v.offsetX,u-v.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),c=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),u={fontSize:a*r.size,deltaY:c+a*r.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,a=this.direction,c=this.isEndOfWrapping(e);let u=0;return s===kn||s===no&&!c||s===to&&!c||s===_l&&!c?0:(s===ye&&(u=r/2),s===Qe&&(u=r),s===no&&(u=r/2),s===to&&(u=r),a==="rtl"&&(s===Qe||s===kn||s===to?u=0:s===De||s===_l?u=-r:s!==ye&&s!==no||(u=-r/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),a=this.path,c=this._getWidthOfCharSpacing(),u=this.offsets[t];for(let d=0,f=this._textLines.length;d<f;d++){const g=this.getHeightOfLine(d);if(!this[t]&&!this.styleHas(t,d)){r+=g;continue}const y=this._textLines[d],v=g/this.lineHeight,S=this._getLineLeftOffset(d);let x,C,_=0,b=0,M=this.getValueOfPropertyAt(d,0,t),L=this.getValueOfPropertyAt(d,0,rt);const z=r+v*(1-this._fontSizeFraction);let V=this.getHeightOfChar(d,0),$=this.getValueOfPropertyAt(d,0,"deltaY");for(let G=0,se=y.length;G<se;G++){const ue=this.__charBounds[d][G];x=this.getValueOfPropertyAt(d,G,t),C=this.getValueOfPropertyAt(d,G,rt);const _e=this.getHeightOfChar(d,G),Ce=this.getValueOfPropertyAt(d,G,"deltaY");if(a&&x&&C)e.save(),e.fillStyle=L,e.translate(ue.renderLeft,ue.renderTop),e.rotate(ue.angle),e.fillRect(-ue.kernedWidth/2,u*_e+Ce,ue.kernedWidth,this.fontSize/15),e.restore();else if((x!==M||C!==L||_e!==V||Ce!==$)&&b>0){let pe=s+S+_;this.direction==="rtl"&&(pe=this.width-pe-b),M&&L&&(e.fillStyle=L,e.fillRect(pe,z+u*V+$,b,this.fontSize/15)),_=ue.left,b=ue.width,M=x,L=C,V=_e,$=Ce}else b+=ue.kernedWidth}let Y=s+S+_;this.direction==="rtl"&&(Y=this.width-Y-b),e.fillStyle=C,x&&C&&e.fillRect(Y,z+u*V+$,b-c,this.fontSize/15),r+=g}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const c=e.includes("'")||e.includes('"')||e.includes(",")||xt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(a?this.CACHE_FONT_SIZE:s,"px"),c].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Gh(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let a=[];for(let c=0;c<t.length;c++)r[c]=this.graphemeSplit(t[c]),a=a.concat(r[c],s);return a.pop(),{_unwrappedLines:r,lines:t,graphemeText:a,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D(D({},super.toObject([...Fv,...e])),{},{styles:kS(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,a=!1;if(typeof e=="object")for(const c in e)c==="path"&&this.setPathInfo(),s=s||r.includes(c),a=a||c==="path";else s=r.includes(e),a=e==="path";return a&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=Zn(e,xt.ATTRIBUTE_NAMES,r),a=D(D({},t),s),{textAnchor:c=De,textDecoration:u="",dx:d=0,dy:f=0,top:g=0,left:y=0,fontSize:v=Fh,strokeWidth:S=1}=a,x=ze(a,IC),C=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),D({left:y+d,top:g+f,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:v},x)),_=C.getScaledHeight()/C.height,b=((C.height+C.strokeWidth)*C.lineHeight-C.height)*_,M=C.getScaledHeight()+b;let L=0;return c===ye&&(L=C.getScaledWidth()/2),c===Qe&&(L=C.getScaledWidth()),C.set({left:C.left-L,top:C.top-(M-C.fontSize*(.07+C._fontSizeFraction))/C.lineHeight,strokeWidth:S}),C}static fromObject(e){return this._fromObject(D(D({},e),{},{styles:bS(e.styles||{},e.text)}),{extraParam:"text"})}}O(xt,"textLayoutProperties",Mv),O(xt,"cacheProperties",[...Jn,...Fv]),O(xt,"ownDefaults",FC),O(xt,"type","Text"),O(xt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),O(xt,"ATTRIBUTE_NAMES",Dr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),pv(xt,[class extends iv{_toSVG(){const o=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(o){return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(o){let{textBgRects:e,textSpans:t}=o;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(LC,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(o,e){const t=[],r=[];let s,a=o;this.backgroundColor&&r.push(...Yu(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,u=this._textLines.length;c<u;c++)s=this._getLineLeftOffset(c),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(r,c,e+s,a),this._setSVGTextLineText(t,c,e+s,a),a+=this.getHeightOfLine(c);return{textSpans:t,textBgRects:r}}_createTextCharSpan(o,e,t,r){const s=this.getSvgSpanStyles(e,o!==o.trim()||!!o.match(RC)),a=s?'style="'.concat(s,'"'):"",c=e.deltaY,u=c?' dy="'.concat(Ye(c,Ee.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Ye(t,Ee.NUM_FRACTION_DIGITS),'" y="').concat(Ye(r,Ee.NUM_FRACTION_DIGITS),'" ').concat(u).concat(a,">").concat(CS(o),"</tspan>")}_setSVGTextLineText(o,e,t,r){const s=this.getHeightOfLine(e),a=this.textAlign.includes(kn),c=this._textLines[e];let u,d,f,g,y,v="",S=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let x=0,C=c.length-1;x<=C;x++)y=x===C||this.charSpacing,v+=c[x],f=this.__charBounds[e][x],S===0?(t+=f.kernedWidth-f.width,S+=f.width):S+=f.kernedWidth,a&&!y&&this._reSpaceAndTab.test(c[x])&&(y=!0),y||(u=u||this.getCompleteStyleDeclaration(e,x),d=this.getCompleteStyleDeclaration(e,x+1),y=qh(u,d,!0)),y&&(g=this._getStyleDeclaration(e,x),o.push(this._createTextCharSpan(v,g,t,r)),v="",u=d,this.direction==="rtl"?t-=S:t+=S,S=0)}_setSVGTextLineBg(o,e,t,r){const s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let c,u=0,d=0,f=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let g=0;g<s.length;g++){const{left:y,width:v,kernedWidth:S}=this.__charBounds[e][g];c=this.getValueOfPropertyAt(e,g,"textBackgroundColor"),c!==f?(f&&o.push(...Yu(f,t+d,r,u,a)),d=y,u=v,f=c):u+=S}c&&o.push(...Yu(f,t+d,r,u,a))}_getSVGLineTopOffset(o){let e,t=0;for(e=0;e<o;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(o){return"".concat(super.getSvgStyles(o)," white-space: pre;")}getSvgSpanStyles(o,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:a,fontSize:c,fontStyle:u,fontWeight:d,deltaY:f}=o,g=this.getSvgTextDecoration(o);return[s?oo(Pt,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",u?"font-style: ".concat(u,"; "):"",d?"font-weight: ".concat(d,"; "):"",g&&"text-decoration: ".concat(g,"; "),a?oo(rt,a):"",f?"baseline-shift: ".concat(-f,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(o){return["overline","underline","line-through"].filter(e=>o[e.replace("-","")]).join(" ")}}]),ee.setClass(xt),ee.setSVGClass(xt);class NC{constructor(e){O(this,"target",void 0),O(this,"__mouseDownInPlace",!1),O(this,"__dragStartFired",!1),O(this,"__isDraggingOver",!1),O(this,"__dragStartSelection",void 0),O(this,"__dragImageDisposer",void 0),O(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:a}=t;const c=this.target,u=c.canvas,d=new N(c.flipX?-1:1,c.flipY?-1:1),f=c._getCursorBoundaries(s),g=new N(f.left+f.leftOffset,f.top+f.topOffset).multiply(d).transform(c.calcTransformMatrix()),y=u.getScenePoint(e).subtract(g),v=c.getCanvasRetinaScaling(),S=c.getBoundingRect(),x=g.subtract(new N(S.left,S.top)),C=u.viewportTransform,_=x.add(y).transform(C,!0),b=c.backgroundColor,M=Xh(c.styles);c.backgroundColor="";const L={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(L,0,s),c.setSelectionStyles(L,a,c.text.length),c.dirty=!0;const z=c.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=b,c.styles=M,c.dirty=!0,fh(z,{position:"fixed",left:"".concat(-z.width,"px"),border:Dt,width:"".concat(z.width/v,"px"),height:"".concat(z.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{z.remove()},un(e.target||this.target.hiddenTextarea).body.appendChild(z),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(z,_.x,_.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(s.selectionStart,s.selectionEnd).join(""),c=D({text:t.text,value:a},s);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,c)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let a=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!s){const c=this.target,u=c.canvas;let d=c.getSelectionStartFromPointer(r);const{styles:f}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},g=a[Math.max(0,a.length-1)],y=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,S=this.__dragStartSelection.selectionEnd;d>v&&d<=S?d=v:d>S&&(d-=S-v),c.removeChars(v,S),delete this.__dragStartSelection}c._reNewline.test(g)&&(c._reNewline.test(c._text[d])||d===c._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=c,c.insertChars(a,f,d),u.setActiveObject(c),c.enterEditing(r),c.selectionStart=Math.min(d+y,c._text.length),c.selectionEnd=Math.min(c.selectionStart+a.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(pl,{index:d+y,action:"drop"}),u.fire("text:changed",{target:c}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,a=this.target.canvas,{selectionStart:c,selectionEnd:u}=this.__dragStartSelection,d=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Dt;d===Dt?(s.selectionStart=c,s.selectionEnd=u,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),d==="move"&&(s.removeChars(c,u),s.selectionStart=s.selectionEnd=c,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(pl,{index:c,action:"dragend"}),a.fire("text:changed",{target:s}),a.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Vg=/[ \n\.,;!\?\-]/;class zC extends xt{constructor(){super(...arguments),O(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:a}=e;return lv({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!Rh.test(r[e-1]))?e-1:e,a=r[s];for(;s>0&&s<r.length&&!Vg.test(a);)s+=t,a=r[s];return t===-1&&Vg.test(a)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;un(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,a=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==a||s!==r&&a!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),a=this.graphemeSplit(s).length;if(e===t)return{selectionStart:a,selectionEnd:a};const c=r.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,a=r.charIndex,c=this.getValueOfPropertyAt(s,a,"fontSize")*this.lineHeight,u=t.leftOffset,d=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,g=f.width/d,y=f.height/d,v=g-c,S=y-c,x=new N(t.left+u,t.top+t.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new N(f.clientWidth/g,f.clientHeight/y));return x.x<0&&(x.x=0),x.x>v&&(x.x=v),x.y<0&&(x.y=0),x.y>S&&(x.y=S),x.x+=this.canvas._offset.left,x.y+=this.canvas._offset.top,{left:"".concat(x.x,"px"),top:"".concat(x.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(fl),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:c}=this.get2DCursorLocation(t,!0);if(r!==a){if(this.styles[r])for(let u=s;u<this._unwrappedTextLines[r].length;u++)delete this.styles[r][u];if(this.styles[a])for(let u=c;u<this._unwrappedTextLines[a].length;u++){const d=this.styles[a][u];d&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+u-c]=d)}for(let u=r+1;u<=a;u++)delete this.styles[u];this.shiftLineStyles(a,r-a)}else if(this.styles[r]){const u=this.styles[r],d=c-s;for(let f=s;f<c;f++)delete u[f];for(const f in this.styles[r]){const g=parseInt(f,10);g>=c&&(u[g-d]=u[f],delete u[f])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const a=parseInt(s,10);a>e&&(this.styles[a+t]=r[a],r[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,r,s){const a={},c=this._unwrappedTextLines[e].length,u=c===t;let d=!1;r||(r=1),this.shiftLineStyles(e,r);const f=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const y in this.styles[e]){const v=parseInt(y,10);v>=t&&(d=!0,a[v-t]=this.styles[e][y],u&&t===0||delete this.styles[e][y])}let g=!1;for(d&&!u&&(this.styles[e+r]=a,g=!0),(g||c>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:D({},s[r-1])}:f?this.styles[e+r]={0:D({},f)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const a=this.styles[e],c=a?D({},a):{};r||(r=1);for(const d in c){const f=parseInt(d,10);f>=t&&(a[f+r]=c[f],c[f-r]||delete a[f])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=D({},s[r]));return}if(!a)return;const u=a[t?t-1:1];for(;u&&r--;)this.styles[e][t+r]=D({},u)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),a=[0];let c,u=0;for(let d=0;d<e.length;d++)e[d]===`
`?(u++,a[u]=0):a[u]++;for(a[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,a[0],r),r=r&&r.slice(a[0]+1)),u&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+a[0],u),c=1;c<u;c++)a[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,a[c],r):r&&this.styles[s.lineIndex+c]&&r[0]&&(this.styles[s.lineIndex+c][0]=r[0]),r=r&&r.slice(a[c]+1);a[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,a[c],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,r,t),this._text=[...this._text.slice(0,r),...a,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=De:this._selectionDirection===Qe&&(this._selectionDirection=De,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Qe?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Qe:this._selectionDirection===De&&(this._selectionDirection=Qe,this.selectionStart=t),this.selectionEnd=r)}}class BC extends zC{initHiddenTextarea(){const e=this.canvas&&un(this.canvas.getElement())||es(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(c=>{let[u,d]=c;return t.setAttribute(u,d)});const{top:r,left:s,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(c=>{let[u,d]=c;return t.addEventListener(u,this[d].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(pl),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,a=this._text.length,c=s.length,u=this.selectionStart,d=this.selectionEnd,f=u!==d;let g,y,v,S,x=c-a;const C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),_=u>C.selectionStart;f?(y=this._text.slice(u,d),x+=d-u):c<a&&(y=_?this._text.slice(d+x,d):this._text.slice(u,u-x));const b=s.slice(C.selectionEnd-x,C.selectionEnd);if(y&&y.length&&(b.length&&(g=this.getSelectionStyles(u,u+1,!1),g=b.map(()=>g[0])),f?(v=u,S=d):_?(v=d-y.length,S=d):(v=d,S=d+y.length),this.removeStyleFromTo(v,S)),b.length){const{copyPasteData:M}=Tn();t&&b.join("")===M.copiedText&&!Ee.disableStyleCopyPaste&&(g=M.copiedTextStyle),this.insertNewStyleBlock(b,u,g)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Tn();e.copiedText=this.getSelectedText(),Ee.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),a=s.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const c=s.charIndex,u=this._getWidthBeforeCursor(a,c),d=this._getIndexOnLine(a+1,u);return this._textLines[a].slice(c).length+d+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),a=s.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-r;const c=s.charIndex,u=this._getWidthBeforeCursor(a,c),d=this._getIndexOnLine(a-1,u),f=this._textLines[a].slice(0,c),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+d-f.length+(1-g)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,a,c=this._getLineLeftOffset(e),u=0;for(let d=0,f=r.length;d<f;d++)if(s=this.__charBounds[e][d].width,c+=s,c>t){a=!0;const g=c-s,y=c,v=Math.abs(g-t);u=Math.abs(y-t)<v?d:d-1;break}return a||(u=r.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Qe);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=Ki(0,this.selectionStart,s),this.selectionEnd=Ki(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===De?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=De,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Qe&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=De,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===De&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Qe,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Qe,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Gu=o=>!!o.button;class WC extends BC{constructor(){super(...arguments),O(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new NC(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),ah(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Gu(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Gu(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Gu(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(hn(this.calcTransformMatrix())).add(new N(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,a=0;for(let f=0;f<this._textLines.length&&r<=t.y;f++)r+=this.getHeightOfLine(f),a=f,f>0&&(s+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let c=Math.abs(this._getLineLeftOffset(a));const u=this._textLines[a].length,d=this.__charBounds[a];for(let f=0;f<u;f++){const g=c+d[f].kernedWidth;if(t.x<=g){Math.abs(t.x-g)<=Math.abs(t.x-c)&&s++;break}c=g,s++}return Math.min(this.flipX?u-s:s,this._text.length)}}const Ma="moveCursorUp",Fa="moveCursorDown",Ra="moveCursorLeft",La="moveCursorRight",Ia="exitEditing",UC=D({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Ia,27:Ia,33:Ma,34:Fa,35:La,36:Ra,37:Ra,38:Ma,39:La,40:Fa},keysMapRtl:{9:Ia,27:Ia,33:Ma,34:Fa,35:Ra,36:La,37:La,38:Ma,39:Ra,40:Fa},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Hn extends WC{static getDefaults(){return D(D({},super.getDefaults()),Hn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,D(D({},Hn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof gh&&this.canvas.textEditingManager.remove(this),t instanceof gh&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:a}=this.get2DCursorLocation(e);for(let f=0;f<a;f++)t+=this.getHeightOfLine(f);const c=this._getLineLeftOffset(a),u=this.__charBounds[a][s];u&&(r=u.left),this.charSpacing!==0&&s===this._textLines[a].length&&(r-=this._getWidthOfCharSpacing());const d={top:t,left:c+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Qe||this.textAlign===kn||this.textAlign===to?d.left*=-1:this.textAlign===De||this.textAlign===_l?d.left=c-(r>0?r:0):this.textAlign!==ye&&this.textAlign!==no||(d.left=c-(r>0?r:0))),d}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,a=r.charIndex>0?r.charIndex-1:0,c=this.getValueOfPropertyAt(s,a,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/u,f=this.getValueOfPropertyAt(s,a,"deltaY"),g=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-d/2,top:g+t.top+f,width:d,height:c}}_renderCursor(e,t,r){const{color:s,opacity:a,left:c,top:u,width:d,height:f}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=a,e.fillRect(c,u,d,f)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,a=t.selectionEnd,c=this.textAlign.includes(kn),u=this.get2DCursorLocation(s),d=this.get2DCursorLocation(a),f=u.lineIndex,g=d.lineIndex,y=u.charIndex<0?0:u.charIndex,v=d.charIndex<0?0:d.charIndex;for(let S=f;S<=g;S++){const x=this._getLineLeftOffset(S)||0;let C=this.getHeightOfLine(S),_=0,b=0,M=0;if(S===f&&(b=this.__charBounds[f][y].left),S>=f&&S<g)M=c&&!this.isEndOfWrapping(S)?this.width:this.getLineWidth(S)||5;else if(S===g)if(v===0)M=this.__charBounds[g][v].left;else{const Y=this._getWidthOfCharSpacing();M=this.__charBounds[g][v-1].left+this.__charBounds[g][v-1].width-Y}_=C,(this.lineHeight<1||S===g&&this.lineHeight>1)&&(C/=this.lineHeight);let L=r.left+x+b,z=C,V=0;const $=M-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",z=1,V=C):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Qe||this.textAlign===kn||this.textAlign===to?L=this.width-L-$:this.textAlign===De||this.textAlign===_l?L=r.left+x-M:this.textAlign!==ye&&this.textAlign!==no||(L=r.left+x-M)),e.fillRect(L,r.top+r.topOffset+V,$,z),r.topOffset+=_}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,rt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}O(Hn,"ownDefaults",UC),O(Hn,"type","IText"),ee.setClass(Hn),ee.setClass(Hn,"i-text");class ti extends Hn{static getDefaults(){return D(D({},super.getDefaults()),ti.ownDefaults)}constructor(e,t){super(e,D(D({},ti.ownDefaults),t))}static createControls(){return{controls:yS()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(kn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const a={};for(let c=0;c<e.graphemeLines.length;c++)e.graphemeText[s]===`
`&&c>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&c>0&&(r++,s++),a[c]={line:t,offset:r},s+=e.graphemeLines[c].length,r+=e.graphemeLines[c].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,a=!1;const c=this._styleMap[e],u=this._styleMap[e+1];c&&(e=c.line,r=c.offset),u&&(s=u.line,a=s===e,t=u.offset);const d=e===void 0?this.styles:{line:this.styles[e]};for(const f in d)for(const g in d[f]){const y=parseInt(g,10);if(y>=r&&(!a||y<t))for(const v in d[f][g])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let a=0;a<r.wordsData.length;a++)s.push(...this._wrapLine(a,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((a,c)=>{let u=0;const d=t?this.graphemeSplit(a):this.wordSplit(a);return d.length===0?[{word:[],width:0}]:d.map(f=>{const g=t?[f]:this.graphemeSplit(f),y=this._measureWord(g,c,u);return s=Math.max(y,s),u+=g.length+r.length,{word:g,width:y}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let c=0,u=e.length;c<u;c++)a+=this._getGraphemeBox(e[c],t,c+s,r,!0).kernedWidth,r=e[c];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:a}=r,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,f=[],g=d?"":" ";let y=0,v=[],S=0,x=0,C=!0;t-=c;const _=Math.max(t,s,this.dynamicMinWidth),b=a[e];let M;for(S=0,M=0;M<b.length;M++){const{word:L,width:z}=b[M];S+=L.length,y+=x+z-u,y>_&&!C?(f.push(v),v=[],y=z,C=!0):y+=u,C||d||v.push(g),v=v.concat(L),x=d?0:this._measureWord([g],e,S),S++,C=!1}return M&&f.push(v),s+c>this.dynamicMinWidth&&(this.dynamicMinWidth=s-u+c),f}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let a=0;a<r.length;a++)s[a]=r[a].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}O(ti,"type","Textbox"),O(ti,"textLayoutProperties",[...Hn.textLayoutProperties,"width"]),O(ti,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ee.setClass(ti);class Hg extends Bl{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:a}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:c,height:u}=Xn(mv(r,s)),d=new N(c,u);if(s.absolutePositioned)return{center:qi(s.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:d};{const f=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:g=new N,correction:y=new N}=this.calcBoundingBox(t,e)||{};return{center:g.add(f),correction:y.subtract(f),size:d}}return{center:r.getRelativeCenterPoint().add(f),size:d}}}}O(Hg,"type","clip-path"),ee.setClass(Hg);class Yg extends Bl{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new N(r.width||s.x,r.height||s.y)}}O(Yg,"type","fixed"),ee.setClass(Yg);class VC extends lo{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,a)=>(a.parent&&s.add(a.parent),s),new Set).forEach(s=>{!r.some(a=>a.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class ni extends ri{static getDefaults(){return D(D({},super.getDefaults()),ni.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ni.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:a}=t;this.groupInit(e,{left:r,top:s,layoutManager:a??new VC})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const a=this._objects.findIndex(u=>u.isInFrontOf(s)),c=a===-1?this.size():a;this.insertAt(c,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(br("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:a}=s;a&&r.add(a)}),e===Kh?r.forEach(s=>{s._onAfterObjectsChange(wl,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=D(D({hasControls:!1},r),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,s);super._renderControls(e,t),e.restore()}}O(ni,"type","ActiveSelection"),O(ni,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ee.setClass(ni),ee.setClass(ni,"activeSelection");class HC{constructor(){O(this,"resources",{})}applyFilters(e,t,r,s,a){const c=a.getContext("2d");if(!c)return;c.drawImage(t,0,0,r,s);const u={sourceWidth:r,sourceHeight:s,imageData:c.getImageData(0,0,r,s),originalEl:t,originalImageData:c.getImageData(0,0,r,s),canvasEl:a,ctx:c,filterBackend:this};e.forEach(f=>{f.applyTo(u)});const{imageData:d}=u;return d.width===r&&d.height===s||(a.width=d.width,a.height=d.height),c.putImageData(d,0,0),u}}class Lv{constructor(){let{tileSize:e=Ee.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};O(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),O(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=En({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,a,c){const u=this.gl,d=a.getContext("2d");if(!u||!d)return;let f;c&&(f=this.getCachedTexture(c,t));const g={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:u,sourceTexture:this.createTexture(u,r,s,f?void 0:t),targetTexture:this.createTexture(u,r,s),originalTexture:f||this.createTexture(u,r,s,f?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},y=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,y),e.forEach(v=>{v&&v.applyTo(g)}),function(v){const S=v.targetCanvas,x=S.width,C=S.height,_=v.destinationWidth,b=v.destinationHeight;x===_&&C===b||(S.width=_,S.height=b)}(g),this.copyGLTo2D(u,g),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(g.sourceTexture),u.deleteTexture(g.targetTexture),u.deleteFramebuffer(y),d.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,a){const{NEAREST:c,TEXTURE_2D:u,RGBA:d,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:y,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:S,TEXTURE_WRAP_T:x}=e,C=e.createTexture();return e.bindTexture(u,C),e.texParameteri(u,y,a||c),e.texParameteri(u,v,a||c),e.texParameteri(u,S,g),e.texParameteri(u,x,g),s?e.texImage2D(u,0,d,d,f,s):e.texImage2D(u,0,d,t,r,0,d,f,null),C}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const a=this.createTexture(this.gl,t.width,t.height,t,r);return a&&(s[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,a=s.getContext("2d");if(!a)return;a.translate(0,s.height),a.scale(1,-1);const c=r.height-s.height;a.drawImage(r,0,c,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,a=t.destinationHeight,c=s*a*4;if(!r)return;const u=new Uint8Array(this.imageBuffer,0,c),d=new Uint8ClampedArray(this.imageBuffer,0,c);e.readPixels(0,0,s,a,e.RGBA,e.UNSIGNED_BYTE,u);const f=new ImageData(d,s,a);r.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),a=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let qu;function YC(){const{WebGLProbe:o}=Tn();return o.queryWebGL(fn()),Ee.enableGLFiltering&&o.isSupported(Ee.textureSize)?new Lv({tileSize:Ee.textureSize}):new HC}function $u(){return!qu&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(qu=YC()),qu}const XC=["filters","resizeFilter","src","crossOrigin","type"],Iv=["cropX","cropY"];class Wt extends mt{static getDefaults(){return D(D({},super.getDefaults()),Wt.ownDefaults)}constructor(e,t){super(),O(this,"_lastScaleX",1),O(this,"_lastScaleY",1),O(this,"_filterScalingX",1),O(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Wt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Tr()),this.setElement(typeof e=="string"?(this.canvas&&un(this.canvas.getElement())||es()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(Wt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=$u(!1);t instanceof Lv&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Tn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),D(D({},super.toObject([...Iv,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let a=[],c=[],u="",d="";if(!t)return[];if(this.hasCrop()){const f=Tr();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(d).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,c=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return a=this.paintFirst!==rt?a.concat(c,e):a.concat(e,c),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return al(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,a=r.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&a>t)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=a);const u=En(c),{width:d,height:f}=c;this._element=u,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=a,$u().applyFilters([e],c,d,f,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=En({width:r,height:s});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);$u().applyFilters(e,this._originalElement,r,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,a=this.width,c=this.height,u=Math.max(this.cropX,0),d=Math.max(this.cropY,0),f=t.naturalWidth||t.width,g=t.naturalHeight||t.height,y=u*r,v=d*s,S=Math.min(a*r,f-y),x=Math.min(c*s,g-v),C=-a/2,_=-c/2,b=Math.min(a,f/r-u),M=Math.min(c,g/s-d);t&&e.drawImage(t,y,v,S,x,C,_,b,M)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=A2(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let a,c=this._element.width,u=this._element.height,d=1,f=1,g=0,y=0,v=0,S=0;return!e||e.alignX===Dt&&e.alignY===Dt?(d=t/c,f=r/u):(e.meetOrSlice==="meet"&&(d=f=QS(this._element,s),a=(t-c*d)/2,e.alignX==="Min"&&(g=-a),e.alignX==="Max"&&(g=a),a=(r-u*f)/2,e.alignY==="Min"&&(y=-a),e.alignY==="Max"&&(y=a)),e.meetOrSlice==="slice"&&(d=f=JS(this._element,s),a=c-t/d,e.alignX==="Mid"&&(v=a/2),e.alignX==="Max"&&(v=a),a=u-r/f,e.alignY==="Mid"&&(S=a/2),e.alignY==="Max"&&(S=a),c=t/d,u=r/f)),{width:c,height:u,scaleX:d,scaleY:f,offsetLeft:g,offsetTop:y,cropX:v,cropY:S}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:a,crossOrigin:c,type:u}=e,d=ze(e,XC);return Promise.all([al(a,D(D({},t),{},{crossOrigin:c})),r&&so(r,t),s&&so([s],t),Ll(d,t)]).then(f=>{let[g,y=[],[v]=[],S={}]=f;return new this(g,D(D({},d),{},{src:a,filters:y,resizeFilter:v},S))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return al(e,{crossOrigin:t,signal:r}).then(a=>new this(a,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=Zn(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"],t,s).catch(a=>(br("log","Unable to parse Image",a),null))}}O(Wt,"type","Image"),O(Wt,"cacheProperties",[...Jn,...Iv]),O(Wt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),O(Wt,"CSS_CANVAS","canvas-img"),O(Wt,"ATTRIBUTE_NAMES",[...Dr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),ee.setClass(Wt),ee.setSVGClass(Wt);Nl(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ul=o=>o.webgl!==void 0,Qh="precision highp float",GC=`
    `.concat(Qh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),qC=["type"],$C=["type"],KC=new RegExp(Qh,"g");class it{get type(){return this.constructor.type}constructor(){let e=ze(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qC);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return GC}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Tn();s!=="highp"&&(t=t.replace(KC,Qh.replace("highp",s)));const a=e.createShader(e.VERTEX_SHADER),c=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!a||!c||!u)throw new bn("Vertex, fragment shader or program creation error");if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new bn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(c,t),e.compileShader(c),!e.getShaderParameter(c,e.COMPILE_STATUS))throw new bn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(c)));if(e.attachShader(u,a),e.attachShader(u,c),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new bn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const d=this.getUniformLocations(e,u)||{};return d.uStepW=e.getUniformLocation(u,"uStepW"),d.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:d}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let a=0;a<r.length;a++)s[r[a]]=e.getUniformLocation(t,r[a]);return s}sendAttributeData(e,t,r){const s=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ul(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=En({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return D({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(ze(e,$C))}}O(it,"type","BaseFilter"),O(it,"uniformLocations",[]);const QC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Na extends it{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(QC[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Me(this.color).getSource(),s=this.alpha,a=r[0]*s,c=r[1]*s,u=r[2]*s,d=1-s;for(let f=0;f<t.length;f+=4){const g=t[f],y=t[f+1],v=t[f+2];let S,x,C;switch(this.mode){case"multiply":S=g*a/255,x=y*c/255,C=v*u/255;break;case"screen":S=255-(255-g)*(255-a)/255,x=255-(255-y)*(255-c)/255,C=255-(255-v)*(255-u)/255;break;case"add":S=g+a,x=y+c,C=v+u;break;case"difference":S=Math.abs(g-a),x=Math.abs(y-c),C=Math.abs(v-u);break;case"subtract":S=g-a,x=y-c,C=v-u;break;case"darken":S=Math.min(g,a),x=Math.min(y,c),C=Math.min(v,u);break;case"lighten":S=Math.max(g,a),x=Math.max(y,c),C=Math.max(v,u);break;case"overlay":S=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,x=c<128?2*y*c/255:255-2*(255-y)*(255-c)/255,C=u<128?2*v*u/255:255-2*(255-v)*(255-u)/255;break;case"exclusion":S=a+g-2*a*g/255,x=c+y-2*c*y/255,C=u+v-2*u*v/255;break;case"tint":S=a+g*d,x=c+y*d,C=u+v*d}t[f]=S,t[f+1]=x,t[f+2]=C}}sendUniformData(e,t){const r=new Me(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}O(Na,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),O(Na,"type","BlendColor"),O(Na,"uniformLocations",["uColor"]),ee.setClass(Na);const JC={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},ZC=["type","image"];class za extends it{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return JC[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:a}}=e;const c=this.image;a.blendImage||(a.blendImage=fn());const u=a.blendImage,d=u.getContext("2d");u.width!==r||u.height!==s?(u.width=r,u.height=s):d.clearRect(0,0,r,s),d.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),d.drawImage(c.getElement(),0,0,r,s);const f=d.getImageData(0,0,r,s).data;for(let g=0;g<t.length;g+=4){const y=t[g],v=t[g+1],S=t[g+2],x=t[g+3],C=f[g],_=f[g+1],b=f[g+2],M=f[g+3];switch(this.mode){case"multiply":t[g]=y*C/255,t[g+1]=v*_/255,t[g+2]=S*b/255,t[g+3]=x*M/255;break;case"mask":t[g+3]=M}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return D(D({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,a=ze(e,ZC);return Wt.fromObject(s,t).then(c=>new this(D(D({},a),{},{image:c})))}}O(za,"type","BlendImage"),O(za,"defaults",{mode:"multiply",alpha:1}),O(za,"uniformLocations",["uTransformMatrix","uImage"]),ee.setClass(za);class Ba extends it{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Ul(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:s}}=e;const{width:a,height:c}=r;s.blurLayer1||(s.blurLayer1=fn(),s.blurLayer2=fn());const u=s.blurLayer1,d=s.blurLayer2;u.width===a&&u.height===c||(d.width=u.width=a,d.height=u.height=c);const f=u.getContext("2d"),g=d.getContext("2d"),y=15,v=.06*this.blur*.5;let S,x,C,_;for(f.putImageData(r,0,0),g.clearRect(0,0,a,c),_=-15;_<=y;_++)S=(Math.random()-.5)/4,x=_/y,C=v*x*a+S,g.globalAlpha=1-Math.abs(x),g.drawImage(u,C,S),f.drawImage(d,0,0),g.globalAlpha=1,g.clearRect(0,0,d.width,d.height);for(_=-15;_<=y;_++)S=(Math.random()-.5)/4,x=_/y,C=v*x*c+S,g.globalAlpha=1-Math.abs(x),g.drawImage(u,S,C),f.drawImage(d,0,0),g.globalAlpha=1,g.clearRect(0,0,d.width,d.height);t.drawImage(u,0,0);const b=t.getImageData(0,0,u.width,u.height);return f.globalAlpha=1,f.clearRect(0,0,u.width,u.height),b}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}O(Ba,"type","Blur"),O(Ba,"defaults",{blur:0}),O(Ba,"uniformLocations",["uDelta"]),ee.setClass(Ba);class Wa extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}O(Wa,"type","Brightness"),O(Wa,"defaults",{brightness:0}),O(Wa,"uniformLocations",["uBrightness"]),ee.setClass(Wa);const Nv={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Xi extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let a=0;a<t.length;a+=4){const c=t[a],u=t[a+1],d=t[a+2];if(t[a]=c*r[0]+u*r[1]+d*r[2]+255*r[4],t[a+1]=c*r[5]+u*r[6]+d*r[7]+255*r[9],t[a+2]=c*r[10]+u*r[11]+d*r[12]+255*r[14],!s){const f=t[a+3];t[a]+=f*r[3],t[a+1]+=f*r[8],t[a+2]+=f*r[13],t[a+3]=c*r[15]+u*r[16]+d*r[17]+f*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],a=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,a)}toObject(){return D(D({},super.toObject()),{},{matrix:[...this.matrix]})}}function ui(o,e){var t;const r=(O(t=class extends Xi{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",o),O(t,"defaults",{colorsOnly:!1,matrix:e}),t);return ee.setClass(r,o),r}O(Xi,"type","ColorMatrix"),O(Xi,"defaults",Nv),O(Xi,"uniformLocations",["uColorMatrix","uConstants"]),ee.setClass(Xi);ui("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ui("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ui("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ui("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ui("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ui("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ui("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Xg extends it{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ul(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>ee.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}O(Xg,"type","Composed"),ee.setClass(Xg);class Ua extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let a=0;a<t.length;a+=4)t[a]=s*(t[a]-128)+128,t[a+1]=s*(t[a+1]-128)+128,t[a+2]=s*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}O(Ua,"type","Contrast"),O(Ua,"defaults",{contrast:0}),O(Ua,"uniformLocations",["uContrast"]),ee.setClass(Ua);const e_={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Va extends it{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return e_[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,a=Math.round(Math.sqrt(s.length)),c=Math.floor(a/2),u=t.width,d=t.height,f=e.ctx.createImageData(u,d),g=f.data,y=this.opaque?1:0;let v,S,x,C,_,b,M,L,z,V,$,Y,G;for($=0;$<d;$++)for(V=0;V<u;V++){for(_=4*($*u+V),v=0,S=0,x=0,C=0,G=0;G<a;G++)for(Y=0;Y<a;Y++)M=$+G-c,b=V+Y-c,M<0||M>=d||b<0||b>=u||(L=4*(M*u+b),z=s[G*a+Y],v+=r[L]*z,S+=r[L+1]*z,x+=r[L+2]*z,y||(C+=r[L+3]*z));g[_]=v,g[_+1]=S,g[_+2]=x,g[_+3]=y?r[_+3]:C}e.imageData=f}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return D(D({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}O(Va,"type","Convolute"),O(Va,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),O(Va,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ee.setClass(Va);const zv="Gamma";class Ha extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],a=1/r[1],c=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let d=0;d<256;d++)u.r[d]=255*Math.pow(d/255,s),u.g[d]=255*Math.pow(d/255,a),u.b[d]=255*Math.pow(d/255,c);for(let d=0;d<t.length;d+=4)t[d]=u.r[t[d]],t[d+1]=u.g[t[d+1]],t[d+2]=u.b[t[d+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:zv,gamma:this.gamma.concat()}}}O(Ha,"type",zv),O(Ha,"defaults",{gamma:[1,1,1]}),O(Ha,"uniformLocations",["uGamma"]),ee.setClass(Ha);const t_={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Ya extends it{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2];switch(this.mode){case"average":r=(a+c+u)/3;break;case"lightness":r=(Math.min(a,c,u)+Math.max(a,c,u))/2;break;case"luminosity":r=.21*a+.72*c+.07*u}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return t_[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}O(Ya,"type","Grayscale"),O(Ya,"defaults",{mode:"average"}),O(Ya,"uniformLocations",["uMode"]),ee.setClass(Ya);const n_=D(D({},Nv),{},{rotation:0});class Ku extends Xi{calculateMatrix(){const e=this.rotation*Math.PI,t=$n(e),r=Kn(e),s=1/3,a=Math.sqrt(s)*r,c=1-t;this.matrix=[t+c/3,s*c-a,s*c+a,0,0,s*c+a,t+s*c,s*c-a,0,0,s*c-a,s*c+a,t+s*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}O(Ku,"type","HueRotation"),O(Ku,"defaults",n_),ee.setClass(Ku);class Xa extends it{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}O(Xa,"type","Invert"),O(Xa,"defaults",{alpha:!1,invert:!0}),O(Xa,"uniformLocations",["uInvert","uAlpha"]),ee.setClass(Xa);class Ga extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const a=(.5-Math.random())*r;t[s]+=a,t[s+1]+=a,t[s+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}O(Ga,"type","Noise"),O(Ga,"defaults",{noise:0}),O(Ga,"uniformLocations",["uNoise","uSeed"]),ee.setClass(Ga);class qa extends it{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let a=0;a<s;a+=this.blocksize)for(let c=0;c<r;c+=this.blocksize){const u=4*a*r+4*c,d=t[u],f=t[u+1],g=t[u+2],y=t[u+3];for(let v=a;v<Math.min(a+this.blocksize,s);v++)for(let S=c;S<Math.min(c+this.blocksize,r);S++){const x=4*v*r+4*S;t[x]=d,t[x+1]=f,t[x+2]=g,t[x+3]=y}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}O(qa,"type","Pixelate"),O(qa,"defaults",{blocksize:4}),O(qa,"uniformLocations",["uBlocksize"]),ee.setClass(qa);class $a extends it{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new Me(this.color).getSource(),a=[s[0]-r,s[1]-r,s[2]-r],c=[s[0]+r,s[1]+r,s[2]+r];for(let u=0;u<t.length;u+=4){const d=t[u],f=t[u+1],g=t[u+2];d>a[0]&&f>a[1]&&g>a[2]&&d<c[0]&&f<c[1]&&g<c[2]&&(t[u+3]=0)}}sendUniformData(e,t){const r=new Me(this.color).getSource(),s=this.distance,a=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],c=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,c)}}O($a,"type","RemoveColor"),O($a,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),O($a,"uniformLocations",["uLow","uHigh"]),ee.setClass($a);class Ka extends it{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let a=1;a<=r;a++)s[a-1]=e(a*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ul(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const a=t.width,c=t.height,u=Math.round(a*r),d=Math.round(c*s);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,c,u,d):this.resizeType==="hermite"?this.hermiteFastResize(e,a,c,u,d):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,c,u,d):this.resizeType==="lanczos"?this.lanczosResize(e,a,c,u,d):new ImageData(u,d),e.imageData=f}sliceByTwo(e,t,r,s,a){const c=e.imageData,u=.5;let d=!1,f=!1,g=t*u,y=r*u;const v=e.filterBackend.resources;let S=0,x=0;const C=t;let _=0;v.sliceByTwo||(v.sliceByTwo=fn());const b=v.sliceByTwo;(b.width<1.5*t||b.height<r)&&(b.width=1.5*t,b.height=r);const M=b.getContext("2d");for(M.clearRect(0,0,1.5*t,r),M.putImageData(c,0,0),s=Math.floor(s),a=Math.floor(a);!d||!f;)t=g,r=y,s<Math.floor(g*u)?g=Math.floor(g*u):(g=s,d=!0),a<Math.floor(y*u)?y=Math.floor(y*u):(y=a,f=!0),M.drawImage(b,S,x,t,r,C,_,g,y),S=C,x=_,_+=y;return M.getImageData(S,x,s,a)}lanczosResize(e,t,r,s,a){const c=e.imageData.data,u=e.ctx.createImageData(s,a),d=u.data,f=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,y=this.rcpScaleY,v=2/this.rcpScaleX,S=2/this.rcpScaleY,x=Math.ceil(g*this.lanczosLobes/2),C=Math.ceil(y*this.lanczosLobes/2),_={},b={x:0,y:0},M={x:0,y:0};return function L(z){let V,$,Y,G,se,ue,_e,Ce,pe,de,we;for(b.x=(z+.5)*g,M.x=Math.floor(b.x),V=0;V<a;V++){for(b.y=(V+.5)*y,M.y=Math.floor(b.y),se=0,ue=0,_e=0,Ce=0,pe=0,$=M.x-x;$<=M.x+x;$++)if(!($<0||$>=t)){de=Math.floor(1e3*Math.abs($-b.x)),_[de]||(_[de]={});for(let Oe=M.y-C;Oe<=M.y+C;Oe++)Oe<0||Oe>=r||(we=Math.floor(1e3*Math.abs(Oe-b.y)),_[de][we]||(_[de][we]=f(Math.sqrt(Math.pow(de*v,2)+Math.pow(we*S,2))/1e3)),Y=_[de][we],Y>0&&(G=4*(Oe*t+$),se+=Y,ue+=Y*c[G],_e+=Y*c[G+1],Ce+=Y*c[G+2],pe+=Y*c[G+3]))}G=4*(V*s+z),d[G]=ue/se,d[G+1]=_e/se,d[G+2]=Ce/se,d[G+3]=pe/se}return++z<s?L(z):u}(0)}bilinearFiltering(e,t,r,s,a){let c,u,d,f,g,y,v,S,x,C,_,b,M,L=0;const z=this.rcpScaleX,V=this.rcpScaleY,$=4*(t-1),Y=e.imageData.data,G=e.ctx.createImageData(s,a),se=G.data;for(v=0;v<a;v++)for(S=0;S<s;S++)for(g=Math.floor(z*S),y=Math.floor(V*v),x=z*S-g,C=V*v-y,M=4*(y*t+g),_=0;_<4;_++)c=Y[M+_],u=Y[M+4+_],d=Y[M+$+_],f=Y[M+$+4+_],b=c*(1-x)*(1-C)+u*x*(1-C)+d*C*(1-x)+f*x*C,se[L++]=b;return G}hermiteFastResize(e,t,r,s,a){const c=this.rcpScaleX,u=this.rcpScaleY,d=Math.ceil(c/2),f=Math.ceil(u/2),g=e.imageData.data,y=e.ctx.createImageData(s,a),v=y.data;for(let S=0;S<a;S++)for(let x=0;x<s;x++){const C=4*(x+S*s);let _=0,b=0,M=0,L=0,z=0,V=0,$=0;const Y=(S+.5)*u;for(let G=Math.floor(S*u);G<(S+1)*u;G++){const se=Math.abs(Y-(G+.5))/f,ue=(x+.5)*c,_e=se*se;for(let Ce=Math.floor(x*c);Ce<(x+1)*c;Ce++){let pe=Math.abs(ue-(Ce+.5))/d;const de=Math.sqrt(_e+pe*pe);de>1&&de<-1||(_=2*de*de*de-3*de*de+1,_>0&&(pe=4*(Ce+G*t),$+=_*g[pe+3],M+=_,g[pe+3]<255&&(_=_*g[pe+3]/250),L+=_*g[pe],z+=_*g[pe+1],V+=_*g[pe+2],b+=_))}}v[C]=L/b,v[C+1]=z/b,v[C+2]=V/b,v[C+3]=$/M}return y}}O(Ka,"type","Resize"),O(Ka,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),O(Ka,"uniformLocations",["uDelta","uTaps"]),ee.setClass(Ka);class Qa extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2],d=Math.max(a,c,u);t[s]+=d!==a?(d-a)*r:0,t[s+1]+=d!==c?(d-c)*r:0,t[s+2]+=d!==u?(d-u)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}O(Qa,"type","Saturation"),O(Qa,"defaults",{saturation:0}),O(Qa,"uniformLocations",["uSaturation"]),ee.setClass(Qa);class Ja extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2],d=Math.max(a,c,u),f=(a+c+u)/3,g=2*Math.abs(d-f)/255*r;t[s]+=d!==a?(d-a)*g:0,t[s+1]+=d!==c?(d-c)*g:0,t[s+2]+=d!==u?(d-u)*g:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}O(Ja,"type","Vibrance"),O(Ja,"defaults",{vibrance:0}),O(Ja,"uniformLocations",["uVibrance"]),ee.setClass(Ja);function hi(o,e,t,r){function s(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(g){try{f(r.next(g))}catch(y){c(y)}}function d(g){try{f(r.throw(g))}catch(y){c(y)}}function f(g){g.done?a(g.value):s(g.value).then(u,d)}f((r=r.apply(o,e||[])).next())})}const r_=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Qi(o,e,t){const r=i_(o),{webkitRelativePath:s}=o,a=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${o.name}`;return typeof r.path!="string"&&Gg(r,"path",a),Gg(r,"relativePath",a),r}function i_(o){const{name:e}=o;if(e&&e.lastIndexOf(".")!==-1&&!o.type){const r=e.split(".").pop().toLowerCase(),s=r_.get(r);s&&Object.defineProperty(o,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return o}function Gg(o,e,t){Object.defineProperty(o,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const s_=[".DS_Store","Thumbs.db"];function o_(o){return hi(this,void 0,void 0,function*(){return kl(o)&&a_(o.dataTransfer)?h_(o.dataTransfer,o.type):l_(o)?c_(o):Array.isArray(o)&&o.every(e=>"getFile"in e&&typeof e.getFile=="function")?u_(o):[]})}function a_(o){return kl(o)}function l_(o){return kl(o)&&kl(o.target)}function kl(o){return typeof o=="object"&&o!==null}function c_(o){return vh(o.target.files).map(e=>Qi(e))}function u_(o){return hi(this,void 0,void 0,function*(){return(yield Promise.all(o.map(t=>t.getFile()))).map(t=>Qi(t))})}function h_(o,e){return hi(this,void 0,void 0,function*(){if(o.items){const t=vh(o.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(d_));return qg(Bv(r))}return qg(vh(o.files).map(t=>Qi(t)))})}function qg(o){return o.filter(e=>s_.indexOf(e.name)===-1)}function vh(o){if(o===null)return[];const e=[];for(let t=0;t<o.length;t++){const r=o[t];e.push(r)}return e}function d_(o){if(typeof o.webkitGetAsEntry!="function")return $g(o);const e=o.webkitGetAsEntry();return e&&e.isDirectory?Wv(e):$g(o,e)}function Bv(o){return o.reduce((e,t)=>[...e,...Array.isArray(t)?Bv(t):[t]],[])}function $g(o,e){return hi(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof o.getAsFileSystemHandle=="function"){const a=yield o.getAsFileSystemHandle();if(a===null)throw new Error(`${o} is not a File`);if(a!==void 0){const c=yield a.getFile();return c.handle=a,Qi(c)}}const r=o.getAsFile();if(!r)throw new Error(`${o} is not a File`);return Qi(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function p_(o){return hi(this,void 0,void 0,function*(){return o.isDirectory?Wv(o):f_(o)})}function Wv(o){const e=o.createReader();return new Promise((t,r)=>{const s=[];function a(){e.readEntries(c=>hi(this,void 0,void 0,function*(){if(c.length){const u=Promise.all(c.map(p_));s.push(u),a()}else try{const u=yield Promise.all(s);t(u)}catch(u){r(u)}}),c=>{r(c)})}a()})}function f_(o){return hi(this,void 0,void 0,function*(){return new Promise((e,t)=>{o.file(r=>{const s=Qi(r,o.fullPath);e(s)},r=>{t(r)})})})}var Za={},Kg;function g_(){return Kg||(Kg=1,Za.__esModule=!0,Za.default=function(o,e){if(o&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=o.name||"",s=(o.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return t.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?a===u.replace(/\/.*$/,""):s===u})}return!0}),Za}var m_=g_();const Qu=El(m_);function Qg(o){return x_(o)||y_(o)||Vv(o)||v_()}function v_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y_(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function x_(o){if(Array.isArray(o))return yh(o)}function Jg(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,r)}return t}function Zg(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jg(Object(t),!0).forEach(function(r){Uv(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Jg(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function Uv(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function co(o,e){return C_(o)||S_(o,e)||Vv(o,e)||w_()}function w_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vv(o,e){if(o){if(typeof o=="string")return yh(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yh(o,e)}}function yh(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=o[t];return r}function S_(o,e){var t=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var r=[],s=!0,a=!1,c,u;try{for(t=t.call(o);!(s=(c=t.next()).done)&&(r.push(c.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,u=d}finally{try{!s&&t.return!=null&&t.return()}finally{if(a)throw u}}return r}}function C_(o){if(Array.isArray(o))return o}var __=typeof Qu=="function"?Qu:Qu.default,k_="file-invalid-type",b_="file-too-large",T_="file-too-small",E_="too-many-files",A_=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:k_,message:"File type must be ".concat(r)}},em=function(e){return{code:b_,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},tm=function(e){return{code:T_,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},O_={code:E_,message:"Too many files"};function Hv(o,e){var t=o.type==="application/x-moz-file"||__(o,e);return[t,t?null:A_(e)]}function Yv(o,e,t){if(Zr(o.size))if(Zr(e)&&Zr(t)){if(o.size>t)return[!1,em(t)];if(o.size<e)return[!1,tm(e)]}else{if(Zr(e)&&o.size<e)return[!1,tm(e)];if(Zr(t)&&o.size>t)return[!1,em(t)]}return[!0,null]}function Zr(o){return o!=null}function j_(o){var e=o.files,t=o.accept,r=o.minSize,s=o.maxSize,a=o.multiple,c=o.maxFiles,u=o.validator;return!a&&e.length>1||a&&c>=1&&e.length>c?!1:e.every(function(d){var f=Hv(d,t),g=co(f,1),y=g[0],v=Yv(d,r,s),S=co(v,1),x=S[0],C=u?u(d):null;return y&&x&&!C})}function bl(o){return typeof o.isPropagationStopped=="function"?o.isPropagationStopped():typeof o.cancelBubble<"u"?o.cancelBubble:!1}function el(o){return o.dataTransfer?Array.prototype.some.call(o.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!o.target&&!!o.target.files}function nm(o){o.preventDefault()}function D_(o){return o.indexOf("MSIE")!==-1||o.indexOf("Trident/")!==-1}function P_(o){return o.indexOf("Edge/")!==-1}function M_(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return D_(o)||P_(o)}function Cn(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return e.some(function(u){return!bl(r)&&u&&u.apply(void 0,[r].concat(a)),bl(r)})}}function F_(){return"showOpenFilePicker"in window}function R_(o){if(Zr(o)){var e=Object.entries(o).filter(function(t){var r=co(t,2),s=r[0],a=r[1],c=!0;return Xv(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every(Gv))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(t,r){var s=co(r,2),a=s[0],c=s[1];return Zg(Zg({},t),{},Uv({},a,c))},{});return[{description:"Files",accept:e}]}return o}function L_(o){if(Zr(o))return Object.entries(o).reduce(function(e,t){var r=co(t,2),s=r[0],a=r[1];return[].concat(Qg(e),[s],Qg(a))},[]).filter(function(e){return Xv(e)||Gv(e)}).join(",")}function I_(o){return o instanceof DOMException&&(o.name==="AbortError"||o.code===o.ABORT_ERR)}function N_(o){return o instanceof DOMException&&(o.name==="SecurityError"||o.code===o.SECURITY_ERR)}function Xv(o){return o==="audio/*"||o==="video/*"||o==="image/*"||o==="text/*"||o==="application/*"||/\w+\/[-+.\w]+/g.test(o)}function Gv(o){return/^.*\.[\w]+$/.test(o)}var z_=["children"],B_=["open"],W_=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],U_=["refKey","onChange","onClick"];function V_(o){return X_(o)||Y_(o)||qv(o)||H_()}function H_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y_(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function X_(o){if(Array.isArray(o))return xh(o)}function Ju(o,e){return $_(o)||q_(o,e)||qv(o,e)||G_()}function G_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qv(o,e){if(o){if(typeof o=="string")return xh(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xh(o,e)}}function xh(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=o[t];return r}function q_(o,e){var t=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var r=[],s=!0,a=!1,c,u;try{for(t=t.call(o);!(s=(c=t.next()).done)&&(r.push(c.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,u=d}finally{try{!s&&t.return!=null&&t.return()}finally{if(a)throw u}}return r}}function $_(o){if(Array.isArray(o))return o}function rm(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,r)}return t}function He(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rm(Object(t),!0).forEach(function(r){wh(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):rm(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function wh(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Tl(o,e){if(o==null)return{};var t=K_(o,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(o,r)&&(t[r]=o[r])}return t}function K_(o,e){if(o==null)return{};var t={},r=Object.keys(o),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=o[s]);return t}var Jh=E.forwardRef(function(o,e){var t=o.children,r=Tl(o,z_),s=Kv(r),a=s.open,c=Tl(s,B_);return E.useImperativeHandle(e,function(){return{open:a}},[a]),ex.createElement(E.Fragment,null,t(He(He({},c),{},{open:a})))});Jh.displayName="Dropzone";var $v={disabled:!1,getFilesFromEvent:o_,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Jh.defaultProps=$v;Jh.propTypes={children:ae.func,accept:ae.objectOf(ae.arrayOf(ae.string)),multiple:ae.bool,preventDropOnDocument:ae.bool,noClick:ae.bool,noKeyboard:ae.bool,noDrag:ae.bool,noDragEventsBubbling:ae.bool,minSize:ae.number,maxSize:ae.number,maxFiles:ae.number,disabled:ae.bool,getFilesFromEvent:ae.func,onFileDialogCancel:ae.func,onFileDialogOpen:ae.func,useFsAccessApi:ae.bool,autoFocus:ae.bool,onDragEnter:ae.func,onDragLeave:ae.func,onDragOver:ae.func,onDrop:ae.func,onDropAccepted:ae.func,onDropRejected:ae.func,onError:ae.func,validator:ae.func};var Sh={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Kv(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=He(He({},$v),o),t=e.accept,r=e.disabled,s=e.getFilesFromEvent,a=e.maxSize,c=e.minSize,u=e.multiple,d=e.maxFiles,f=e.onDragEnter,g=e.onDragLeave,y=e.onDragOver,v=e.onDrop,S=e.onDropAccepted,x=e.onDropRejected,C=e.onFileDialogCancel,_=e.onFileDialogOpen,b=e.useFsAccessApi,M=e.autoFocus,L=e.preventDropOnDocument,z=e.noClick,V=e.noKeyboard,$=e.noDrag,Y=e.noDragEventsBubbling,G=e.onError,se=e.validator,ue=E.useMemo(function(){return L_(t)},[t]),_e=E.useMemo(function(){return R_(t)},[t]),Ce=E.useMemo(function(){return typeof _=="function"?_:im},[_]),pe=E.useMemo(function(){return typeof C=="function"?C:im},[C]),de=E.useRef(null),we=E.useRef(null),Oe=E.useReducer(Q_,Sh),Se=Ju(Oe,2),H=Se[0],Q=Se[1],K=H.isFocused,P=H.isFileDialogActive,B=E.useRef(typeof window<"u"&&window.isSecureContext&&b&&F_()),fe=function(){!B.current&&P&&setTimeout(function(){if(we.current){var he=we.current.files;he.length||(Q({type:"closeDialog"}),pe())}},300)};E.useEffect(function(){return window.addEventListener("focus",fe,!1),function(){window.removeEventListener("focus",fe,!1)}},[we,P,pe,B]);var oe=E.useRef([]),ve=function(he){de.current&&de.current.contains(he.target)||(he.preventDefault(),oe.current=[])};E.useEffect(function(){return L&&(document.addEventListener("dragover",nm,!1),document.addEventListener("drop",ve,!1)),function(){L&&(document.removeEventListener("dragover",nm),document.removeEventListener("drop",ve))}},[de,L]),E.useEffect(function(){return!r&&M&&de.current&&de.current.focus(),function(){}},[de,M,r]);var ge=E.useCallback(function(J){G?G(J):console.error(J)},[G]),ke=E.useCallback(function(J){J.preventDefault(),J.persist(),mn(J),oe.current=[].concat(V_(oe.current),[J.target]),el(J)&&Promise.resolve(s(J)).then(function(he){if(!(bl(J)&&!Y)){var Be=he.length,Ge=Be>0&&j_({files:he,accept:ue,minSize:c,maxSize:a,multiple:u,maxFiles:d,validator:se}),st=Be>0&&!Ge;Q({isDragAccept:Ge,isDragReject:st,isDragActive:!0,type:"setDraggedFiles"}),f&&f(J)}}).catch(function(he){return ge(he)})},[s,f,ge,Y,ue,c,a,u,d,se]),be=E.useCallback(function(J){J.preventDefault(),J.persist(),mn(J);var he=el(J);if(he&&J.dataTransfer)try{J.dataTransfer.dropEffect="copy"}catch{}return he&&y&&y(J),!1},[y,Y]),je=E.useCallback(function(J){J.preventDefault(),J.persist(),mn(J);var he=oe.current.filter(function(Ge){return de.current&&de.current.contains(Ge)}),Be=he.indexOf(J.target);Be!==-1&&he.splice(Be,1),oe.current=he,!(he.length>0)&&(Q({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),el(J)&&g&&g(J))},[de,g,Y]),Fe=E.useCallback(function(J,he){var Be=[],Ge=[];J.forEach(function(st){var nr=Hv(st,ue),Ut=Ju(nr,2),Dn=Ut[0],cs=Ut[1],fi=Yv(st,c,a),Mr=Ju(fi,2),us=Mr[0],Fr=Mr[1],Rr=se?se(st):null;if(Dn&&us&&!Rr)Be.push(st);else{var Lr=[cs,Fr];Rr&&(Lr=Lr.concat(Rr)),Ge.push({file:st,errors:Lr.filter(function(hs){return hs})})}}),(!u&&Be.length>1||u&&d>=1&&Be.length>d)&&(Be.forEach(function(st){Ge.push({file:st,errors:[O_]})}),Be.splice(0)),Q({acceptedFiles:Be,fileRejections:Ge,isDragReject:Ge.length>0,type:"setFiles"}),v&&v(Be,Ge,he),Ge.length>0&&x&&x(Ge,he),Be.length>0&&S&&S(Be,he)},[Q,u,ue,c,a,d,v,S,x,se]),On=E.useCallback(function(J){J.preventDefault(),J.persist(),mn(J),oe.current=[],el(J)&&Promise.resolve(s(J)).then(function(he){bl(J)&&!Y||Fe(he,J)}).catch(function(he){return ge(he)}),Q({type:"reset"})},[s,Fe,ge,Y]),jn=E.useCallback(function(){if(B.current){Q({type:"openDialog"}),Ce();var J={multiple:u,types:_e};window.showOpenFilePicker(J).then(function(he){return s(he)}).then(function(he){Fe(he,null),Q({type:"closeDialog"})}).catch(function(he){I_(he)?(pe(he),Q({type:"closeDialog"})):N_(he)?(B.current=!1,we.current?(we.current.value=null,we.current.click()):ge(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ge(he)});return}we.current&&(Q({type:"openDialog"}),Ce(),we.current.value=null,we.current.click())},[Q,Ce,pe,b,Fe,ge,_e,u]),Pr=E.useCallback(function(J){!de.current||!de.current.isEqualNode(J.target)||(J.key===" "||J.key==="Enter"||J.keyCode===32||J.keyCode===13)&&(J.preventDefault(),jn())},[de,jn]),di=E.useCallback(function(){Q({type:"focus"})},[]),os=E.useCallback(function(){Q({type:"blur"})},[]),as=E.useCallback(function(){z||(M_()?setTimeout(jn,0):jn())},[z,jn]),gn=function(he){return r?null:he},pi=function(he){return V?null:gn(he)},er=function(he){return $?null:gn(he)},mn=function(he){Y&&he.stopPropagation()},tr=E.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=J.refKey,Be=he===void 0?"ref":he,Ge=J.role,st=J.onKeyDown,nr=J.onFocus,Ut=J.onBlur,Dn=J.onClick,cs=J.onDragEnter,fi=J.onDragOver,Mr=J.onDragLeave,us=J.onDrop,Fr=Tl(J,W_);return He(He(wh({onKeyDown:pi(Cn(st,Pr)),onFocus:pi(Cn(nr,di)),onBlur:pi(Cn(Ut,os)),onClick:gn(Cn(Dn,as)),onDragEnter:er(Cn(cs,ke)),onDragOver:er(Cn(fi,be)),onDragLeave:er(Cn(Mr,je)),onDrop:er(Cn(us,On)),role:typeof Ge=="string"&&Ge!==""?Ge:"presentation"},Be,de),!r&&!V?{tabIndex:0}:{}),Fr)}},[de,Pr,di,os,as,ke,be,je,On,V,$,r]),ls=E.useCallback(function(J){J.stopPropagation()},[]),yo=E.useMemo(function(){return function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=J.refKey,Be=he===void 0?"ref":he,Ge=J.onChange,st=J.onClick,nr=Tl(J,U_),Ut=wh({accept:ue,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:gn(Cn(Ge,On)),onClick:gn(Cn(st,ls)),tabIndex:-1},Be,we);return He(He({},Ut),nr)}},[we,t,u,On,r]);return He(He({},H),{},{isFocused:K&&!r,getRootProps:tr,getInputProps:yo,rootRef:de,inputRef:we,open:gn(jn)})}function Q_(o,e){switch(e.type){case"focus":return He(He({},o),{},{isFocused:!0});case"blur":return He(He({},o),{},{isFocused:!1});case"openDialog":return He(He({},Sh),{},{isFileDialogActive:!0});case"closeDialog":return He(He({},o),{},{isFileDialogActive:!1});case"setDraggedFiles":return He(He({},o),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return He(He({},o),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return He({},Sh);default:return o}}function im(){}const J_="data:image/svg+xml,%3csvg%20width='471'%20height='428'%20viewBox='0%200%20471%20428'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M57%20214.2C57%20303.733%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%2057%20124.667%2057%20214.2Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M413.35%20214.2C413.35%20303.733%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%20413.35%20124.667%20413.35%20214.2Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M146.088%20368.504C223.626%20413.271%20235.176%20214.2%20235.176%20214.2C235.176%20214.2%2068.5505%20323.738%20146.088%20368.504Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M324.262%2059.8963C401.8%20104.663%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%20246.724%2015.1299%20324.262%2059.8963Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M324.261%20368.504C246.724%20413.271%20235.174%20214.2%20235.174%20214.2C235.174%20214.2%20401.799%20323.738%20324.261%20368.504Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M146.088%2059.8963C68.55%20104.663%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%20223.625%2015.1299%20146.088%2059.8963Z'%20fill='%23B5CFFD'/%3e%3c/svg%3e",Z_="data:image/svg+xml,%3csvg%20width='471'%20height='428'%20viewBox='0%200%20471%20428'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M92%20214.175C171.051%20214.175%20235.134%20134.403%20235.134%2036C235.134%20134.403%20299.217%20214.175%20378.267%20214.175C299.217%20214.175%20235.134%20293.946%20235.134%20392.35C235.134%20293.946%20171.051%20214.175%2092%20214.175Z'%20fill='%23FFE18D'/%3e%3c/svg%3e",ek="data:image/svg+xml,%3csvg%20width='471'%20height='427'%20viewBox='0%200%20471%20427'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M180.385%20158.385L82%20213.644L180.385%20268.904L235.644%20367.289L290.904%20268.904L389.289%20213.644L290.904%20158.385L235.644%2060L180.385%20158.385Z'%20fill='%23FFBFD6'/%3e%3c/svg%3e",tk=[J_,Z_,ek];function nk(){ci();const o=Er(),e=Ar(),t=Zi(),r=E.useRef(null),s=E.useRef(null),a=E.useCallback(y=>{for(const v of y)f(URL.createObjectURL(v))},[]),{getRootProps:c,getInputProps:u,isDragActive:d}=Kv({accept:"image/*",maxFiles:1,onDrop:a});E.useEffect(()=>{if(!r.current)return;s.current||(s.current=new gh(r.current));const y=e.layout==="original"?{width:122,height:362}:{width:244,height:362};return s.current.setDimensions(y),r.current.width=y.width,r.current.height=y.height,s.current.getObjects().forEach(v=>{v.left=Math.min(v.left,y.width-10),v.top=Math.min(v.top,y.height-10)}),s.current.renderAll(),()=>{s.current.dispose()}},[e.layout]),E.useEffect(()=>{const y=v=>{if(["Delete","Backspace"].includes(v.key)){const S=s.current,x=S.getActiveObject();x&&S.remove(x)}};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[]);const f=y=>{const v=s.current,S=document.createElement("img");S.src=y,S.alt=y,S.onload=()=>{const x=new Wt(S),C=x.height/x.width,b=50/x.width,M=b*C;x.set({left:0,top:0,scaleX:b,scaleY:M,hasBorders:!0,hasControls:!0,lockScalingFlip:!0,cornerSize:12,cornerColor:"transparent",cornerStyle:"circle",transparentCorners:!0,borderColor:"rgba(255, 255, 255, 0.5)"}),v.add(x),v.centerObject(x),v.setActiveObject(x)}},g=()=>{const y=s.current,v=8,S=e.layout==="original"?122:244,x=362;y.setWidth(S*v),y.setHeight(x*v),y.getObjects().forEach(_=>{_.set({scaleX:_.scaleX*v,scaleY:_.scaleY*v,left:_.left*v,top:_.top*v}),_.setCoords()});const C=y.toDataURL({format:"png",quality:1});y.setWidth(S),y.setHeight(x),t(_=>({..._,stickers:C})),o("/download")};return k.jsxs("div",{children:[k.jsx(Or,{}),k.jsxs("section",{className:"options-c",children:[k.jsx("h1",{className:"options-heading",children:"Add sticker"}),k.jsxs("section",{className:"options-r",children:[k.jsxs("div",{className:"frame-wrapper",children:[k.jsx("canvas",{width:tg[e.layout].width,height:tg[e.layout].height,ref:r}),k.jsx(li,{layout:e.layout,filter:e.filter,images:e.images,design:e.design})]}),k.jsxs("section",{className:"options-box",children:[k.jsxs("section",{children:[k.jsx("p",{className:"options-box-label",children:"Gallery"}),tk.map((y,v)=>k.jsx("img",{className:"sticker",src:y,alt:`Sticker ${v+1}`,onClick:()=>f(y)},v))]}),k.jsxs("section",{children:[k.jsx("p",{className:"options-box-label",children:"Upload"}),k.jsxs("div",{className:"dropzone",...c(),children:[k.jsx("input",{...u()}),d?k.jsx("p",{children:"Drop your file here"}):k.jsxs("p",{children:["Drag and drop or"," ",k.jsx("span",{className:"underline",children:"click to upload"})]})]})]})]})]}),k.jsx("button",{className:"btn",onClick:()=>{g()},children:"Continue"})]})]})}const rk=()=>(E.useEffect(()=>{window.scrollTo(0,0)},[]),k.jsxs("div",{children:[k.jsx(Eh,{}),k.jsx("div",{className:"privacy-container",children:k.jsx("div",{className:"privacy-content-wrapper",children:k.jsxs("div",{className:"privacy-text-section",children:[k.jsx("h1",{className:"privacy-heading",children:"Privacy Policy"}),k.jsx("div",{className:"privacy-text-container",children:k.jsx("p",{className:"privacy-paragraph",children:"At NeroFilm, your privacy comes first. We dont track, collect, or store your data. Everything you create stays on your device, and nothing is uploaded or shared."})})]})})}),k.jsx(Ah,{})]}));function ik(){const o=Ar(),e=E.useRef(null),[t,r]=E.useState(!1),s=()=>{Lm(o.allImages||o.images,e,r)};return k.jsxs("div",{className:"timelapse-container",children:[k.jsx(Or,{}),k.jsx("h1",{className:"timelapse-title",children:"Download Timelapse"}),k.jsx("canvas",{ref:e,style:{display:"none"}}),k.jsx("button",{className:"btn",onClick:s,disabled:t,children:t?"Generating...":"Download Timelapse"})]})}const sk=()=>k.jsx(km,{children:k.jsx(pw,{children:k.jsxs(Hx,{children:[k.jsx(Bt,{path:"/",element:k.jsx(Pw,{})}),k.jsx(Bt,{path:"/about",element:k.jsx(Iw,{})}),k.jsx(Bt,{path:"/instructions",element:k.jsx(g2,{})}),k.jsx(Bt,{path:"/frame-layout",element:k.jsx(Zw,{})}),k.jsx(Bt,{path:"/camera",element:k.jsx(p2,{})}),k.jsx(Bt,{path:"/photo-selection",element:k.jsx(f2,{})}),k.jsx(Bt,{path:"/frame-design",element:k.jsx(u1,{})}),k.jsx(Bt,{path:"/filter",element:k.jsx(i1,{})}),k.jsx(Bt,{path:"/sticker",element:k.jsx(nk,{})}),k.jsx(Bt,{path:"/download",element:k.jsx(s2,{})}),k.jsx(Bt,{path:"/timelapse",element:k.jsx(ik,{})}),k.jsx(Bt,{path:"/privacy-policy",element:k.jsx(rk,{})})]})})});Zy.createRoot(document.getElementById("root")).render(k.jsx(sk,{}));
