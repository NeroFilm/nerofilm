(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Dl(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Du={exports:{}},Hs={},Ou={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf;function $0(){if(Wf)return _e;Wf=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function k(P,V,ue){this.props=P,this.context=V,this.refs=S,this.updater=ue||C}k.prototype.isReactComponent={},k.prototype.setState=function(P,V){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,V,"setState")},k.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function _(){}_.prototype=k.prototype;function M(P,V,ue){this.props=P,this.context=V,this.refs=S,this.updater=ue||C}var F=M.prototype=new _;F.constructor=M,x(F,k.prototype),F.isPureReactComponent=!0;var N=Array.isArray,U=Object.prototype.hasOwnProperty,H={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function X(P,V,ue){var ae,ye={},ge=null,Ee=null;if(V!=null)for(ae in V.ref!==void 0&&(Ee=V.ref),V.key!==void 0&&(ge=""+V.key),V)U.call(V,ae)&&!W.hasOwnProperty(ae)&&(ye[ae]=V[ae]);var be=arguments.length-2;if(be===1)ye.children=ue;else if(1<be){for(var Oe=Array(be),Ie=0;Ie<be;Ie++)Oe[Ie]=arguments[Ie+2];ye.children=Oe}if(P&&P.defaultProps)for(ae in be=P.defaultProps,be)ye[ae]===void 0&&(ye[ae]=be[ae]);return{$$typeof:o,type:P,key:ge,ref:Ee,props:ye,_owner:H.current}}function se(P,V){return{$$typeof:o,type:P.type,key:V,ref:P.ref,props:P.props,_owner:P._owner}}function le(P){return typeof P=="object"&&P!==null&&P.$$typeof===o}function we(P){var V={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return V[ue]})}var Se=/\/+/g;function pe(P,V){return typeof P=="object"&&P!==null&&P.key!=null?we(""+P.key):V.toString(36)}function ee(P,V,ue,ae,ye){var ge=typeof P;(ge==="undefined"||ge==="boolean")&&(P=null);var Ee=!1;if(P===null)Ee=!0;else switch(ge){case"string":case"number":Ee=!0;break;case"object":switch(P.$$typeof){case o:case e:Ee=!0}}if(Ee)return Ee=P,ye=ye(Ee),P=ae===""?"."+pe(Ee,0):ae,N(ye)?(ue="",P!=null&&(ue=P.replace(Se,"$&/")+"/"),ee(ye,V,ue,"",function(Ie){return Ie})):ye!=null&&(le(ye)&&(ye=se(ye,ue+(!ye.key||Ee&&Ee.key===ye.key?"":(""+ye.key).replace(Se,"$&/")+"/")+P)),V.push(ye)),1;if(Ee=0,ae=ae===""?".":ae+":",N(P))for(var be=0;be<P.length;be++){ge=P[be];var Oe=ae+pe(ge,be);Ee+=ee(ge,V,ue,Oe,ye)}else if(Oe=y(P),typeof Oe=="function")for(P=Oe.call(P),be=0;!(ge=P.next()).done;)ge=ge.value,Oe=ae+pe(ge,be++),Ee+=ee(ge,V,ue,Oe,ye);else if(ge==="object")throw V=String(P),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return Ee}function ce(P,V,ue){if(P==null)return P;var ae=[],ye=0;return ee(P,ae,"","",function(ge){return V.call(ue,ge,ye++)}),ae}function ke(P){if(P._status===-1){var V=P._result;V=V(),V.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=V)}if(P._status===1)return P._result.default;throw P._result}var me={current:null},z={transition:null},K={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:z,ReactCurrentOwner:H};function q(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:ce,forEach:function(P,V,ue){ce(P,function(){V.apply(this,arguments)},ue)},count:function(P){var V=0;return ce(P,function(){V++}),V},toArray:function(P){return ce(P,function(V){return V})||[]},only:function(P){if(!le(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},_e.Component=k,_e.Fragment=t,_e.Profiler=s,_e.PureComponent=M,_e.StrictMode=r,_e.Suspense=d,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,_e.act=q,_e.cloneElement=function(P,V,ue){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ae=x({},P.props),ye=P.key,ge=P.ref,Ee=P._owner;if(V!=null){if(V.ref!==void 0&&(ge=V.ref,Ee=H.current),V.key!==void 0&&(ye=""+V.key),P.type&&P.type.defaultProps)var be=P.type.defaultProps;for(Oe in V)U.call(V,Oe)&&!W.hasOwnProperty(Oe)&&(ae[Oe]=V[Oe]===void 0&&be!==void 0?be[Oe]:V[Oe])}var Oe=arguments.length-2;if(Oe===1)ae.children=ue;else if(1<Oe){be=Array(Oe);for(var Ie=0;Ie<Oe;Ie++)be[Ie]=arguments[Ie+2];ae.children=be}return{$$typeof:o,type:P.type,key:ye,ref:ge,props:ae,_owner:Ee}},_e.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:a,_context:P},P.Consumer=P},_e.createElement=X,_e.createFactory=function(P){var V=X.bind(null,P);return V.type=P,V},_e.createRef=function(){return{current:null}},_e.forwardRef=function(P){return{$$typeof:u,render:P}},_e.isValidElement=le,_e.lazy=function(P){return{$$typeof:g,_payload:{_status:-1,_result:P},_init:ke}},_e.memo=function(P,V){return{$$typeof:f,type:P,compare:V===void 0?null:V}},_e.startTransition=function(P){var V=z.transition;z.transition={};try{P()}finally{z.transition=V}},_e.unstable_act=q,_e.useCallback=function(P,V){return me.current.useCallback(P,V)},_e.useContext=function(P){return me.current.useContext(P)},_e.useDebugValue=function(){},_e.useDeferredValue=function(P){return me.current.useDeferredValue(P)},_e.useEffect=function(P,V){return me.current.useEffect(P,V)},_e.useId=function(){return me.current.useId()},_e.useImperativeHandle=function(P,V,ue){return me.current.useImperativeHandle(P,V,ue)},_e.useInsertionEffect=function(P,V){return me.current.useInsertionEffect(P,V)},_e.useLayoutEffect=function(P,V){return me.current.useLayoutEffect(P,V)},_e.useMemo=function(P,V){return me.current.useMemo(P,V)},_e.useReducer=function(P,V,ue){return me.current.useReducer(P,V,ue)},_e.useRef=function(P){return me.current.useRef(P)},_e.useState=function(P){return me.current.useState(P)},_e.useSyncExternalStore=function(P,V,ue){return me.current.useSyncExternalStore(P,V,ue)},_e.useTransition=function(){return me.current.useTransition()},_e.version="18.3.1",_e}var Vf;function Ol(){return Vf||(Vf=1,Ou.exports=$0()),Ou.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf;function K0(){if(Uf)return Hs;Uf=1;var o=Ol(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var g,v={},y=null,C=null;f!==void 0&&(y=""+f),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(C=d.ref);for(g in d)r.call(d,g)&&!a.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:u,key:y,ref:C,props:v,_owner:s.current}}return Hs.Fragment=t,Hs.jsx=c,Hs.jsxs=c,Hs}var Yf;function q0(){return Yf||(Yf=1,Du.exports=K0()),Du.exports}var b=q0(),ba={},ju={exports:{}},Tt={},Pu={exports:{}},Mu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf;function Z0(){return Qf||(Qf=1,function(o){function e(z,K){var q=z.length;z.push(K);e:for(;0<q;){var P=q-1>>>1,V=z[P];if(0<s(V,K))z[P]=K,z[q]=V,q=P;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],q=z.pop();if(q!==K){z[0]=q;e:for(var P=0,V=z.length,ue=V>>>1;P<ue;){var ae=2*(P+1)-1,ye=z[ae],ge=ae+1,Ee=z[ge];if(0>s(ye,q))ge<V&&0>s(Ee,ye)?(z[P]=Ee,z[ge]=q,P=ge):(z[P]=ye,z[ae]=q,P=ae);else if(ge<V&&0>s(Ee,q))z[P]=Ee,z[ge]=q,P=ge;else break e}}return K}function s(z,K){var q=z.sortIndex-K.sortIndex;return q!==0?q:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();o.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,v=null,y=3,C=!1,x=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(z){for(var K=t(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=z)r(f),K.sortIndex=K.expirationTime,e(d,K);else break;K=t(f)}}function N(z){if(S=!1,F(z),!x)if(t(d)!==null)x=!0,ke(U);else{var K=t(f);K!==null&&me(N,K.startTime-z)}}function U(z,K){x=!1,S&&(S=!1,_(X),X=-1),C=!0;var q=y;try{for(F(K),v=t(d);v!==null&&(!(v.expirationTime>K)||z&&!we());){var P=v.callback;if(typeof P=="function"){v.callback=null,y=v.priorityLevel;var V=P(v.expirationTime<=K);K=o.unstable_now(),typeof V=="function"?v.callback=V:v===t(d)&&r(d),F(K)}else r(d);v=t(d)}if(v!==null)var ue=!0;else{var ae=t(f);ae!==null&&me(N,ae.startTime-K),ue=!1}return ue}finally{v=null,y=q,C=!1}}var H=!1,W=null,X=-1,se=5,le=-1;function we(){return!(o.unstable_now()-le<se)}function Se(){if(W!==null){var z=o.unstable_now();le=z;var K=!0;try{K=W(!0,z)}finally{K?pe():(H=!1,W=null)}}else H=!1}var pe;if(typeof M=="function")pe=function(){M(Se)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ce=ee.port2;ee.port1.onmessage=Se,pe=function(){ce.postMessage(null)}}else pe=function(){k(Se,0)};function ke(z){W=z,H||(H=!0,pe())}function me(z,K){X=k(function(){z(o.unstable_now())},K)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(z){z.callback=null},o.unstable_continueExecution=function(){x||C||(x=!0,ke(U))},o.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<z?Math.floor(1e3/z):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_getFirstCallbackNode=function(){return t(d)},o.unstable_next=function(z){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var q=y;y=K;try{return z()}finally{y=q}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=y;y=z;try{return K()}finally{y=q}},o.unstable_scheduleCallback=function(z,K,q){var P=o.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?P+q:P):q=P,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=q+V,z={id:g++,callback:K,priorityLevel:z,startTime:q,expirationTime:V,sortIndex:-1},q>P?(z.sortIndex=q,e(f,z),t(d)===null&&z===t(f)&&(S?(_(X),X=-1):S=!0,me(N,q-P))):(z.sortIndex=V,e(d,z),x||C||(x=!0,ke(U))),z},o.unstable_shouldYield=we,o.unstable_wrapCallback=function(z){var K=y;return function(){var q=y;y=K;try{return z.apply(this,arguments)}finally{y=q}}}}(Mu)),Mu}var Gf;function J0(){return Gf||(Gf=1,Pu.exports=Z0()),Pu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf;function ex(){if(Hf)return Tt;Hf=1;var o=Ol(),e=J0();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(n,i){c(n,i),c(n+"Capture",i)}function c(n,i){for(s[n]=i,n=0;n<i.length;n++)r.add(i[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(n){return d.call(v,n)?!0:d.call(g,n)?!1:f.test(n)?v[n]=!0:(g[n]=!0,!1)}function C(n,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x(n,i,l,h){if(i===null||typeof i>"u"||C(n,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function S(n,i,l,h,p,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new S(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];k[i]=new S(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new S(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new S(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new S(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new S(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new S(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new S(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new S(n,5,!1,n.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(_,M);k[i]=new S(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(_,M);k[i]=new S(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(_,M);k[i]=new S(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new S(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new S(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,i,l,h){var p=k.hasOwnProperty(i)?k[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(x(i,l,p,h)&&(l=null),h||p===null?y(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):p.mustUseProperty?n[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,h=p.attributeNamespace,l===null?n.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?n.setAttributeNS(h,i,l):n.setAttribute(i,l))))}var N=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),H=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),we=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),z=Symbol.iterator;function K(n){return n===null||typeof n!="object"?null:(n=z&&n[z]||n["@@iterator"],typeof n=="function"?n:null)}var q=Object.assign,P;function V(n){if(P===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+n}var ue=!1;function ae(n,i){if(!n||ue)return"";ue=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(L){var h=L}Reflect.construct(n,[],i)}else{try{i.call()}catch(L){h=L}n.call(i.prototype)}else{try{throw Error()}catch(L){h=L}n()}}catch(L){if(L&&h&&typeof L.stack=="string"){for(var p=L.stack.split(`
`),m=h.stack.split(`
`),w=p.length-1,E=m.length-1;1<=w&&0<=E&&p[w]!==m[E];)E--;for(;1<=w&&0<=E;w--,E--)if(p[w]!==m[E]){if(w!==1||E!==1)do if(w--,E--,0>E||p[w]!==m[E]){var A=`
`+p[w].replace(" at new "," at ");return n.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",n.displayName)),A}while(1<=w&&0<=E);break}}}finally{ue=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?V(n):""}function ye(n){switch(n.tag){case 5:return V(n.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return n=ae(n.type,!1),n;case 11:return n=ae(n.type.render,!1),n;case 1:return n=ae(n.type,!0),n;default:return""}}function ge(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case H:return"Portal";case se:return"Profiler";case X:return"StrictMode";case pe:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case we:return(n.displayName||"Context")+".Consumer";case le:return(n._context.displayName||"Context")+".Provider";case Se:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ce:return i=n.displayName||null,i!==null?i:ge(n.type)||"Memo";case ke:i=n._payload,n=n._init;try{return ge(n(i))}catch{}}return null}function Ee(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(i);case 8:return i===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ie(n){var i=Oe(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),h=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(w){h=""+w,m.call(this,w)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Dn(n){n._valueTracker||(n._valueTracker=Ie(n))}function On(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return n&&(h=Oe(n)?n.checked?"true":"false":n.value),n=h,n!==l?(i.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hi(n,i){var l=i.checked;return q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function ss(n,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=be(i.value!=null?i.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function os(n,i){i=i.checked,i!=null&&F(n,"checked",i,!1)}function gn(n,i){os(n,i);var l=be(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?tr(n,i.type,l):i.hasOwnProperty("defaultValue")&&tr(n,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function di(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function tr(n,i,l){(i!=="number"||jr(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var mn=Array.isArray;function nr(n,i,l,h){if(n=n.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=i.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&h&&(n[l].defaultSelected=!0)}else{for(l=""+be(l),i=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,h&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function as(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function yo(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(mn(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:be(l)}}function Z(n,i){var l=be(i.value),h=be(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function fe(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ze(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ze(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var st,rr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,p){MSApp.execUnsafeLocalFunction(function(){return n(i,l,h,p)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=st.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Vt(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ls=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(n){ls.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),jn[i]=jn[n]})});function pi(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||jn.hasOwnProperty(n)&&jn[n]?(""+i).trim():i+"px"}function Pr(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=pi(l,i[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,p):n[l]=p}}var cs=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mr(n,i){if(i){if(cs[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ir(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fr=null;function us(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ql=null,fi=null,gi=null;function rd(n){if(n=Ps(n)){if(typeof Ql!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Wo(i),Ql(n.stateNode,n.type,i))}}function id(n){fi?gi?gi.push(n):gi=[n]:fi=n}function sd(){if(fi){var n=fi,i=gi;if(gi=fi=null,rd(n),i)for(n=0;n<i.length;n++)rd(i[n])}}function od(n,i){return n(i)}function ad(){}var Gl=!1;function ld(n,i,l){if(Gl)return n(i,l);Gl=!0;try{return od(n,i,l)}finally{Gl=!1,(fi!==null||gi!==null)&&(ad(),sd())}}function hs(n,i){var l=n.stateNode;if(l===null)return null;var h=Wo(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Hl=!1;if(u)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{Hl=!1}function ty(n,i,l,h,p,m,w,E,A){var L=Array.prototype.slice.call(arguments,3);try{i.apply(l,L)}catch(Q){this.onError(Q)}}var ps=!1,xo=null,wo=!1,Xl=null,ny={onError:function(n){ps=!0,xo=n}};function ry(n,i,l,h,p,m,w,E,A){ps=!1,xo=null,ty.apply(ny,arguments)}function iy(n,i,l,h,p,m,w,E,A){if(ry.apply(this,arguments),ps){if(ps){var L=xo;ps=!1,xo=null}else throw Error(t(198));wo||(wo=!0,Xl=L)}}function Rr(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function cd(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function ud(n){if(Rr(n)!==n)throw Error(t(188))}function sy(n){var i=n.alternate;if(!i){if(i=Rr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,h=i;;){var p=l.return;if(p===null)break;var m=p.alternate;if(m===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===l)return ud(p),n;if(m===h)return ud(p),i;m=m.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=m;else{for(var w=!1,E=p.child;E;){if(E===l){w=!0,l=p,h=m;break}if(E===h){w=!0,h=p,l=m;break}E=E.sibling}if(!w){for(E=m.child;E;){if(E===l){w=!0,l=m,h=p;break}if(E===h){w=!0,h=m,l=p;break}E=E.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function hd(n){return n=sy(n),n!==null?dd(n):null}function dd(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=dd(n);if(i!==null)return i;n=n.sibling}return null}var pd=e.unstable_scheduleCallback,fd=e.unstable_cancelCallback,oy=e.unstable_shouldYield,ay=e.unstable_requestPaint,$e=e.unstable_now,ly=e.unstable_getCurrentPriorityLevel,$l=e.unstable_ImmediatePriority,gd=e.unstable_UserBlockingPriority,Co=e.unstable_NormalPriority,cy=e.unstable_LowPriority,md=e.unstable_IdlePriority,So=null,vn=null;function uy(n){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(So,n,void 0,(n.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:py,hy=Math.log,dy=Math.LN2;function py(n){return n>>>=0,n===0?32:31-(hy(n)/dy|0)|0}var _o=64,ko=4194304;function fs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Eo(n,i){var l=n.pendingLanes;if(l===0)return 0;var h=0,p=n.suspendedLanes,m=n.pingedLanes,w=l&268435455;if(w!==0){var E=w&~p;E!==0?h=fs(E):(m&=w,m!==0&&(h=fs(m)))}else w=l&~p,w!==0?h=fs(w):m!==0&&(h=fs(m));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,m=i&-i,p>=m||p===16&&(m&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=h;0<i;)l=31-Jt(i),p=1<<l,h|=n[l],i&=~p;return h}function fy(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gy(n,i){for(var l=n.suspendedLanes,h=n.pingedLanes,p=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-Jt(m),E=1<<w,A=p[w];A===-1?((E&l)===0||(E&h)!==0)&&(p[w]=fy(E,i)):A<=i&&(n.expiredLanes|=E),m&=~E}}function Kl(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function vd(){var n=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),n}function ql(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function gs(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Jt(i),n[i]=l}function my(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var p=31-Jt(l),m=1<<p;i[p]=0,h[p]=-1,n[p]=-1,l&=~m}}function Zl(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var h=31-Jt(l),p=1<<h;p&i|n[h]&i&&(n[h]|=i),l&=~p}}var Pe=0;function yd(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var xd,Jl,wd,Cd,Sd,ec=!1,bo=[],ir=null,sr=null,or=null,ms=new Map,vs=new Map,ar=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _d(n,i){switch(n){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":ms.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(i.pointerId)}}function ys(n,i,l,h,p,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[p]},i!==null&&(i=Ps(i),i!==null&&Jl(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function yy(n,i,l,h,p){switch(i){case"focusin":return ir=ys(ir,n,i,l,h,p),!0;case"dragenter":return sr=ys(sr,n,i,l,h,p),!0;case"mouseover":return or=ys(or,n,i,l,h,p),!0;case"pointerover":var m=p.pointerId;return ms.set(m,ys(ms.get(m)||null,n,i,l,h,p)),!0;case"gotpointercapture":return m=p.pointerId,vs.set(m,ys(vs.get(m)||null,n,i,l,h,p)),!0}return!1}function kd(n){var i=Lr(n.target);if(i!==null){var l=Rr(i);if(l!==null){if(i=l.tag,i===13){if(i=cd(l),i!==null){n.blockedOn=i,Sd(n.priority,function(){wd(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ao(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=nc(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Fr=h,l.target.dispatchEvent(h),Fr=null}else return i=Ps(l),i!==null&&Jl(i),n.blockedOn=l,!1;i.shift()}return!0}function Ed(n,i,l){Ao(n)&&l.delete(i)}function xy(){ec=!1,ir!==null&&Ao(ir)&&(ir=null),sr!==null&&Ao(sr)&&(sr=null),or!==null&&Ao(or)&&(or=null),ms.forEach(Ed),vs.forEach(Ed)}function xs(n,i){n.blockedOn===i&&(n.blockedOn=null,ec||(ec=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xy)))}function ws(n){function i(p){return xs(p,n)}if(0<bo.length){xs(bo[0],n);for(var l=1;l<bo.length;l++){var h=bo[l];h.blockedOn===n&&(h.blockedOn=null)}}for(ir!==null&&xs(ir,n),sr!==null&&xs(sr,n),or!==null&&xs(or,n),ms.forEach(i),vs.forEach(i),l=0;l<ar.length;l++)h=ar[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<ar.length&&(l=ar[0],l.blockedOn===null);)kd(l),l.blockedOn===null&&ar.shift()}var mi=N.ReactCurrentBatchConfig,To=!0;function wy(n,i,l,h){var p=Pe,m=mi.transition;mi.transition=null;try{Pe=1,tc(n,i,l,h)}finally{Pe=p,mi.transition=m}}function Cy(n,i,l,h){var p=Pe,m=mi.transition;mi.transition=null;try{Pe=4,tc(n,i,l,h)}finally{Pe=p,mi.transition=m}}function tc(n,i,l,h){if(To){var p=nc(n,i,l,h);if(p===null)xc(n,i,h,Do,l),_d(n,h);else if(yy(p,n,i,l,h))h.stopPropagation();else if(_d(n,h),i&4&&-1<vy.indexOf(n)){for(;p!==null;){var m=Ps(p);if(m!==null&&xd(m),m=nc(n,i,l,h),m===null&&xc(n,i,h,Do,l),m===p)break;p=m}p!==null&&h.stopPropagation()}else xc(n,i,h,null,l)}}var Do=null;function nc(n,i,l,h){if(Do=null,n=us(h),n=Lr(n),n!==null)if(i=Rr(n),i===null)n=null;else if(l=i.tag,l===13){if(n=cd(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Do=n,null}function bd(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ly()){case $l:return 1;case gd:return 4;case Co:case cy:return 16;case md:return 536870912;default:return 16}default:return 16}}var lr=null,rc=null,Oo=null;function Ad(){if(Oo)return Oo;var n,i=rc,l=i.length,h,p="value"in lr?lr.value:lr.textContent,m=p.length;for(n=0;n<l&&i[n]===p[n];n++);var w=l-n;for(h=1;h<=w&&i[l-h]===p[m-h];h++);return Oo=p.slice(n,1<h?1-h:void 0)}function jo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Po(){return!0}function Td(){return!1}function Ft(n){function i(l,h,p,m,w){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(l=n[E],this[E]=l?l(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Po:Td,this.isPropagationStopped=Td,this}return q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),i}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=Ft(vi),Cs=q({},vi,{view:0,detail:0}),Sy=Ft(Cs),sc,oc,Ss,Mo=q({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ss&&(Ss&&n.type==="mousemove"?(sc=n.screenX-Ss.screenX,oc=n.screenY-Ss.screenY):oc=sc=0,Ss=n),sc)},movementY:function(n){return"movementY"in n?n.movementY:oc}}),Dd=Ft(Mo),_y=q({},Mo,{dataTransfer:0}),ky=Ft(_y),Ey=q({},Cs,{relatedTarget:0}),ac=Ft(Ey),by=q({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ay=Ft(by),Ty=q({},vi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dy=Ft(Ty),Oy=q({},vi,{data:0}),Od=Ft(Oy),jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},My={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iy(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=My[n])?!!i[n]:!1}function lc(){return Iy}var Fy=q({},Cs,{key:function(n){if(n.key){var i=jy[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=jo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Py[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(n){return n.type==="keypress"?jo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?jo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ry=Ft(Fy),Ly=q({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jd=Ft(Ly),By=q({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),Ny=Ft(By),zy=q({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=Ft(zy),Vy=q({},Mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Uy=Ft(Vy),Yy=[9,13,27,32],cc=u&&"CompositionEvent"in window,_s=null;u&&"documentMode"in document&&(_s=document.documentMode);var Qy=u&&"TextEvent"in window&&!_s,Pd=u&&(!cc||_s&&8<_s&&11>=_s),Md=" ",Id=!1;function Fd(n,i){switch(n){case"keyup":return Yy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var yi=!1;function Gy(n,i){switch(n){case"compositionend":return Rd(i);case"keypress":return i.which!==32?null:(Id=!0,Md);case"textInput":return n=i.data,n===Md&&Id?null:n;default:return null}}function Hy(n,i){if(yi)return n==="compositionend"||!cc&&Fd(n,i)?(n=Ad(),Oo=rc=lr=null,yi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pd&&i.locale!=="ko"?null:i.data;default:return null}}var Xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Xy[n.type]:i==="textarea"}function Bd(n,i,l,h){id(h),i=Bo(i,"onChange"),0<i.length&&(l=new ic("onChange","change",null,l,h),n.push({event:l,listeners:i}))}var ks=null,Es=null;function $y(n){np(n,0)}function Io(n){var i=_i(n);if(On(i))return n}function Ky(n,i){if(n==="change")return i}var Nd=!1;if(u){var uc;if(u){var hc="oninput"in document;if(!hc){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),hc=typeof zd.oninput=="function"}uc=hc}else uc=!1;Nd=uc&&(!document.documentMode||9<document.documentMode)}function Wd(){ks&&(ks.detachEvent("onpropertychange",Vd),Es=ks=null)}function Vd(n){if(n.propertyName==="value"&&Io(Es)){var i=[];Bd(i,Es,n,us(n)),ld($y,i)}}function qy(n,i,l){n==="focusin"?(Wd(),ks=i,Es=l,ks.attachEvent("onpropertychange",Vd)):n==="focusout"&&Wd()}function Zy(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Io(Es)}function Jy(n,i){if(n==="click")return Io(i)}function e0(n,i){if(n==="input"||n==="change")return Io(i)}function t0(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var en=typeof Object.is=="function"?Object.is:t0;function bs(n,i){if(en(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!d.call(i,p)||!en(n[p],i[p]))return!1}return!0}function Ud(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yd(n,i){var l=Ud(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=i&&h>=i)return{node:l,offset:i-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ud(l)}}function Qd(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Qd(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Gd(){for(var n=window,i=jr();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=jr(n.document)}return i}function dc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function n0(n){var i=Gd(),l=n.focusedElem,h=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Qd(l.ownerDocument.documentElement,l)){if(h!==null&&dc(l)){if(i=h.start,n=h.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var p=l.textContent.length,m=Math.min(h.start,p);h=h.end===void 0?m:Math.min(h.end,p),!n.extend&&m>h&&(p=h,h=m,m=p),p=Yd(l,m);var w=Yd(l,h);p&&w&&(n.rangeCount!==1||n.anchorNode!==p.node||n.anchorOffset!==p.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),n.removeAllRanges(),m>h?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var r0=u&&"documentMode"in document&&11>=document.documentMode,xi=null,pc=null,As=null,fc=!1;function Hd(n,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fc||xi==null||xi!==jr(h)||(h=xi,"selectionStart"in h&&dc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),As&&bs(As,h)||(As=h,h=Bo(pc,"onSelect"),0<h.length&&(i=new ic("onSelect","select",null,i,l),n.push({event:i,listeners:h}),i.target=xi)))}function Fo(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var wi={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionend:Fo("Transition","TransitionEnd")},gc={},Xd={};u&&(Xd=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Ro(n){if(gc[n])return gc[n];if(!wi[n])return n;var i=wi[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Xd)return gc[n]=i[l];return n}var $d=Ro("animationend"),Kd=Ro("animationiteration"),qd=Ro("animationstart"),Zd=Ro("transitionend"),Jd=new Map,ep="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(n,i){Jd.set(n,i),a(i,[n])}for(var mc=0;mc<ep.length;mc++){var vc=ep[mc],i0=vc.toLowerCase(),s0=vc[0].toUpperCase()+vc.slice(1);cr(i0,"on"+s0)}cr($d,"onAnimationEnd"),cr(Kd,"onAnimationIteration"),cr(qd,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(Zd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function tp(n,i,l){var h=n.type||"unknown-event";n.currentTarget=l,iy(h,i,void 0,n),n.currentTarget=null}function np(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],p=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var w=h.length-1;0<=w;w--){var E=h[w],A=E.instance,L=E.currentTarget;if(E=E.listener,A!==m&&p.isPropagationStopped())break e;tp(p,E,L),m=A}else for(w=0;w<h.length;w++){if(E=h[w],A=E.instance,L=E.currentTarget,E=E.listener,A!==m&&p.isPropagationStopped())break e;tp(p,E,L),m=A}}}if(wo)throw n=Xl,wo=!1,Xl=null,n}function Re(n,i){var l=i[Ec];l===void 0&&(l=i[Ec]=new Set);var h=n+"__bubble";l.has(h)||(rp(i,n,2,!1),l.add(h))}function yc(n,i,l){var h=0;i&&(h|=4),rp(l,n,h,i)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Ds(n){if(!n[Lo]){n[Lo]=!0,r.forEach(function(l){l!=="selectionchange"&&(o0.has(l)||yc(l,!1,n),yc(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Lo]||(i[Lo]=!0,yc("selectionchange",!1,i))}}function rp(n,i,l,h){switch(bd(i)){case 1:var p=wy;break;case 4:p=Cy;break;default:p=tc}l=p.bind(null,i,l,n),p=void 0,!Hl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?n.addEventListener(i,l,{capture:!0,passive:p}):n.addEventListener(i,l,!0):p!==void 0?n.addEventListener(i,l,{passive:p}):n.addEventListener(i,l,!1)}function xc(n,i,l,h,p){var m=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var E=h.stateNode.containerInfo;if(E===p||E.nodeType===8&&E.parentNode===p)break;if(w===4)for(w=h.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===p||A.nodeType===8&&A.parentNode===p))return;w=w.return}for(;E!==null;){if(w=Lr(E),w===null)return;if(A=w.tag,A===5||A===6){h=m=w;continue e}E=E.parentNode}}h=h.return}ld(function(){var L=m,Q=us(l),G=[];e:{var Y=Jd.get(n);if(Y!==void 0){var J=ic,re=n;switch(n){case"keypress":if(jo(l)===0)break e;case"keydown":case"keyup":J=Ry;break;case"focusin":re="focus",J=ac;break;case"focusout":re="blur",J=ac;break;case"beforeblur":case"afterblur":J=ac;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Ny;break;case $d:case Kd:case qd:J=Ay;break;case Zd:J=Wy;break;case"scroll":J=Sy;break;case"wheel":J=Uy;break;case"copy":case"cut":case"paste":J=Dy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=jd}var ie=(i&4)!==0,Ke=!ie&&n==="scroll",I=ie?Y!==null?Y+"Capture":null:Y;ie=[];for(var O=L,R;O!==null;){R=O;var $=R.stateNode;if(R.tag===5&&$!==null&&(R=$,I!==null&&($=hs(O,I),$!=null&&ie.push(Os(O,$,R)))),Ke)break;O=O.return}0<ie.length&&(Y=new J(Y,re,null,l,Q),G.push({event:Y,listeners:ie}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",Y&&l!==Fr&&(re=l.relatedTarget||l.fromElement)&&(Lr(re)||re[Pn]))break e;if((J||Y)&&(Y=Q.window===Q?Q:(Y=Q.ownerDocument)?Y.defaultView||Y.parentWindow:window,J?(re=l.relatedTarget||l.toElement,J=L,re=re?Lr(re):null,re!==null&&(Ke=Rr(re),re!==Ke||re.tag!==5&&re.tag!==6)&&(re=null)):(J=null,re=L),J!==re)){if(ie=Dd,$="onMouseLeave",I="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ie=jd,$="onPointerLeave",I="onPointerEnter",O="pointer"),Ke=J==null?Y:_i(J),R=re==null?Y:_i(re),Y=new ie($,O+"leave",J,l,Q),Y.target=Ke,Y.relatedTarget=R,$=null,Lr(Q)===L&&(ie=new ie(I,O+"enter",re,l,Q),ie.target=R,ie.relatedTarget=Ke,$=ie),Ke=$,J&&re)t:{for(ie=J,I=re,O=0,R=ie;R;R=Ci(R))O++;for(R=0,$=I;$;$=Ci($))R++;for(;0<O-R;)ie=Ci(ie),O--;for(;0<R-O;)I=Ci(I),R--;for(;O--;){if(ie===I||I!==null&&ie===I.alternate)break t;ie=Ci(ie),I=Ci(I)}ie=null}else ie=null;J!==null&&ip(G,Y,J,ie,!1),re!==null&&Ke!==null&&ip(G,Ke,re,ie,!0)}}e:{if(Y=L?_i(L):window,J=Y.nodeName&&Y.nodeName.toLowerCase(),J==="select"||J==="input"&&Y.type==="file")var oe=Ky;else if(Ld(Y))if(Nd)oe=e0;else{oe=Zy;var he=qy}else(J=Y.nodeName)&&J.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(oe=Jy);if(oe&&(oe=oe(n,L))){Bd(G,oe,l,Q);break e}he&&he(n,Y,L),n==="focusout"&&(he=Y._wrapperState)&&he.controlled&&Y.type==="number"&&tr(Y,"number",Y.value)}switch(he=L?_i(L):window,n){case"focusin":(Ld(he)||he.contentEditable==="true")&&(xi=he,pc=L,As=null);break;case"focusout":As=pc=xi=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,Hd(G,l,Q);break;case"selectionchange":if(r0)break;case"keydown":case"keyup":Hd(G,l,Q)}var de;if(cc)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else yi?Fd(n,l)&&(ve="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ve="onCompositionStart");ve&&(Pd&&l.locale!=="ko"&&(yi||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&yi&&(de=Ad()):(lr=Q,rc="value"in lr?lr.value:lr.textContent,yi=!0)),he=Bo(L,ve),0<he.length&&(ve=new Od(ve,n,null,l,Q),G.push({event:ve,listeners:he}),de?ve.data=de:(de=Rd(l),de!==null&&(ve.data=de)))),(de=Qy?Gy(n,l):Hy(n,l))&&(L=Bo(L,"onBeforeInput"),0<L.length&&(Q=new Od("onBeforeInput","beforeinput",null,l,Q),G.push({event:Q,listeners:L}),Q.data=de))}np(G,i)})}function Os(n,i,l){return{instance:n,listener:i,currentTarget:l}}function Bo(n,i){for(var l=i+"Capture",h=[];n!==null;){var p=n,m=p.stateNode;p.tag===5&&m!==null&&(p=m,m=hs(n,l),m!=null&&h.unshift(Os(n,m,p)),m=hs(n,i),m!=null&&h.push(Os(n,m,p))),n=n.return}return h}function Ci(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ip(n,i,l,h,p){for(var m=i._reactName,w=[];l!==null&&l!==h;){var E=l,A=E.alternate,L=E.stateNode;if(A!==null&&A===h)break;E.tag===5&&L!==null&&(E=L,p?(A=hs(l,m),A!=null&&w.unshift(Os(l,A,E))):p||(A=hs(l,m),A!=null&&w.push(Os(l,A,E)))),l=l.return}w.length!==0&&n.push({event:i,listeners:w})}var a0=/\r\n?/g,l0=/\u0000|\uFFFD/g;function sp(n){return(typeof n=="string"?n:""+n).replace(a0,`
`).replace(l0,"")}function No(n,i,l){if(i=sp(i),sp(n)!==i&&l)throw Error(t(425))}function zo(){}var wc=null,Cc=null;function Sc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _c=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,u0=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(n){return op.resolve(null).then(n).catch(h0)}:_c;function h0(n){setTimeout(function(){throw n})}function kc(n,i){var l=i,h=0;do{var p=l.nextSibling;if(n.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){n.removeChild(p),ws(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);ws(i)}function ur(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function ap(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var Si=Math.random().toString(36).slice(2),yn="__reactFiber$"+Si,js="__reactProps$"+Si,Pn="__reactContainer$"+Si,Ec="__reactEvents$"+Si,d0="__reactListeners$"+Si,p0="__reactHandles$"+Si;function Lr(n){var i=n[yn];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Pn]||l[yn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=ap(n);n!==null;){if(l=n[yn])return l;n=ap(n)}return i}n=l,l=n.parentNode}return null}function Ps(n){return n=n[yn]||n[Pn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function _i(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Wo(n){return n[js]||null}var bc=[],ki=-1;function hr(n){return{current:n}}function Le(n){0>ki||(n.current=bc[ki],bc[ki]=null,ki--)}function Fe(n,i){ki++,bc[ki]=n.current,n.current=i}var dr={},dt=hr(dr),_t=hr(!1),Br=dr;function Ei(n,i){var l=n.type.contextTypes;if(!l)return dr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},m;for(m in l)p[m]=i[m];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=p),p}function kt(n){return n=n.childContextTypes,n!=null}function Vo(){Le(_t),Le(dt)}function lp(n,i,l){if(dt.current!==dr)throw Error(t(168));Fe(dt,i),Fe(_t,l)}function cp(n,i,l){var h=n.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,Ee(n)||"Unknown",p));return q({},l,h)}function Uo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||dr,Br=dt.current,Fe(dt,n),Fe(_t,_t.current),!0}function up(n,i,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=cp(n,i,Br),h.__reactInternalMemoizedMergedChildContext=n,Le(_t),Le(dt),Fe(dt,n)):Le(_t),Fe(_t,l)}var Mn=null,Yo=!1,Ac=!1;function hp(n){Mn===null?Mn=[n]:Mn.push(n)}function f0(n){Yo=!0,hp(n)}function pr(){if(!Ac&&Mn!==null){Ac=!0;var n=0,i=Pe;try{var l=Mn;for(Pe=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}Mn=null,Yo=!1}catch(p){throw Mn!==null&&(Mn=Mn.slice(n+1)),pd($l,pr),p}finally{Pe=i,Ac=!1}}return null}var bi=[],Ai=0,Qo=null,Go=0,Ut=[],Yt=0,Nr=null,In=1,Fn="";function zr(n,i){bi[Ai++]=Go,bi[Ai++]=Qo,Qo=n,Go=i}function dp(n,i,l){Ut[Yt++]=In,Ut[Yt++]=Fn,Ut[Yt++]=Nr,Nr=n;var h=In;n=Fn;var p=32-Jt(h)-1;h&=~(1<<p),l+=1;var m=32-Jt(i)+p;if(30<m){var w=p-p%5;m=(h&(1<<w)-1).toString(32),h>>=w,p-=w,In=1<<32-Jt(i)+p|l<<p|h,Fn=m+n}else In=1<<m|l<<p|h,Fn=n}function Tc(n){n.return!==null&&(zr(n,1),dp(n,1,0))}function Dc(n){for(;n===Qo;)Qo=bi[--Ai],bi[Ai]=null,Go=bi[--Ai],bi[Ai]=null;for(;n===Nr;)Nr=Ut[--Yt],Ut[Yt]=null,Fn=Ut[--Yt],Ut[Yt]=null,In=Ut[--Yt],Ut[Yt]=null}var Rt=null,Lt=null,Be=!1,tn=null;function pp(n,i){var l=Xt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function fp(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Rt=n,Lt=ur(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Rt=n,Lt=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Nr!==null?{id:In,overflow:Fn}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Xt(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,Rt=n,Lt=null,!0):!1;default:return!1}}function Oc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jc(n){if(Be){var i=Lt;if(i){var l=i;if(!fp(n,i)){if(Oc(n))throw Error(t(418));i=ur(l.nextSibling);var h=Rt;i&&fp(n,i)?pp(h,l):(n.flags=n.flags&-4097|2,Be=!1,Rt=n)}}else{if(Oc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Be=!1,Rt=n}}}function gp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rt=n}function Ho(n){if(n!==Rt)return!1;if(!Be)return gp(n),Be=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Sc(n.type,n.memoizedProps)),i&&(i=Lt)){if(Oc(n))throw mp(),Error(t(418));for(;i;)pp(n,i),i=ur(i.nextSibling)}if(gp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){Lt=ur(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}Lt=null}}else Lt=Rt?ur(n.stateNode.nextSibling):null;return!0}function mp(){for(var n=Lt;n;)n=ur(n.nextSibling)}function Ti(){Lt=Rt=null,Be=!1}function Pc(n){tn===null?tn=[n]:tn.push(n)}var g0=N.ReactCurrentBatchConfig;function Ms(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var p=h,m=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var E=p.refs;w===null?delete E[m]:E[m]=w},i._stringRef=m,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function Xo(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function vp(n){var i=n._init;return i(n._payload)}function yp(n){function i(I,O){if(n){var R=I.deletions;R===null?(I.deletions=[O],I.flags|=16):R.push(O)}}function l(I,O){if(!n)return null;for(;O!==null;)i(I,O),O=O.sibling;return null}function h(I,O){for(I=new Map;O!==null;)O.key!==null?I.set(O.key,O):I.set(O.index,O),O=O.sibling;return I}function p(I,O){return I=Cr(I,O),I.index=0,I.sibling=null,I}function m(I,O,R){return I.index=R,n?(R=I.alternate,R!==null?(R=R.index,R<O?(I.flags|=2,O):R):(I.flags|=2,O)):(I.flags|=1048576,O)}function w(I){return n&&I.alternate===null&&(I.flags|=2),I}function E(I,O,R,$){return O===null||O.tag!==6?(O=_u(R,I.mode,$),O.return=I,O):(O=p(O,R),O.return=I,O)}function A(I,O,R,$){var oe=R.type;return oe===W?Q(I,O,R.props.children,$,R.key):O!==null&&(O.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ke&&vp(oe)===O.type)?($=p(O,R.props),$.ref=Ms(I,O,R),$.return=I,$):($=ya(R.type,R.key,R.props,null,I.mode,$),$.ref=Ms(I,O,R),$.return=I,$)}function L(I,O,R,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==R.containerInfo||O.stateNode.implementation!==R.implementation?(O=ku(R,I.mode,$),O.return=I,O):(O=p(O,R.children||[]),O.return=I,O)}function Q(I,O,R,$,oe){return O===null||O.tag!==7?(O=Xr(R,I.mode,$,oe),O.return=I,O):(O=p(O,R),O.return=I,O)}function G(I,O,R){if(typeof O=="string"&&O!==""||typeof O=="number")return O=_u(""+O,I.mode,R),O.return=I,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case U:return R=ya(O.type,O.key,O.props,null,I.mode,R),R.ref=Ms(I,null,O),R.return=I,R;case H:return O=ku(O,I.mode,R),O.return=I,O;case ke:var $=O._init;return G(I,$(O._payload),R)}if(mn(O)||K(O))return O=Xr(O,I.mode,R,null),O.return=I,O;Xo(I,O)}return null}function Y(I,O,R,$){var oe=O!==null?O.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return oe!==null?null:E(I,O,""+R,$);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case U:return R.key===oe?A(I,O,R,$):null;case H:return R.key===oe?L(I,O,R,$):null;case ke:return oe=R._init,Y(I,O,oe(R._payload),$)}if(mn(R)||K(R))return oe!==null?null:Q(I,O,R,$,null);Xo(I,R)}return null}function J(I,O,R,$,oe){if(typeof $=="string"&&$!==""||typeof $=="number")return I=I.get(R)||null,E(O,I,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case U:return I=I.get($.key===null?R:$.key)||null,A(O,I,$,oe);case H:return I=I.get($.key===null?R:$.key)||null,L(O,I,$,oe);case ke:var he=$._init;return J(I,O,R,he($._payload),oe)}if(mn($)||K($))return I=I.get(R)||null,Q(O,I,$,oe,null);Xo(O,$)}return null}function re(I,O,R,$){for(var oe=null,he=null,de=O,ve=O=0,lt=null;de!==null&&ve<R.length;ve++){de.index>ve?(lt=de,de=null):lt=de.sibling;var De=Y(I,de,R[ve],$);if(De===null){de===null&&(de=lt);break}n&&de&&De.alternate===null&&i(I,de),O=m(De,O,ve),he===null?oe=De:he.sibling=De,he=De,de=lt}if(ve===R.length)return l(I,de),Be&&zr(I,ve),oe;if(de===null){for(;ve<R.length;ve++)de=G(I,R[ve],$),de!==null&&(O=m(de,O,ve),he===null?oe=de:he.sibling=de,he=de);return Be&&zr(I,ve),oe}for(de=h(I,de);ve<R.length;ve++)lt=J(de,I,ve,R[ve],$),lt!==null&&(n&&lt.alternate!==null&&de.delete(lt.key===null?ve:lt.key),O=m(lt,O,ve),he===null?oe=lt:he.sibling=lt,he=lt);return n&&de.forEach(function(Sr){return i(I,Sr)}),Be&&zr(I,ve),oe}function ie(I,O,R,$){var oe=K(R);if(typeof oe!="function")throw Error(t(150));if(R=oe.call(R),R==null)throw Error(t(151));for(var he=oe=null,de=O,ve=O=0,lt=null,De=R.next();de!==null&&!De.done;ve++,De=R.next()){de.index>ve?(lt=de,de=null):lt=de.sibling;var Sr=Y(I,de,De.value,$);if(Sr===null){de===null&&(de=lt);break}n&&de&&Sr.alternate===null&&i(I,de),O=m(Sr,O,ve),he===null?oe=Sr:he.sibling=Sr,he=Sr,de=lt}if(De.done)return l(I,de),Be&&zr(I,ve),oe;if(de===null){for(;!De.done;ve++,De=R.next())De=G(I,De.value,$),De!==null&&(O=m(De,O,ve),he===null?oe=De:he.sibling=De,he=De);return Be&&zr(I,ve),oe}for(de=h(I,de);!De.done;ve++,De=R.next())De=J(de,I,ve,De.value,$),De!==null&&(n&&De.alternate!==null&&de.delete(De.key===null?ve:De.key),O=m(De,O,ve),he===null?oe=De:he.sibling=De,he=De);return n&&de.forEach(function(X0){return i(I,X0)}),Be&&zr(I,ve),oe}function Ke(I,O,R,$){if(typeof R=="object"&&R!==null&&R.type===W&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case U:e:{for(var oe=R.key,he=O;he!==null;){if(he.key===oe){if(oe=R.type,oe===W){if(he.tag===7){l(I,he.sibling),O=p(he,R.props.children),O.return=I,I=O;break e}}else if(he.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ke&&vp(oe)===he.type){l(I,he.sibling),O=p(he,R.props),O.ref=Ms(I,he,R),O.return=I,I=O;break e}l(I,he);break}else i(I,he);he=he.sibling}R.type===W?(O=Xr(R.props.children,I.mode,$,R.key),O.return=I,I=O):($=ya(R.type,R.key,R.props,null,I.mode,$),$.ref=Ms(I,O,R),$.return=I,I=$)}return w(I);case H:e:{for(he=R.key;O!==null;){if(O.key===he)if(O.tag===4&&O.stateNode.containerInfo===R.containerInfo&&O.stateNode.implementation===R.implementation){l(I,O.sibling),O=p(O,R.children||[]),O.return=I,I=O;break e}else{l(I,O);break}else i(I,O);O=O.sibling}O=ku(R,I.mode,$),O.return=I,I=O}return w(I);case ke:return he=R._init,Ke(I,O,he(R._payload),$)}if(mn(R))return re(I,O,R,$);if(K(R))return ie(I,O,R,$);Xo(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,O!==null&&O.tag===6?(l(I,O.sibling),O=p(O,R),O.return=I,I=O):(l(I,O),O=_u(R,I.mode,$),O.return=I,I=O),w(I)):l(I,O)}return Ke}var Di=yp(!0),xp=yp(!1),$o=hr(null),Ko=null,Oi=null,Mc=null;function Ic(){Mc=Oi=Ko=null}function Fc(n){var i=$o.current;Le($o),n._currentValue=i}function Rc(n,i,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===l)break;n=n.return}}function ji(n,i){Ko=n,Mc=Oi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Et=!0),n.firstContext=null)}function Qt(n){var i=n._currentValue;if(Mc!==n)if(n={context:n,memoizedValue:i,next:null},Oi===null){if(Ko===null)throw Error(t(308));Oi=n,Ko.dependencies={lanes:0,firstContext:n}}else Oi=Oi.next=n;return i}var Wr=null;function Lc(n){Wr===null?Wr=[n]:Wr.push(n)}function wp(n,i,l,h){var p=i.interleaved;return p===null?(l.next=l,Lc(i)):(l.next=p.next,p.next=l),i.interleaved=l,Rn(n,h)}function Rn(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var fr=!1;function Bc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ln(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function gr(n,i,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ae&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Rn(n,l)}return p=h.interleaved,p===null?(i.next=i,Lc(h)):(i.next=p.next,p.next=i),h.interleaved=i,Rn(n,l)}function qo(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,Zl(n,l)}}function Sp(n,i){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?p=m=w:m=m.next=w,l=l.next}while(l!==null);m===null?p=m=i:m=m.next=i}else p=m=i;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Zo(n,i,l,h){var p=n.updateQueue;fr=!1;var m=p.firstBaseUpdate,w=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var A=E,L=A.next;A.next=null,w===null?m=L:w.next=L,w=A;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==w&&(E===null?Q.firstBaseUpdate=L:E.next=L,Q.lastBaseUpdate=A))}if(m!==null){var G=p.baseState;w=0,Q=L=A=null,E=m;do{var Y=E.lane,J=E.eventTime;if((h&Y)===Y){Q!==null&&(Q=Q.next={eventTime:J,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var re=n,ie=E;switch(Y=i,J=l,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){G=re.call(J,G,Y);break e}G=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,Y=typeof re=="function"?re.call(J,G,Y):re,Y==null)break e;G=q({},G,Y);break e;case 2:fr=!0}}E.callback!==null&&E.lane!==0&&(n.flags|=64,Y=p.effects,Y===null?p.effects=[E]:Y.push(E))}else J={eventTime:J,lane:Y,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(L=Q=J,A=G):Q=Q.next=J,w|=Y;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;Y=E,E=Y.next,Y.next=null,p.lastBaseUpdate=Y,p.shared.pending=null}}while(!0);if(Q===null&&(A=G),p.baseState=A,p.firstBaseUpdate=L,p.lastBaseUpdate=Q,i=p.shared.interleaved,i!==null){p=i;do w|=p.lane,p=p.next;while(p!==i)}else m===null&&(p.shared.lanes=0);Yr|=w,n.lanes=w,n.memoizedState=G}}function _p(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var h=n[i],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Is={},xn=hr(Is),Fs=hr(Is),Rs=hr(Is);function Vr(n){if(n===Is)throw Error(t(174));return n}function Nc(n,i){switch(Fe(Rs,i),Fe(Fs,n),Fe(xn,Is),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:He(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=He(i,n)}Le(xn),Fe(xn,i)}function Pi(){Le(xn),Le(Fs),Le(Rs)}function kp(n){Vr(Rs.current);var i=Vr(xn.current),l=He(i,n.type);i!==l&&(Fe(Fs,n),Fe(xn,l))}function zc(n){Fs.current===n&&(Le(xn),Le(Fs))}var We=hr(0);function Jo(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wc=[];function Vc(){for(var n=0;n<Wc.length;n++)Wc[n]._workInProgressVersionPrimary=null;Wc.length=0}var ea=N.ReactCurrentDispatcher,Uc=N.ReactCurrentBatchConfig,Ur=0,Ve=null,tt=null,ot=null,ta=!1,Ls=!1,Bs=0,m0=0;function pt(){throw Error(t(321))}function Yc(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!en(n[l],i[l]))return!1;return!0}function Qc(n,i,l,h,p,m){if(Ur=m,Ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ea.current=n===null||n.memoizedState===null?w0:C0,n=l(h,p),Ls){m=0;do{if(Ls=!1,Bs=0,25<=m)throw Error(t(301));m+=1,ot=tt=null,i.updateQueue=null,ea.current=S0,n=l(h,p)}while(Ls)}if(ea.current=ia,i=tt!==null&&tt.next!==null,Ur=0,ot=tt=Ve=null,ta=!1,i)throw Error(t(300));return n}function Gc(){var n=Bs!==0;return Bs=0,n}function wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=n:ot=ot.next=n,ot}function Gt(){if(tt===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=ot===null?Ve.memoizedState:ot.next;if(i!==null)ot=i,tt=n;else{if(n===null)throw Error(t(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?Ve.memoizedState=ot=n:ot=ot.next=n}return ot}function Ns(n,i){return typeof i=="function"?i(n):i}function Hc(n){var i=Gt(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=tt,p=h.baseQueue,m=l.pending;if(m!==null){if(p!==null){var w=p.next;p.next=m.next,m.next=w}h.baseQueue=p=m,l.pending=null}if(p!==null){m=p.next,h=h.baseState;var E=w=null,A=null,L=m;do{var Q=L.lane;if((Ur&Q)===Q)A!==null&&(A=A.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),h=L.hasEagerState?L.eagerState:n(h,L.action);else{var G={lane:Q,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};A===null?(E=A=G,w=h):A=A.next=G,Ve.lanes|=Q,Yr|=Q}L=L.next}while(L!==null&&L!==m);A===null?w=h:A.next=E,en(h,i.memoizedState)||(Et=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=A,l.lastRenderedState=h}if(n=l.interleaved,n!==null){p=n;do m=p.lane,Ve.lanes|=m,Yr|=m,p=p.next;while(p!==n)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Xc(n){var i=Gt(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,p=l.pending,m=i.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do m=n(m,w.action),w=w.next;while(w!==p);en(m,i.memoizedState)||(Et=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,h]}function Ep(){}function bp(n,i){var l=Ve,h=Gt(),p=i(),m=!en(h.memoizedState,p);if(m&&(h.memoizedState=p,Et=!0),h=h.queue,$c(Dp.bind(null,l,h,n),[n]),h.getSnapshot!==i||m||ot!==null&&ot.memoizedState.tag&1){if(l.flags|=2048,zs(9,Tp.bind(null,l,h,p,i),void 0,null),at===null)throw Error(t(349));(Ur&30)!==0||Ap(l,i,p)}return p}function Ap(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Ve.updateQueue,i===null?(i={lastEffect:null,stores:null},Ve.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Tp(n,i,l,h){i.value=l,i.getSnapshot=h,Op(i)&&jp(n)}function Dp(n,i,l){return l(function(){Op(i)&&jp(n)})}function Op(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!en(n,l)}catch{return!0}}function jp(n){var i=Rn(n,1);i!==null&&on(i,n,1,-1)}function Pp(n){var i=wn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:n},i.queue=n,n=n.dispatch=x0.bind(null,Ve,n),[i.memoizedState,n]}function zs(n,i,l,h){return n={tag:n,create:i,destroy:l,deps:h,next:null},i=Ve.updateQueue,i===null?(i={lastEffect:null,stores:null},Ve.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,i.lastEffect=n)),n}function Mp(){return Gt().memoizedState}function na(n,i,l,h){var p=wn();Ve.flags|=n,p.memoizedState=zs(1|i,l,void 0,h===void 0?null:h)}function ra(n,i,l,h){var p=Gt();h=h===void 0?null:h;var m=void 0;if(tt!==null){var w=tt.memoizedState;if(m=w.destroy,h!==null&&Yc(h,w.deps)){p.memoizedState=zs(i,l,m,h);return}}Ve.flags|=n,p.memoizedState=zs(1|i,l,m,h)}function Ip(n,i){return na(8390656,8,n,i)}function $c(n,i){return ra(2048,8,n,i)}function Fp(n,i){return ra(4,2,n,i)}function Rp(n,i){return ra(4,4,n,i)}function Lp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Bp(n,i,l){return l=l!=null?l.concat([n]):null,ra(4,4,Lp.bind(null,i,n),l)}function Kc(){}function Np(n,i){var l=Gt();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Yc(i,h[1])?h[0]:(l.memoizedState=[n,i],n)}function zp(n,i){var l=Gt();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&Yc(i,h[1])?h[0]:(n=n(),l.memoizedState=[n,i],n)}function Wp(n,i,l){return(Ur&21)===0?(n.baseState&&(n.baseState=!1,Et=!0),n.memoizedState=l):(en(l,i)||(l=vd(),Ve.lanes|=l,Yr|=l,n.baseState=!0),i)}function v0(n,i){var l=Pe;Pe=l!==0&&4>l?l:4,n(!0);var h=Uc.transition;Uc.transition={};try{n(!1),i()}finally{Pe=l,Uc.transition=h}}function Vp(){return Gt().memoizedState}function y0(n,i,l){var h=xr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Up(n))Yp(i,l);else if(l=wp(n,i,l,h),l!==null){var p=yt();on(l,n,h,p),Qp(l,i,h)}}function x0(n,i,l){var h=xr(n),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Up(n))Yp(i,p);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,E=m(w,l);if(p.hasEagerState=!0,p.eagerState=E,en(E,w)){var A=i.interleaved;A===null?(p.next=p,Lc(i)):(p.next=A.next,A.next=p),i.interleaved=p;return}}catch{}finally{}l=wp(n,i,p,h),l!==null&&(p=yt(),on(l,n,h,p),Qp(l,i,h))}}function Up(n){var i=n.alternate;return n===Ve||i!==null&&i===Ve}function Yp(n,i){Ls=ta=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Qp(n,i,l){if((l&4194240)!==0){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,Zl(n,l)}}var ia={readContext:Qt,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},w0={readContext:Qt,useCallback:function(n,i){return wn().memoizedState=[n,i===void 0?null:i],n},useContext:Qt,useEffect:Ip,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,na(4194308,4,Lp.bind(null,i,n),l)},useLayoutEffect:function(n,i){return na(4194308,4,n,i)},useInsertionEffect:function(n,i){return na(4,2,n,i)},useMemo:function(n,i){var l=wn();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var h=wn();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},h.queue=n,n=n.dispatch=y0.bind(null,Ve,n),[h.memoizedState,n]},useRef:function(n){var i=wn();return n={current:n},i.memoizedState=n},useState:Pp,useDebugValue:Kc,useDeferredValue:function(n){return wn().memoizedState=n},useTransition:function(){var n=Pp(!1),i=n[0];return n=v0.bind(null,n[1]),wn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var h=Ve,p=wn();if(Be){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),at===null)throw Error(t(349));(Ur&30)!==0||Ap(h,i,l)}p.memoizedState=l;var m={value:l,getSnapshot:i};return p.queue=m,Ip(Dp.bind(null,h,m,n),[n]),h.flags|=2048,zs(9,Tp.bind(null,h,m,l,i),void 0,null),l},useId:function(){var n=wn(),i=at.identifierPrefix;if(Be){var l=Fn,h=In;l=(h&~(1<<32-Jt(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=Bs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=m0++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},C0={readContext:Qt,useCallback:Np,useContext:Qt,useEffect:$c,useImperativeHandle:Bp,useInsertionEffect:Fp,useLayoutEffect:Rp,useMemo:zp,useReducer:Hc,useRef:Mp,useState:function(){return Hc(Ns)},useDebugValue:Kc,useDeferredValue:function(n){var i=Gt();return Wp(i,tt.memoizedState,n)},useTransition:function(){var n=Hc(Ns)[0],i=Gt().memoizedState;return[n,i]},useMutableSource:Ep,useSyncExternalStore:bp,useId:Vp,unstable_isNewReconciler:!1},S0={readContext:Qt,useCallback:Np,useContext:Qt,useEffect:$c,useImperativeHandle:Bp,useInsertionEffect:Fp,useLayoutEffect:Rp,useMemo:zp,useReducer:Xc,useRef:Mp,useState:function(){return Xc(Ns)},useDebugValue:Kc,useDeferredValue:function(n){var i=Gt();return tt===null?i.memoizedState=n:Wp(i,tt.memoizedState,n)},useTransition:function(){var n=Xc(Ns)[0],i=Gt().memoizedState;return[n,i]},useMutableSource:Ep,useSyncExternalStore:bp,useId:Vp,unstable_isNewReconciler:!1};function nn(n,i){if(n&&n.defaultProps){i=q({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function qc(n,i,l,h){i=n.memoizedState,l=l(h,i),l=l==null?i:q({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var sa={isMounted:function(n){return(n=n._reactInternals)?Rr(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var h=yt(),p=xr(n),m=Ln(h,p);m.payload=i,l!=null&&(m.callback=l),i=gr(n,m,p),i!==null&&(on(i,n,p,h),qo(i,n,p))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var h=yt(),p=xr(n),m=Ln(h,p);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=gr(n,m,p),i!==null&&(on(i,n,p,h),qo(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=yt(),h=xr(n),p=Ln(l,h);p.tag=2,i!=null&&(p.callback=i),i=gr(n,p,h),i!==null&&(on(i,n,h,l),qo(i,n,h))}};function Gp(n,i,l,h,p,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,m,w):i.prototype&&i.prototype.isPureReactComponent?!bs(l,h)||!bs(p,m):!0}function Hp(n,i,l){var h=!1,p=dr,m=i.contextType;return typeof m=="object"&&m!==null?m=Qt(m):(p=kt(i)?Br:dt.current,h=i.contextTypes,m=(h=h!=null)?Ei(n,p):dr),i=new i(l,m),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=sa,n.stateNode=i,i._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=p,n.__reactInternalMemoizedMaskedChildContext=m),i}function Xp(n,i,l,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==n&&sa.enqueueReplaceState(i,i.state,null)}function Zc(n,i,l,h){var p=n.stateNode;p.props=l,p.state=n.memoizedState,p.refs={},Bc(n);var m=i.contextType;typeof m=="object"&&m!==null?p.context=Qt(m):(m=kt(i)?Br:dt.current,p.context=Ei(n,m)),p.state=n.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(qc(n,i,m,l),p.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&sa.enqueueReplaceState(p,p.state,null),Zo(n,l,p,h),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308)}function Mi(n,i){try{var l="",h=i;do l+=ye(h),h=h.return;while(h);var p=l}catch(m){p=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:i,stack:p,digest:null}}function Jc(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function eu(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function $p(n,i,l){l=Ln(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){da||(da=!0,gu=h),eu(n,i)},l}function Kp(n,i,l){l=Ln(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;l.payload=function(){return h(p)},l.callback=function(){eu(n,i)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){eu(n,i),typeof h!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),l}function qp(n,i,l){var h=n.pingCache;if(h===null){h=n.pingCache=new _0;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(l)||(p.add(l),n=L0.bind(null,n,i,l),i.then(n,n))}function Zp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Jp(n,i,l,h,p){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Ln(-1,1),i.tag=2,gr(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=p,n)}var k0=N.ReactCurrentOwner,Et=!1;function vt(n,i,l,h){i.child=n===null?xp(i,null,l,h):Di(i,n.child,l,h)}function ef(n,i,l,h,p){l=l.render;var m=i.ref;return ji(i,p),h=Qc(n,i,l,h,m,p),l=Gc(),n!==null&&!Et?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,Bn(n,i,p)):(Be&&l&&Tc(i),i.flags|=1,vt(n,i,h,p),i.child)}function tf(n,i,l,h,p){if(n===null){var m=l.type;return typeof m=="function"&&!Su(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=m,nf(n,i,m,h,p)):(n=ya(l.type,null,h,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,(n.lanes&p)===0){var w=m.memoizedProps;if(l=l.compare,l=l!==null?l:bs,l(w,h)&&n.ref===i.ref)return Bn(n,i,p)}return i.flags|=1,n=Cr(m,h),n.ref=i.ref,n.return=i,i.child=n}function nf(n,i,l,h,p){if(n!==null){var m=n.memoizedProps;if(bs(m,h)&&n.ref===i.ref)if(Et=!1,i.pendingProps=h=m,(n.lanes&p)!==0)(n.flags&131072)!==0&&(Et=!0);else return i.lanes=n.lanes,Bn(n,i,p)}return tu(n,i,l,h,p)}function rf(n,i,l){var h=i.pendingProps,p=h.children,m=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Fi,Bt),Bt|=l;else{if((l&1073741824)===0)return n=m!==null?m.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Fe(Fi,Bt),Bt|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:l,Fe(Fi,Bt),Bt|=h}else m!==null?(h=m.baseLanes|l,i.memoizedState=null):h=l,Fe(Fi,Bt),Bt|=h;return vt(n,i,p,l),i.child}function sf(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function tu(n,i,l,h,p){var m=kt(l)?Br:dt.current;return m=Ei(i,m),ji(i,p),l=Qc(n,i,l,h,m,p),h=Gc(),n!==null&&!Et?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~p,Bn(n,i,p)):(Be&&h&&Tc(i),i.flags|=1,vt(n,i,l,p),i.child)}function of(n,i,l,h,p){if(kt(l)){var m=!0;Uo(i)}else m=!1;if(ji(i,p),i.stateNode===null)aa(n,i),Hp(i,l,h),Zc(i,l,h,p),h=!0;else if(n===null){var w=i.stateNode,E=i.memoizedProps;w.props=E;var A=w.context,L=l.contextType;typeof L=="object"&&L!==null?L=Qt(L):(L=kt(l)?Br:dt.current,L=Ei(i,L));var Q=l.getDerivedStateFromProps,G=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";G||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==h||A!==L)&&Xp(i,w,h,L),fr=!1;var Y=i.memoizedState;w.state=Y,Zo(i,h,w,p),A=i.memoizedState,E!==h||Y!==A||_t.current||fr?(typeof Q=="function"&&(qc(i,l,Q,h),A=i.memoizedState),(E=fr||Gp(i,l,E,h,Y,A,L))?(G||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=A),w.props=h,w.state=A,w.context=L,h=E):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,Cp(n,i),E=i.memoizedProps,L=i.type===i.elementType?E:nn(i.type,E),w.props=L,G=i.pendingProps,Y=w.context,A=l.contextType,typeof A=="object"&&A!==null?A=Qt(A):(A=kt(l)?Br:dt.current,A=Ei(i,A));var J=l.getDerivedStateFromProps;(Q=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(E!==G||Y!==A)&&Xp(i,w,h,A),fr=!1,Y=i.memoizedState,w.state=Y,Zo(i,h,w,p);var re=i.memoizedState;E!==G||Y!==re||_t.current||fr?(typeof J=="function"&&(qc(i,l,J,h),re=i.memoizedState),(L=fr||Gp(i,l,L,h,Y,re,A)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,re,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,re,A)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=re),w.props=h,w.state=re,w.context=A,h=L):(typeof w.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),h=!1)}return nu(n,i,l,h,m,p)}function nu(n,i,l,h,p,m){sf(n,i);var w=(i.flags&128)!==0;if(!h&&!w)return p&&up(i,l,!1),Bn(n,i,m);h=i.stateNode,k0.current=i;var E=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,n!==null&&w?(i.child=Di(i,n.child,null,m),i.child=Di(i,null,E,m)):vt(n,i,E,m),i.memoizedState=h.state,p&&up(i,l,!0),i.child}function af(n){var i=n.stateNode;i.pendingContext?lp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&lp(n,i.context,!1),Nc(n,i.containerInfo)}function lf(n,i,l,h,p){return Ti(),Pc(p),i.flags|=256,vt(n,i,l,h),i.child}var ru={dehydrated:null,treeContext:null,retryLane:0};function iu(n){return{baseLanes:n,cachePool:null,transitions:null}}function cf(n,i,l){var h=i.pendingProps,p=We.current,m=!1,w=(i.flags&128)!==0,E;if((E=w)||(E=n!==null&&n.memoizedState===null?!1:(p&2)!==0),E?(m=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(p|=1),Fe(We,p&1),n===null)return jc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,n=h.fallback,m?(h=i.mode,m=i.child,w={mode:"hidden",children:w},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=xa(w,h,0,null),n=Xr(n,h,l,null),m.return=i,n.return=i,m.sibling=n,i.child=m,i.child.memoizedState=iu(l),i.memoizedState=ru,n):su(i,w));if(p=n.memoizedState,p!==null&&(E=p.dehydrated,E!==null))return E0(n,i,w,h,E,p,l);if(m){m=h.fallback,w=i.mode,p=n.child,E=p.sibling;var A={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=A,i.deletions=null):(h=Cr(p,A),h.subtreeFlags=p.subtreeFlags&14680064),E!==null?m=Cr(E,m):(m=Xr(m,w,l,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,w=n.child.memoizedState,w=w===null?iu(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~l,i.memoizedState=ru,h}return m=n.child,n=m.sibling,h=Cr(m,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=h,i.memoizedState=null,h}function su(n,i){return i=xa({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function oa(n,i,l,h){return h!==null&&Pc(h),Di(i,n.child,null,l),n=su(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function E0(n,i,l,h,p,m,w){if(l)return i.flags&256?(i.flags&=-257,h=Jc(Error(t(422))),oa(n,i,w,h)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(m=h.fallback,p=i.mode,h=xa({mode:"visible",children:h.children},p,0,null),m=Xr(m,p,w,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,(i.mode&1)!==0&&Di(i,n.child,null,w),i.child.memoizedState=iu(w),i.memoizedState=ru,m);if((i.mode&1)===0)return oa(n,i,w,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var E=h.dgst;return h=E,m=Error(t(419)),h=Jc(m,h,void 0),oa(n,i,w,h)}if(E=(w&n.childLanes)!==0,Et||E){if(h=at,h!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|w))!==0?0:p,p!==0&&p!==m.retryLane&&(m.retryLane=p,Rn(n,p),on(h,n,p,-1))}return Cu(),h=Jc(Error(t(421))),oa(n,i,w,h)}return p.data==="$?"?(i.flags|=128,i.child=n.child,i=B0.bind(null,n),p._reactRetry=i,null):(n=m.treeContext,Lt=ur(p.nextSibling),Rt=i,Be=!0,tn=null,n!==null&&(Ut[Yt++]=In,Ut[Yt++]=Fn,Ut[Yt++]=Nr,In=n.id,Fn=n.overflow,Nr=i),i=su(i,h.children),i.flags|=4096,i)}function uf(n,i,l){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Rc(n.return,i,l)}function ou(n,i,l,h,p){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=l,m.tailMode=p)}function hf(n,i,l){var h=i.pendingProps,p=h.revealOrder,m=h.tail;if(vt(n,i,h.children,l),h=We.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&uf(n,l,i);else if(n.tag===19)uf(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Fe(We,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)n=l.alternate,n!==null&&Jo(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),ou(i,!1,p,l,m);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&Jo(n)===null){i.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}ou(i,!0,l,null,m);break;case"together":ou(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function aa(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Bn(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Yr|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=Cr(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Cr(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function b0(n,i,l){switch(i.tag){case 3:af(i),Ti();break;case 5:kp(i);break;case 1:kt(i.type)&&Uo(i);break;case 4:Nc(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;Fe($o,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Fe(We,We.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?cf(n,i,l):(Fe(We,We.current&1),n=Bn(n,i,l),n!==null?n.sibling:null);Fe(We,We.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(n.flags&128)!==0){if(h)return hf(n,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Fe(We,We.current),h)break;return null;case 22:case 23:return i.lanes=0,rf(n,i,l)}return Bn(n,i,l)}var df,au,pf,ff;df=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},au=function(){},pf=function(n,i,l,h){var p=n.memoizedProps;if(p!==h){n=i.stateNode,Vr(xn.current);var m=null;switch(l){case"input":p=hi(n,p),h=hi(n,h),m=[];break;case"select":p=q({},p,{value:void 0}),h=q({},h,{value:void 0}),m=[];break;case"textarea":p=as(n,p),h=as(n,h),m=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=zo)}Mr(l,h);var w;l=null;for(L in p)if(!h.hasOwnProperty(L)&&p.hasOwnProperty(L)&&p[L]!=null)if(L==="style"){var E=p[L];for(w in E)E.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(s.hasOwnProperty(L)?m||(m=[]):(m=m||[]).push(L,null));for(L in h){var A=h[L];if(E=p!=null?p[L]:void 0,h.hasOwnProperty(L)&&A!==E&&(A!=null||E!=null))if(L==="style")if(E){for(w in E)!E.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in A)A.hasOwnProperty(w)&&E[w]!==A[w]&&(l||(l={}),l[w]=A[w])}else l||(m||(m=[]),m.push(L,l)),l=A;else L==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,E=E?E.__html:void 0,A!=null&&E!==A&&(m=m||[]).push(L,A)):L==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push(L,""+A):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(s.hasOwnProperty(L)?(A!=null&&L==="onScroll"&&Re("scroll",n),m||E===A||(m=[])):(m=m||[]).push(L,A))}l&&(m=m||[]).push("style",l);var L=m;(i.updateQueue=L)&&(i.flags|=4)}},ff=function(n,i,l,h){l!==h&&(i.flags|=4)};function Ws(n,i){if(!Be)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(i)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=h,n.childLanes=l,i}function A0(n,i,l){var h=i.pendingProps;switch(Dc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return kt(i.type)&&Vo(),ft(i),null;case 3:return h=i.stateNode,Pi(),Le(_t),Le(dt),Vc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Ho(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tn!==null&&(yu(tn),tn=null))),au(n,i),ft(i),null;case 5:zc(i);var p=Vr(Rs.current);if(l=i.type,n!==null&&i.stateNode!=null)pf(n,i,l,h,p),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return ft(i),null}if(n=Vr(xn.current),Ho(i)){h=i.stateNode,l=i.type;var m=i.memoizedProps;switch(h[yn]=i,h[js]=m,n=(i.mode&1)!==0,l){case"dialog":Re("cancel",h),Re("close",h);break;case"iframe":case"object":case"embed":Re("load",h);break;case"video":case"audio":for(p=0;p<Ts.length;p++)Re(Ts[p],h);break;case"source":Re("error",h);break;case"img":case"image":case"link":Re("error",h),Re("load",h);break;case"details":Re("toggle",h);break;case"input":ss(h,m),Re("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Re("invalid",h);break;case"textarea":yo(h,m),Re("invalid",h)}Mr(l,m),p=null;for(var w in m)if(m.hasOwnProperty(w)){var E=m[w];w==="children"?typeof E=="string"?h.textContent!==E&&(m.suppressHydrationWarning!==!0&&No(h.textContent,E,n),p=["children",E]):typeof E=="number"&&h.textContent!==""+E&&(m.suppressHydrationWarning!==!0&&No(h.textContent,E,n),p=["children",""+E]):s.hasOwnProperty(w)&&E!=null&&w==="onScroll"&&Re("scroll",h)}switch(l){case"input":Dn(h),di(h,m,!0);break;case"textarea":Dn(h),fe(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=zo)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ze(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=w.createElement(l,{is:h.is}):(n=w.createElement(l),l==="select"&&(w=n,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):n=w.createElementNS(n,l),n[yn]=i,n[js]=h,df(n,i,!1,!1),i.stateNode=n;e:{switch(w=Ir(l,h),l){case"dialog":Re("cancel",n),Re("close",n),p=h;break;case"iframe":case"object":case"embed":Re("load",n),p=h;break;case"video":case"audio":for(p=0;p<Ts.length;p++)Re(Ts[p],n);p=h;break;case"source":Re("error",n),p=h;break;case"img":case"image":case"link":Re("error",n),Re("load",n),p=h;break;case"details":Re("toggle",n),p=h;break;case"input":ss(n,h),p=hi(n,h),Re("invalid",n);break;case"option":p=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},p=q({},h,{value:void 0}),Re("invalid",n);break;case"textarea":yo(n,h),p=as(n,h),Re("invalid",n);break;default:p=h}Mr(l,p),E=p;for(m in E)if(E.hasOwnProperty(m)){var A=E[m];m==="style"?Pr(n,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&rr(n,A)):m==="children"?typeof A=="string"?(l!=="textarea"||A!=="")&&Vt(n,A):typeof A=="number"&&Vt(n,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(s.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Re("scroll",n):A!=null&&F(n,m,A,w))}switch(l){case"input":Dn(n),di(n,h,!1);break;case"textarea":Dn(n),fe(n);break;case"option":h.value!=null&&n.setAttribute("value",""+be(h.value));break;case"select":n.multiple=!!h.multiple,m=h.value,m!=null?nr(n,!!h.multiple,m,!1):h.defaultValue!=null&&nr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(n.onclick=zo)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ft(i),null;case 6:if(n&&i.stateNode!=null)ff(n,i,n.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=Vr(Rs.current),Vr(xn.current),Ho(i)){if(h=i.stateNode,l=i.memoizedProps,h[yn]=i,(m=h.nodeValue!==l)&&(n=Rt,n!==null))switch(n.tag){case 3:No(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&No(h.nodeValue,l,(n.mode&1)!==0)}m&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[yn]=i,i.stateNode=h}return ft(i),null;case 13:if(Le(We),h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Be&&Lt!==null&&(i.mode&1)!==0&&(i.flags&128)===0)mp(),Ti(),i.flags|=98560,m=!1;else if(m=Ho(i),h!==null&&h.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[yn]=i}else Ti(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),m=!1}else tn!==null&&(yu(tn),tn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(We.current&1)!==0?nt===0&&(nt=3):Cu())),i.updateQueue!==null&&(i.flags|=4),ft(i),null);case 4:return Pi(),au(n,i),n===null&&Ds(i.stateNode.containerInfo),ft(i),null;case 10:return Fc(i.type._context),ft(i),null;case 17:return kt(i.type)&&Vo(),ft(i),null;case 19:if(Le(We),m=i.memoizedState,m===null)return ft(i),null;if(h=(i.flags&128)!==0,w=m.rendering,w===null)if(h)Ws(m,!1);else{if(nt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Jo(n),w!==null){for(i.flags|=128,Ws(m,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)m=l,n=h,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Fe(We,We.current&1|2),i.child}n=n.sibling}m.tail!==null&&$e()>Ri&&(i.flags|=128,h=!0,Ws(m,!1),i.lanes=4194304)}else{if(!h)if(n=Jo(w),n!==null){if(i.flags|=128,h=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Ws(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Be)return ft(i),null}else 2*$e()-m.renderingStartTime>Ri&&l!==1073741824&&(i.flags|=128,h=!0,Ws(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(l=m.last,l!==null?l.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=$e(),i.sibling=null,l=We.current,Fe(We,h?l&1|2:l&1),i):(ft(i),null);case 22:case 23:return wu(),h=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(Bt&1073741824)!==0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function T0(n,i){switch(Dc(i),i.tag){case 1:return kt(i.type)&&Vo(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Pi(),Le(_t),Le(dt),Vc(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return zc(i),null;case 13:if(Le(We),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ti()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Le(We),null;case 4:return Pi(),null;case 10:return Fc(i.type._context),null;case 22:case 23:return wu(),null;case 24:return null;default:return null}}var la=!1,gt=!1,D0=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ii(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Xe(n,i,h)}else l.current=null}function lu(n,i,l){try{l()}catch(h){Xe(n,i,h)}}var gf=!1;function O0(n,i){if(wc=To,n=Gd(),dc(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var w=0,E=-1,A=-1,L=0,Q=0,G=n,Y=null;t:for(;;){for(var J;G!==l||p!==0&&G.nodeType!==3||(E=w+p),G!==m||h!==0&&G.nodeType!==3||(A=w+h),G.nodeType===3&&(w+=G.nodeValue.length),(J=G.firstChild)!==null;)Y=G,G=J;for(;;){if(G===n)break t;if(Y===l&&++L===p&&(E=w),Y===m&&++Q===h&&(A=w),(J=G.nextSibling)!==null)break;G=Y,Y=G.parentNode}G=J}l=E===-1||A===-1?null:{start:E,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(Cc={focusedElem:n,selectionRange:l},To=!1,ne=i;ne!==null;)if(i=ne,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ne=n;else for(;ne!==null;){i=ne;try{var re=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,Ke=re.memoizedState,I=i.stateNode,O=I.getSnapshotBeforeUpdate(i.elementType===i.type?ie:nn(i.type,ie),Ke);I.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var R=i.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch($){Xe(i,i.return,$)}if(n=i.sibling,n!==null){n.return=i.return,ne=n;break}ne=i.return}return re=gf,gf=!1,re}function Vs(n,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&n)===n){var m=p.destroy;p.destroy=void 0,m!==void 0&&lu(i,l,m)}p=p.next}while(p!==h)}}function ca(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function cu(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function mf(n){var i=n.alternate;i!==null&&(n.alternate=null,mf(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[yn],delete i[js],delete i[Ec],delete i[d0],delete i[p0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vf(n){return n.tag===5||n.tag===3||n.tag===4}function yf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vf(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function uu(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=zo));else if(h!==4&&(n=n.child,n!==null))for(uu(n,i,l),n=n.sibling;n!==null;)uu(n,i,l),n=n.sibling}function hu(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(hu(n,i,l),n=n.sibling;n!==null;)hu(n,i,l),n=n.sibling}var ct=null,rn=!1;function mr(n,i,l){for(l=l.child;l!==null;)xf(n,i,l),l=l.sibling}function xf(n,i,l){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(So,l)}catch{}switch(l.tag){case 5:gt||Ii(l,i);case 6:var h=ct,p=rn;ct=null,mr(n,i,l),ct=h,rn=p,ct!==null&&(rn?(n=ct,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):ct.removeChild(l.stateNode));break;case 18:ct!==null&&(rn?(n=ct,l=l.stateNode,n.nodeType===8?kc(n.parentNode,l):n.nodeType===1&&kc(n,l),ws(n)):kc(ct,l.stateNode));break;case 4:h=ct,p=rn,ct=l.stateNode.containerInfo,rn=!0,mr(n,i,l),ct=h,rn=p;break;case 0:case 11:case 14:case 15:if(!gt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var m=p,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&lu(l,i,w),p=p.next}while(p!==h)}mr(n,i,l);break;case 1:if(!gt&&(Ii(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(E){Xe(l,i,E)}mr(n,i,l);break;case 21:mr(n,i,l);break;case 22:l.mode&1?(gt=(h=gt)||l.memoizedState!==null,mr(n,i,l),gt=h):mr(n,i,l);break;default:mr(n,i,l)}}function wf(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new D0),i.forEach(function(h){var p=N0.bind(null,n,h);l.has(h)||(l.add(h),h.then(p,p))})}}function sn(n,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var m=n,w=i,E=w;e:for(;E!==null;){switch(E.tag){case 5:ct=E.stateNode,rn=!1;break e;case 3:ct=E.stateNode.containerInfo,rn=!0;break e;case 4:ct=E.stateNode.containerInfo,rn=!0;break e}E=E.return}if(ct===null)throw Error(t(160));xf(m,w,p),ct=null,rn=!1;var A=p.alternate;A!==null&&(A.return=null),p.return=null}catch(L){Xe(p,i,L)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Cf(i,n),i=i.sibling}function Cf(n,i){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sn(i,n),Cn(n),h&4){try{Vs(3,n,n.return),ca(3,n)}catch(ie){Xe(n,n.return,ie)}try{Vs(5,n,n.return)}catch(ie){Xe(n,n.return,ie)}}break;case 1:sn(i,n),Cn(n),h&512&&l!==null&&Ii(l,l.return);break;case 5:if(sn(i,n),Cn(n),h&512&&l!==null&&Ii(l,l.return),n.flags&32){var p=n.stateNode;try{Vt(p,"")}catch(ie){Xe(n,n.return,ie)}}if(h&4&&(p=n.stateNode,p!=null)){var m=n.memoizedProps,w=l!==null?l.memoizedProps:m,E=n.type,A=n.updateQueue;if(n.updateQueue=null,A!==null)try{E==="input"&&m.type==="radio"&&m.name!=null&&os(p,m),Ir(E,w);var L=Ir(E,m);for(w=0;w<A.length;w+=2){var Q=A[w],G=A[w+1];Q==="style"?Pr(p,G):Q==="dangerouslySetInnerHTML"?rr(p,G):Q==="children"?Vt(p,G):F(p,Q,G,L)}switch(E){case"input":gn(p,m);break;case"textarea":Z(p,m);break;case"select":var Y=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!m.multiple;var J=m.value;J!=null?nr(p,!!m.multiple,J,!1):Y!==!!m.multiple&&(m.defaultValue!=null?nr(p,!!m.multiple,m.defaultValue,!0):nr(p,!!m.multiple,m.multiple?[]:"",!1))}p[js]=m}catch(ie){Xe(n,n.return,ie)}}break;case 6:if(sn(i,n),Cn(n),h&4){if(n.stateNode===null)throw Error(t(162));p=n.stateNode,m=n.memoizedProps;try{p.nodeValue=m}catch(ie){Xe(n,n.return,ie)}}break;case 3:if(sn(i,n),Cn(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{ws(i.containerInfo)}catch(ie){Xe(n,n.return,ie)}break;case 4:sn(i,n),Cn(n);break;case 13:sn(i,n),Cn(n),p=n.child,p.flags&8192&&(m=p.memoizedState!==null,p.stateNode.isHidden=m,!m||p.alternate!==null&&p.alternate.memoizedState!==null||(fu=$e())),h&4&&wf(n);break;case 22:if(Q=l!==null&&l.memoizedState!==null,n.mode&1?(gt=(L=gt)||Q,sn(i,n),gt=L):sn(i,n),Cn(n),h&8192){if(L=n.memoizedState!==null,(n.stateNode.isHidden=L)&&!Q&&(n.mode&1)!==0)for(ne=n,Q=n.child;Q!==null;){for(G=ne=Q;ne!==null;){switch(Y=ne,J=Y.child,Y.tag){case 0:case 11:case 14:case 15:Vs(4,Y,Y.return);break;case 1:Ii(Y,Y.return);var re=Y.stateNode;if(typeof re.componentWillUnmount=="function"){h=Y,l=Y.return;try{i=h,re.props=i.memoizedProps,re.state=i.memoizedState,re.componentWillUnmount()}catch(ie){Xe(h,l,ie)}}break;case 5:Ii(Y,Y.return);break;case 22:if(Y.memoizedState!==null){kf(G);continue}}J!==null?(J.return=Y,ne=J):kf(G)}Q=Q.sibling}e:for(Q=null,G=n;;){if(G.tag===5){if(Q===null){Q=G;try{p=G.stateNode,L?(m=p.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(E=G.stateNode,A=G.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,E.style.display=pi("display",w))}catch(ie){Xe(n,n.return,ie)}}}else if(G.tag===6){if(Q===null)try{G.stateNode.nodeValue=L?"":G.memoizedProps}catch(ie){Xe(n,n.return,ie)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===n)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===n)break e;for(;G.sibling===null;){if(G.return===null||G.return===n)break e;Q===G&&(Q=null),G=G.return}Q===G&&(Q=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:sn(i,n),Cn(n),h&4&&wf(n);break;case 21:break;default:sn(i,n),Cn(n)}}function Cn(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(vf(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Vt(p,""),h.flags&=-33);var m=yf(n);hu(n,m,p);break;case 3:case 4:var w=h.stateNode.containerInfo,E=yf(n);uu(n,E,w);break;default:throw Error(t(161))}}catch(A){Xe(n,n.return,A)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function j0(n,i,l){ne=n,Sf(n)}function Sf(n,i,l){for(var h=(n.mode&1)!==0;ne!==null;){var p=ne,m=p.child;if(p.tag===22&&h){var w=p.memoizedState!==null||la;if(!w){var E=p.alternate,A=E!==null&&E.memoizedState!==null||gt;E=la;var L=gt;if(la=w,(gt=A)&&!L)for(ne=p;ne!==null;)w=ne,A=w.child,w.tag===22&&w.memoizedState!==null?Ef(p):A!==null?(A.return=w,ne=A):Ef(p);for(;m!==null;)ne=m,Sf(m),m=m.sibling;ne=p,la=E,gt=L}_f(n)}else(p.subtreeFlags&8772)!==0&&m!==null?(m.return=p,ne=m):_f(n)}}function _f(n){for(;ne!==null;){var i=ne;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:gt||ca(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!gt)if(l===null)h.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:nn(i.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&_p(i,m,h);break;case 3:var w=i.updateQueue;if(w!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}_p(i,w,l)}break;case 5:var E=i.stateNode;if(l===null&&i.flags&4){l=E;var A=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&l.focus();break;case"img":A.src&&(l.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var L=i.alternate;if(L!==null){var Q=L.memoizedState;if(Q!==null){var G=Q.dehydrated;G!==null&&ws(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}gt||i.flags&512&&cu(i)}catch(Y){Xe(i,i.return,Y)}}if(i===n){ne=null;break}if(l=i.sibling,l!==null){l.return=i.return,ne=l;break}ne=i.return}}function kf(n){for(;ne!==null;){var i=ne;if(i===n){ne=null;break}var l=i.sibling;if(l!==null){l.return=i.return,ne=l;break}ne=i.return}}function Ef(n){for(;ne!==null;){var i=ne;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{ca(4,i)}catch(A){Xe(i,l,A)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(A){Xe(i,p,A)}}var m=i.return;try{cu(i)}catch(A){Xe(i,m,A)}break;case 5:var w=i.return;try{cu(i)}catch(A){Xe(i,w,A)}}}catch(A){Xe(i,i.return,A)}if(i===n){ne=null;break}var E=i.sibling;if(E!==null){E.return=i.return,ne=E;break}ne=i.return}}var P0=Math.ceil,ua=N.ReactCurrentDispatcher,du=N.ReactCurrentOwner,Ht=N.ReactCurrentBatchConfig,Ae=0,at=null,Je=null,ut=0,Bt=0,Fi=hr(0),nt=0,Us=null,Yr=0,ha=0,pu=0,Ys=null,bt=null,fu=0,Ri=1/0,Nn=null,da=!1,gu=null,vr=null,pa=!1,yr=null,fa=0,Qs=0,mu=null,ga=-1,ma=0;function yt(){return(Ae&6)!==0?$e():ga!==-1?ga:ga=$e()}function xr(n){return(n.mode&1)===0?1:(Ae&2)!==0&&ut!==0?ut&-ut:g0.transition!==null?(ma===0&&(ma=vd()),ma):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:bd(n.type)),n)}function on(n,i,l,h){if(50<Qs)throw Qs=0,mu=null,Error(t(185));gs(n,l,h),((Ae&2)===0||n!==at)&&(n===at&&((Ae&2)===0&&(ha|=l),nt===4&&wr(n,ut)),At(n,h),l===1&&Ae===0&&(i.mode&1)===0&&(Ri=$e()+500,Yo&&pr()))}function At(n,i){var l=n.callbackNode;gy(n,i);var h=Eo(n,n===at?ut:0);if(h===0)l!==null&&fd(l),n.callbackNode=null,n.callbackPriority=0;else if(i=h&-h,n.callbackPriority!==i){if(l!=null&&fd(l),i===1)n.tag===0?f0(Af.bind(null,n)):hp(Af.bind(null,n)),u0(function(){(Ae&6)===0&&pr()}),l=null;else{switch(yd(h)){case 1:l=$l;break;case 4:l=gd;break;case 16:l=Co;break;case 536870912:l=md;break;default:l=Co}l=Ff(l,bf.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function bf(n,i){if(ga=-1,ma=0,(Ae&6)!==0)throw Error(t(327));var l=n.callbackNode;if(Li()&&n.callbackNode!==l)return null;var h=Eo(n,n===at?ut:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||i)i=va(n,h);else{i=h;var p=Ae;Ae|=2;var m=Df();(at!==n||ut!==i)&&(Nn=null,Ri=$e()+500,Gr(n,i));do try{F0();break}catch(E){Tf(n,E)}while(!0);Ic(),ua.current=m,Ae=p,Je!==null?i=0:(at=null,ut=0,i=nt)}if(i!==0){if(i===2&&(p=Kl(n),p!==0&&(h=p,i=vu(n,p))),i===1)throw l=Us,Gr(n,0),wr(n,h),At(n,$e()),l;if(i===6)wr(n,h);else{if(p=n.current.alternate,(h&30)===0&&!M0(p)&&(i=va(n,h),i===2&&(m=Kl(n),m!==0&&(h=m,i=vu(n,m))),i===1))throw l=Us,Gr(n,0),wr(n,h),At(n,$e()),l;switch(n.finishedWork=p,n.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Hr(n,bt,Nn);break;case 3:if(wr(n,h),(h&130023424)===h&&(i=fu+500-$e(),10<i)){if(Eo(n,0)!==0)break;if(p=n.suspendedLanes,(p&h)!==h){yt(),n.pingedLanes|=n.suspendedLanes&p;break}n.timeoutHandle=_c(Hr.bind(null,n,bt,Nn),i);break}Hr(n,bt,Nn);break;case 4:if(wr(n,h),(h&4194240)===h)break;for(i=n.eventTimes,p=-1;0<h;){var w=31-Jt(h);m=1<<w,w=i[w],w>p&&(p=w),h&=~m}if(h=p,h=$e()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*P0(h/1960))-h,10<h){n.timeoutHandle=_c(Hr.bind(null,n,bt,Nn),h);break}Hr(n,bt,Nn);break;case 5:Hr(n,bt,Nn);break;default:throw Error(t(329))}}}return At(n,$e()),n.callbackNode===l?bf.bind(null,n):null}function vu(n,i){var l=Ys;return n.current.memoizedState.isDehydrated&&(Gr(n,i).flags|=256),n=va(n,i),n!==2&&(i=bt,bt=l,i!==null&&yu(i)),n}function yu(n){bt===null?bt=n:bt.push.apply(bt,n)}function M0(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],m=p.getSnapshot;p=p.value;try{if(!en(m(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function wr(n,i){for(i&=~pu,i&=~ha,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Jt(i),h=1<<l;n[l]=-1,i&=~h}}function Af(n){if((Ae&6)!==0)throw Error(t(327));Li();var i=Eo(n,0);if((i&1)===0)return At(n,$e()),null;var l=va(n,i);if(n.tag!==0&&l===2){var h=Kl(n);h!==0&&(i=h,l=vu(n,h))}if(l===1)throw l=Us,Gr(n,0),wr(n,i),At(n,$e()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Hr(n,bt,Nn),At(n,$e()),null}function xu(n,i){var l=Ae;Ae|=1;try{return n(i)}finally{Ae=l,Ae===0&&(Ri=$e()+500,Yo&&pr())}}function Qr(n){yr!==null&&yr.tag===0&&(Ae&6)===0&&Li();var i=Ae;Ae|=1;var l=Ht.transition,h=Pe;try{if(Ht.transition=null,Pe=1,n)return n()}finally{Pe=h,Ht.transition=l,Ae=i,(Ae&6)===0&&pr()}}function wu(){Bt=Fi.current,Le(Fi)}function Gr(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,c0(l)),Je!==null)for(l=Je.return;l!==null;){var h=l;switch(Dc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Vo();break;case 3:Pi(),Le(_t),Le(dt),Vc();break;case 5:zc(h);break;case 4:Pi();break;case 13:Le(We);break;case 19:Le(We);break;case 10:Fc(h.type._context);break;case 22:case 23:wu()}l=l.return}if(at=n,Je=n=Cr(n.current,null),ut=Bt=i,nt=0,Us=null,pu=ha=Yr=0,bt=Ys=null,Wr!==null){for(i=0;i<Wr.length;i++)if(l=Wr[i],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,m=l.pending;if(m!==null){var w=m.next;m.next=p,h.next=w}l.pending=h}Wr=null}return n}function Tf(n,i){do{var l=Je;try{if(Ic(),ea.current=ia,ta){for(var h=Ve.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}ta=!1}if(Ur=0,ot=tt=Ve=null,Ls=!1,Bs=0,du.current=null,l===null||l.return===null){nt=1,Us=i,Je=null;break}e:{var m=n,w=l.return,E=l,A=i;if(i=ut,E.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var L=A,Q=E,G=Q.tag;if((Q.mode&1)===0&&(G===0||G===11||G===15)){var Y=Q.alternate;Y?(Q.updateQueue=Y.updateQueue,Q.memoizedState=Y.memoizedState,Q.lanes=Y.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var J=Zp(w);if(J!==null){J.flags&=-257,Jp(J,w,E,m,i),J.mode&1&&qp(m,L,i),i=J,A=L;var re=i.updateQueue;if(re===null){var ie=new Set;ie.add(A),i.updateQueue=ie}else re.add(A);break e}else{if((i&1)===0){qp(m,L,i),Cu();break e}A=Error(t(426))}}else if(Be&&E.mode&1){var Ke=Zp(w);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),Jp(Ke,w,E,m,i),Pc(Mi(A,E));break e}}m=A=Mi(A,E),nt!==4&&(nt=2),Ys===null?Ys=[m]:Ys.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var I=$p(m,A,i);Sp(m,I);break e;case 1:E=A;var O=m.type,R=m.stateNode;if((m.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(vr===null||!vr.has(R)))){m.flags|=65536,i&=-i,m.lanes|=i;var $=Kp(m,E,i);Sp(m,$);break e}}m=m.return}while(m!==null)}jf(l)}catch(oe){i=oe,Je===l&&l!==null&&(Je=l=l.return);continue}break}while(!0)}function Df(){var n=ua.current;return ua.current=ia,n===null?ia:n}function Cu(){(nt===0||nt===3||nt===2)&&(nt=4),at===null||(Yr&268435455)===0&&(ha&268435455)===0||wr(at,ut)}function va(n,i){var l=Ae;Ae|=2;var h=Df();(at!==n||ut!==i)&&(Nn=null,Gr(n,i));do try{I0();break}catch(p){Tf(n,p)}while(!0);if(Ic(),Ae=l,ua.current=h,Je!==null)throw Error(t(261));return at=null,ut=0,nt}function I0(){for(;Je!==null;)Of(Je)}function F0(){for(;Je!==null&&!oy();)Of(Je)}function Of(n){var i=If(n.alternate,n,Bt);n.memoizedProps=n.pendingProps,i===null?jf(n):Je=i,du.current=null}function jf(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=A0(l,i,Bt),l!==null){Je=l;return}}else{if(l=T0(l,i),l!==null){l.flags&=32767,Je=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nt=6,Je=null;return}}if(i=i.sibling,i!==null){Je=i;return}Je=i=n}while(i!==null);nt===0&&(nt=5)}function Hr(n,i,l){var h=Pe,p=Ht.transition;try{Ht.transition=null,Pe=1,R0(n,i,l,h)}finally{Ht.transition=p,Pe=h}return null}function R0(n,i,l,h){do Li();while(yr!==null);if((Ae&6)!==0)throw Error(t(327));l=n.finishedWork;var p=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=l.lanes|l.childLanes;if(my(n,m),n===at&&(Je=at=null,ut=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||pa||(pa=!0,Ff(Co,function(){return Li(),null})),m=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||m){m=Ht.transition,Ht.transition=null;var w=Pe;Pe=1;var E=Ae;Ae|=4,du.current=null,O0(n,l),Cf(l,n),n0(Cc),To=!!wc,Cc=wc=null,n.current=l,j0(l),ay(),Ae=E,Pe=w,Ht.transition=m}else n.current=l;if(pa&&(pa=!1,yr=n,fa=p),m=n.pendingLanes,m===0&&(vr=null),uy(l.stateNode),At(n,$e()),i!==null)for(h=n.onRecoverableError,l=0;l<i.length;l++)p=i[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(da)throw da=!1,n=gu,gu=null,n;return(fa&1)!==0&&n.tag!==0&&Li(),m=n.pendingLanes,(m&1)!==0?n===mu?Qs++:(Qs=0,mu=n):Qs=0,pr(),null}function Li(){if(yr!==null){var n=yd(fa),i=Ht.transition,l=Pe;try{if(Ht.transition=null,Pe=16>n?16:n,yr===null)var h=!1;else{if(n=yr,yr=null,fa=0,(Ae&6)!==0)throw Error(t(331));var p=Ae;for(Ae|=4,ne=n.current;ne!==null;){var m=ne,w=m.child;if((ne.flags&16)!==0){var E=m.deletions;if(E!==null){for(var A=0;A<E.length;A++){var L=E[A];for(ne=L;ne!==null;){var Q=ne;switch(Q.tag){case 0:case 11:case 15:Vs(8,Q,m)}var G=Q.child;if(G!==null)G.return=Q,ne=G;else for(;ne!==null;){Q=ne;var Y=Q.sibling,J=Q.return;if(mf(Q),Q===L){ne=null;break}if(Y!==null){Y.return=J,ne=Y;break}ne=J}}}var re=m.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var Ke=ie.sibling;ie.sibling=null,ie=Ke}while(ie!==null)}}ne=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,ne=w;else e:for(;ne!==null;){if(m=ne,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Vs(9,m,m.return)}var I=m.sibling;if(I!==null){I.return=m.return,ne=I;break e}ne=m.return}}var O=n.current;for(ne=O;ne!==null;){w=ne;var R=w.child;if((w.subtreeFlags&2064)!==0&&R!==null)R.return=w,ne=R;else e:for(w=O;ne!==null;){if(E=ne,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:ca(9,E)}}catch(oe){Xe(E,E.return,oe)}if(E===w){ne=null;break e}var $=E.sibling;if($!==null){$.return=E.return,ne=$;break e}ne=E.return}}if(Ae=p,pr(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(So,n)}catch{}h=!0}return h}finally{Pe=l,Ht.transition=i}}return!1}function Pf(n,i,l){i=Mi(l,i),i=$p(n,i,1),n=gr(n,i,1),i=yt(),n!==null&&(gs(n,1,i),At(n,i))}function Xe(n,i,l){if(n.tag===3)Pf(n,n,l);else for(;i!==null;){if(i.tag===3){Pf(i,n,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vr===null||!vr.has(h))){n=Mi(l,n),n=Kp(i,n,1),i=gr(i,n,1),n=yt(),i!==null&&(gs(i,1,n),At(i,n));break}}i=i.return}}function L0(n,i,l){var h=n.pingCache;h!==null&&h.delete(i),i=yt(),n.pingedLanes|=n.suspendedLanes&l,at===n&&(ut&l)===l&&(nt===4||nt===3&&(ut&130023424)===ut&&500>$e()-fu?Gr(n,0):pu|=l),At(n,i)}function Mf(n,i){i===0&&((n.mode&1)===0?i=1:(i=ko,ko<<=1,(ko&130023424)===0&&(ko=4194304)));var l=yt();n=Rn(n,i),n!==null&&(gs(n,i,l),At(n,l))}function B0(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Mf(n,l)}function N0(n,i){var l=0;switch(n.tag){case 13:var h=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Mf(n,l)}var If;If=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||_t.current)Et=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return Et=!1,b0(n,i,l);Et=(n.flags&131072)!==0}else Et=!1,Be&&(i.flags&1048576)!==0&&dp(i,Go,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;aa(n,i),n=i.pendingProps;var p=Ei(i,dt.current);ji(i,l),p=Qc(null,i,h,n,p,l);var m=Gc();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,kt(h)?(m=!0,Uo(i)):m=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Bc(i),p.updater=sa,i.stateNode=p,p._reactInternals=i,Zc(i,h,n,l),i=nu(null,i,h,!0,m,l)):(i.tag=0,Be&&m&&Tc(i),vt(null,i,p,l),i=i.child),i;case 16:h=i.elementType;e:{switch(aa(n,i),n=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=W0(h),n=nn(h,n),p){case 0:i=tu(null,i,h,n,l);break e;case 1:i=of(null,i,h,n,l);break e;case 11:i=ef(null,i,h,n,l);break e;case 14:i=tf(null,i,h,nn(h.type,n),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),tu(n,i,h,p,l);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),of(n,i,h,p,l);case 3:e:{if(af(i),n===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,p=m.element,Cp(n,i),Zo(i,h,null,l);var w=i.memoizedState;if(h=w.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){p=Mi(Error(t(423)),i),i=lf(n,i,h,l,p);break e}else if(h!==p){p=Mi(Error(t(424)),i),i=lf(n,i,h,l,p);break e}else for(Lt=ur(i.stateNode.containerInfo.firstChild),Rt=i,Be=!0,tn=null,l=xp(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ti(),h===p){i=Bn(n,i,l);break e}vt(n,i,h,l)}i=i.child}return i;case 5:return kp(i),n===null&&jc(i),h=i.type,p=i.pendingProps,m=n!==null?n.memoizedProps:null,w=p.children,Sc(h,p)?w=null:m!==null&&Sc(h,m)&&(i.flags|=32),sf(n,i),vt(n,i,w,l),i.child;case 6:return n===null&&jc(i),null;case 13:return cf(n,i,l);case 4:return Nc(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=Di(i,null,h,l):vt(n,i,h,l),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),ef(n,i,h,p,l);case 7:return vt(n,i,i.pendingProps,l),i.child;case 8:return vt(n,i,i.pendingProps.children,l),i.child;case 12:return vt(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,m=i.memoizedProps,w=p.value,Fe($o,h._currentValue),h._currentValue=w,m!==null)if(en(m.value,w)){if(m.children===p.children&&!_t.current){i=Bn(n,i,l);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var E=m.dependencies;if(E!==null){w=m.child;for(var A=E.firstContext;A!==null;){if(A.context===h){if(m.tag===1){A=Ln(-1,l&-l),A.tag=2;var L=m.updateQueue;if(L!==null){L=L.shared;var Q=L.pending;Q===null?A.next=A:(A.next=Q.next,Q.next=A),L.pending=A}}m.lanes|=l,A=m.alternate,A!==null&&(A.lanes|=l),Rc(m.return,l,i),E.lanes|=l;break}A=A.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=l,E=w.alternate,E!==null&&(E.lanes|=l),Rc(w,l,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}vt(n,i,p.children,l),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,ji(i,l),p=Qt(p),h=h(p),i.flags|=1,vt(n,i,h,l),i.child;case 14:return h=i.type,p=nn(h,i.pendingProps),p=nn(h.type,p),tf(n,i,h,p,l);case 15:return nf(n,i,i.type,i.pendingProps,l);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:nn(h,p),aa(n,i),i.tag=1,kt(h)?(n=!0,Uo(i)):n=!1,ji(i,l),Hp(i,h,p),Zc(i,h,p,l),nu(null,i,h,!0,n,l);case 19:return hf(n,i,l);case 22:return rf(n,i,l)}throw Error(t(156,i.tag))};function Ff(n,i){return pd(n,i)}function z0(n,i,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(n,i,l,h){return new z0(n,i,l,h)}function Su(n){return n=n.prototype,!(!n||!n.isReactComponent)}function W0(n){if(typeof n=="function")return Su(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Se)return 11;if(n===ce)return 14}return 2}function Cr(n,i){var l=n.alternate;return l===null?(l=Xt(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ya(n,i,l,h,p,m){var w=2;if(h=n,typeof n=="function")Su(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case W:return Xr(l.children,p,m,i);case X:w=8,p|=8;break;case se:return n=Xt(12,l,i,p|2),n.elementType=se,n.lanes=m,n;case pe:return n=Xt(13,l,i,p),n.elementType=pe,n.lanes=m,n;case ee:return n=Xt(19,l,i,p),n.elementType=ee,n.lanes=m,n;case me:return xa(l,p,m,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case le:w=10;break e;case we:w=9;break e;case Se:w=11;break e;case ce:w=14;break e;case ke:w=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Xt(w,l,i,p),i.elementType=n,i.type=h,i.lanes=m,i}function Xr(n,i,l,h){return n=Xt(7,n,h,i),n.lanes=l,n}function xa(n,i,l,h){return n=Xt(22,n,h,i),n.elementType=me,n.lanes=l,n.stateNode={isHidden:!1},n}function _u(n,i,l){return n=Xt(6,n,null,i),n.lanes=l,n}function ku(n,i,l){return i=Xt(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function V0(n,i,l,h,p){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function Eu(n,i,l,h,p,m,w,E,A){return n=new V0(n,i,l,E,A),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Xt(3,null,null,i),n.current=m,m.stateNode=n,m.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bc(m),n}function U0(n,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:n,containerInfo:i,implementation:l}}function Rf(n){if(!n)return dr;n=n._reactInternals;e:{if(Rr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(kt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(kt(l))return cp(n,l,i)}return i}function Lf(n,i,l,h,p,m,w,E,A){return n=Eu(l,h,!0,n,p,m,w,E,A),n.context=Rf(null),l=n.current,h=yt(),p=xr(l),m=Ln(h,p),m.callback=i??null,gr(l,m,p),n.current.lanes=p,gs(n,p,h),At(n,h),n}function wa(n,i,l,h){var p=i.current,m=yt(),w=xr(p);return l=Rf(l),i.context===null?i.context=l:i.pendingContext=l,i=Ln(m,w),i.payload={element:n},h=h===void 0?null:h,h!==null&&(i.callback=h),n=gr(p,i,w),n!==null&&(on(n,p,w,m),qo(n,p,w)),w}function Ca(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Bf(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function bu(n,i){Bf(n,i),(n=n.alternate)&&Bf(n,i)}function Y0(){return null}var Nf=typeof reportError=="function"?reportError:function(n){console.error(n)};function Au(n){this._internalRoot=n}Sa.prototype.render=Au.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wa(n,i,null,null)},Sa.prototype.unmount=Au.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Qr(function(){wa(null,n,null,null)}),i[Pn]=null}};function Sa(n){this._internalRoot=n}Sa.prototype.unstable_scheduleHydration=function(n){if(n){var i=Cd();n={blockedOn:null,target:n,priority:i};for(var l=0;l<ar.length&&i!==0&&i<ar[l].priority;l++);ar.splice(l,0,n),l===0&&kd(n)}};function Tu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function zf(){}function Q0(n,i,l,h,p){if(p){if(typeof h=="function"){var m=h;h=function(){var L=Ca(w);m.call(L)}}var w=Lf(i,h,n,0,null,!1,!1,"",zf);return n._reactRootContainer=w,n[Pn]=w.current,Ds(n.nodeType===8?n.parentNode:n),Qr(),w}for(;p=n.lastChild;)n.removeChild(p);if(typeof h=="function"){var E=h;h=function(){var L=Ca(A);E.call(L)}}var A=Eu(n,0,!1,null,null,!1,!1,"",zf);return n._reactRootContainer=A,n[Pn]=A.current,Ds(n.nodeType===8?n.parentNode:n),Qr(function(){wa(i,A,l,h)}),A}function ka(n,i,l,h,p){var m=l._reactRootContainer;if(m){var w=m;if(typeof p=="function"){var E=p;p=function(){var A=Ca(w);E.call(A)}}wa(i,w,n,p)}else w=Q0(l,i,n,p,h);return Ca(w)}xd=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=fs(i.pendingLanes);l!==0&&(Zl(i,l|1),At(i,$e()),(Ae&6)===0&&(Ri=$e()+500,pr()))}break;case 13:Qr(function(){var h=Rn(n,1);if(h!==null){var p=yt();on(h,n,1,p)}}),bu(n,1)}},Jl=function(n){if(n.tag===13){var i=Rn(n,134217728);if(i!==null){var l=yt();on(i,n,134217728,l)}bu(n,134217728)}},wd=function(n){if(n.tag===13){var i=xr(n),l=Rn(n,i);if(l!==null){var h=yt();on(l,n,i,h)}bu(n,i)}},Cd=function(){return Pe},Sd=function(n,i){var l=Pe;try{return Pe=n,i()}finally{Pe=l}},Ql=function(n,i,l){switch(i){case"input":if(gn(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==n&&h.form===n.form){var p=Wo(h);if(!p)throw Error(t(90));On(h),gn(h,p)}}}break;case"textarea":Z(n,l);break;case"select":i=l.value,i!=null&&nr(n,!!l.multiple,i,!1)}},od=xu,ad=Qr;var G0={usingClientEntryPoint:!1,Events:[Ps,_i,Wo,id,sd,xu]},Gs={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H0={bundleType:Gs.bundleType,version:Gs.version,rendererPackageName:Gs.rendererPackageName,rendererConfig:Gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=hd(n),n===null?null:n.stateNode},findFiberByHostInstance:Gs.findFiberByHostInstance||Y0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{So=Ea.inject(H0),vn=Ea}catch{}}return Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0,Tt.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(i))throw Error(t(200));return U0(n,i,null,l)},Tt.createRoot=function(n,i){if(!Tu(n))throw Error(t(299));var l=!1,h="",p=Nf;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=Eu(n,1,!1,null,null,l,!1,h,p),n[Pn]=i.current,Ds(n.nodeType===8?n.parentNode:n),new Au(i)},Tt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=hd(i),n=n===null?null:n.stateNode,n},Tt.flushSync=function(n){return Qr(n)},Tt.hydrate=function(n,i,l){if(!_a(i))throw Error(t(200));return ka(null,n,i,!0,l)},Tt.hydrateRoot=function(n,i,l){if(!Tu(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,m="",w=Nf;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),i=Lf(i,null,n,1,l??null,p,!1,m,w),n[Pn]=i.current,Ds(n),h)for(n=0;n<h.length;n++)l=h[n],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new Sa(i)},Tt.render=function(n,i,l){if(!_a(i))throw Error(t(200));return ka(null,n,i,!1,l)},Tt.unmountComponentAtNode=function(n){if(!_a(n))throw Error(t(40));return n._reactRootContainer?(Qr(function(){ka(null,null,n,!1,function(){n._reactRootContainer=null,n[Pn]=null})}),!0):!1},Tt.unstable_batchedUpdates=xu,Tt.unstable_renderSubtreeIntoContainer=function(n,i,l,h){if(!_a(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ka(n,i,l,!1,h)},Tt.version="18.3.1-next-f1338f8080-20240426",Tt}var Xf;function tx(){if(Xf)return ju.exports;Xf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),ju.exports=ex(),ju.exports}var $f;function nx(){if($f)return ba;$f=1;var o=tx();return ba.createRoot=o.createRoot,ba.hydrateRoot=o.hydrateRoot,ba}var rx=nx(),D=Ol();const ix=Dl(D);var Xs={},Kf;function sx(){if(Kf)return Xs;Kf=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.parse=c,Xs.serialize=f;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,C){const x=new a,S=y.length;if(S<2)return x;const k=(C==null?void 0:C.decode)||g;let _=0;do{const M=y.indexOf("=",_);if(M===-1)break;const F=y.indexOf(";",_),N=F===-1?S:F;if(M>N){_=y.lastIndexOf(";",M-1)+1;continue}const U=u(y,_,M),H=d(y,M,U),W=y.slice(U,H);if(x[W]===void 0){let X=u(y,M+1,N),se=d(y,N,X);const le=k(y.slice(X,se));x[W]=le}_=N+1}while(_<S);return x}function u(y,C,x){do{const S=y.charCodeAt(C);if(S!==32&&S!==9)return C}while(++C<x);return x}function d(y,C,x){for(;C>x;){const S=y.charCodeAt(--C);if(S!==32&&S!==9)return C+1}return x}function f(y,C,x){const S=(x==null?void 0:x.encode)||encodeURIComponent;if(!o.test(y))throw new TypeError(`argument name is invalid: ${y}`);const k=S(C);if(!e.test(k))throw new TypeError(`argument val is invalid: ${C}`);let _=y+"="+k;if(!x)return _;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);_+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);_+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);_+="; Path="+x.path}if(x.expires){if(!v(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);_+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(_+="; HttpOnly"),x.secure&&(_+="; Secure"),x.partitioned&&(_+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return _}function g(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return s.call(y)==="[object Date]"}return Xs}sx();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qf="popstate";function ox(o={}){function e(s,a){let{pathname:c="/",search:u="",hash:d=""}=si(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),rh("",{pathname:c,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let c=s.document.querySelector("base"),u="";if(c&&c.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof a=="string"?a:no(a))}function r(s,a){pn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return lx(e,t,r,o)}function Ge(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}function pn(o,e){if(!o){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ax(){return Math.random().toString(36).substring(2,10)}function Zf(o,e){return{usr:o.state,key:o.key,idx:e}}function rh(o,e,t=null,r){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof e=="string"?si(e):e,state:t,key:e&&e.key||r||ax()}}function no({pathname:o="/",search:e="",hash:t=""}){return e&&e!=="?"&&(o+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(o+=t.charAt(0)==="#"?t:"#"+t),o}function si(o){let e={};if(o){let t=o.indexOf("#");t>=0&&(e.hash=o.substring(t),o=o.substring(0,t));let r=o.indexOf("?");r>=0&&(e.search=o.substring(r),o=o.substring(0,r)),o&&(e.pathname=o)}return e}function lx(o,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function v(){u="POP";let k=g(),_=k==null?null:k-f;f=k,d&&d({action:u,location:S.location,delta:_})}function y(k,_){u="PUSH";let M=rh(S.location,k,_);t&&t(M,k),f=g()+1;let F=Zf(M,f),N=S.createHref(M);try{c.pushState(F,"",N)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(N)}a&&d&&d({action:u,location:S.location,delta:1})}function C(k,_){u="REPLACE";let M=rh(S.location,k,_);t&&t(M,k),f=g();let F=Zf(M,f),N=S.createHref(M);c.replaceState(F,"",N),a&&d&&d({action:u,location:S.location,delta:0})}function x(k){let _=s.location.origin!=="null"?s.location.origin:s.location.href,M=typeof k=="string"?k:no(k);return M=M.replace(/ $/,"%20"),Ge(_,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,_)}let S={get action(){return u},get location(){return o(s,c)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(qf,v),d=k,()=>{s.removeEventListener(qf,v),d=null}},createHref(k){return e(s,k)},createURL:x,encodeLocation(k){let _=x(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:C,go(k){return c.go(k)}};return S}function hm(o,e,t="/"){return cx(o,e,t,!1)}function cx(o,e,t,r){let s=typeof e=="string"?si(e):e,a=Xn(s.pathname||"/",t);if(a==null)return null;let c=dm(o);ux(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=Cx(a);u=xx(c[d],f,r)}return u}function dm(o,e=[],t=[],r=""){let s=(a,c,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Ge(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=Qn([r,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(Ge(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),dm(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:vx(f,a.index),routesMeta:g})};return o.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let d of pm(a.path))s(a,c,d)}),e}function pm(o){let e=o.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=pm(r.join("/")),u=[];return u.push(...c.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...c),u.map(d=>o.startsWith("/")&&d===""?"/":d)}function ux(o){o.sort((e,t)=>e.score!==t.score?t.score-e.score:yx(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var hx=/^:[\w-]+$/,dx=3,px=2,fx=1,gx=10,mx=-2,Jf=o=>o==="*";function vx(o,e){let t=o.split("/"),r=t.length;return t.some(Jf)&&(r+=mx),e&&(r+=px),t.filter(s=>!Jf(s)).reduce((s,a)=>s+(hx.test(a)?dx:a===""?fx:gx),r)}function yx(o,e){return o.length===e.length&&o.slice(0,-1).every((r,s)=>r===e[s])?o[o.length-1]-e[e.length-1]:0}function xx(o,e,t=!1){let{routesMeta:r}=o,s={},a="/",c=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=ul({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),y=d.route;if(!v&&f&&t&&!r[r.length-1].route.index&&(v=ul({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Qn([a,v.pathname]),pathnameBase:Ex(Qn([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=Qn([a,v.pathnameBase]))}return c}function ul(o,e){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[t,r]=wx(o.path,o.caseSensitive,o.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:v},y)=>{if(g==="*"){let x=u[y]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const C=u[y];return v&&!C?f[g]=void 0:f[g]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:o}}function wx(o,e=!1,t=!0){pn(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let r=[],s="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(r.push({paramName:"*"}),s+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":o!==""&&o!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Cx(o){try{return o.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pn(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),o}}function Xn(o,e){if(e==="/")return o;if(!o.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=o.charAt(t);return r&&r!=="/"?null:o.slice(t)||"/"}function Sx(o,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof o=="string"?si(o):o;return{pathname:t?t.startsWith("/")?t:_x(t,e):e,search:bx(r),hash:Ax(s)}}function _x(o,e){let t=e.replace(/\/+$/,"").split("/");return o.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Iu(o,e,t,r){return`Cannot include a '${o}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kx(o){return o.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fm(o){let e=kx(o);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function gm(o,e,t,r=!1){let s;typeof o=="string"?s=si(o):(s={...o},Ge(!s.pathname||!s.pathname.includes("?"),Iu("?","pathname","search",s)),Ge(!s.pathname||!s.pathname.includes("#"),Iu("#","pathname","hash",s)),Ge(!s.search||!s.search.includes("#"),Iu("#","search","hash",s)));let a=o===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}u=v>=0?e[v]:"/"}let d=Sx(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Qn=o=>o.join("/").replace(/\/\/+/g,"/"),Ex=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),bx=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,Ax=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function Tx(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var mm=["POST","PUT","PATCH","DELETE"];new Set(mm);var Dx=["GET",...mm];new Set(Dx);var qi=D.createContext(null);qi.displayName="DataRouter";var jl=D.createContext(null);jl.displayName="DataRouterState";var vm=D.createContext({isTransitioning:!1});vm.displayName="ViewTransition";var Ox=D.createContext(new Map);Ox.displayName="Fetchers";var jx=D.createContext(null);jx.displayName="Await";var Tn=D.createContext(null);Tn.displayName="Navigation";var co=D.createContext(null);co.displayName="Location";var qn=D.createContext({outlet:null,matches:[],isDataRoute:!1});qn.displayName="Route";var bh=D.createContext(null);bh.displayName="RouteError";function Px(o,{relative:e}={}){Ge(uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=D.useContext(Tn),{hash:s,pathname:a,search:c}=po(o,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Qn([t,a])),r.createHref({pathname:u,search:c,hash:s})}function uo(){return D.useContext(co)!=null}function oi(){return Ge(uo(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(co).location}var ym="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xm(o){D.useContext(Tn).static||D.useLayoutEffect(o)}function ho(){let{isDataRoute:o}=D.useContext(qn);return o?Qx():Mx()}function Mx(){Ge(uo(),"useNavigate() may be used only in the context of a <Router> component.");let o=D.useContext(qi),{basename:e,navigator:t}=D.useContext(Tn),{matches:r}=D.useContext(qn),{pathname:s}=oi(),a=JSON.stringify(fm(r)),c=D.useRef(!1);return xm(()=>{c.current=!0}),D.useCallback((d,f={})=>{if(pn(c.current,ym),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=gm(d,JSON.parse(a),s,f.relative==="path");o==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Qn([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,a,s,o])}D.createContext(null);function po(o,{relative:e}={}){let{matches:t}=D.useContext(qn),{pathname:r}=oi(),s=JSON.stringify(fm(t));return D.useMemo(()=>gm(o,JSON.parse(s),r,e==="path"),[o,s,r,e])}function Ix(o,e){return wm(o,e)}function wm(o,e,t,r){var M;Ge(uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=D.useContext(Tn),{matches:c}=D.useContext(qn),u=c[c.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let F=v&&v.path||"";Cm(f,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let y=oi(),C;if(e){let F=typeof e=="string"?si(e):e;Ge(g==="/"||((M=F.pathname)==null?void 0:M.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${F.pathname}" was given in the \`location\` prop.`),C=F}else C=y;let x=C.pathname||"/",S=x;if(g!=="/"){let F=g.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(F.length).join("/")}let k=!a&&t&&t.matches&&t.matches.length>0?t.matches:hm(o,{pathname:S});pn(v||k!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),pn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Nx(k&&k.map(F=>Object.assign({},F,{params:Object.assign({},d,F.params),pathname:Qn([g,s.encodeLocation?s.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:Qn([g,s.encodeLocation?s.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),c,t,r);return e&&_?D.createElement(co.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},_):_}function Fx(){let o=Yx(),e=Tx(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),t=o instanceof Error?o.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",o),c=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:s},t):null,c)}var Rx=D.createElement(Fx,null),Lx=class extends D.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,e){return e.location!==o.location||e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:e.error,location:e.location,revalidation:o.revalidation||e.revalidation}}componentDidCatch(o,e){console.error("React Router caught the following error during render",o,e)}render(){return this.state.error!==void 0?D.createElement(qn.Provider,{value:this.props.routeContext},D.createElement(bh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Bx({routeContext:o,match:e,children:t}){let r=D.useContext(qi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(qn.Provider,{value:o},t)}function Nx(o,e=[],t=null,r=null){if(o==null){if(!t)return null;if(t.errors)o=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)o=t.matches;else return null}let s=o,a=t==null?void 0:t.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ge(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(t)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:v}=t,y=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,g)=>{let v,y=!1,C=null,x=null;t&&(v=a&&f.route.id?a[f.route.id]:void 0,C=f.route.errorElement||Rx,c&&(u<0&&g===0?(Cm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):u===g&&(y=!0,x=f.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,g+1)),k=()=>{let _;return v?_=C:y?_=x:f.route.Component?_=D.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=d,D.createElement(Bx,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?D.createElement(Lx,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):k()},null)}function Ah(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zx(o){let e=D.useContext(qi);return Ge(e,Ah(o)),e}function Wx(o){let e=D.useContext(jl);return Ge(e,Ah(o)),e}function Vx(o){let e=D.useContext(qn);return Ge(e,Ah(o)),e}function Th(o){let e=Vx(o),t=e.matches[e.matches.length-1];return Ge(t.route.id,`${o} can only be used on routes that contain a unique "id"`),t.route.id}function Ux(){return Th("useRouteId")}function Yx(){var r;let o=D.useContext(bh),e=Wx("useRouteError"),t=Th("useRouteError");return o!==void 0?o:(r=e.errors)==null?void 0:r[t]}function Qx(){let{router:o}=zx("useNavigate"),e=Th("useNavigate"),t=D.useRef(!1);return xm(()=>{t.current=!0}),D.useCallback(async(s,a={})=>{pn(t.current,ym),t.current&&(typeof s=="number"?o.navigate(s):await o.navigate(s,{fromRouteId:e,...a}))},[o,e])}var eg={};function Cm(o,e,t){!e&&!eg[o]&&(eg[o]=!0,pn(!1,t))}D.memo(Gx);function Gx({routes:o,future:e,state:t}){return wm(o,void 0,t,e)}function Kt(o){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hx({basename:o="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){Ge(!uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=o.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof t=="string"&&(t=si(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:y="default"}=t,C=D.useMemo(()=>{let x=Xn(d,c);return x==null?null:{location:{pathname:x,search:f,hash:g,state:v,key:y},navigationType:r}},[c,d,f,g,v,y,r]);return pn(C!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:D.createElement(Tn.Provider,{value:u},D.createElement(co.Provider,{children:e,value:C}))}function Xx({children:o,location:e}){return Ix(ih(o),e)}function ih(o,e=[]){let t=[];return D.Children.forEach(o,(r,s)=>{if(!D.isValidElement(r))return;let a=[...e,s];if(r.type===D.Fragment){t.push.apply(t,ih(r.props.children,a));return}Ge(r.type===Kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ih(r.props.children,a)),t.push(c)}),t}var nl="get",rl="application/x-www-form-urlencoded";function Pl(o){return o!=null&&typeof o.tagName=="string"}function $x(o){return Pl(o)&&o.tagName.toLowerCase()==="button"}function Kx(o){return Pl(o)&&o.tagName.toLowerCase()==="form"}function qx(o){return Pl(o)&&o.tagName.toLowerCase()==="input"}function Zx(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Jx(o,e){return o.button===0&&(!e||e==="_self")&&!Zx(o)}var Aa=null;function ew(){if(Aa===null)try{new FormData(document.createElement("form"),0),Aa=!1}catch{Aa=!0}return Aa}var tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fu(o){return o!=null&&!tw.has(o)?(pn(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rl}"`),null):o}function nw(o,e){let t,r,s,a,c;if(Kx(o)){let u=o.getAttribute("action");r=u?Xn(u,e):null,t=o.getAttribute("method")||nl,s=Fu(o.getAttribute("enctype"))||rl,a=new FormData(o)}else if($x(o)||qx(o)&&(o.type==="submit"||o.type==="image")){let u=o.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=o.getAttribute("formaction")||u.getAttribute("action");if(r=d?Xn(d,e):null,t=o.getAttribute("formmethod")||u.getAttribute("method")||nl,s=Fu(o.getAttribute("formenctype"))||Fu(u.getAttribute("enctype"))||rl,a=new FormData(u,o),!ew()){let{name:f,type:g,value:v}=o;if(g==="image"){let y=f?`${f}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else f&&a.append(f,v)}}else{if(Pl(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nl,r=null,s=rl,c=o}return a&&s==="text/plain"&&(c=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:c}}function Dh(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}async function rw(o,e){if(o.id in e)return e[o.id];try{let t=await import(o.module);return e[o.id]=t,t}catch(t){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iw(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function sw(o,e,t){let r=await Promise.all(o.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await rw(a,t);return c.links?c.links():[]}return[]}));return cw(r.flat(1).filter(iw).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function tg(o,e,t,r,s,a){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>{var g;return t[f].pathname!==d.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(o,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function ow(o,e,{includeHydrateFallback:t}={}){return aw(o.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function aw(o){return[...new Set(o)]}function lw(o){let e={},t=Object.keys(o).sort();for(let r of t)e[r]=o[r];return e}function cw(o,e){let t=new Set;return new Set(e),o.reduce((r,s)=>{let a=JSON.stringify(lw(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function uw(o,e){let t=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return t.pathname==="/"?t.pathname="_root.data":e&&Xn(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Sm(){let o=D.useContext(qi);return Dh(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function hw(){let o=D.useContext(jl);return Dh(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Oh=D.createContext(void 0);Oh.displayName="FrameworkContext";function _m(){let o=D.useContext(Oh);return Dh(o,"You must render this element inside a <HydratedRouter> element"),o}function dw(o,e){let t=D.useContext(Oh),[r,s]=D.useState(!1),[a,c]=D.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,y=D.useRef(null);D.useEffect(()=>{if(o==="render"&&c(!0),o==="viewport"){let S=_=>{_.forEach(M=>{c(M.isIntersecting)})},k=new IntersectionObserver(S,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[o]),D.useEffect(()=>{if(r){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[r]);let C=()=>{s(!0)},x=()=>{s(!1),c(!1)};return t?o!=="intent"?[a,y,{}]:[a,y,{onFocus:$s(u,C),onBlur:$s(d,x),onMouseEnter:$s(f,C),onMouseLeave:$s(g,x),onTouchStart:$s(v,C)}]:[!1,y,{}]}function $s(o,e){return t=>{o&&o(t),t.defaultPrevented||e(t)}}function pw({page:o,...e}){let{router:t}=Sm(),r=D.useMemo(()=>hm(t.routes,o,t.basename),[t.routes,o,t.basename]);return r?D.createElement(gw,{page:o,matches:r,...e}):null}function fw(o){let{manifest:e,routeModules:t}=_m(),[r,s]=D.useState([]);return D.useEffect(()=>{let a=!1;return sw(o,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[o,e,t]),r}function gw({page:o,matches:e,...t}){let r=oi(),{manifest:s,routeModules:a}=_m(),{basename:c}=Sm(),{loaderData:u,matches:d}=hw(),f=D.useMemo(()=>tg(o,e,d,s,r,"data"),[o,e,d,s,r]),g=D.useMemo(()=>tg(o,e,d,s,r,"assets"),[o,e,d,s,r]),v=D.useMemo(()=>{if(o===r.pathname+r.search+r.hash)return[];let x=new Set,S=!1;if(e.forEach(_=>{var F;let M=s.routes[_.route.id];!M||!M.hasLoader||(!f.some(N=>N.route.id===_.route.id)&&_.route.id in u&&((F=a[_.route.id])!=null&&F.shouldRevalidate)||M.hasClientLoader?S=!0:x.add(_.route.id))}),x.size===0)return[];let k=uw(o,c);return S&&x.size>0&&k.searchParams.set("_routes",e.filter(_=>x.has(_.route.id)).map(_=>_.route.id).join(",")),[k.pathname+k.search]},[c,u,r,s,f,e,o,a]),y=D.useMemo(()=>ow(g,s),[g,s]),C=fw(g);return D.createElement(D.Fragment,null,v.map(x=>D.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),y.map(x=>D.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),C.map(({key:x,link:S})=>D.createElement("link",{key:x,...S})))}function mw(...o){return e=>{o.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var km=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{km&&(window.__reactRouterVersion="7.4.1")}catch{}function vw({basename:o,children:e,window:t}){let r=D.useRef();r.current==null&&(r.current=ox({window:t,v5Compat:!0}));let s=r.current,[a,c]=D.useState({action:s.action,location:s.location}),u=D.useCallback(d=>{D.startTransition(()=>c(d))},[c]);return D.useLayoutEffect(()=>s.listen(u),[s,u]),D.createElement(Hx,{basename:o,children:e,location:a.location,navigationType:a.action,navigator:s})}var Em=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ct=D.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:v,...y},C){let{basename:x}=D.useContext(Tn),S=typeof f=="string"&&Em.test(f),k,_=!1;if(typeof f=="string"&&S&&(k=f,km))try{let se=new URL(window.location.href),le=f.startsWith("//")?new URL(se.protocol+f):new URL(f),we=Xn(le.pathname,x);le.origin===se.origin&&we!=null?f=we+le.search+le.hash:_=!0}catch{pn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=Px(f,{relative:s}),[F,N,U]=dw(r,y),H=Cw(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:v});function W(se){e&&e(se),se.defaultPrevented||H(se)}let X=D.createElement("a",{...y,...U,href:k||M,onClick:_||a?e:W,ref:mw(C,N),target:d,"data-discover":!S&&t==="render"?"true":void 0});return F&&!S?D.createElement(D.Fragment,null,X,D.createElement(pw,{page:M})):X});Ct.displayName="Link";var yw=D.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:c,viewTransition:u,children:d,...f},g){let v=po(c,{relative:f.relative}),y=oi(),C=D.useContext(jl),{navigator:x,basename:S}=D.useContext(Tn),k=C!=null&&bw(v)&&u===!0,_=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,M=y.pathname,F=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(M=M.toLowerCase(),F=F?F.toLowerCase():null,_=_.toLowerCase()),F&&S&&(F=Xn(F,S)||F);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let U=M===_||!s&&M.startsWith(_)&&M.charAt(N)==="/",H=F!=null&&(F===_||!s&&F.startsWith(_)&&F.charAt(_.length)==="/"),W={isActive:U,isPending:H,isTransitioning:k},X=U?e:void 0,se;typeof r=="function"?se=r(W):se=[r,U?"active":null,H?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let le=typeof a=="function"?a(W):a;return D.createElement(Ct,{...f,"aria-current":X,className:se,ref:g,style:le,to:c,viewTransition:u},typeof d=="function"?d(W):d)});yw.displayName="NavLink";var xw=D.forwardRef(({discover:o="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:c=nl,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,...y},C)=>{let x=kw(),S=Ew(u,{relative:f}),k=c.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&Em.test(u),M=F=>{if(d&&d(F),F.defaultPrevented)return;F.preventDefault();let N=F.nativeEvent.submitter,U=(N==null?void 0:N.getAttribute("formmethod"))||c;x(N||F.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:a,relative:f,preventScrollReset:g,viewTransition:v})};return D.createElement("form",{ref:C,method:k,action:S,onSubmit:r?d:M,...y,"data-discover":!_&&o==="render"?"true":void 0})});xw.displayName="Form";function ww(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bm(o){let e=D.useContext(qi);return Ge(e,ww(o)),e}function Cw(o,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:c}={}){let u=ho(),d=oi(),f=po(o,{relative:a});return D.useCallback(g=>{if(Jx(g,e)){g.preventDefault();let v=t!==void 0?t:no(d)===no(f);u(o,{replace:v,state:r,preventScrollReset:s,relative:a,viewTransition:c})}},[d,u,f,t,r,e,o,s,a,c])}var Sw=0,_w=()=>`__${String(++Sw)}__`;function kw(){let{router:o}=bm("useSubmit"),{basename:e}=D.useContext(Tn),t=Ux();return D.useCallback(async(r,s={})=>{let{action:a,method:c,encType:u,formData:d,body:f}=nw(r,e);if(s.navigate===!1){let g=s.fetcherKey||_w();await o.fetch(g,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await o.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[o,e,t])}function Ew(o,{relative:e}={}){let{basename:t}=D.useContext(Tn),r=D.useContext(qn);Ge(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...po(o||".",{relative:e})},c=oi();if(o==null){a.search=c.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();a.search=g?`?${g}`:""}}return(!o||o===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Qn([t,a.pathname])),no(a)}function bw(o,e={}){let t=D.useContext(vm);Ge(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bm("useViewTransitionState"),s=po(o,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Xn(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Xn(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ul(s.pathname,c)!=null||ul(s.pathname,a)!=null}new TextEncoder;const Aw="/nerofilm/assets/photobooth-BhfM2N4b.svg",Tw="/nerofilm/assets/fridge-DOmbqf5W.svg",Dw="/nerofilm/assets/perfume-TLveA3tV.svg",Ru="/nerofilm/assets/homepic1-fdG370ZF.png",Lu="/nerofilm/assets/homepic2-BSEdrWLe.png",Ow="/nerofilm/assets/privacypolicy-CHQbEn1s.svg",jw="/nerofilm/assets/key-DzSYORx6.svg",Pw="/nerofilm/assets/lock-DMxIucOf.svg",ng="/nerofilm/assets/enterphotobooth-CCLF0__k.svg",rg="/nerofilm/assets/oneway-SBk64P6v.svg",Mw="/nerofilm/assets/about-D7X72R9f.svg",Iw="/nerofilm/assets/bags-J5vbE712.svg",Fw="/nerofilm/assets/cattodolist-CxND0V6i.svg",jh=()=>b.jsxs("header",{className:"header",children:[b.jsx("div",{className:"logo",children:b.jsx(Ct,{to:"/",children:"NeroFilm"})}),b.jsx("nav",{children:b.jsxs("ul",{className:"header-nav",children:[b.jsx("li",{children:b.jsx(Ct,{to:"/about",children:"About"})}),b.jsx(Ct,{to:"/frame-layout",children:b.jsx("button",{className:"btn-small",children:"Enter Photobooth"})})]})})]}),Ph=()=>b.jsxs("footer",{className:"footer",children:[b.jsx("p",{children:"© NeroFilm 2025"}),b.jsxs("div",{className:"footer-right",children:[b.jsx(Ct,{to:"/privacy-policy",className:"privacy-policy-link",children:"Privacy Policy"}),b.jsx("a",{href:"mailto:contact.nerofilm@gmail.com",children:"Contact Us"})]})]}),Rw=()=>{const o=D.useRef(null),e=D.useRef(null),t=D.useRef(null),r=D.useRef(null),s=D.useRef(null),a=D.useRef(null);return D.useEffect(()=>{const c=()=>{[o.current,e.current,t.current,r.current,s.current,a.current].forEach(d=>{if(!d)return;const f=d.getBoundingClientRect();f.top<window.innerHeight*.85&&f.bottom>0?d.classList.add("in-view"):d.classList.remove("in-view")})};return window.addEventListener("scroll",c),c(),()=>window.removeEventListener("scroll",c)},[]),b.jsxs("div",{className:"home-container",children:[b.jsx(jh,{}),b.jsxs("div",{className:"hero",children:[b.jsx("div",{className:"hero-heading",children:"NeroFilm"}),b.jsx("div",{className:"hero-subheading",children:"Cherish memories, relive moments"})]}),b.jsxs("main",{className:"content-container",children:[b.jsxs("section",{className:"photobooth-section",children:[b.jsxs("div",{className:"photobooth-left",children:[b.jsx(Ct,{to:"/privacy-policy",children:b.jsx("img",{src:Ow,alt:"Privacy Policy",className:"icon-hover"})}),b.jsxs("div",{className:"key-lock-row",children:[b.jsx("img",{src:jw,alt:"Key Icon"}),b.jsx("img",{src:Pw,alt:"Lock Icon"})]}),b.jsx(Ct,{to:"/frame-layout",children:b.jsx("img",{src:ng,alt:"Enter Photobooth",className:"icon-hover"})}),b.jsx("img",{src:rg,alt:"One Way"})]}),b.jsx(Ct,{to:"/frame-layout",children:b.jsx("div",{className:"booth",children:b.jsx("img",{src:Aw,alt:"Photobooth"})})}),b.jsx("div",{className:"photobooth-right",children:b.jsxs("div",{className:"about-section",children:[b.jsx(Ct,{to:"/about",children:b.jsx("img",{src:Mw,alt:"About",className:"about-label icon-hover"})}),b.jsx("img",{src:Ru,alt:"homepic1",ref:o,className:"about-homepic1 scroll-pic","data-rotate":"-10"}),b.jsx("img",{src:Lu,alt:"homepic2",ref:e,className:"about-homepic2 scroll-pic","data-rotate":"10"})]})})]}),b.jsxs("section",{className:"fridge-section",children:[b.jsx("div",{className:"fridge-text",children:"Decorate your place with special moments"}),b.jsxs("div",{className:"fridge-container",children:[b.jsxs("div",{className:"fridge-photo-stack",children:[b.jsx("img",{src:Ru,alt:"Homepic 1",ref:t,className:"scroll-pic fridge-homepic1","data-rotate":"-10"}),b.jsx("img",{src:Lu,alt:"Homepic 2",ref:r,className:"scroll-pic fridge-homepic2","data-rotate":"10"})]}),b.jsx("img",{src:Tw,alt:"Fridge",className:"fridge-image"})]})]}),b.jsxs("section",{className:"perfume-section",children:[b.jsxs("div",{className:"perfume-left-column",children:[b.jsxs("div",{className:"perfume-top-row",children:[b.jsx("img",{src:Fw,alt:"Cat to-do list",className:"perfume-item1"}),b.jsx("img",{src:Ru,alt:"Homepic 1",ref:s,className:"scroll-pic perfume-item1-homepic1","data-rotate":"-10"}),b.jsx("img",{src:Lu,alt:"Homepic 2",ref:a,className:"scroll-pic perfume-item1-homepic2","data-rotate":"10"})]}),b.jsx("img",{src:Dw,alt:"Perfume Shelf",className:"perfume-item2"}),b.jsx("img",{src:Iw,alt:"Bags",className:"perfume-item3"})]}),b.jsx("div",{className:"perfume-right-text",children:"A wall full of your memories"})]}),b.jsxs("div",{className:"bottom-button",children:[b.jsx(Ct,{to:"/frame-layout",children:b.jsx("img",{src:ng,alt:"Enter Photobooth",className:"icon-hover"})}),b.jsx("img",{src:rg,alt:"One Way"})]})]}),b.jsx(Ph,{})]})};var Bu={exports:{}},Nu,ig;function Lw(){if(ig)return Nu;ig=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Nu=o,Nu}var zu,sg;function Bw(){if(sg)return zu;sg=1;var o=Lw();function e(){}function t(){}return t.resetWarningCache=e,zu=function(){function r(c,u,d,f,g,v){if(v!==o){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},zu}var og;function Nw(){return og||(og=1,Bu.exports=Bw()()),Bu.exports}var zw=Nw();const xe=Dl(zw),Am=D.createContext(),Tm=D.createContext(),hl="/nerofilm/assets/original-black-B3PHCsSP.png",Dm={layout:"original",images:[],allImages:[],filter:"default",design:hl},ag={original:{desktop:{height:360,width:120},mobile:{height:300,width:100}},wide:{desktop:{height:360,width:240},mobile:{height:300,width:200}}};function Om({children:o}){const[e,t]=D.useState(Dm);function r(s){t(s)}return b.jsx(Am.Provider,{value:e,children:b.jsx(Tm.Provider,{value:r,children:o})})}Om.propTypes={children:xe.node};const Ww=()=>(D.useEffect(()=>{window.scrollTo(0,0)},[]),b.jsxs("div",{children:[b.jsx(jh,{}),b.jsx("div",{className:"about-privacy-container",children:b.jsx("div",{className:"about-privacy-wrapper",children:b.jsxs("div",{className:"about-privacy-text-section",children:[b.jsx("h1",{className:"about-privacy-heading",children:"About Us"}),b.jsxs("div",{className:"about-privacy-text-container",children:[b.jsx("p",{className:"about-privacy-paragraph",children:"Bridging the past and present, we bring the classic photobooth experience into the digital age—no bulky setups, just your device's camera."}),b.jsx("p",{className:"about-privacy-paragraph",children:"With photobooths rising in popularity, we're making them more accessible than ever."}),b.jsx("p",{className:"about-privacy-paragraph",children:"Whether you're a small business looking to attract customers or someone without a photobooth nearby, our platform lets you capture the fun anytime, anywhere."})]})]})})}),b.jsx(Ph,{})]}));function Tr(){return D.useContext(Am)}function Zi(){return D.useContext(Tm)}const Vw="/nerofilm/assets/default-image-9bdNzeyV.png";function ai({layout:o,images:e=[],filter:t,design:r,stickers:s}){const[a,c]=D.useState([]),u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return D.useEffect(()=>{const d=[];for(let f=0;f<4;f++)d.push(e[f]||Vw);c(d)},[e]),b.jsxs("div",{className:`frame frame-${o} ${u?"safari":""}`,children:[b.jsx("img",{className:"frame-design",src:r,alt:""}),a.map((d,f)=>b.jsx("div",{className:"frame-img-wrapper",children:b.jsx("img",{className:`frame-img filter-${t}`,src:d,alt:`image ${f+1}`})},f)),s&&b.jsx("img",{className:"frame-stickers",src:s,alt:""})]})}ai.propTypes={images:xe.arrayOf(xe.string).isRequired,filter:xe.string.isRequired,layout:xe.oneOf(["original","wide"]).isRequired,design:xe.string.isRequired,stickers:xe.string};function Uw({title:o,titleId:e,...t},r){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?D.createElement("title",{id:e},o):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const Yw=D.forwardRef(Uw);function Qw({title:o,titleId:e,...t},r){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?D.createElement("title",{id:e},o):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 0 1-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 0 0-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409"}))}const Gw=D.forwardRef(Qw);function Hw({title:o,titleId:e,...t},r){return D.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),o?D.createElement("title",{id:e},o):null,D.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Xw=D.forwardRef(Hw),Zn=({isBlack:o=!1})=>{const e=ho();return b.jsxs("header",{className:`back-header ${o&&"back-header-black"}`,children:[b.jsx("div",{className:`logo ${o&&"white-logo"}`,children:b.jsx(Ct,{to:"/",children:"NeroFilm"})}),b.jsx("button",{onClick:()=>e(-1),className:"back-header-back",children:b.jsx(Yw,{className:`back-icon ${o&&"white-back-icon"}`})})]})};Zn.propTypes={isBlack:xe.bool};function li(){D.useEffect(()=>(window.onbeforeunload=()=>!0,()=>{window.onbeforeunload=null}),[])}const $w="/nerofilm/assets/MouseClick-CHil4oU_.mp3",Mh=()=>{new Audio($w).play()},sh="/nerofilm/assets/wide-black-BP4DeefW.png";function Kw(){const o=["original","wide"],e=Tr(),t=Zi();li();const r=D.useRef(!1),s=a=>{Mh(),t({...e,layout:a,design:a=="original"?hl:sh})};return D.useEffect(()=>{r.current||(t(Dm),r.current=!0)},[t]),b.jsxs("div",{children:[b.jsx(Zn,{}),b.jsxs("section",{className:"options-c",children:[b.jsx("h1",{className:"options-heading",children:"Select Frame Layout"}),b.jsx("div",{className:"options-r",children:b.jsx("ul",{className:"frame-options",children:o.map((a,c)=>b.jsxs("li",{onClick:()=>s(a),children:[b.jsx("div",{className:e.layout===a?"frame-selected frame-select-wrapper":"frame-select-wrapper",children:b.jsx(ai,{images:e.images,filter:e.filter,layout:a,design:a=="original"?hl:sh})}),b.jsx("p",{className:"frame-desc",children:a==="original"?"4 Cut Original":"4 Cut Wide"})]},c))})}),b.jsx(Ct,{className:"btn",to:"/camera",role:"button",children:"Continue"})]})]})}const Ta="/nerofilm/assets/lipstick-D6OZwgyV.jpg";function Ml({options:o,onClick:e,selected:t,isFilter:r}){return b.jsx("ul",{className:"options",children:o.map((s,a)=>b.jsxs("li",{className:"option",onClick:()=>{e(s),Mh()},children:[b.jsx("div",{className:`option-img-wrapper
              ${t===s.name?"option-img-selected":""}`,children:b.jsx("img",{className:`option-img 
              ${r?`filter-${s.name}`:""}`,src:s.image,alt:s.name})}),b.jsx("p",{children:s.name})]},a))})}Ml.propTypes={options:xe.arrayOf(xe.shape({name:xe.string.isRequired,image:xe.string.isRequired})).isRequired,onClick:xe.func.isRequired,selected:xe.string.isRequired,isFilter:xe.bool};function qw(){li();const o=Tr(),e=Zi(),t=[{name:"default",image:Ta},{name:"bw",image:Ta},{name:"vintage",image:Ta},{name:"beauty",image:Ta}];return b.jsxs("div",{children:[b.jsx(Zn,{}),b.jsxs("section",{className:"options-c",children:[b.jsx("h1",{className:"options-heading",children:"Add Filter"}),b.jsxs("section",{className:"options-r",children:[b.jsx(ai,{layout:o.layout,filter:o.filter,images:o.images,design:o.design}),b.jsx("div",{className:"options-box",children:b.jsx(Ml,{options:t,onClick:r=>e({...o,filter:r.name}),selected:o.filter,isFilter:!0})})]}),b.jsx(Ct,{className:"btn",to:"/sticker",role:"button",children:"Continue"})]})]})}const Zw="/nerofilm/assets/original-beige-BZQ9UN6F.png",Jw="/nerofilm/assets/wide-beige-vFyNcSbE.png",eC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPISURBVHgB7dQxDQAgAMAwwL9KPj4cgI4lrYjOe/YbAAFrAEQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQ8QE1awYS1rkMNwAAAABJRU5ErkJggg==",tC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPDSURBVHgB7dQBDQAgAASh1/6dNcdtEIKz7Q0g4A4gQlhAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgIwPbbMDVyt0imcAAAAASUVORK5CYII=",nC="/nerofilm/assets/original-burgundy-D3mbguXN.png",rC="/nerofilm/assets/wide-burgundy-BHCbiTuT.png",iC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPGSURBVHgB7dQBDQAgEAAhtdGHNqfmuA1CsO/MWwABZwFECAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkPEBqMcEXh3GMTYAAAAASUVORK5CYII=",sC="/nerofilm/assets/original-white-DSGma0TH.png",oC="/nerofilm/assets/wide-white-PC1FrMir.png",aC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPDSURBVHgB7dQBDQAgDMCwg3/PcBtLWhE9bw1AwB2ACGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjKEBWQIC8gQFpAhLCBDWECGsIAMYQEZwgIyhAVkCAvIEBaQISwgQ1hAhrCADGEBGcICMoQFZAgLyBAWkCEsIENYQIawgAxhARnCAjI+I/YGVIiYY34AAAAASUVORK5CYII=",lC="/nerofilm/assets/original-camera-Da3qxae_.png",cC="/nerofilm/assets/wide-camera-DzEydxDL.png",uC="/nerofilm/assets/option-camera-BzdzieZO.png",hC="/nerofilm/assets/original-stars-DMRB87FL.png",dC="/nerofilm/assets/wide-stars-L7IT6tqu.png",pC="/nerofilm/assets/option-stars-D66Xk42s.png",fC="/nerofilm/assets/original-swan-DaNbZ8C3.png",gC="/nerofilm/assets/wide-swan-BBHbgiAa.png",mC="/nerofilm/assets/option-swan-C0WghYVx.png",vC="/nerofilm/assets/original-cherry-blossoms-BqTPh5HH.png",yC="/nerofilm/assets/wide-cherry-blossoms-D5yQ0acF.png",xC="/nerofilm/assets/option-cherry-blossoms-BzxPM7U7.png",wC="/nerofilm/assets/original-flower-field-Cva_opMo.png",CC="/nerofilm/assets/wide-flower-field-CnGKhBlX.png",SC="/nerofilm/assets/option-flower-field-hKz5OszQ.png",_C="/nerofilm/assets/original-sea-DMD5QqEQ.png",kC="/nerofilm/assets/wide-sea-CP3nGci3.png",EC="/nerofilm/assets/option-sea-CTkNmW4n.png",bC="/nerofilm/assets/original-cream-BmORPlPN.png",AC="/nerofilm/assets/wide-cream-RPeUGOSU.png",TC="/nerofilm/assets/option-cream-COWVWvow.png",DC="/nerofilm/assets/original-daisies-C_hwWSST.png",OC="/nerofilm/assets/wide-daisies-B_dK-G7Y.png",jC="/nerofilm/assets/option-daisies-BTN60XEk.png",PC=[{name:"black",image:tC,original:hl,wide:sh},{name:"white",image:aC,original:sC,wide:oC},{name:"beige",image:eC,original:Zw,wide:Jw},{name:"burgundy",image:iC,original:nC,wide:rC},{name:"camera",image:uC,original:lC,wide:cC},{name:"stars",image:pC,original:hC,wide:dC},{name:"swan",image:mC,original:fC,wide:gC},{name:"sakura",image:xC,original:vC,wide:yC},{name:"field",image:SC,original:wC,wide:CC},{name:"sea",image:EC,original:_C,wide:kC},{name:"cream",image:TC,original:bC,wide:AC},{name:"daisies",image:jC,original:DC,wide:OC}];function MC(){li();const o=Tr(),e=Zi(),[t,r]=D.useState("black");return b.jsxs("div",{children:[b.jsx(Zn,{}),b.jsxs("section",{className:"options-c",children:[b.jsx("h1",{className:"options-heading",children:"Choose Frame"}),b.jsxs("section",{className:"options-r",children:[b.jsx(ai,{images:o.images,filter:o.filter,layout:o.layout,design:o.design}),b.jsx("div",{className:"options-box",children:b.jsx(Ml,{options:PC,onClick:s=>{r(s.name),e(a=>({...a,design:o.layout==="original"?s.original:s.wide}))},selected:t})})]}),b.jsx(Ct,{className:"btn",to:"/filter",role:"btn",children:"Continue"})]})]})}function IC(o,e){if(o.match(/^[a-z]+:\/\//i))return o;if(o.match(/^\/\//))return window.location.protocol+o;if(o.match(/^[a-z]+:/i))return o;const t=document.implementation.createHTMLDocument(),r=t.createElement("base"),s=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(s),e&&(r.href=e),s.href=o,s.href}const FC=(()=>{let o=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(o+=1,`u${e()}${o}`)})();function Er(o){const e=[];for(let t=0,r=o.length;t<r;t++)e.push(o[t]);return e}let Bi=null;function jm(o={}){return Bi||(o.includeStyleProperties?(Bi=o.includeStyleProperties,Bi):(Bi=Er(window.getComputedStyle(document.documentElement)),Bi))}function dl(o,e){const r=(o.ownerDocument.defaultView||window).getComputedStyle(o).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function RC(o){const e=dl(o,"border-left-width"),t=dl(o,"border-right-width");return o.clientWidth+e+t}function LC(o){const e=dl(o,"border-top-width"),t=dl(o,"border-bottom-width");return o.clientHeight+e+t}function Pm(o,e={}){const t=e.width||RC(o),r=e.height||LC(o);return{width:t,height:r}}function BC(){let o,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(o=parseInt(t,10),Number.isNaN(o)&&(o=1)),o||window.devicePixelRatio||1}const Nt=16384;function NC(o){(o.width>Nt||o.height>Nt)&&(o.width>Nt&&o.height>Nt?o.width>o.height?(o.height*=Nt/o.width,o.width=Nt):(o.width*=Nt/o.height,o.height=Nt):o.width>Nt?(o.height*=Nt/o.width,o.width=Nt):(o.width*=Nt/o.height,o.height=Nt))}function pl(o){return new Promise((e,t)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=t,r.crossOrigin="anonymous",r.decoding="async",r.src=o})}async function zC(o){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(o)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function WC(o,e,t){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${t}`),s.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(o),zC(s)}const Ot=(o,e)=>{if(o instanceof e)return!0;const t=Object.getPrototypeOf(o);return t===null?!1:t.constructor.name===e.name||Ot(t,e)};function VC(o){const e=o.getPropertyValue("content");return`${o.cssText} content: '${e.replace(/'|"/g,"")}';`}function UC(o,e){return jm(e).map(t=>{const r=o.getPropertyValue(t),s=o.getPropertyPriority(t);return`${t}: ${r}${s?" !important":""};`}).join(" ")}function YC(o,e,t,r){const s=`.${o}:${e}`,a=t.cssText?VC(t):UC(t,r);return document.createTextNode(`${s}{${a}}`)}function lg(o,e,t,r){const s=window.getComputedStyle(o,t),a=s.getPropertyValue("content");if(a===""||a==="none")return;const c=FC();try{e.className=`${e.className} ${c}`}catch{return}const u=document.createElement("style");u.appendChild(YC(c,t,s,r)),e.appendChild(u)}function QC(o,e,t){lg(o,e,":before",t),lg(o,e,":after",t)}const cg="application/font-woff",ug="image/jpeg",GC={woff:cg,woff2:cg,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ug,jpeg:ug,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function HC(o){const e=/\.([^./]*?)$/g.exec(o);return e?e[1]:""}function Ih(o){const e=HC(o).toLowerCase();return GC[e]||""}function XC(o){return o.split(/,/)[1]}function oh(o){return o.search(/^(data:)/)!==-1}function $C(o,e){return`data:${e};base64,${o}`}async function Mm(o,e,t){const r=await fetch(o,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((a,c)=>{const u=new FileReader;u.onerror=c,u.onloadend=()=>{try{a(t({res:r,result:u.result}))}catch(d){c(d)}},u.readAsDataURL(s)})}const Wu={};function KC(o,e,t){let r=o.replace(/\?.*/,"");return t&&(r=o),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Fh(o,e,t){const r=KC(o,e,t.includeQueryParams);if(Wu[r]!=null)return Wu[r];t.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+new Date().getTime());let s;try{const a=await Mm(o,t.fetchRequestInit,({res:c,result:u})=>(e||(e=c.headers.get("Content-Type")||""),XC(u)));s=$C(a,e)}catch(a){s=t.imagePlaceholder||"";let c=`Failed to fetch resource: ${o}`;a&&(c=typeof a=="string"?a:a.message),c&&console.warn(c)}return Wu[r]=s,s}async function qC(o){const e=o.toDataURL();return e==="data:,"?o.cloneNode(!1):pl(e)}async function ZC(o,e){if(o.currentSrc){const a=document.createElement("canvas"),c=a.getContext("2d");a.width=o.clientWidth,a.height=o.clientHeight,c==null||c.drawImage(o,0,0,a.width,a.height);const u=a.toDataURL();return pl(u)}const t=o.poster,r=Ih(t),s=await Fh(t,r,e);return pl(s)}async function JC(o,e){var t;try{if(!((t=o==null?void 0:o.contentDocument)===null||t===void 0)&&t.body)return await Il(o.contentDocument.body,e,!0)}catch{}return o.cloneNode(!1)}async function eS(o,e){return Ot(o,HTMLCanvasElement)?qC(o):Ot(o,HTMLVideoElement)?ZC(o,e):Ot(o,HTMLIFrameElement)?JC(o,e):o.cloneNode(Im(o))}const tS=o=>o.tagName!=null&&o.tagName.toUpperCase()==="SLOT",Im=o=>o.tagName!=null&&o.tagName.toUpperCase()==="SVG";async function nS(o,e,t){var r,s;if(Im(e))return e;let a=[];return tS(o)&&o.assignedNodes?a=Er(o.assignedNodes()):Ot(o,HTMLIFrameElement)&&(!((r=o.contentDocument)===null||r===void 0)&&r.body)?a=Er(o.contentDocument.body.childNodes):a=Er(((s=o.shadowRoot)!==null&&s!==void 0?s:o).childNodes),a.length===0||Ot(o,HTMLVideoElement)||await a.reduce((c,u)=>c.then(()=>Il(u,t)).then(d=>{d&&e.appendChild(d)}),Promise.resolve()),e}function rS(o,e,t){const r=e.style;if(!r)return;const s=window.getComputedStyle(o);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):jm(t).forEach(a=>{let c=s.getPropertyValue(a);a==="font-size"&&c.endsWith("px")&&(c=`${Math.floor(parseFloat(c.substring(0,c.length-2)))-.1}px`),Ot(o,HTMLIFrameElement)&&a==="display"&&c==="inline"&&(c="block"),a==="d"&&e.getAttribute("d")&&(c=`path(${e.getAttribute("d")})`),r.setProperty(a,c,s.getPropertyPriority(a))})}function iS(o,e){Ot(o,HTMLTextAreaElement)&&(e.innerHTML=o.value),Ot(o,HTMLInputElement)&&e.setAttribute("value",o.value)}function sS(o,e){if(Ot(o,HTMLSelectElement)){const t=e,r=Array.from(t.children).find(s=>o.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function oS(o,e,t){return Ot(e,Element)&&(rS(o,e,t),QC(o,e,t),iS(o,e),sS(o,e)),e}async function aS(o,e){const t=o.querySelectorAll?o.querySelectorAll("use"):[];if(t.length===0)return o;const r={};for(let a=0;a<t.length;a++){const u=t[a].getAttribute("xlink:href");if(u){const d=o.querySelector(u),f=document.querySelector(u);!d&&f&&!r[u]&&(r[u]=await Il(f,e,!0))}}const s=Object.values(r);if(s.length){const a="http://www.w3.org/1999/xhtml",c=document.createElementNS(a,"svg");c.setAttribute("xmlns",a),c.style.position="absolute",c.style.width="0",c.style.height="0",c.style.overflow="hidden",c.style.display="none";const u=document.createElementNS(a,"defs");c.appendChild(u);for(let d=0;d<s.length;d++)u.appendChild(s[d]);o.appendChild(c)}return o}async function Il(o,e,t){return!t&&e.filter&&!e.filter(o)?null:Promise.resolve(o).then(r=>eS(r,e)).then(r=>nS(o,r,e)).then(r=>oS(o,r,e)).then(r=>aS(r,e))}const Fm=/url\((['"]?)([^'"]+?)\1\)/g,lS=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,cS=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function uS(o){const e=o.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function hS(o){const e=[];return o.replace(Fm,(t,r,s)=>(e.push(s),t)),e.filter(t=>!oh(t))}async function dS(o,e,t,r,s){try{const a=t?IC(e,t):e,c=Ih(e);let u;return s||(u=await Fh(a,c,r)),o.replace(uS(e),`$1${u}$3`)}catch{}return o}function pS(o,{preferredFontFormat:e}){return e?o.replace(cS,t=>{for(;;){const[r,,s]=lS.exec(t)||[];if(!s)return"";if(s===e)return`src: ${r};`}}):o}function Rm(o){return o.search(Fm)!==-1}async function Lm(o,e,t){if(!Rm(o))return o;const r=pS(o,t);return hS(r).reduce((a,c)=>a.then(u=>dS(u,c,e,t)),Promise.resolve(r))}async function Ni(o,e,t){var r;const s=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(o);if(s){const a=await Lm(s,null,t);return e.style.setProperty(o,a,e.style.getPropertyPriority(o)),!0}return!1}async function fS(o,e){await Ni("background",o,e)||await Ni("background-image",o,e),await Ni("mask",o,e)||await Ni("-webkit-mask",o,e)||await Ni("mask-image",o,e)||await Ni("-webkit-mask-image",o,e)}async function gS(o,e){const t=Ot(o,HTMLImageElement);if(!(t&&!oh(o.src))&&!(Ot(o,SVGImageElement)&&!oh(o.href.baseVal)))return;const r=t?o.src:o.href.baseVal,s=await Fh(r,Ih(r),e);await new Promise((a,c)=>{o.onload=a,o.onerror=e.onImageErrorHandler?(...d)=>{try{a(e.onImageErrorHandler(...d))}catch(f){c(f)}}:c;const u=o;u.decode&&(u.decode=a),u.loading==="lazy"&&(u.loading="eager"),t?(o.srcset="",o.src=s):o.href.baseVal=s})}async function mS(o,e){const r=Er(o.childNodes).map(s=>Bm(s,e));await Promise.all(r).then(()=>o)}async function Bm(o,e){Ot(o,Element)&&(await fS(o,e),await gS(o,e),await mS(o,e))}function vS(o,e){const{style:t}=o;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(s=>{t[s]=r[s]}),o}const hg={};async function dg(o){let e=hg[o];if(e!=null)return e;const r=await(await fetch(o)).text();return e={url:o,cssText:r},hg[o]=e,e}async function pg(o,e){let t=o.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async c=>{let u=c.replace(r,"$1");return u.startsWith("https://")||(u=new URL(u,o.url).href),Mm(u,e.fetchRequestInit,({result:d})=>(t=t.replace(c,`url(${d})`),[c,d]))});return Promise.all(a).then(()=>t)}function fg(o){if(o==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let r=o.replace(t,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const d=s.exec(r);if(d===null)break;e.push(d[0])}r=r.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,c="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",u=new RegExp(c,"gi");for(;;){let d=a.exec(r);if(d===null){if(d=u.exec(r),d===null)break;a.lastIndex=u.lastIndex}else u.lastIndex=a.lastIndex;e.push(d[0])}return e}async function yS(o,e){const t=[],r=[];return o.forEach(s=>{if("cssRules"in s)try{Er(s.cssRules||[]).forEach((a,c)=>{if(a.type===CSSRule.IMPORT_RULE){let u=c+1;const d=a.href,f=dg(d).then(g=>pg(g,e)).then(g=>fg(g).forEach(v=>{try{s.insertRule(v,v.startsWith("@import")?u+=1:s.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(g=>{console.error("Error loading remote css",g.toString())});r.push(f)}})}catch(a){const c=o.find(u=>u.href==null)||document.styleSheets[0];s.href!=null&&r.push(dg(s.href).then(u=>pg(u,e)).then(u=>fg(u).forEach(d=>{c.insertRule(d,c.cssRules.length)})).catch(u=>{console.error("Error loading remote stylesheet",u)})),console.error("Error inlining remote css file",a)}}),Promise.all(r).then(()=>(o.forEach(s=>{if("cssRules"in s)try{Er(s.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),t))}function xS(o){return o.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Rm(e.style.getPropertyValue("src")))}async function wS(o,e){if(o.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Er(o.ownerDocument.styleSheets),r=await yS(t,e);return xS(r)}function Nm(o){return o.trim().replace(/["']/g,"")}function CS(o){const e=new Set;function t(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(a=>{e.add(Nm(a))}),Array.from(r.children).forEach(a=>{a instanceof HTMLElement&&t(a)})}return t(o),e}async function SS(o,e){const t=await wS(o,e),r=CS(o);return(await Promise.all(t.filter(a=>r.has(Nm(a.style.fontFamily))).map(a=>{const c=a.parentStyleSheet?a.parentStyleSheet.href:null;return Lm(a.cssText,c,e)}))).join(`
`)}async function _S(o,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await SS(o,e);if(t){const r=document.createElement("style"),s=document.createTextNode(t);r.appendChild(s),o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r)}}async function kS(o,e={}){const{width:t,height:r}=Pm(o,e),s=await Il(o,e,!0);return await _S(s,e),await Bm(s,e),vS(s,e),await WC(s,t,r)}async function ES(o,e={}){const{width:t,height:r}=Pm(o,e),s=await kS(o,e),a=await pl(s),c=document.createElement("canvas"),u=c.getContext("2d"),d=e.pixelRatio||BC(),f=e.canvasWidth||t,g=e.canvasHeight||r;return c.width=f*d,c.height=g*d,e.skipAutoScale||NC(c),c.style.width=`${f}`,c.style.height=`${g}`,e.backgroundColor&&(u.fillStyle=e.backgroundColor,u.fillRect(0,0,c.width,c.height)),u.drawImage(a,0,0,c.width,c.height),c}async function bS(o,e={}){return(await ES(o,e)).toDataURL()}const AS="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63.5%2032C63.5%2049.397%2049.397%2063.5%2032%2063.5C14.603%2063.5%200.5%2049.397%200.5%2032C0.5%2014.603%2014.603%200.5%2032%200.5C49.397%200.5%2063.5%2014.603%2063.5%2032Z'%20fill='%23FEFEFE'%20stroke='%23DADADA'/%3e%3cpath%20d='M26%2029V22H38V29'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M26%2038H24C23.4696%2038%2022.9609%2037.7893%2022.5858%2037.4142C22.2107%2037.0391%2022%2036.5304%2022%2036V31C22%2030.4696%2022.2107%2029.9609%2022.5858%2029.5858C22.9609%2029.2107%2023.4696%2029%2024%2029H40C40.5304%2029%2041.0391%2029.2107%2041.4142%2029.5858C41.7893%2029.9609%2042%2030.4696%2042%2031V36C42%2036.5304%2041.7893%2037.0391%2041.4142%2037.4142C41.0391%2037.7893%2040.5304%2038%2040%2038H38'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M38%2034H26V42H38V34Z'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",TS="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Circle%20background%20--%3e%3ccircle%20cx='32'%20cy='32'%20r='31.5'%20fill='%23FEFEFE'%20stroke='%23DADADA'%20/%3e%3c!--%20Smaller,%20centered%20Share%20icon%20--%3e%3ccircle%20cx='42'%20cy='22'%20r='3'%20stroke='%236E6E6E'%20stroke-width='2'%20fill='none'/%3e%3ccircle%20cx='22'%20cy='32'%20r='3'%20stroke='%236E6E6E'%20stroke-width='2'%20fill='none'/%3e%3ccircle%20cx='42'%20cy='42'%20r='3'%20stroke='%236E6E6E'%20stroke-width='2'%20fill='none'/%3e%3cpath%20d='M24.5%2030.5L39.5%2023.5'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3cpath%20d='M24.5%2033.5L39.5%2040.5'%20stroke='%236E6E6E'%20stroke-width='2'%20stroke-linecap='round'%20/%3e%3c/svg%3e",zm=async(o,e,t)=>{if(!o||o.length===0){alert("No photos found.");return}t(!0);const r=e.current,s=r.getContext("2d"),a=new Image;a.src=o[0],a.onload=async()=>{r.width=a.width*2,r.height=a.height*2,s.scale(2,2);const u=r.captureStream(),d=new MediaRecorder(u,{mimeType:"video/webm"}),f=[];d.ondataavailable=v=>f.push(v.data),d.onstop=()=>{const v=new Blob(f,{type:"video/webm"}),y=URL.createObjectURL(v),C=document.createElement("a");C.href=y,C.download="timelapse.webm",C.click(),URL.revokeObjectURL(y),t(!1)},d.start();const g=o.slice(0,32);for(let v=0;v<g.length;v++){const y=new Image;y.src=g[v],await new Promise(C=>{y.onload=()=>{s.clearRect(0,0,r.width,r.height),s.drawImage(y,0,0,a.width,a.height),setTimeout(C,300)}})}d.stop()}},DS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),gg=/iPhone|iPad|iPod/i.test(navigator.userAgent);function OS(){li();const o=Tr(),e=D.useRef(null),t=D.useRef(null),[r,s]=D.useState(""),[a,c]=D.useState(!1),[u,d]=D.useState(""),[f,g]=D.useState(!1),v=[{name:"share",image:TS},{name:"print",image:AS}];D.useEffect(()=>{e.current&&setTimeout(()=>{g(!0)},500)},[]),D.useEffect(()=>{if(!f||!e.current)return;(async()=>{c(!0),d("Preparing images...");try{if(DS||gg)d("Optimizing for Safari..."),await y();else{d("Generating image...");const M=await bS(e.current,{cacheBust:!0,width:e.current.offsetWidth*4,height:e.current.offsetHeight*4,style:{transform:"scale(4)",transformOrigin:"top left"}});s(M)}d("Ready to download!")}catch(M){console.error("Error generating image:",M),d("Error: Could not generate image. Try again.");try{d("Trying alternative method..."),await y()}catch(F){console.error("Fallback method also failed:",F),d("Error: All generation methods failed.")}}finally{c(!1)}})()},[f]);const y=async()=>new Promise((_,M)=>{try{setTimeout(()=>{if(!e.current){M(new Error("Frame reference not available"));return}const F=e.current,N=F.getBoundingClientRect(),U=document.createElement("canvas"),H=10;U.width=N.width*H,U.height=N.height*H;const W=U.getContext("2d");W.fillStyle="white",W.fillRect(0,0,U.width,U.height),W.scale(H,H),(async()=>{const se=Array.from(F.querySelectorAll("img")),le=se.filter(ee=>!ee.className.includes("frame-design")),we=se.find(ee=>ee.className.includes("frame-design"));for(const ee of le)try{const ce=ee.getBoundingClientRect(),ke=ce.left-N.left,me=ce.top-N.top,z=new Image;await new Promise((ge,Ee)=>{z.onload=ge,z.onerror=Ee,z.crossOrigin="anonymous",z.src=ee.src});const K=ce.width/ce.height,q=z.naturalWidth/z.naturalHeight;let P=0,V=0,ue=z.naturalWidth,ae=z.naturalHeight;q>K?(ue=z.naturalHeight*K,P=(z.naturalWidth-ue)/2):(ae=z.naturalWidth/K,V=(z.naturalHeight-ae)/2);const ye=ee.className;ye.includes("filter-bw")?W.filter="grayscale(100%) contrast(140%)":ye.includes("filter-vintage")?W.filter="grayscale(100%) hue-rotate(10deg) contrast(120%) brightness(110%) sepia(20%) blur(0.1px)":ye.includes("filter-beauty")?W.filter="brightness(110%) contrast(110%) saturate(85%) blur(0.1px)":W.filter="none",console.log("Filter class applied:",ye),console.log("Drawing photo image with filter:",W.filter,"→",z.src),W.drawImage(z,P,V,ue,ae,ke,me,ce.width,ce.height),W.filter="none"}catch(ce){console.warn("Failed to draw image:",ce)}if(we)try{const ee=we.getBoundingClientRect(),ce=ee.left-N.left,ke=ee.top-N.top,me=new Image;await new Promise((z,K)=>{me.onload=z,me.onerror=K,me.crossOrigin="anonymous",me.src=we.src}),W.filter="none",W.drawImage(me,0,0,me.naturalWidth,me.naturalHeight,ce,ke,ee.width,ee.height)}catch(ee){console.warn("Failed to draw frame overlay:",ee)}const Se=Array.from(F.querySelectorAll("p, h1, h2, h3, span"));for(const ee of Se)try{const ce=ee.getBoundingClientRect(),ke=ce.left-N.left,me=ce.top-N.top,z=window.getComputedStyle(ee);W.font=`${z.fontWeight} ${z.fontSize} ${z.fontFamily}`,W.fillStyle=z.color,W.textBaseline="top",W.fillText(ee.textContent,ke,me)}catch(ce){console.warn("Failed to draw text:",ce)}const pe=U.toDataURL("image/png");s(pe),_(pe)})().catch(M)},1e3)}catch(F){M(F)}}),C=()=>{if(!r){d("Image not ready yet. Please wait..."),f&&!a&&(c(!0),y().then(()=>{c(!1)}).catch(_=>{console.error("Failed to generate image on demand:",_),c(!1),d("Failed to generate image. Please try again.")}));return}try{if(gg){const _=document.createElement("a");_.href=r,_.download="nerofilm.png",document.body.appendChild(_),_.click(),document.body.removeChild(_),d("Image opened in new tab. Long-press to save.")}else{const _=document.createElement("a");_.download="nerofilm.png",_.href=r,_.click(),d("Download started!")}}catch(_){console.error("Download failed:",_),d("Download failed. Try opening in new tab."),window.open(r,"_blank")}},x=()=>{if(!r){d("Image not ready yet. Please wait...");return}try{d("Preparing for print...");const _=document.createElement("iframe");_.style.position="fixed",_.style.right="0",_.style.bottom="0",_.style.width="0",_.style.height="0",_.style.border="0",document.body.appendChild(_);const M=_.contentWindow.document;M.open(),M.write(`
        <html>
          <head>
            <title>Print Image</title>
            <style>
              @page {
                size: letter;
                margin: 0;
              }
              body {
                margin: 0;
                padding: 0;
              }
              img {
                width: ${o.layout==="original"?"2":"4"}in;
                height: 6in;
                position: absolute;
                top: 0;
                left: 0;
              }
            </style>
          </head>
          <body>
            <img id="printImage" src="${r}" alt="Printable" />
            <script>
              const image = document.getElementById('printImage');
              image.onload = function() {
                setTimeout(() => {
                  window.focus();
                  window.print();
                  setTimeout(() => {
                    window.parent.document.body.removeChild(window.frameElement);
                  }, 1000);
                }, 1000); // Long delay for Safari
              };
            <\/script>
          </body>
        </html>
      `),M.close(),d("Print dialog should open soon...")}catch(_){console.error("Print failed:",_),d("Printing failed. Try downloading first.")}},S=async()=>{if(!r){d("Image not ready yet. Please wait...");return}try{d("Preparing to share..."),c(!0);const M=await(await fetch(r)).blob(),N={title:"NeroFilm",files:[new File([M],"nerofilm.png",{type:M.type})],text:"Check out my photo strip! ✨ Take your own at https://nerofilm.co 📸"};if(navigator.canShare&&navigator.canShare(N))await navigator.share(N),d("Shared successfully!");else{const U=document.createElement("a");U.download="nerofilm.png",U.href=r,U.click(),d("Sharing not supported — image downloaded instead.")}}catch(_){console.error("Sharing failed:",_),d("Sharing failed. Try downloading instead.")}finally{c(!1)}},k=_=>{switch(_){case"share":S();break;case"print":x();break}};return b.jsxs("div",{children:[b.jsx(Zn,{}),b.jsx("canvas",{ref:t,style:{display:"none"}}),b.jsxs("section",{className:"options-c",children:[b.jsx("h1",{className:"options-heading",children:"Download & Share"}),b.jsxs("section",{className:"options-r",children:[b.jsx("div",{ref:e,style:{display:"inline-block"},children:b.jsx(ai,{images:o.images,filter:o.filter,layout:o.layout,design:o.design,stickers:o.stickers})}),b.jsx(Ml,{options:v,onClick:_=>k(_.name),selected:o.filter})]}),u==="Download failed. Try opening in new tab."&&b.jsx("p",{className:"status-message",style:{textAlign:"center",margin:"10px 0",color:u.includes("Error")?"red":"green"},children:u}),b.jsxs("section",{className:"btns",children:[b.jsx("button",{className:"btn",onClick:C,disabled:a,children:a?"Preparing Image...":"Download Image"}),b.jsx("button",{className:"btn btn-secondary",onClick:()=>zm(o.allImages||o.images,t,c),disabled:a,children:a?"Generating...":"Download Timelapse"})]})]})]})}var il={exports:{}},jS=il.exports,mg;function PS(){return mg||(mg=1,function(o,e){(function(r,s){o.exports=s(Ol())})(jS,function(t){return function(r){var s={};function a(c){if(s[c])return s[c].exports;var u=s[c]={i:c,l:!1,exports:{}};return r[c].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=r,a.c=s,a.d=function(c,u,d){a.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:d})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,u){if(u&1&&(c=a(c)),u&8||u&4&&typeof c=="object"&&c&&c.__esModule)return c;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),u&2&&typeof c!="string")for(var f in c)a.d(d,f,(function(g){return c[g]}).bind(null,f));return d},a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,"a",u),u},a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},a.p="",a(a.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,s,a){a.r(s);var c=a("react"),u=function(){var y=function(C,x){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,k){S.__proto__=k}||function(S,k){for(var _ in k)k.hasOwnProperty(_)&&(S[_]=k[_])},y(C,x)};return function(C,x){y(C,x);function S(){this.constructor=C}C.prototype=x===null?Object.create(x):(S.prototype=x.prototype,new S)}}(),d=function(){return d=Object.assign||function(y){for(var C,x=1,S=arguments.length;x<S;x++){C=arguments[x];for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(y[k]=C[k])}return y},d.apply(this,arguments)},f=function(y,C){var x={};for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&C.indexOf(S)<0&&(x[S]=y[S]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var k=0,S=Object.getOwnPropertySymbols(y);k<S.length;k++)C.indexOf(S[k])<0&&Object.prototype.propertyIsEnumerable.call(y,S[k])&&(x[S[k]]=y[S[k]]);return x};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(C){var x=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return x?new Promise(function(S,k){x.call(navigator,C,S,k)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function g(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var v=function(y){u(C,y);function C(x){var S=y.call(this,x)||this;return S.canvas=null,S.ctx=null,S.requestUserMediaId=0,S.unmounted=!1,S.state={hasUserMedia:!1},S}return C.prototype.componentDidMount=function(){var x=this,S=x.state,k=x.props;if(this.unmounted=!1,!g()){k.onUserMediaError("getUserMedia not supported");return}S.hasUserMedia||this.requestUserMedia(),k.children&&typeof k.children!="function"&&console.warn("children must be a function")},C.prototype.componentDidUpdate=function(x){var S=this.props;if(!g()){S.onUserMediaError("getUserMedia not supported");return}var k=JSON.stringify(x.audioConstraints)!==JSON.stringify(S.audioConstraints),_=JSON.stringify(x.videoConstraints)!==JSON.stringify(S.videoConstraints),M=x.minScreenshotWidth!==S.minScreenshotWidth,F=x.minScreenshotHeight!==S.minScreenshotHeight;(_||M||F)&&(this.canvas=null,this.ctx=null),(k||_)&&(this.stopAndCleanup(),this.requestUserMedia())},C.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},C.stopMediaStream=function(x){x&&(x.getVideoTracks&&x.getAudioTracks?(x.getVideoTracks().map(function(S){x.removeTrack(S),S.stop()}),x.getAudioTracks().map(function(S){x.removeTrack(S),S.stop()})):x.stop())},C.prototype.stopAndCleanup=function(){var x=this.state;x.hasUserMedia&&(C.stopMediaStream(this.stream),x.src&&window.URL.revokeObjectURL(x.src))},C.prototype.getScreenshot=function(x){var S=this,k=S.state,_=S.props;if(!k.hasUserMedia)return null;var M=this.getCanvas(x);return M&&M.toDataURL(_.screenshotFormat,_.screenshotQuality)},C.prototype.getCanvas=function(x){var S=this,k=S.state,_=S.props;if(!this.video||!k.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var M=this.video.videoWidth,F=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var N=M/F;M=_.minScreenshotWidth||this.video.clientWidth,F=M/N,_.minScreenshotHeight&&F<_.minScreenshotHeight&&(F=_.minScreenshotHeight,M=F*N)}this.canvas=document.createElement("canvas"),this.canvas.width=(x==null?void 0:x.width)||M,this.canvas.height=(x==null?void 0:x.height)||F,this.ctx=this.canvas.getContext("2d")}var U=this,H=U.ctx,W=U.canvas;return H&&W&&(W.width=(x==null?void 0:x.width)||W.width,W.height=(x==null?void 0:x.height)||W.height,_.mirrored&&(H.translate(W.width,0),H.scale(-1,1)),H.imageSmoothingEnabled=_.imageSmoothing,H.drawImage(this.video,0,0,(x==null?void 0:x.width)||W.width,(x==null?void 0:x.height)||W.height),_.mirrored&&(H.scale(-1,1),H.translate(-W.width,0))),W},C.prototype.requestUserMedia=function(){var x=this,S=this.props,k=function(F,N){var U={video:typeof N<"u"?N:!0};S.audio&&(U.audio=typeof F<"u"?F:!0),x.requestUserMediaId++;var H=x.requestUserMediaId;navigator.mediaDevices.getUserMedia(U).then(function(W){x.unmounted||H!==x.requestUserMediaId?C.stopMediaStream(W):x.handleUserMedia(null,W)}).catch(function(W){x.handleUserMedia(W)})};if("mediaDevices"in navigator)k(S.audioConstraints,S.videoConstraints);else{var _=function(F){return{optional:[{sourceId:F}]}},M=function(F){var N=F.deviceId;return typeof N=="string"?N:Array.isArray(N)&&N.length>0?N[0]:typeof N=="object"&&N.ideal?N.ideal:null};MediaStreamTrack.getSources(function(F){var N=null,U=null;F.forEach(function(X){X.kind==="audio"?N=X.id:X.kind==="video"&&(U=X.id)});var H=M(S.audioConstraints);H&&(N=H);var W=M(S.videoConstraints);W&&(U=W),k(_(N),_(U))})}},C.prototype.handleUserMedia=function(x,S){var k=this.props;if(x||!S){this.setState({hasUserMedia:!1}),k.onUserMediaError(x);return}this.stream=S;try{this.video&&(this.video.srcObject=S),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(S)})}k.onUserMedia(S)},C.prototype.render=function(){var x=this,S=this,k=S.state,_=S.props,M=_.audio;_.forceScreenshotSourceSize;var F=_.disablePictureInPicture;_.onUserMedia,_.onUserMediaError,_.screenshotFormat,_.screenshotQuality,_.minScreenshotWidth,_.minScreenshotHeight,_.audioConstraints,_.videoConstraints,_.imageSmoothing;var N=_.mirrored,U=_.style,H=U===void 0?{}:U,W=_.children,X=f(_,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),se=N?d(d({},H),{transform:(H.transform||"")+" scaleX(-1)"}):H,le={getScreenshot:this.getScreenshot.bind(this)};return c.createElement(c.Fragment,null,c.createElement("video",d({autoPlay:!0,disablePictureInPicture:F,src:k.src,muted:!M,playsInline:!0,ref:function(we){x.video=we},style:se},X)),W&&W(le))},C.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},C}(c.Component);s.default=v},react:function(r,s){r.exports=t}}).default})}(il)),il.exports}var MS=PS();const IS=Dl(MS),FS="data:image/svg+xml,%3csvg%20width='80'%20height='80'%20viewBox='0%200%2080%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='80'%20height='80'%20rx='40'%20fill='white'%20fill-opacity='0.2'/%3e%3crect%20x='8'%20y='8'%20width='64'%20height='64'%20rx='32'%20fill='white'/%3e%3c/svg%3e",RS="/nerofilm/assets/CamShutter-CEMIM7zw.wav",LS=()=>{li();const o=ho(),e=Tr(),t=Zi(),r=D.useRef(new Audio(RS)),s=D.useRef(null),[a,c]=D.useState(null),[u,d]=D.useState(!1),[f,g]=D.useState(0),[v,y]=D.useState(!1),[C,x]=D.useState(null);D.useEffect(()=>{c(!0)},[]);const S=(M=!1)=>{const F=s.current.video,N=document.createElement("canvas");N.width=1920,N.height=1080;const U=N.getContext("2d");U.translate(N.width,0),U.scale(-1,1),U.drawImage(F,0,0,N.width,N.height);const H=N.toDataURL("image/png");M||(r.current.currentTime=0,r.current.play().catch(W=>console.log("Audio play failed:",W)),y(!0),setTimeout(()=>y(!1),200)),t(W=>{const X=[...W.allImages,H].slice(-32);return{...W,allImages:X}})},k=(M,F)=>{M>0?(x(M),setTimeout(()=>k(M-1,F),1e3)):(x(null),F())},_=()=>{if(u)return;d(!0),g(0);let M=8;const F=()=>{if(M===0){d(!1),x(null),o("/photo-selection");return}k(3,()=>{S(),g(N=>N+1),M--,setTimeout(F,500)}),S(!0),setTimeout(()=>{S(!0),setTimeout(()=>{S(!0)},500)},500)};F()};return b.jsxs("div",{children:[b.jsx(Zn,{isBlack:!0}),b.jsxs("div",{className:`camera-page ${e.layout==="wide"?"wide-mode":"original-mode"}`,children:[a===null&&b.jsxs("div",{className:"camera-access-message",children:[b.jsx(Xw,{className:"camera-image"}),b.jsx("h2",{children:"Allow Camera Access"}),b.jsx("p",{children:"To take your photo, allow camera access."})]}),a===!1&&b.jsxs("div",{className:"camera-access-message",children:[b.jsx(Gw,{className:"camera-image"}),b.jsx("h2",{children:"Camera Access Disabled"}),b.jsx("p",{children:"Please enable camera access in your browser settings."})]}),a===!0&&b.jsx(b.Fragment,{children:b.jsxs("div",{className:"all-together",children:[u?b.jsxs("h2",{className:"count-display",children:[f,"/8"]}):b.jsx("h2",{className:"camera-instructions",children:"Click shutter to start taking photos"}),b.jsxs("div",{className:`camera-preview-screen ${e.layout}`,children:[b.jsx(IS,{className:"webcam",ref:s,audio:!1,mirrored:!0,screenshotFormat:"image/png",videoConstraints:{width:{ideal:1920},height:{ideal:1080},facingMode:"user"}}),v&&b.jsx("div",{className:"flash-overlay"}),b.jsx("div",{className:"camera-layer",children:b.jsxs("button",{className:"shutter-button",onClick:_,disabled:u,children:[b.jsx("img",{src:FS,alt:"Shutter",className:"shutter-icon"}),u&&b.jsx("div",{className:`countdown-timer ${C===null?"hidden":""}`,children:C!==null?C:b.jsx("span",{children:" "})})]})})]})]})})]})]})};function BS(){li();const o=ho(),e=Tr(),t=Zi(),[r,s]=D.useState([]);function a(u){Mh(),r.includes(u)?s(r.filter(d=>d!=u)):r.length<4&&s([...r,u])}function c(){r.length==4&&(t({...e,images:r}),o("/frame-design"))}return b.jsxs("div",{children:[b.jsx(Zn,{}),b.jsxs("section",{className:"options-c",children:[b.jsx("h1",{className:"options-heading",children:"Select Photos"}),b.jsxs("div",{className:"options-r",children:[b.jsx(ai,{filter:e.filter,images:r,layout:e.layout,design:e.design}),b.jsx("ul",{className:"image-options",children:e.allImages.filter((u,d)=>d%4===0).map((u,d)=>b.jsxs("li",{className:`${r.includes(u)?"image-option image-selected":"image-option"}
                      ${e.layout==="original"?"image-original":"image-wide"}
                    `,onClick:()=>a(u),children:[b.jsx("p",{className:r.includes(u)?"selected-num num":"num",children:r.indexOf(u)+1}),b.jsx("img",{src:u,alt:`image ${d}`})]},d))})]}),b.jsx("button",{className:"btn",onClick:()=>c(),children:"Continue"})]})]})}function T(o,e,t){return(e=function(r){var s=function(a,c){if(typeof a!="object"||!a)return a;var u=a[Symbol.toPrimitive];if(u!==void 0){var d=u.call(a,c);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function vg(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,r)}return t}function j(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vg(Object(t),!0).forEach(function(r){T(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):vg(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function Ne(o,e){if(o==null)return{};var t,r,s=function(c,u){if(c==null)return{};var d={};for(var f in c)if({}.hasOwnProperty.call(c,f)){if(u.indexOf(f)>=0)continue;d[f]=c[f]}return d}(o,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(r=0;r<a.length;r++)t=a[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(o,t)&&(s[t]=o[t])}return s}function Dr(o,e){return e||(e=o.slice(0)),Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(e)}}))}class yg{constructor(){T(this,"browserShadowBlurConstant",1),T(this,"DPI",96),T(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),T(this,"perfLimitSizeTotal",2097152),T(this,"maxCacheSideLimit",4096),T(this,"minCacheSideLimit",256),T(this,"disableStyleCopyPaste",!1),T(this,"enableGLFiltering",!0),T(this,"textureSize",4096),T(this,"forceGLPutImageData",!1),T(this,"cachesBoundsOfCurve",!1),T(this,"fontPaths",{}),T(this,"NUM_FRACTION_DIGITS",4)}}const Te=new class extends yg{constructor(o){super(),this.configure(o)}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,o)}addFonts(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=j(j({},this.fontPaths),o)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(o=>{delete this.fontPaths[o]})}clearFonts(){this.fontPaths={}}restoreDefaults(o){const e=new yg,t=(o==null?void 0:o.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},br=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[o]("fabric",...t)};class En extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class NS extends En{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class zS{}class WS extends zS{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),br("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const VS={};let xg;const bn=()=>xg||(xg={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new WS,dispose(){},copyPasteData:VS}),Ji=()=>bn().document,Rh=()=>bn().window,Wm=()=>{var o;return Math.max((o=Te.devicePixelRatio)!==null&&o!==void 0?o:Rh().devicePixelRatio,1)},Zs=new class{constructor(){T(this,"charWidthsCache",{}),T(this,"boundsOfCurveCache",{})}getFontCache(o){let{fontFamily:e,fontStyle:t,fontWeight:r}=o;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[a]||(s[a]={}),s[a]}clearFontCache(o){(o=(o||"").toLowerCase())?this.charWidthsCache[o]&&delete this.charWidthsCache[o]:this.charWidthsCache={}}limitDimsByArea(o){const{perfLimitSizeTotal:e}=Te,t=Math.sqrt(e*o);return[Math.floor(t),Math.floor(e/t)]}},ah="6.6.1";function sl(){}const fo=Math.PI/2,fl=2*Math.PI,Lh=Math.PI/180,St=Object.freeze([1,0,0,1,0,0]),Bh=16,_r=.4477152502,Ce="center",je="left",jt="top",lh="bottom",qe="right",Pt="none",Nh=/\r?\n/,Vm="moving",Fl="scaling",Um="rotating",zh="rotate",Ym="skewing",ro="resizing",US="modifyPoly",YS="modifyPath",gl="changed",Rl="scale",It="scaleX",Zt="scaleY",es="skewX",ts="skewY",rt="fill",Mt="stroke",ml="modified",zi="json",Vu="svg",te=new class{constructor(){this[zi]=new Map,this[Vu]=new Map}has(o){return this[zi].has(o)}getClass(o){const e=this[zi].get(o);if(!e)throw new En("No class registered for ".concat(o));return e}setClass(o,e){e?this[zi].set(e,o):(this[zi].set(o.type,o),this[zi].set(o.type.toLowerCase(),o))}getSVGClass(o){return this[Vu].get(o)}setSVGClass(o,e){this[Vu].set(e??o.type.toLowerCase(),o)}},vl=new class extends Array{remove(o){const e=this.indexOf(o);e>-1&&this.splice(e,1)}cancelAll(){const o=this.splice(0);return o.forEach(e=>e.abort()),o}cancelByCanvas(o){if(!o)return[];const e=this.filter(t=>{var r;return t.target===o||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===o});return e.forEach(t=>t.abort()),e}cancelByTarget(o){if(!o)return[];const e=this.filter(t=>t.target===o);return e.forEach(t=>t.abort()),e}};class QS{constructor(){T(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,a]=r;this.on(s,a)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[a,c]=s;r.push(this.once(a,c))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];t.call(this,...a),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,a]=r;this._removeEventListener(s,a)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let a=0;a<s.length;a++)s[a].call(this,t||{})}}const Vi=(o,e)=>{const t=o.indexOf(e);return t!==-1&&o.splice(t,1),o},$n=o=>{if(o===0)return 1;switch(Math.abs(o)/fo){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},Kn=o=>{if(o===0)return 0;const e=o/fo,t=Math.sign(o);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(o)};class B{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new B(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new B(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new B(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new B(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new B(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new B(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new B(this.x/e.x,this.y/e.y)}scalarDivide(e){return new B(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new B(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new B(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new B(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new B(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wh;const r=Kn(e),s=$n(e),a=this.subtract(t);return new B(a.x*s-a.y*r,a.x*r+a.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new B(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Wh=new B(0,0),ol=o=>!!o&&Array.isArray(o._objects);function Qm(o){class e extends o{constructor(){super(...arguments),T(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];const c=this._objects.push(...s);return s.forEach(u=>this._onObjectAdded(u)),c}insertAt(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return this._objects.splice(r,0,...a),a.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const r=this._objects,s=[];for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return c.forEach(d=>{const f=r.indexOf(d);f!==-1&&(r.splice(f,1),s.push(d),this._onObjectRemoved(d))}),s}forEachObject(r){this.getObjects().forEach((s,a,c)=>r(s,a,c))}getObjects(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return s.length===0?[...this._objects]:this._objects.filter(c=>c.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(a=>a instanceof e&&a.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(Vi(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(Vi(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const a=this._objects.indexOf(r);if(a!==0){const c=this.findNewLowerIndex(r,a,s);return Vi(this._objects,r),this._objects.splice(c,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const a=this._objects.indexOf(r);if(a!==this._objects.length-1){const c=this.findNewUpperIndex(r,a,s);return Vi(this._objects,r),this._objects.splice(c,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(Vi(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,a){let c;if(a){c=s;for(let u=s-1;u>=0;--u)if(r.isOverlapping(this._objects[u])){c=u;break}}else c=s-1;return c}findNewUpperIndex(r,s,a){let c;if(a){c=s;for(let u=s+1;u<this._objects.length;++u)if(r.isOverlapping(this._objects[u])){c=u;break}}else c=s+1;return c}collectObjects(r){let{left:s,top:a,width:c,height:u}=r,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],g=new B(s,a),v=g.add(new B(c,u));for(let y=this._objects.length-1;y>=0;y--){const C=this._objects[y];C.selectable&&C.visible&&(d&&C.intersectsWithRect(g,v)||C.isContainedWithinRect(g,v)||d&&C.containsPoint(g)||d&&C.containsPoint(v))&&f.push(C)}return f}}return e}class Gm extends QS{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function al(o){return Rh().requestAnimationFrame(o)}function GS(o){return Rh().cancelAnimationFrame(o)}let HS=0;const Ar=()=>HS++,fn=()=>{const o=Ji().createElement("canvas");if(!o||o.getContext===void 0)throw new En("Failed to create `canvas` element");return o},XS=()=>Ji().createElement("img"),An=o=>{const e=fn();return e.width=o.width,e.height=o.height,e},Hm=(o,e,t)=>o.toDataURL("image/".concat(e),t),Xm=(o,e,t)=>new Promise((r,s)=>{o.toBlob(r,"image/".concat(e),t)}),Ze=o=>o*Lh,ri=o=>o/Lh,$S=o=>o.every((e,t)=>e===St[t]),Dt=(o,e,t)=>new B(o).transform(e,t),hn=o=>{const e=1/(o[0]*o[3]-o[1]*o[2]),t=[e*o[3],-e*o[1],-e*o[2],e*o[0],0,0],{x:r,y:s}=new B(o[4],o[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},ht=(o,e,t)=>[o[0]*e[0]+o[2]*e[1],o[1]*e[0]+o[3]*e[1],o[0]*e[2]+o[2]*e[3],o[1]*e[2]+o[3]*e[3],t?0:o[0]*e[4]+o[2]*e[5]+o[4],t?0:o[1]*e[4]+o[3]*e[5]+o[5]],Vh=(o,e)=>o.reduceRight((t,r)=>r&&t?ht(r,t,e):r||t,void 0)||St.concat(),$m=o=>{let[e,t]=o;return Math.atan2(t,e)},yl=o=>{const e=$m(o),t=Math.pow(o[0],2)+Math.pow(o[1],2),r=Math.sqrt(t),s=(o[0]*o[3]-o[2]*o[1])/r,a=Math.atan2(o[0]*o[2]+o[1]*o[3],t);return{angle:ri(e),scaleX:r,scaleY:s,skewX:ri(a),skewY:0,translateX:o[4]||0,translateY:o[5]||0}},go=function(o){return[1,0,0,1,o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function mo(){let{angle:o=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Ze(o),s=$n(r),a=Kn(r);return[s,a,-a,s,e?e-(s*e-a*t):0,t?t-(a*e+s*t):0]}const Uh=function(o){return[o,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,0,0]},Km=o=>Math.tan(Ze(o)),qm=o=>[1,0,Km(o),1,0,0],Zm=o=>[1,Km(o),0,1,0,0],Ll=o=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:a=0,skewY:c=0}=o,u=Uh(r?-e:e,s?-t:t);return a&&(u=ht(u,qm(a),!0)),c&&(u=ht(u,Zm(c),!0)),u},KS=o=>{const{translateX:e=0,translateY:t=0,angle:r=0}=o;let s=go(e,t);r&&(s=ht(s,mo({angle:r})));const a=Ll(o);return $S(a)||(s=ht(s,a)),s},ll=function(o){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new NS("loadImage"));const a=XS();let c;e&&(c=function(d){a.src="",s(d)},e.addEventListener("abort",c,{once:!0}));const u=function(){a.onload=a.onerror=null,c&&(e==null||e.removeEventListener("abort",c)),r(a)};o?(a.onload=u,a.onerror=function(){c&&(e==null||e.removeEventListener("abort",c)),s(new En("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=o):u()})},io=function(o){let{signal:e,reviver:t=sl}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const a=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(o.map(c=>te.getClass(c.type).fromObject(c,{signal:e}).then(u=>(t(c,u),a.push(u),u)))).then(r).catch(c=>{a.forEach(u=>{u.dispose&&u.dispose()}),s(c)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Bl=function(o){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const a=Object.values(o).map(u=>u&&u.type&&te.has(u.type)?io([u],{signal:e}).then(d=>{let[f]=d;return s.push(f),f}):u),c=Object.keys(o);Promise.all(a).then(u=>u.reduce((d,f,g)=>(d[c[g]]=f,d),{})).then(t).catch(u=>{s.forEach(d=>{d.dispose&&d.dispose()}),r(u)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},ns=function(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in o&&(e[t]=o[t]),e),{})},Yh=(o,e)=>Object.keys(o).reduce((t,r)=>(e(o[r],r,o)&&(t[r]=o[r]),t),{}),wg={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Uu=(o,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o),Cg=(o,e,t,r)=>{o/=255,e/=255,t/=255;const s=Math.max(o,e,t),a=Math.min(o,e,t);let c,u;const d=(s+a)/2;if(s===a)c=u=0;else{const f=s-a;switch(u=d>.5?f/(2-s-a):f/(s+a),s){case o:c=(e-t)/f+(e<t?6:0);break;case e:c=(t-o)/f+2;break;case t:c=(o-e)/f+4}c/=6}return[Math.round(360*c),Math.round(100*u),Math.round(100*d),r]},Sg=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(o)/(o.endsWith("%")?100:1)},Da=o=>Math.min(Math.round(o),255).toString(16).toUpperCase().padStart(2,"0"),_g=o=>{let[e,t,r,s=1]=o;const a=Math.round(.3*e+.59*t+.11*r);return[a,a,a,s]};class Me{constructor(e){if(T(this,"isUnrecognised",!1),e)if(e instanceof Me)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,a=1]=e;this.setSource([t,r,s,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in wg&&(e=wg[e]),e==="transparent"?[255,255,255,0]:Me.sourceFromHex(e)||Me.sourceFromRgb(e)||Me.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Cg(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=Cg(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(Da(e)).concat(Da(t)).concat(Da(r)).concat(Da(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(_g(this.getSource())),this}toBlackWhite(e){const[t,,,r]=_g(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof Me||(e=new Me(e));const t=this.getSource(),r=e.getSource(),[s,a,c]=t.map((u,d)=>Math.round(.5*u+.5*r[d]));return this.setSource([s,a,c,t[3]]),this}static fromRgb(e){return Me.fromRgba(e)}static fromRgba(e){return new Me(Me.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,a]=t.slice(1,4).map(c=>{const u=parseFloat(c);return c.endsWith("%")?Math.round(2.55*u):u});return[r,s,a,Sg(t[4])]}}static fromHsl(e){return Me.fromHsla(e)}static fromHsla(e){return new Me(Me.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(Me.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let c,u,d;if(s===0)c=u=d=a;else{const f=a<=.5?a*(s+1):a+s-a*s,g=2*a-f;c=Uu(g,f,r+1/3),u=Uu(g,f,r),d=Uu(g,f,r-1/3)}return[Math.round(255*c),Math.round(255*u),Math.round(255*d),Sg(t[4])]}static fromHex(e){return new Me(Me.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(d=>d+d):t.match(/.{2}/g);const[s,a,c,u=255]=r.map(d=>parseInt(d,16));return[s,a,c,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?ri(r):t.includes("turn")?360*r:r}}const Qe=(o,e)=>parseFloat(Number(o).toFixed(e)),Gi=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bh;const t=/\D{0,2}$/.exec(o),r=parseFloat(o),s=Te.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},qS=o=>{const[e,t]=o.trim().split(" "),[r,s]=(a=e)&&a!==Pt?[a.slice(1,4),a.slice(5,8)]:a===Pt?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},xl=o=>"matrix("+o.map(e=>Qe(e,Te.NUM_FRACTION_DIGITS)).join(" ")+")",so=function(o,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new Me(e),c=a.getAlpha();t=a.toRgb(),c!==1&&(r=c.toString())}else t="none";return s?"".concat(o,": ").concat(t,"; ").concat(r?"".concat(o,"-opacity: ").concat(r,"; "):""):"".concat(o,'="').concat(t,'" ').concat(r?"".concat(o,'-opacity="').concat(r,'" '):"")},qt=o=>!!o&&o.toLive!==void 0,kg=o=>!!o&&typeof o.toObject=="function",Eg=o=>!!o&&o.offsetX!==void 0&&"source"in o,$r=o=>!!o&&"multiSelectionStacking"in o;function Jm(o){const e=o&&un(o);let t=0,r=0;if(!o||!e)return{left:t,top:r};let s=o;const a=e.documentElement,c=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=c.scrollLeft||a.scrollLeft||0,r=c.scrollTop||a.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const un=o=>o.ownerDocument||null,ev=o=>{var e;return((e=o.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},tv=function(o,e,t){let{width:r,height:s}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;o.width=r,o.height=s,a>1&&(o.setAttribute("width",(r*a).toString()),o.setAttribute("height",(s*a).toString()),e.scale(a,a))},ch=(o,e)=>{let{width:t,height:r}=e;t&&(o.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(o.style.height=typeof r=="number"?"".concat(r,"px"):r)};function bg(o){return o.onselectstart!==void 0&&(o.onselectstart=()=>!1),o.style.userSelect=Pt,o}class nv{constructor(e){T(this,"_originalCanvasStyle",void 0),T(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Ji().getElementById(e)||fn();var r;if(t.hasAttribute("data-fabric"))throw new En("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;tv(r,s,e,t)}setCSSDimensions(e){ch(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&un(e),s={left:0,top:0};if(!r)return s;const a=((t=ev(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(a.borderLeftWidth,10)||0,s.top+=parseInt(a.borderTopWidth,10)||0,s.left+=parseInt(a.paddingLeft,10)||0,s.top+=parseInt(a.paddingTop,10)||0;let c={left:0,top:0};const u=r.documentElement;e.getBoundingClientRect!==void 0&&(c=e.getBoundingClientRect());const d=Jm(e);return{left:c.left+d.left-(u.clientLeft||0)+s.left,top:c.top+d.top-(u.clientTop||0)+s.top}}(this.lower.el)}dispose(){bn().dispose(this.lower.el),delete this.lower}}const ZS={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...St]};class vo extends Qm(Gm){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return vo.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new nv(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const a=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(br("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Wm():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=j({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],a=Dt(e,hn(s));s[0]=t,s[3]=t;const c=Dt(a,s);s[4]+=r.x-c.x,s[5]+=r.y-c.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new B(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new B(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=al(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=hn(this.viewportTransform),s=Dt({x:0,y:0},r),a=Dt({x:e,y:t},r),c=s.min(a),u=s.max(a);return this.vptCoords={tl:c,tr:new B(u.x,c.y),bl:new B(c.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(GS(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],a=this.viewportTransform,c=this["".concat(t,"Vpt")];if(!r&&!s)return;const u=qt(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?r.toLive(e):r,c&&e.transform(...a),u){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const d=r.gradientTransform||r.patternTransform;d&&e.transform(...d)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:d}=this;this.skipOffscreen=c,c&&e.transform(...a),s.render(e),this.skipOffscreen=d,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new B(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new B(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new B(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new B(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new B(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Dt(this.getCenterPoint(),hn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Ce,Ce),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return j(j(j({version:ah},ns(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),a}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,a=this.overlayImage,c=this.backgroundColor,u=this.overlayColor;return qt(c)?c.excludeFromExport||(r.background=c.toObject(t)):c&&(r.background=c),qt(u)?u.excludeFromExport||(r.overlay=u.toObject(t)):u&&(r.overlay=u),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),a&&!a.excludeFromExport&&(r.overlayImage=this._toObject(a,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),a=Te.NUM_FRACTION_DIGITS,c=t.viewBox;let u;if(c)u='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;u='viewBox="'.concat(Qe(-d[4]/d[0],a)," ").concat(Qe(-d[5]/d[3],a)," ").concat(Qe(this.width/d[0],a)," ").concat(Qe(this.height/d[3],a),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",ah,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ar()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(qt(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,a={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(a,{additionalTransform:r?xl(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Te.fontPaths;this._objects.forEach(function a(c){e.push(c),ol(c)&&c._objects.forEach(a)}),e.forEach(a=>{if(!(c=a)||typeof c._renderText!="function")return;var c;const{styles:u,fontFamily:d}=a;!t[d]&&r[d]&&(t[d]=!0,u&&Object.values(u).forEach(f=>{Object.values(f).forEach(g=>{let{fontFamily:v=""}=g;!t[v]&&r[v]&&(t[v]=!0)})}))});const s=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(r[a],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(qt(r)){const s=r.repeat||"",a=this.width,c=this.height,u=this["".concat(t,"Vpt")]?xl(hn(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(a/2,",").concat(c/2,')" x="').concat(r.offsetX-a/2,'" y="').concat(r.offsetY-c/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Eg(r)?a:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Eg(r)?c:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new En("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:c,background:u,overlayImage:d,overlay:f,clipPath:g}=s,v=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([io(a,{reviver:t,signal:r}),Bl({backgroundImage:c,backgroundColor:u,overlayImage:d,overlayColor:f,clipPath:g},{signal:r})]).then(y=>{let[C,x]=y;return this.clear(),this.add(...C),this.set(s),this.set(x),this.renderOnAddRemove=v,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=An(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,c=s*(a?this.getRetinaScaling():1);return Hm(this.toCanvasElement(c,e),t,r)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,c=s*(a?this.getRetinaScaling():1);return Xm(this.toCanvasElement(c,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:a,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,d=(r||this.height)*e,f=this.getZoom(),g=this.width,v=this.height,y=this.skipControlsDrawing,C=f*e,x=this.viewportTransform,S=[C,0,0,C,(x[4]-(s||0))*e,(x[5]-(a||0))*e],k=this.enableRetinaScaling,_=An({width:u,height:d}),M=c?this._objects.filter(F=>c(F)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=S,this.width=u,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(_.getContext("2d"),M),this.viewportTransform=x,this.width=g,this.height=v,this.calcViewportBoundaries(),this.enableRetinaScaling=k,this.skipControlsDrawing=y,_}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),vl.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}T(vo,"ownDefaults",ZS);const JS=["touchstart","touchmove","touchend"],e1=o=>{const e=Jm(o.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(o);return new B(t.clientX+e.left,t.clientY+e.top)},uh=o=>JS.includes(o.type)||o.pointerType==="touch",hh=o=>{o.preventDefault(),o.stopPropagation()},Gn=o=>{let e=0,t=0,r=0,s=0;for(let a=0,c=o.length;a<c;a++){const{x:u,y:d}=o[a];(u>r||!a)&&(r=u),(u<e||!a)&&(e=u),(d>s||!a)&&(s=d),(d<t||!a)&&(t=d)}return{left:e,top:t,width:r-e,height:s-t}},t1=["translateX","translateY","scaleX","scaleY"],n1=(o,e)=>wl(o,ht(e,o.calcOwnMatrix())),wl=(o,e)=>{const t=yl(e),{translateX:r,translateY:s,scaleX:a,scaleY:c}=t,u=Ne(t,t1),d=new B(r,s);o.flipX=!1,o.flipY=!1,Object.assign(o,u),o.set({scaleX:a,scaleY:c}),o.setPositionByOrigin(d,Ce,Ce)},r1=o=>{o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},rv=o=>({scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}),Qh=(o,e,t)=>{const r=o/2,s=e/2,a=[new B(-r,-s),new B(r,-s),new B(-r,s),new B(r,s)].map(u=>u.transform(t)),c=Gn(a);return new B(c.width,c.height)},Nl=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:St;return ht(hn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:St),o)},Hi=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:St,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St;return o.transform(Nl(e,t))},i1=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:St,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St;return o.transform(Nl(e,t),!0)},s1=(o,e,t)=>{const r=Nl(e,t);return wl(o,ht(r,o.calcOwnMatrix())),r},iv=(o,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(o),j(j({},e),{},{target:r})),r.fire(o,e)},o1={left:-.5,top:-.5,center:0,bottom:.5,right:.5},et=o=>typeof o=="string"?o1[o]:o-.5,Cl="not-allowed";function sv(o){return et(o.originX)===et(Ce)&&et(o.originY)===et(Ce)}function Ag(o){return .5-et(o)}const dn=(o,e)=>o[e],ov=(o,e,t,r)=>({e:o,transform:e,pointer:new B(t,r)});function av(o,e){const t=o.getTotalAngle()+ri(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function Gh(o,e,t,r,s){var a;let{target:c,corner:u}=o;const d=c.controls[u],f=((a=c.canvas)===null||a===void 0?void 0:a.getZoom())||1,g=c.padding/f,v=function(y,C,x,S){const k=y.getRelativeCenterPoint(),_=x!==void 0&&S!==void 0?y.translateToGivenOrigin(k,Ce,Ce,x,S):new B(y.left,y.top);return(y.angle?C.rotate(-Ze(y.angle),k):C).subtract(_)}(c,new B(r,s),e,t);return v.x>=g&&(v.x-=g),v.x<=-g&&(v.x+=g),v.y>=g&&(v.y-=g),v.y<=g&&(v.y+=g),v.x-=d.offsetX,v.y-=d.offsetY,v}const a1=(o,e,t,r)=>{const{target:s,offsetX:a,offsetY:c}=e,u=t-a,d=r-c,f=!dn(s,"lockMovementX")&&s.left!==u,g=!dn(s,"lockMovementY")&&s.top!==d;return f&&s.set(je,u),g&&s.set(jt,d),(f||g)&&iv(Vm,ov(o,e,t,r)),f||g};class lv{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Pt,a=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",v=e?"":this.getSvgFilter(),y=so(rt,this.fill);return[so(Mt,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",d,"; ",y,"fill-rule: ",t,"; ","opacity: ",f,";",v,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(xl(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=s?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,v=this.stroke,y=this.fill,C=this.shadow,x=[],S=e.indexOf("COMMON_PARTS");let k;d&&(d.clipPathId="CLIPPATH_".concat(Ar()),k='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(r),`</clipPath>
`)),g&&x.push("<g ",u,this.getSvgCommons(),` >
`),x.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`);const _=[c,f,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[S]=_,qt(y)&&x.push(y.toSVG(this)),qt(v)&&x.push(v.toSVG(this)),C&&x.push(C.toSVG(this)),d&&x.push(k),x.push(e.join("")),x.push(`</g>
`),g&&x.push(`</g>
`),r?r(x.join("")):x.join("")}addPaintOrder(){return this.paintFirst!==rt?' paint-order="'.concat(this.paintFirst,'" '):""}}function zl(o){return new RegExp("^("+o.join("|")+")\\b","i")}var Tg;const ii=String.raw(Tg||(Tg=Dr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),l1=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+ii+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+ii+"))?\\s+(.*)"),c1={cx:je,x:je,r:"radius",cy:jt,y:jt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Yu="font-size",Qu="clip-path";zl(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);zl(["symbol","image","marker","pattern","view","svg"]);const Dg=zl(["symbol","g","a","svg","clipPath","defs"]),u1=new B(1,0),cv=new B,uv=(o,e)=>o.rotate(e),dh=(o,e)=>new B(e).subtract(o),ph=o=>o.distanceFrom(cv),fh=(o,e)=>Math.atan2(Js(o,e),d1(o,e)),h1=o=>fh(u1,o),Hh=o=>o.eq(cv)?o:o.scalarDivide(ph(o)),hv=function(o){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Hh(new B(-o.y,o.x).scalarMultiply(e?1:-1))},Js=(o,e)=>o.x*e.y-o.y*e.x,d1=(o,e)=>o.x*e.x+o.y*e.y,Og=(o,e,t)=>{if(o.eq(e)||o.eq(t))return!0;const r=Js(e,t),s=Js(e,o),a=Js(t,o);return r>=0?s>=0&&a<=0:!(s<=0&&a>=0)},jg="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Pg=new RegExp("(?:\\s|^)"+jg+jg+"("+ii+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Hn{constructor(e){const t=typeof e=="string"?Hn.parseShadow(e):e;Object.assign(this,Hn.ownDefaults,t),this.id=Ar()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,a=0]=(Pg.exec(t)||[]).map(c=>parseFloat(c)||0);return{color:(t.replace(Pg,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=uv(new B(this.offsetX,this.offsetY),Ze(-e.angle)),r=new Me(this.color);let s=40,a=40;return e.width&&e.height&&(s=100*Qe((Math.abs(t.x)+this.blur)/e.width,Te.NUM_FRACTION_DIGITS)+20,a=100*Qe((Math.abs(t.y)+this.blur)/e.height,Te.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Qe(this.blur?this.blur/2:0,Te.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Qe(t.x,Te.NUM_FRACTION_DIGITS),'" dy="').concat(Qe(t.y,Te.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Hn.ownDefaults;return this.includeDefaultValues?e:Yh(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}T(Hn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),T(Hn,"type","shadow"),te.setClass(Hn,"shadow");const $i=(o,e,t)=>Math.max(o,Math.min(e,t)),p1=[jt,je,It,Zt,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",es,ts],Jn=[rt,Mt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],f1={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:je,originY:jt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:rt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},g1=(o,e,t,r)=>-t*Math.cos(o/r*fo)+t+e,m1=()=>!1;class Xh{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:a=0,easing:c=g1,onStart:u=sl,onChange:d=sl,onComplete:f=sl,abort:g=m1,target:v}=e;T(this,"_state","pending"),T(this,"durationProgress",0),T(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=a,this.easing=c,this._onStart=u,this._onChange=d,this._onComplete=f,this._abort=g,this.target=v,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>al(e),this.delay):al(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:a}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),al(this.tick)))}register(){vl.push(this)}unregister(){vl.remove(this)}abort(){this._state="aborted",this.unregister()}}const v1=["startValue","endValue"];class y1 extends Xh{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(j(j({},Ne(e,v1)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const x1=["startValue","endValue"];class w1 extends Xh{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(j(j({},Ne(e,x1)),{},{startValue:t,byValue:r.map((s,a)=>s-t[a])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const C1=["startValue","endValue","easing","onChange","onComplete","abort"],S1=(o,e,t,r)=>e+t*(1-Math.cos(o/r*fo)),Gu=o=>o&&((e,t,r)=>o(new Me(e).toRgba(),t,r));class _1 extends Xh{constructor(e){let{startValue:t,endValue:r,easing:s=S1,onChange:a,onComplete:c,abort:u}=e,d=Ne(e,C1);const f=new Me(t).getSource(),g=new Me(r).getSource();super(j(j({},d),{},{startValue:f,byValue:g.map((v,y)=>v-f[y]),easing:s,onChange:Gu(a),onComplete:Gu(c),abort:Gu(u)}))}calculate(e){const[t,r,s,a]=this.startValue.map((u,d)=>this.easing(e,u,this.byValue[d],this.duration,d)),c=[...[t,r,s].map(Math.round),$i(0,a,1)];return{value:c,valueProgress:c.map((u,d)=>this.byValue[d]!==0?Math.abs((u-this.startValue[d])/this.byValue[d]):0).find(u=>u!==0)||0}}}function dv(o){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(o)?new w1(o):new y1(o);return e.start(),e}function k1(o){const e=new _1(o);return e.start(),e}class Ue{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const a=dh(t,r),c=dh(t,e).divide(a);return s?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(e,t){const r=new B(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let s=0;for(let a=0;a<t.length;a++){const c=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,r);if(c.includes(e))return!0;s+=+(c.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,d=t.y-e.y,f=s.x-r.x,g=s.y-r.y,v=e.x-r.x,y=e.y-r.y,C=f*y-g*v,x=u*y-d*v,S=g*u-f*d;if(S!==0){const k=C/S,_=x/S;return(a||0<=k&&k<=1)&&(c||0<=_&&_<=1)?new Ue("Intersection").append(new B(e.x+k*u,e.y+k*d)):new Ue}if(C===0||x===0){const k=a||c||Ue.isPointContained(e,r,s)||Ue.isPointContained(t,r,s)||Ue.isPointContained(r,e,t)||Ue.isPointContained(s,e,t);return new Ue(k?"Coincident":void 0)}return new Ue("Parallel")}static intersectSegmentLine(e,t,r,s){return Ue.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return Ue.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Ue,c=r.length;for(let u,d,f,g=0;g<c;g++){if(u=r[g],d=r[(g+1)%c],f=Ue.intersectLineLine(e,t,u,d,s,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,r){return Ue.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Ue,s=e.length,a=[];for(let c=0;c<s;c++){const u=e[c],d=e[(c+1)%s],f=Ue.intersectSegmentPolygon(u,d,t);f.status==="Coincident"?(a.push(f),r.append(u,d)):r.append(...f.points)}return a.length>0&&a.length===e.length?new Ue("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),a=t.max(r),c=new B(a.x,s.y),u=new B(s.x,a.y);return Ue.intersectPolygonPolygon(e,[s,c,a,u])}}class E1 extends Gm{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Dt(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Dt(e,hn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new B(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,r,s];if(this.group){const c=this.group.calcTransformMatrix();return a.map(u=>Dt(u,c))}return a}intersectsWithRect(e,t){return Ue.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ue.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:a,height:c}=this.getBoundingRect();return r>=e.x&&r+a<=t.x&&s>=e.y&&s+c<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ue.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Gn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(It,e),this._set(Zt,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?ri($m(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||St.concat()}calcACoords(){const e=mo({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=go(t,r),a=ht(s,e),c=this._getTransformedDimensions(),u=c.x/2,d=c.y/2;return{tl:Dt({x:-u,y:-d},a),tr:Dt({x:u,y:-d},a),bl:Dt({x:-u,y:d},a),br:Dt({x:u,y:d},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,et(this.originX),et(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((a,c)=>a===r[c])?s.value:(this.group&&(t=ht(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=KS(s);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new B(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,a=0;this.strokeUniform&&(s=0,a=r);const c=t.width+s,u=t.height+s;let d;return d=t.skewX===0&&t.skewY===0?new B(c*t.scaleX,u*t.scaleY):Qh(c,u,Ll(t)),d.scalarAdd(a)}translateToGivenOrigin(e,t,r,s,a){let c=e.x,u=e.y;const d=et(s)-et(t),f=et(a)-et(r);if(d||f){const g=this._getTransformedDimensions();c+=d*g.x,u+=f*g.y}return new B(c,u)}translateToCenterPoint(e,t,r){if(t===Ce&&r===Ce)return e;const s=this.translateToGivenOrigin(e,t,r,Ce,Ce);return this.angle?s.rotate(Ze(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,Ce,Ce,t,r);return this.angle?s.rotate(Ze(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Dt(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new B(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),a=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),je,jt)}}const b1=["type"],A1=["extraParam"];let zn=class cl extends E1{static getDefaults(){return cl.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){br("warn","Setting type has no effect",e)}constructor(e){super(),T(this,"_cacheContext",null),Object.assign(this,cl.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=fn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=Te.maxCacheSideLimit,a=Te.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=Te.perfLimitSizeTotal)return t<a&&(e.width=a),r<a&&(e.height=a),e;const c=t/r,[u,d]=Zs.limitDimsByArea(c),f=$i(a,u,s),g=$i(a,d,s);return t>f&&(e.zoomX/=t/f,e.width=f,e.capped=!0),r>g&&(e.zoomY/=r/g,e.height=g,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:a,zoomY:c,x:u,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=r!==e.width||s!==e.height,g=this.zoomX!==a||this.zoomY!==c;if(!e||!t)return!1;if(f||g){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const v=u/2,y=d/2;return this.cacheTranslationX=Math.round(e.width/2-v)+v,this.cacheTranslationY=Math.round(e.height/2-y)+y,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,c),this.zoomX=a,this.zoomY=c,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new B(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=yl(this.calcTransformMatrix());return new B(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==It&&e!==Zt||(t=this._constrainScale(t)),e===It&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Hn||(t=new Hn(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:a}=this,{width:c,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:a,width:c,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Mt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=a}createClipPathLayer(e,t){const r=An(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(a=>{a.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=hn(this.calcTransformMatrix());s.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,qt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(qt(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[a,,,c]=(r==null?void 0:r.viewportTransform)||St,u=a*s,d=c*s,f=t.nonScaling?new B(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Te.browserShadowBlurConstant*(u+d)*(f.x+f.y)/4,e.shadowOffsetX=t.offsetX*u*f.x,e.shadowOffsetY=t.offsetY*d*f.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!qt(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,a):e.transform(1,0,0,1,s,a),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Mt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),c=s.x/this.scaleX/a,u=s.y/this.scaleY/a,d=An({width:Math.ceil(c),height:Math.ceil(u)}),f=d.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,u),f.lineTo(0,u),f.closePath(),f.translate(c/2,u/2),f.scale(s.zoomX/this.scaleX/a,s.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,t),f.fillStyle=t.toLive(e),f.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/s.zoomX,a*this.scaleY/s.zoomY),e.strokeStyle=(r=f.createPattern(d,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new B(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(te.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=rv(this),r=this.group,s=this.shadow,a=Math.abs,c=e.enableRetinaScaling?Wm():1,u=(e.multiplier||1)*c,d=e.canvasProvider||(M=>new vo(M,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&r1(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&s1(this,this.getViewportTransform()),this.setCoords();const f=fn(),g=this.getBoundingRect(),v=this.shadow,y=new B;if(v){const M=v.blur,F=v.nonScaling?new B(1,1):this.getObjectScaling();y.x=2*Math.round(a(v.offsetX)+M)*a(F.x),y.y=2*Math.round(a(v.offsetY)+M)*a(F.y)}const C=g.width+y.x,x=g.height+y.y;f.width=Math.ceil(C),f.height=Math.ceil(x);const S=d(f);e.format==="jpeg"&&(S.backgroundColor="#fff"),this.setPositionByOrigin(new B(S.width/2,S.height/2),Ce,Ce);const k=this.canvas;S._objects=[this],this.set("canvas",S),this.setCoords();const _=S.toCanvasElement(u||1,e);return this.set("canvas",k),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),S._objects=[],S.destroy(),_}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Hm(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Xm(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:a,y:c}=this.getRelativeCenterPoint();this.originX=Ce,this.originY=Ce,this.left=a,this.top=c}if(this.set("angle",e),t){const{x:a,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=a,this.top=c,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){vl.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&bn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[a,c]=s;return r[a]=this._animate(a,c,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),a=this.constructor.colorProperties.includes(s[s.length-1]),{abort:c,startValue:u,onChange:d,onComplete:f}=r,g=j(j({},r),{},{target:this,startValue:u??s.reduce((v,y)=>v[y],this),endValue:t,abort:c==null?void 0:c.bind(this),onChange:(v,y,C)=>{s.reduce((x,S,k)=>(k===s.length-1&&(x[S]=v),x[S]),this),d&&d(v,y,C)},onComplete:(v,y,C)=>{this.setCoords(),f&&f(v,y,C)}});return a?k1(g):dv(g)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,a=0;a<t.length;a++){if(s=t[a],s===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let c=0;c<r.length;c++){if(this===r[c])return{fork:[],otherFork:[e,...r.slice(0,c)],common:[this,...t]};if(s===r[c])return{fork:[this,...t.slice(0,a)],otherFork:[e,...r.slice(0,c)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),a=t.otherFork.pop(),c=r._objects.indexOf(s),u=r._objects.indexOf(a);return c>-1&&c>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(cl.customProperties,this.constructor.customProperties||[]);let t;const r=Te.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:c,shadow:u,strokeDashArray:d,left:f,top:g,originX:v,originY:y,width:C,height:x,strokeWidth:S,strokeLineCap:k,strokeDashOffset:_,strokeLineJoin:M,strokeUniform:F,strokeMiterLimit:N,scaleX:U,scaleY:H,angle:W,flipX:X,flipY:se,opacity:le,visible:we,backgroundColor:Se,fillRule:pe,paintFirst:ee,globalCompositeOperation:ce,skewX:ke,skewY:me}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const z=q=>Qe(q,r),K=j(j({},ns(this,e)),{},{type:this.constructor.type,version:ah,originX:v,originY:y,left:z(f),top:z(g),width:z(C),height:z(x),fill:kg(a)?a.toObject():a,stroke:kg(c)?c.toObject():c,strokeWidth:z(S),strokeDashArray:d&&d.concat(),strokeLineCap:k,strokeDashOffset:_,strokeLineJoin:M,strokeUniform:F,strokeMiterLimit:z(N),scaleX:z(U),scaleY:z(H),angle:z(W),flipX:X,flipY:se,opacity:z(le),shadow:u&&u.toObject(),visible:we,backgroundColor:Se,fillRule:pe,paintFirst:ee,globalCompositeOperation:ce,skewX:z(ke),skewY:z(me)},t?{clipPath:t}:null);return this.includeDefaultValues?K:this._removeDefaultValues(K)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Yh(e,(s,a)=>{if(a===je||a===jt||a==="type")return!0;const c=r[a];return s!==c&&!(Array.isArray(s)&&Array.isArray(c)&&s.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Ne(e,b1),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,a=Ne(r,A1);return Bl(t,a).then(c=>s?(delete c[s],new this(t[s],c)):new this(c))}static fromObject(e,t){return this._fromObject(e,t)}};T(zn,"stateProperties",p1),T(zn,"cacheProperties",Jn),T(zn,"ownDefaults",f1),T(zn,"type","FabricObject"),T(zn,"colorProperties",[rt,Mt,"backgroundColor"]),T(zn,"customProperties",[]),te.setClass(zn),te.setClass(zn,"object");const rs=(o,e,t)=>(r,s,a,c)=>{const u=e(r,s,a,c);return u&&iv(o,j(j({},ov(r,s,a,c)),t)),u};function is(o){return(e,t,r,s)=>{const{target:a,originX:c,originY:u}=t,d=a.getRelativeCenterPoint(),f=a.translateToOriginPoint(d,c,u),g=o(e,t,r,s);return a.setPositionByOrigin(f,t.originX,t.originY),g}}const Mg=rs(ro,is((o,e,t,r)=>{const s=Gh(e,e.originX,e.originY,t,r);if(et(e.originX)===et(Ce)||et(e.originX)===et(qe)&&s.x<0||et(e.originX)===et(je)&&s.x>0){const{target:a}=e,c=a.strokeWidth/(a.strokeUniform?a.scaleX:1),u=sv(e)?2:1,d=a.width,f=Math.abs(s.x*u/a.scaleX)-c;return a.set("width",Math.max(f,1)),d!==a.width}return!1}));function T1(o,e,t,r,s){r=r||{};const a=this.sizeX||r.cornerSize||s.cornerSize,c=this.sizeY||r.cornerSize||s.cornerSize,u=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,d=u?Mt:rt,f=!u&&(r.cornerStrokeColor||s.cornerStrokeColor);let g,v=e,y=t;o.save(),o.fillStyle=r.cornerColor||s.cornerColor||"",o.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",a>c?(g=a,o.scale(1,c/a),y=t*a/c):c>a?(g=c,o.scale(a/c,1),v=e*c/a):g=a,o.beginPath(),o.arc(v,y,g/2,0,fl,!1),o[d](),f&&o.stroke(),o.restore()}function D1(o,e,t,r,s){r=r||{};const a=this.sizeX||r.cornerSize||s.cornerSize,c=this.sizeY||r.cornerSize||s.cornerSize,u=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,d=u?Mt:rt,f=!u&&(r.cornerStrokeColor||s.cornerStrokeColor),g=a/2,v=c/2;o.save(),o.fillStyle=r.cornerColor||s.cornerColor||"",o.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",o.translate(e,t);const y=s.getTotalAngle();o.rotate(Ze(y)),o["".concat(d,"Rect")](-g,-v,a,c),f&&o.strokeRect(-g,-v,a,c),o.restore()}class ln{constructor(e){T(this,"visible",!0),T(this,"actionName",Rl),T(this,"angle",0),T(this,"x",0),T(this,"y",0),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"sizeX",0),T(this,"sizeY",0),T(this,"touchSizeX",0),T(this,"touchSizeY",0),T(this,"cursorStyle","crosshair"),T(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var a;let{tl:c,tr:u,br:d,bl:f}=s;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&Ue.isPointInPolygon(r,[c,u,d,f])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new B(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,a,c){const u=Vh([go(r,s),mo({angle:e}),Uh((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new B(-.5,-.5).transform(u),tr:new B(.5,-.5).transform(u),br:new B(.5,.5).transform(u),bl:new B(-.5,.5).transform(u)}}render(e,t,r,s,a){((s=s||{}).cornerStyle||a.cornerStyle)==="circle"?T1.call(this,e,t,r,s,a):D1.call(this,e,t,r,s,a)}}const O1=(o,e,t)=>t.lockRotation?Cl:e.cursorStyle,j1=rs(Um,is((o,e,t,r)=>{let{target:s,ex:a,ey:c,theta:u,originX:d,originY:f}=e;const g=s.translateToOriginPoint(s.getRelativeCenterPoint(),d,f);if(dn(s,"lockRotation"))return!1;const v=Math.atan2(c-g.y,a-g.x),y=Math.atan2(r-g.y,t-g.x);let C=ri(y-v+u);if(s.snapAngle&&s.snapAngle>0){const S=s.snapAngle,k=s.snapThreshold||S,_=Math.ceil(C/S)*S,M=Math.floor(C/S)*S;Math.abs(C-M)<k?C=M:Math.abs(C-_)<k&&(C=_)}C<0&&(C=360+C),C%=360;const x=s.angle!==C;return s.angle=C,x}));function pv(o,e){const t=e.canvas,r=o[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function fv(o,e,t){const r=dn(o,"lockScalingX"),s=dn(o,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:a,height:c,strokeWidth:u}=o;return a===0&&u===0&&e!=="y"||c===0&&u===0&&e!=="x"}const P1=["e","se","s","sw","w","nw","n","ne","e"],qs=(o,e,t)=>{const r=pv(o,t);if(fv(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Cl;const s=av(t,e);return"".concat(P1[s],"-resize")};function $h(o,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,c=s.by,u=pv(o,a);let d,f,g,v,y,C;if(fv(a,c,u))return!1;if(e.gestureScale)f=e.scaleX*e.gestureScale,g=e.scaleY*e.gestureScale;else{if(d=Gh(e,e.originX,e.originY,t,r),y=c!=="y"?Math.sign(d.x||e.signX||1):1,C=c!=="x"?Math.sign(d.y||e.signY||1):1,e.signX||(e.signX=y),e.signY||(e.signY=C),dn(a,"lockScalingFlip")&&(e.signX!==y||e.signY!==C))return!1;if(v=a._getTransformedDimensions(),u&&!c){const k=Math.abs(d.x)+Math.abs(d.y),{original:_}=e,M=k/(Math.abs(v.x*_.scaleX/a.scaleX)+Math.abs(v.y*_.scaleY/a.scaleY));f=_.scaleX*M,g=_.scaleY*M}else f=Math.abs(d.x*a.scaleX/v.x),g=Math.abs(d.y*a.scaleY/v.y);sv(e)&&(f*=2,g*=2),e.signX!==y&&c!=="y"&&(e.originX=Ag(e.originX),f*=-1,e.signX=y),e.signY!==C&&c!=="x"&&(e.originY=Ag(e.originY),g*=-1,e.signY=C)}const x=a.scaleX,S=a.scaleY;return c?(c==="x"&&a.set(It,f),c==="y"&&a.set(Zt,g)):(!dn(a,"lockScalingX")&&a.set(It,f),!dn(a,"lockScalingY")&&a.set(Zt,g)),x!==a.scaleX||S!==a.scaleY}const Oa=rs(Fl,is((o,e,t,r)=>$h(o,e,t,r))),M1=rs(Fl,is((o,e,t,r)=>$h(o,e,t,r,{by:"x"}))),I1=rs(Fl,is((o,e,t,r)=>$h(o,e,t,r,{by:"y"}))),F1=["target","ex","ey","skewingSide"],Hu={x:{counterAxis:"y",scale:It,skew:es,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Zt,skew:ts,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},R1=["ns","nesw","ew","nwse"],L1=(o,e,t)=>{if(e.x!==0&&dn(t,"lockSkewingY")||e.y!==0&&dn(t,"lockSkewingX"))return Cl;const r=av(t,e)%4;return"".concat(R1[r],"-resize")};function gv(o,e,t,r,s){const{target:a}=t,{counterAxis:c,origin:u,lockSkewing:d,skew:f,flip:g}=Hu[o];if(dn(a,d))return!1;const{origin:v,flip:y}=Hu[c],C=et(t[v])*(a[y]?-1:1),x=-Math.sign(C)*(a[g]?-1:1),S=.5*-((a[f]===0&&Gh(t,Ce,Ce,r,s)[o]>0||a[f]>0?1:-1)*x)+.5;return rs(Ym,is((_,M,F,N)=>function(U,H,W){let{target:X,ex:se,ey:le,skewingSide:we}=H,Se=Ne(H,F1);const{skew:pe}=Hu[U],ee=W.subtract(new B(se,le)).divide(new B(X.scaleX,X.scaleY))[U],ce=X[pe],ke=Se[pe],me=Math.tan(Ze(ke)),z=U==="y"?X._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:X._getTransformedDimensions({scaleX:1,scaleY:1}).y,K=2*ee*we/Math.max(z,1)+me,q=ri(Math.atan(K));X.set(pe,q);const P=ce!==X[pe];if(P&&U==="y"){const{skewX:V,scaleX:ue}=X,ae=X._getTransformedDimensions({skewY:ce}),ye=X._getTransformedDimensions(),ge=V!==0?ae.x/ye.x:1;ge!==1&&X.set(It,ge*ue)}return P}(o,M,new B(F,N))))(e,j(j({},t),{},{[u]:S,skewingSide:x}),r,s)}const B1=(o,e,t,r)=>gv("x",o,e,t,r),N1=(o,e,t,r)=>gv("y",o,e,t,r);function Wl(o,e){return o[e.canvas.altActionKey]}const ja=(o,e,t)=>{const r=Wl(o,t);return e.x===0?r?es:Zt:e.y===0?r?ts:It:""},Ui=(o,e,t)=>Wl(o,t)?L1(0,e,t):qs(o,e,t),Ig=(o,e,t,r)=>Wl(o,e.target)?N1(o,e,t,r):M1(o,e,t,r),Fg=(o,e,t,r)=>Wl(o,e.target)?B1(o,e,t,r):I1(o,e,t,r),mv=()=>({ml:new ln({x:-.5,y:0,cursorStyleHandler:Ui,actionHandler:Ig,getActionName:ja}),mr:new ln({x:.5,y:0,cursorStyleHandler:Ui,actionHandler:Ig,getActionName:ja}),mb:new ln({x:0,y:.5,cursorStyleHandler:Ui,actionHandler:Fg,getActionName:ja}),mt:new ln({x:0,y:-.5,cursorStyleHandler:Ui,actionHandler:Fg,getActionName:ja}),tl:new ln({x:-.5,y:-.5,cursorStyleHandler:qs,actionHandler:Oa}),tr:new ln({x:.5,y:-.5,cursorStyleHandler:qs,actionHandler:Oa}),bl:new ln({x:-.5,y:.5,cursorStyleHandler:qs,actionHandler:Oa}),br:new ln({x:.5,y:.5,cursorStyleHandler:qs,actionHandler:Oa}),mtr:new ln({x:0,y:-.5,actionHandler:j1,cursorStyleHandler:O1,offsetY:-40,withConnection:!0,actionName:zh})}),z1=()=>({mr:new ln({x:.5,y:0,actionHandler:Mg,cursorStyleHandler:Ui,actionName:ro}),ml:new ln({x:-.5,y:0,actionHandler:Mg,cursorStyleHandler:Ui,actionName:ro})}),W1=()=>j(j({},mv()),z1());class oo extends zn{static getDefaults(){return j(j({},super.getDefaults()),oo.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),oo.ownDefaults),this.setOptions(e)}static createControls(){return{controls:mv()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(Rl))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[a,c]=r[s],u=this.controls[a];if(u.shouldActivate(a,this,e,t?c.touchCorner:c.corner))return this.__corner=a,{key:a,control:u,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=go(t.x,t.y),s=mo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=ht(r,s),c=ht(e,a),u=ht(c,[1/e[0],0,0,1/e[3],0,0]),d=this.group?yl(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const f=this._calculateCurrentDimensions(d),g={};return this.forEachControl((v,y)=>{const C=v.positionHandler(f,u,this,v);g[y]=Object.assign(C,this._calcCornerCoords(v,C))}),g}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Ze(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=j({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,a=j({hasBorders:r,hasControls:s},t),c=this.getViewportTransform(),u=a.hasBorders,d=a.hasControls,f=ht(c,this.calcTransformMatrix()),g=yl(f);e.save(),e.translate(g.translateX,g.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),e.rotate(Ze(this.group?g.angle:this.angle)),u&&this.drawBorders(e,g,t),d&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const a=Qh(this.width,this.height,Ll(t)),c=this.isStrokeAccountedForInDimensions()?Wh:(this.strokeUniform?new B().scalarAdd(this.canvas?this.canvas.getZoom():1):new B(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=a.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,a)=>{s.withConnection&&s.getVisibility(this,a)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:a,cornerColor:c}=this,u=j({cornerStrokeColor:s,cornerDashArray:a,cornerColor:c},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((d,f)=>{if(d.getVisibility(this,f)){const g=this.oCoords[f];d.render(e,g.x,g.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,a=this.height+4;return t.clearRect(-s/2,-a/2,s,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function vv(o,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(o.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),o}T(oo,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class mt extends oo{}vv(mt,[lv]),te.setClass(mt),te.setClass(mt,"object");const V1=(o,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:a}=o.getImageData(e-r,t-r,s,s);for(let c=3;c<a.length;c+=4)if(a[c]>0)return!1;return!0};class yv{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new B(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new B(1/this.options.scaleX,1/this.options.scaleY):new B(1,1)}createSideVector(e,t){const r=dh(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new B(e);return t.y+=t.x*Math.tan(Ze(this.options.skewY)),t.x+=t.y*Math.tan(Ze(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const U1=new B;class Xi extends yv{static getOrthogonalRotationFactor(e,t){const r=t?fh(e,t):h1(e);return Math.abs(r)<fo?-1:1}constructor(e,t,r,s){super(s),T(this,"AB",void 0),T(this,"AC",void 0),T(this,"alpha",void 0),T(this,"bisector",void 0),this.A=new B(e),this.B=new B(t),this.C=new B(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=fh(this.AB,this.AC),this.bisector=Hh(uv(this.AB.eq(U1)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),a=hv(s),c=Xi.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,r*c)}projectBevel(){const e=[];return(this.alpha%fl==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),a=this.options.strokeUniform?ph(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ph(s)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new B(Xi.getOrthogonalRotationFactor(this.bisector),Xi.getOrthogonalRotationFactor(new B(this.bisector.y,this.bisector.x)));return[new B(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new B(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(a=>{Og(a,e,t)&&r.push(this.A.add(a))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:a,scaleX:c,scaleY:u,strokeUniform:d}=this.options,f=new B(Math.tan(Ze(s)),Math.tan(Ze(a))),g=this.strokeProjectionMagnitude,v=d?g/u/Math.sqrt(1/u**2+1/c**2*f.y**2):g/Math.sqrt(1+f.y**2),y=new B(Math.sqrt(Math.max(g**2-v**2,0)),v),C=d?g/Math.sqrt(1+f.x**2*(1/u)**2/(1/c+1/c*f.x*f.y)**2):g/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),x=new B(C,Math.sqrt(Math.max(g**2-C**2,0)));return[x,x.scalarMultiply(-1),y,y.scalarMultiply(-1)].map(S=>this.applySkew(d?S.multiply(this.strokeUniformScalar):S)).forEach(S=>{Og(S,e,t)&&r.push(this.applySkew(this.A).add(S))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%fl==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),a=e[t?1:0].subtract(r),c=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=Js(s,c)>0,d=u?s:a,f=u?a:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(d,f)):e.push(...this.projectRoundNoSkew(d,f)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Rg extends yv{constructor(e,t,r){super(r),this.A=new B(e),this.T=new B(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(hv(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new B(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Xi(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new B(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(Hh(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const Y1=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(o.length===0)return r;const s=o.reduce((a,c)=>(a[a.length-1].eq(c)||a.push(new B(c)),a),[new B(o[0])]);if(s.length===1)t=!0;else if(!t){const a=s[0],c=((u,d)=>{for(let f=u.length-1;f>=0;f--)if(d(u[f],f,u))return f;return-1})(s,u=>!u.eq(a));s.splice(c+1)}return s.forEach((a,c,u)=>{let d,f;c===0?(f=u[1],d=t?a:u[u.length-1]):c===u.length-1?(d=u[c-1],f=t?a:u[0]):(d=u[c-1],f=u[c+1]),t&&u.length===1?r.push(...new Rg(a,a,e).project()):!t||c!==0&&c!==u.length-1?r.push(...new Xi(a,d,f,e).project()):r.push(...new Rg(a,c===0?f:d,e).project())}),r},Kh=o=>{const e={};return Object.keys(o).forEach(t=>{e[t]={},Object.keys(o[t]).forEach(r=>{e[t][r]=j({},o[t][r])})}),e},Q1=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),qh=o=>{const e=[];for(let t,r=0;r<o.length;r++)(t=G1(o,r))!==!1&&e.push(t);return e},G1=(o,e)=>{const t=o.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return o.charAt(e);if(55296<=t&&t<=56319){if(o.length<=e+1)throw"High surrogate without following low surrogate";const s=o.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return o.charAt(e)+o.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=o.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},Zh=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.fill!==e.fill||o.stroke!==e.stroke||o.strokeWidth!==e.strokeWidth||o.fontSize!==e.fontSize||o.fontFamily!==e.fontFamily||o.fontWeight!==e.fontWeight||o.fontStyle!==e.fontStyle||o.textBackgroundColor!==e.textBackgroundColor||o.deltaY!==e.deltaY||t&&(o.overline!==e.overline||o.underline!==e.underline||o.linethrough!==e.linethrough)},H1=(o,e)=>{const t=e.split(`
`),r=[];let s=-1,a={};o=Kh(o);for(let c=0;c<t.length;c++){const u=qh(t[c]);if(o[c])for(let d=0;d<u.length;d++){s++;const f=o[c][d];f&&Object.keys(f).length>0&&(Zh(a,f,!0)?r.push({start:s,end:s+1,style:f}):r[r.length-1].end++),a=f||{}}else s+=u.length,a={}}return r},X1=(o,e)=>{if(!Array.isArray(o))return Kh(o);const t=e.split(Nh),r={};let s=-1,a=0;for(let c=0;c<t.length;c++){const u=qh(t[c]);for(let d=0;d<u.length;d++)s++,o[a]&&o[a].start<=s&&s<o[a].end&&(r[c]=r[c]||{},r[c][d]=j({},o[a].style),s===o[a].end-1&&a++)}return r},Or=["display","transform",rt,"fill-opacity","fill-rule","opacity",Mt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Lg(o,e){const t=o.nodeName,r=o.getAttribute("class"),s=o.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+t,"i"),e=e.replace(c,""),s&&e.length&&(c=new RegExp("#"+s+a,"i"),e=e.replace(c,"")),r&&e.length){const u=r.split(" ");for(let d=u.length;d--;)c=new RegExp("\\."+u[d]+a,"i"),e=e.replace(c,"")}return e.length===0}function $1(o,e){let t=!0;const r=Lg(o,e.pop());return r&&e.length&&(t=function(s,a){let c,u=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&a.length;)u&&(c=a.pop()),u=Lg(s=s.parentElement,c);return a.length===0}(o,e)),r&&t&&e.length===0}const K1=o=>{var e;return(e=c1[o])!==null&&e!==void 0?e:o},q1=new RegExp("(".concat(ii,")"),"gi"),Z1=o=>o.replace(q1," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Bg,Ng,zg,Wg,Vg,Ug,Yg;const wt="(".concat(ii,")"),J1=String.raw(Bg||(Bg=Dr(["(skewX)(",")"],["(skewX)\\(","\\)"])),wt),e_=String.raw(Ng||(Ng=Dr(["(skewY)(",")"],["(skewY)\\(","\\)"])),wt),t_=String.raw(zg||(zg=Dr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),wt,wt,wt),n_=String.raw(Wg||(Wg=Dr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),wt,wt),r_=String.raw(Vg||(Vg=Dr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),wt,wt),i_=String.raw(Ug||(Ug=Dr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),wt,wt,wt,wt,wt,wt),Jh="(?:".concat(i_,"|").concat(r_,"|").concat(t_,"|").concat(n_,"|").concat(J1,"|").concat(e_,")"),s_="(?:".concat(Jh,"*)"),o_=String.raw(Yg||(Yg=Dr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),s_),a_=new RegExp(o_),l_=new RegExp(Jh),c_=new RegExp(Jh,"g");function gh(o){const e=[];if(!(o=Z1(o).replace(/\s*([()])\s*/gi,"$1"))||o&&!a_.test(o))return[...St];for(const t of o.matchAll(c_)){const r=l_.exec(t[0]);if(!r)continue;let s=St;const a=r.filter(x=>!!x),[,c,...u]=a,[d,f,g,v,y,C]=u.map(x=>parseFloat(x));switch(c){case"translate":s=go(d,f);break;case zh:s=mo({angle:d},{x:f,y:g});break;case Rl:s=Uh(d,f);break;case es:s=qm(d);break;case ts:s=Zm(d);break;case"matrix":s=[d,f,g,v,y,C]}e.push(s)}return Vh(e)}function u_(o,e,t,r){const s=Array.isArray(e);let a,c=e;if(o!==rt&&o!==Mt||e!==Pt){if(o==="strokeUniform")return e==="non-scaling-stroke";if(o==="strokeDashArray")c=e===Pt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(o==="transformMatrix")c=t&&t.transformMatrix?ht(t.transformMatrix,gh(e)):gh(e);else if(o==="visible")c=e!==Pt&&e!=="hidden",t&&t.visible===!1&&(c=!1);else if(o==="opacity")c=parseFloat(e),t&&t.opacity!==void 0&&(c*=t.opacity);else if(o==="textAnchor")c=e==="start"?je:e==="end"?qe:Ce;else if(o==="charSpacing")a=Gi(e,r)/r*1e3;else if(o==="paintFirst"){const u=e.indexOf(rt),d=e.indexOf(Mt);c=rt,(u>-1&&d>-1&&d<u||u===-1&&d>-1)&&(c=Mt)}else{if(o==="href"||o==="xlink:href"||o==="font"||o==="id")return e;if(o==="imageSmoothing")return e==="optimizeQuality";a=s?e.map(Gi):Gi(e,r)}}else c="";return!s&&isNaN(a)?c:a}function h_(o,e){const t=o.match(l1);if(!t)return;const r=t[1],s=t[3],a=t[4],c=t[5],u=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(e.fontSize=Gi(a)),u&&(e.fontFamily=u),c&&(e.lineHeight=c==="normal"?1:c)}function d_(o,e){o.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function p_(o){const e={},t=o.getAttribute("style");return t&&(typeof t=="string"?d_(t,e):function(r,s){Object.entries(r).forEach(a=>{let[c,u]=a;u!==void 0&&(s[c.toLowerCase()]=u)})}(t,e)),e}const f_={stroke:"strokeOpacity",fill:"fillOpacity"};function er(o,e,t){if(!o)return{};let r,s={},a=Bh;o.parentNode&&Dg.test(o.parentNode.nodeName)&&(s=er(o.parentElement,e,t),s.fontSize&&(r=a=Gi(s.fontSize)));const c=j(j(j({},e.reduce((f,g)=>{const v=o.getAttribute(g);return v&&(f[g]=v),f},{})),function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(const y in g)$1(f,y.split(" "))&&(v=j(j({},v),g[y]));return v}(o,t)),p_(o));c[Qu]&&o.setAttribute(Qu,c[Qu]),c[Yu]&&(r=Gi(c[Yu],a),c[Yu]="".concat(r));const u={};for(const f in c){const g=K1(f),v=u_(g,c[f],s,r);u[g]=v}u&&u.font&&h_(u.font,u);const d=j(j({},s),u);return Dg.test(o.nodeName)?d:function(f){const g=mt.getDefaults();return Object.entries(f_).forEach(v=>{let[y,C]=v;if(f[C]===void 0||f[y]==="")return;if(f[y]===void 0){if(!g[y])return;f[y]=g[y]}if(f[y].indexOf("url(")===0)return;const x=new Me(f[y]);f[y]=x.setAlpha(Qe(x.getAlpha()*f[C],2)).toRgba()}),f}(d)}const g_=["left","top","width","height","visible"],xv=["rx","ry"];class _n extends mt{static getDefaults(){return j(j({},super.getDefaults()),_n.ownDefaults)}constructor(e){super(),Object.assign(this,_n.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,a=-r/2,c=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,r/2):0,d=c!==0||u!==0;e.beginPath(),e.moveTo(s+c,a),e.lineTo(s+t-c,a),d&&e.bezierCurveTo(s+t-_r*c,a,s+t,a+_r*u,s+t,a+u),e.lineTo(s+t,a+r-u),d&&e.bezierCurveTo(s+t,a+r-_r*u,s+t-_r*c,a+r,s+t-c,a+r),e.lineTo(s+c,a+r),d&&e.bezierCurveTo(s+_r*c,a+r,s,a+r-_r*u,s,a+r-u),e.lineTo(s,a+u),d&&e.bezierCurveTo(s,a+_r*u,s+_r*c,a,s+c,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...xv,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=er(e,this.ATTRIBUTE_NAMES,r),{left:a=0,top:c=0,width:u=0,height:d=0,visible:f=!0}=s,g=Ne(s,g_);return new this(j(j(j({},t),g),{},{left:a,top:c,width:u,height:d,visible:!!(f&&u&&d)}))}}T(_n,"type","Rect"),T(_n,"cacheProperties",[...Jn,...xv]),T(_n,"ownDefaults",{rx:0,ry:0}),T(_n,"ATTRIBUTE_NAMES",[...Or,"x","y","rx","ry","width","height"]),te.setClass(_n),te.setSVGClass(_n);const Un="initialization",Sl="added",ed="removed",_l="imperative",wv=(o,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:a,group:c}=e,u=c&&c!==o?Nl(c.calcTransformMatrix(),o.calcTransformMatrix()):null,d=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),f=!e.isStrokeAccountedForInDimensions(),g=t&&f?i1(new B(r,r),void 0,o.calcTransformMatrix()):Wh,v=!t&&f?r:0,y=Qh(s+v,a+v,Vh([u,e.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[d.subtract(y),d.add(y)]};class Vl{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===Un||t===_l||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==Un&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===_l&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:c,width:u,height:d}=Gn(e.map(v=>wv(s,v)).reduce((v,y)=>v.concat(y),[])),f=new B(u,d),g=new B(a,c).add(f.scalarDivide(2));if(r===Un){const v=this.getInitialSize(t,{size:f,center:g});return{center:g,relativeCorrection:new B(0,0),size:v}}return{center:g.transform(s.calcOwnMatrix()),size:f}}}T(Vl,"type","strategy");class mh extends Vl{shouldPerformLayout(e){return!0}}T(mh,"type","fit-content"),te.setClass(mh);const m_=["strategy"],v_=["target","strategy","bubbles","prevStrategy"],Cv="layoutManager";class ao{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new mh;T(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=j(j({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[ml,Vm,ro,Um,Fl,Ym,gl,US,YS].map(s=>e.on(s,a=>this.performLayout(s===ml?{type:"object_modified",trigger:s,e:a,target:r}:{type:"object_modifying",trigger:s,e:a,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===Un||r===Sl?this.subscribeTargets(e):r===ed&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===_l&&e.deep){const a=Ne(e,m_);t.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout(j(j({},a),{},{bubbles:!1,target:c})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,a=r.calcLayoutResult(e,t.getObjects());if(!a)return;const c=s===Un?new B:t.getRelativeCenterPoint(),{center:u,correction:d=new B,relativeCorrection:f=new B}=a,g=c.subtract(u).add(d).transform(s===Un?St:hn(t.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:c,nextCenter:u,offset:g}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:a}=t;var c,u;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===Un?r.set({left:(c=e.x)!==null&&c!==void 0?c:a.x+s.x*et(r.originX),top:(u=e.y)!==null&&u!==void 0?u:a.y+s.y*et(r.originY)}):(r.setPositionByOrigin(a,Ce,Ce),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:a,prevStrategy:c}=e,u=Ne(e,v_),{canvas:d}=r;r.fire("layout:after",{context:e,result:t}),d&&d.fire("object:layout:after",{context:e,result:t,target:r});const f=r.parent;a&&f!=null&&f.layoutManager&&((u.path||(u.path=[])).push(r),f.layoutManager.performLayout(j(j({},u),{},{target:f}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:Cv,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}te.setClass(ao,Cv);const y_=["type","objects","layoutManager"];class x_ extends ao{performLayout(){}}class ni extends Qm(mt){static getDefaults(){return j(j({},super.getDefaults()),ni.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"_activeObjects",[]),T(this,"__objectSelectionTracker",void 0),T(this,"__objectSelectionDisposer",void 0),Object.assign(this,ni.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new ao,this.layoutManager.performLayout({type:Un,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(br("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(br("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...s);return this._onAfterObjectsChange(Sl,s),a}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const a=this._filterObjectsBeforeEnteringGroup(r),c=super.insertAt(e,...a);return this._onAfterObjectsChange(Sl,a),c}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(ed,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const a=s.indexOf(r);a>-1&&(s.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&wl(e,ht(hn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(wl(e,ht(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=mt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var s;const c=this._objects[a];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&c.group!==this?(e.save(),e.transform(...hn(this.calcTransformMatrix())),c.render(e),e.restore()):c.group===this&&c.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(j({target:this,type:_l},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const a=s.includeDefaultValues;s.includeDefaultValues=r;const c=s[e||"toObject"](t);return s.includeDefaultValues=a,c})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return j(j(j({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=_n.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:a}=e,c=Ne(e,y_);return Promise.all([io(s,t),Bl(c,t)]).then(u=>{let[d,f]=u;const g=new this(d,j(j(j({},c),f),{},{layoutManager:new x_}));if(a){const v=te.getClass(a.type),y=te.getClass(a.strategy);g.layoutManager=new v(new y)}else g.layoutManager=new ao;return g.layoutManager.subscribeTargets({type:Un,target:g,targets:g.getObjects()}),g.setCoords(),g})}}T(ni,"type","Group"),T(ni,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),te.setClass(ni);const w_=(o,e)=>Math.min(e.width/o.width,e.height/o.height),C_=(o,e)=>Math.max(e.width/o.width,e.height/o.height),vh="\\s*,?\\s*",Ks="".concat(vh,"(").concat(ii,")"),S_="".concat(Ks).concat(Ks).concat(Ks).concat(vh,"([01])").concat(vh,"([01])").concat(Ks).concat(Ks),__={m:"l",M:"L"},k_=(o,e,t,r,s,a,c,u,d,f,g)=>{const v=$n(o),y=Kn(o),C=$n(e),x=Kn(e),S=t*s*C-r*a*x+c,k=r*s*C+t*a*x+u;return["C",f+d*(-t*s*y-r*a*v),g+d*(-r*s*y+t*a*v),S+d*(t*s*x+r*a*C),k+d*(r*s*x-t*a*C),S,k]},Qg=(o,e,t,r)=>{const s=Math.atan2(e,o),a=Math.atan2(r,t);return a>=s?a-s:2*Math.PI-(s-a)};function Gg(o,e,t,r,s,a,c,u){let d;if(Te.cachesBoundsOfCurve&&(d=[...arguments].join(),Zs.boundsOfCurveCache[d]))return Zs.boundsOfCurveCache[d];const f=Math.sqrt,g=Math.abs,v=[],y=[[0,0],[0,0]];let C=6*o-12*t+6*s,x=-3*o+9*t-9*s+3*c,S=3*t-3*o;for(let N=0;N<2;++N){if(N>0&&(C=6*e-12*r+6*a,x=-3*e+9*r-9*a+3*u,S=3*r-3*e),g(x)<1e-12){if(g(C)<1e-12)continue;const se=-S/C;0<se&&se<1&&v.push(se);continue}const U=C*C-4*S*x;if(U<0)continue;const H=f(U),W=(-C+H)/(2*x);0<W&&W<1&&v.push(W);const X=(-C-H)/(2*x);0<X&&X<1&&v.push(X)}let k=v.length;const _=k,M=Sv(o,e,t,r,s,a,c,u);for(;k--;){const{x:N,y:U}=M(v[k]);y[0][k]=N,y[1][k]=U}y[0][_]=o,y[1][_]=e,y[0][_+1]=c,y[1][_+1]=u;const F=[new B(Math.min(...y[0]),Math.min(...y[1])),new B(Math.max(...y[0]),Math.max(...y[1]))];return Te.cachesBoundsOfCurve&&(Zs.boundsOfCurveCache[d]=F),F}const E_=(o,e,t)=>{let[r,s,a,c,u,d,f,g]=t;const v=((y,C,x,S,k,_,M)=>{if(x===0||S===0)return[];let F=0,N=0,U=0;const H=Math.PI,W=M*Lh,X=Kn(W),se=$n(W),le=.5*(-se*y-X*C),we=.5*(-se*C+X*y),Se=x**2,pe=S**2,ee=we**2,ce=le**2,ke=Se*pe-Se*ee-pe*ce;let me=Math.abs(x),z=Math.abs(S);if(ke<0){const Ie=Math.sqrt(1-ke/(Se*pe));me*=Ie,z*=Ie}else U=(k===_?-1:1)*Math.sqrt(ke/(Se*ee+pe*ce));const K=U*me*we/z,q=-U*z*le/me,P=se*K-X*q+.5*y,V=X*K+se*q+.5*C;let ue=Qg(1,0,(le-K)/me,(we-q)/z),ae=Qg((le-K)/me,(we-q)/z,(-le-K)/me,(-we-q)/z);_===0&&ae>0?ae-=2*H:_===1&&ae<0&&(ae+=2*H);const ye=Math.ceil(Math.abs(ae/H*2)),ge=[],Ee=ae/ye,be=8/3*Math.sin(Ee/4)*Math.sin(Ee/4)/Math.sin(Ee/2);let Oe=ue+Ee;for(let Ie=0;Ie<ye;Ie++)ge[Ie]=k_(ue,Oe,se,X,me,z,P,V,be,F,N),F=ge[Ie][5],N=ge[Ie][6],ue=Oe,Oe+=Ee;return ge})(f-o,g-e,s,a,u,d,c);for(let y=0,C=v.length;y<C;y++)v[y][1]+=o,v[y][2]+=e,v[y][3]+=o,v[y][4]+=e,v[y][5]+=o,v[y][6]+=e;return v},b_=o=>{let e=0,t=0,r=0,s=0;const a=[];let c,u=0,d=0;for(const f of o){const g=[...f];let v;switch(g[0]){case"l":g[1]+=e,g[2]+=t;case"L":e=g[1],t=g[2],v=["L",e,t];break;case"h":g[1]+=e;case"H":e=g[1],v=["L",e,t];break;case"v":g[1]+=t;case"V":t=g[1],v=["L",e,t];break;case"m":g[1]+=e,g[2]+=t;case"M":e=g[1],t=g[2],r=g[1],s=g[2],v=["M",e,t];break;case"c":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t,g[5]+=e,g[6]+=t;case"C":u=g[3],d=g[4],e=g[5],t=g[6],v=["C",g[1],g[2],u,d,e,t];break;case"s":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"S":c==="C"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=g[3],t=g[4],v=["C",u,d,g[1],g[2],e,t],u=v[3],d=v[4];break;case"q":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"Q":u=g[1],d=g[2],e=g[3],t=g[4],v=["Q",u,d,e,t];break;case"t":g[1]+=e,g[2]+=t;case"T":c==="Q"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=g[1],t=g[2],v=["Q",u,d,e,t];break;case"a":g[6]+=e,g[7]+=t;case"A":E_(e,t,g).forEach(y=>a.push(y)),e=g[6],t=g[7];break;case"z":case"Z":e=r,t=s,v=["Z"]}v?(a.push(v),c=v[0]):c=""}return a},kl=(o,e,t,r)=>Math.sqrt((t-o)**2+(r-e)**2),Sv=(o,e,t,r,s,a,c,u)=>d=>{const f=d**3,g=(C=>3*C**2*(1-C))(d),v=(C=>3*C*(1-C)**2)(d),y=(C=>(1-C)**3)(d);return new B(c*f+s*g+t*v+o*y,u*f+a*g+r*v+e*y)},_v=o=>o**2,kv=o=>2*o*(1-o),Ev=o=>(1-o)**2,A_=(o,e,t,r,s,a,c,u)=>d=>{const f=_v(d),g=kv(d),v=Ev(d),y=3*(v*(t-o)+g*(s-t)+f*(c-s)),C=3*(v*(r-e)+g*(a-r)+f*(u-a));return Math.atan2(C,y)},T_=(o,e,t,r,s,a)=>c=>{const u=_v(c),d=kv(c),f=Ev(c);return new B(s*u+t*d+o*f,a*u+r*d+e*f)},D_=(o,e,t,r,s,a)=>c=>{const u=1-c,d=2*(u*(t-o)+c*(s-t)),f=2*(u*(r-e)+c*(a-r));return Math.atan2(f,d)},Hg=(o,e,t)=>{let r=new B(e,t),s=0;for(let a=1;a<=100;a+=1){const c=o(a/100);s+=kl(r.x,r.y,c.x,c.y),r=c}return s},O_=(o,e)=>{let t,r=0,s=0,a={x:o.x,y:o.y},c=j({},a),u=.01,d=0;const f=o.iterator,g=o.angleFinder;for(;s<e&&u>1e-4;)c=f(r),d=r,t=kl(a.x,a.y,c.x,c.y),t+s>e?(r-=u,u/=2):(a=c,r+=u,s+=t);return j(j({},c),{},{angle:g(d)})},bv=o=>{let e,t,r=0,s=0,a=0,c=0,u=0;const d=[];for(const f of o){const g={x:s,y:a,command:f[0],length:0};switch(f[0]){case"M":t=g,t.x=c=s=f[1],t.y=u=a=f[2];break;case"L":t=g,t.length=kl(s,a,f[1],f[2]),s=f[1],a=f[2];break;case"C":e=Sv(s,a,f[1],f[2],f[3],f[4],f[5],f[6]),t=g,t.iterator=e,t.angleFinder=A_(s,a,f[1],f[2],f[3],f[4],f[5],f[6]),t.length=Hg(e,s,a),s=f[5],a=f[6];break;case"Q":e=T_(s,a,f[1],f[2],f[3],f[4]),t=g,t.iterator=e,t.angleFinder=D_(s,a,f[1],f[2],f[3],f[4]),t.length=Hg(e,s,a),s=f[3],a=f[4];break;case"Z":t=g,t.destX=c,t.destY=u,t.length=kl(s,a,c,u),s=c,a=u}r+=t.length,d.push(t)}return d.push({length:r,x:s,y:a}),d},j_=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bv(o),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],a=e/s.length,c=o[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return j(j({},new B(s.x,s.y).lerp(new B(s.destX,s.destY),a)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return j(j({},new B(s.x,s.y).lerp(new B(c[1],c[2]),a)),{},{angle:Math.atan2(c[2]-s.y,c[1]-s.x)});case"C":case"Q":return O_(s,e)}},P_=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Xg=new RegExp(S_,"g"),M_=new RegExp(ii,"gi"),I_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},F_=o=>{var e;const t=[],r=(e=o.match(P_))!==null&&e!==void 0?e:[];for(const s of r){const a=s[0];if(a==="z"||a==="Z"){t.push([a]);continue}const c=I_[a.toLowerCase()];let u=[];if(a==="a"||a==="A"){Xg.lastIndex=0;for(let d=null;d=Xg.exec(s);)u.push(...d.slice(1))}else u=s.match(M_)||[];for(let d=0;d<u.length;d+=c){const f=new Array(c),g=__[a];f[0]=d>0&&g?g:a;for(let v=0;v<c;v++)f[v+1]=parseFloat(u[d+v]);t.push(f)}}return t},R_=(o,e)=>o.map(t=>t.map((r,s)=>s===0||e===void 0?r:Qe(r,e)).join(" ")).join(" ");function yh(o,e){const t=o.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,a]=r;return t.setProperty(s,a)}))}class L_ extends nv{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),T(this,"upper",void 0),T(this,"container",void 0);const{el:s}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(r),s.parentNode&&s.parentNode.replaceChild(c,s),c.append(s,a),this.container=c}createUpperCanvas(){const{el:e}=this.lower,t=fn();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Ji().createElement("div");return e.setAttribute("data-fabric","wrapper"),yh(e,{position:"relative"}),bg(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;yh(e,j(j({},r),{},{"touch-action":s?"manipulation":Pt})),bg(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;tv(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),ch(this.upper.el,e),ch(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),bn().dispose(this.upper.el),delete this.upper,delete this.container}}class Ul extends vo{constructor(){super(...arguments),T(this,"targets",[]),T(this,"_hoveredTargets",[]),T(this,"_objectsToRender",void 0),T(this,"_currentTransform",null),T(this,"_groupSelector",null),T(this,"contextTopDirty",!1)}static getDefaults(){return j(j({},super.getDefaults()),Ul.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new L_(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+s,-r+s),a.transform(...this.viewportTransform);const c=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=c,a.restore();const u=Math.round(s*this.getRetinaScaling());return V1(a,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===Rl||t===It||t===Zt||t===ro?s=this.centeredScaling||e.centeredScaling:t===zh&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=qe:["mr","tr","br"].includes(t)&&(r.x=je),["tl","mt","tr"].includes(t)?r.y=lh:["bl","mb","br"].includes(t)&&(r.y=jt)),r}_setupCurrentTransform(e,t,r){var s;const a=t.group?Hi(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:c="",control:u}=t.getActiveControl()||{},d=r&&u?(s=u.getActionHandler(e,t,u))===null||s===void 0?void 0:s.bind(u):a1,f=((C,x,S,k)=>{if(!x||!C)return"drag";const _=k.controls[x];return _.getActionName(S,_,k)})(r,c,e,t),g=e[this.centeredKey],v=this._shouldCenterTransform(t,f,g)?{x:Ce,y:Ce}:this._getOriginFromCorner(t,c),y={target:t,action:f,actionHandler:d,actionPerformed:!1,corner:c,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:v.x,originY:v.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Ze(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:g,original:j(j({},rv(t)),{},{originX:v.x,originY:v.y})};this._currentTransform=y,this.fire("before:transform",{e,transform:y})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:a}=this._groupSelector,c=new B(t,r).transform(this.viewportTransform),u=new B(t+s,r+a).transform(this.viewportTransform),d=this.selectionLineWidth/2;let f=Math.min(c.x,u.x),g=Math.min(c.y,u.y),v=Math.max(c.x,u.x),y=Math.max(c.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(f,g,v-f,y-g)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,f+=d,g+=d,v-=d,y-=d,mt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(f,g,v-f,y-g))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,uh(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&c&&c!==r?(this.targets=a,r):c}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),a=e.padding/s;if(a){const[c,u,d,f]=r,g=Math.atan2(u.y-c.y,u.x-c.x),v=$n(g)*a,y=Kn(g)*a,C=v+y,x=v-y;r=[new B(c.x-x,c.y-C),new B(u.x+C,u.y-x),new B(d.x+x,d.y+C),new B(f.x-C,f.y+x)]}return Ue.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Hi(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(ol(s)&&s.subTargetCheck){const a=this._searchPossibleTargets(s._objects,t);a&&this.targets.push(a)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&ol(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let a=s.length-1;a>0;a--){const c=s[a];if(!ol(c)||!c.interactive)return c}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let a=e1(e),c=s.width||0,u=s.height||0;c&&u||(jt in s&&lh in s&&(u=Math.abs(s.top-s.bottom)),qe in s&&je in s&&(c=Math.abs(s.right-s.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=Hi(a,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(a.x/=d,a.y/=d);const f=c===0||u===0?new B(1,1):new B(r.width/c,r.height/u);return a.multiply(f)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=fn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return $r(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const a=this.getActiveObjects(),c=[],u=[];e.forEach(d=>{a.includes(d)||(r=!0,d.fire("deselected",{e:t,target:d}),u.push(d))}),a.forEach(d=>{e.includes(d)||(r=!0,d.fire("selected",{e:t,target:d}),c.push(d))}),e.length>0&&a.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:c,deselected:u})):a.length>0?(s=!0,this.fire("selection:created",{e:t,selected:c})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:u})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,$r(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),$r(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(ml,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;$r(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,r);return e.set(s),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&$r(t)&&this._activeObject===t){const r=ns(e,["angle","flipX","flipY",je,It,Zt,es,ts,jt]);return n1(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}T(Ul,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class B_{constructor(e){T(this,"targets",[]),T(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Vi(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const N_=["target","oldTarget","fireCanvas","e"],zt={passive:!1},Wi=(o,e)=>{const t=o.getViewportPoint(e),r=o.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},kr=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return o.addEventListener(...t)},$t=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return o.removeEventListener(...t)},z_={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class xh extends Ul{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),T(this,"_isClick",void 0),T(this,"textEditingManager",new B_(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(kr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(ev(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,zt),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,zt)}removeListeners(){this.addOrRemove($t,"remove");const e=this._getEventPrefix(),t=un(this.upperCanvasEl);$t(t,"".concat(e,"up"),this._onMouseUp),$t(t,"touchend",this._onTouchEnd,zt),$t(t,"".concat(e,"move"),this._onMouseMove,zt),$t(t,"touchmove",this._onMouseMove,zt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=j({e},Wi(this,e));this.fire("mouse:out",j(j({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",j({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",j(j({},r),{},{target:s})),s&&s.fire("mouseout",j({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",j({e},Wi(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void kr(this.upperCanvasEl,"drag",this._onDragProgress)}hh(e)}_renderDragEffects(e,t,r){let s=!1;const a=this._dropTarget;a&&a!==t&&a!==r&&(a.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),t&&(c.save(),t.transform(c),t.renderDragSourceEffect(e),c.restore(),s=!0),r&&(c.save(),r.transform(c),r.renderDropTargetEffect(e),c.restore(),s=!0),c.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Pt,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};$t(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),a=this._dragSource,c={e,target:r,subTargets:s,dragSource:a,canDrop:!1,dropTarget:void 0};let u;this.fire(t,c),this._fireEnterLeaveEvents(r,c),r&&(r.canDrop(e)&&(u=r),r.fire(t,c));for(let d=0;d<s.length;d++){const f=s[d];f.canDrop(e)&&(u=f),f.fire(t,c)}this._renderDragEffects(e,a,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",j({e,target:t,subTargets:r,dragSource:this._dragSource},Wi(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&hh(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,a=this._getEventPrefix(),c=un(s);kr(c,"touchend",this._onTouchEnd,zt),t&&kr(c,"touchmove",this._onMouseMove,zt),$t(s,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();$t(t,"".concat(r,"move"),this._onMouseMove,zt);const s=un(t);kr(s,"".concat(r,"up"),this._onMouseUp),kr(s,"".concat(r,"move"),this._onMouseMove,zt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=un(this.upperCanvasEl);$t(r,"touchend",this._onTouchEnd,zt),$t(r,"touchmove",this._onMouseMove,zt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{kr(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=un(this.upperCanvasEl);$t(s,"".concat(r,"up"),this._onMouseUp),$t(s,"".concat(r,"move"),this._onMouseMove,zt),kr(t,"".concat(r,"move"),this._onMouseMove,zt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,a=this._target,{button:c}=e;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,d,f=!1;if(r&&(this._finalizeCurrentTransform(e),f=r.actionPerformed),!s){const g=a===this._activeObject;this.handleSelection(e),f||(f=this._shouldRender(a)||!g&&a===this._activeObject)}if(a){const g=a.findControl(this.getViewportPoint(e),uh(e)),{key:v,control:y}=g||{};if(d=v,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),f=!0;else if(y){const C=y.getMouseUpHandler(e,a,y);C&&(u=this.getScenePoint(e),C.call(y,e,r,u.x,u.y))}a.isMoving=!1}if(r&&(r.target!==a||r.corner!==d)){const g=r.target&&r.target.controls[r.corner],v=g&&g.getMouseUpHandler(e,r.target,g);u=u||this.getScenePoint(e),v&&v.call(g,e,r,u.x,u.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let a=0;a<s.length;a++)s[a]!==r&&s[a].fire(e,t);return t}_handleEvent(e,t){const r=this._target,s=this.targets||[],a=j(j({e,target:r,subTargets:s},Wi(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),a),r&&r.fire("mouse".concat(t),a);for(let c=0;c<s.length;c++)s[c]!==r&&s[c].fire("mouse".concat(t),a)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),a=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,a=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const c=this.getScenePoint(e);this._groupSelector={x:c.x,y:c.y,deltaY:0,deltaX:0}}if(t){const c=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),uh(e));if(t===this._activeObject&&(u||!a)){this._setupCurrentTransform(e,t,c);const d=u?u.control:void 0,f=this.getScenePoint(e),g=d&&d.getMouseDownHandler(e,t,d);g&&g.call(d,e,this._currentTransform,f.x,f.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Hi(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,a=this.targets,c=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("mouse",{e,target:a[u],oldTarget:s[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,a=this.targets,c=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("drag",j(j({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("drag",j(j({},t),{},{target:a[u],oldTarget:s[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:a,e:c}=t,u=Ne(t,N_);const{targetIn:d,targetOut:f,canvasIn:g,canvasOut:v}=z_[e],y=s!==r;if(s&&y){const C=j(j({},u),{},{e:c,target:s,nextTarget:r},Wi(this,c));a&&this.fire(v,C),s.fire(f,C)}if(r&&y){const C=j(j({},u),{},{e:c,target:r,previousTarget:s},Wi(this,c));a&&this.fire(g,C),r.fire(d,C)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,a=s.group?Hi(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,a),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:a,target:c}=t,u=!!a&&a(e,t,r.x,r.y);u&&c.setCoords(),s==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=$r(this._activeObject)?this._activeObject:null,a=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(a){const c=a.control;this.setCursor(c.cursorStyleHandler(e,c,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(c=>{r=c.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=$r(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const a=r.getObjects();if(t===r){const c=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,c)||this.searchPossibleTargets(this._objects,c))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{r.isEditing&&r.exitEditing();const a=new(te.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(r,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:a}=this._groupSelector,c=new B(t,r),u=c.add(new B(s,a)),d=c.min(u),f=c.max(u).subtract(d),g=this.collectObjects({left:d.x,top:d.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),v=c.eq(u)?g[0]?[g[0]]:[]:g.length>1?g.filter(y=>!y.onSelect({e})).reverse():g;if(v.length===1)this.setActiveObject(v[0],e);else if(v.length>1){const y=te.getClass("ActiveSelection");this.setActiveObject(new y(v,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Av={x1:0,y1:0,x2:0,y2:0},W_=j(j({},Av),{},{r1:0,r2:0}),Yi=(o,e)=>isNaN(o)&&typeof e=="number"?e:o,V_=/^(\d+\.\d+)%|(\d+)%$/;function Tv(o){return o&&V_.test(o)}function Dv(o,e){const t=typeof o=="number"?o:typeof o=="string"?parseFloat(o)/(Tv(o)?100:1):NaN;return $i(0,Yi(t,e),1)}const U_=/\s*;\s*/,Y_=/\s*:\s*/;function Q_(o,e){let t,r;const s=o.getAttribute("style");if(s){const c=s.split(U_);c[c.length-1]===""&&c.pop();for(let u=c.length;u--;){const[d,f]=c[u].split(Y_).map(g=>g.trim());d==="stop-color"?t=f:d==="stop-opacity"&&(r=f)}}const a=new Me(t||o.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Dv(o.getAttribute("offset"),0),color:a.toRgb(),opacity:Yi(parseFloat(r||o.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function G_(o,e){const t=[],r=o.getElementsByTagName("stop"),s=Dv(e,1);for(let a=r.length;a--;)t.push(Q_(r[a],s));return t}function Ov(o){return o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?"linear":"radial"}function jv(o){return o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function an(o,e){return o.getAttribute(e)}function H_(o,e){return function(t,r){let s,{width:a,height:c,gradientUnits:u}=r;return Object.keys(t).reduce((d,f)=>{const g=t[f];return g==="Infinity"?s=1:g==="-Infinity"?s=0:(s=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&Tv(g)&&(s*=.01,u==="pixels"&&(f!=="x1"&&f!=="x2"&&f!=="r2"||(s*=a),f!=="y1"&&f!=="y2"||(s*=c)))),d[f]=s,d},{})}(Ov(o)==="linear"?function(t){return{x1:an(t,"x1")||0,y1:an(t,"y1")||0,x2:an(t,"x2")||"100%",y2:an(t,"y2")||0}}(o):function(t){return{x1:an(t,"fx")||an(t,"cx")||"50%",y1:an(t,"fy")||an(t,"cy")||"50%",r1:0,x2:an(t,"cx")||"50%",y2:an(t,"cy")||"50%",r2:an(t,"r")||"50%"}}(o),j(j({},e),{},{gradientUnits:jv(o)}))}class Pa{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:a=[],offsetX:c=0,offsetY:u=0,gradientTransform:d,id:f}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:j(j({},t==="radial"?W_:Av),s),colorStops:a,offsetX:c,offsetY:u,gradientTransform:d,id:f?"".concat(f,"_").concat(Ar()):Ar()})}addColorStop(e){for(const t in e){const r=new Me(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return j(j({},ns(this,e)),{},{type:this.type,coords:j({},this.coords),colorStops:this.colorStops.map(t=>j({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():St.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map(v=>j({},v)).sort((v,y)=>v.offset-y.offset);let u=-this.offsetX,d=-this.offsetY;var f;a==="objectBoundingBox"?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),(f=e)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,d-=e.pathOffset.y),s[4]-=u,s[5]-=d;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(xl(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:v,y1:y,x2:C,y2:x}=this.coords;r.push("<linearGradient ",g,' x1="',v,'" y1="',y,'" x2="',C,'" y2="',x,`">
`)}else if(this.type==="radial"){const{x1:v,y1:y,x2:C,y2:x,r1:S,r2:k}=this.coords,_=S>k;r.push("<radialGradient ",g,' cx="',_?v:C,'" cy="',_?y:x,'" r="',_?S:k,'" fx="',_?C:v,'" fy="',_?x:y,`">
`),_&&(c.reverse(),c.forEach(F=>{F.offset=1-F.offset}));const M=Math.min(S,k);if(M>0){const F=M/Math.max(S,k);c.forEach(N=>{N.offset+=F*(1-N.offset)})}}return c.forEach(v=>{let{color:y,offset:C,opacity:x}=v;r.push("<stop ",'offset="',100*C+"%",'" style="stop-color:',y,x!==void 0?";stop-opacity: "+x:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:a,r1:c,r2:u}=this.coords,d=this.type==="linear"?e.createLinearGradient(t,r,s,a):e.createRadialGradient(t,r,c,s,a,u);return this.colorStops.forEach(f=>{let{color:g,opacity:v,offset:y}=f;d.addColorStop(y,v!==void 0?new Me(g).setAlpha(v).toRgba():g)}),d}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(j(j({},e),{},{colorStops:t?t.map(s=>j({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=jv(e),a=t._findCenterFromElement();return new this(j({id:e.getAttribute("id")||void 0,type:Ov(e),coords:H_(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:G_(e,r.opacity),gradientUnits:s,gradientTransform:gh(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}T(Pa,"type","Gradient"),te.setClass(Pa,"gradient"),te.setClass(Pa,"linear"),te.setClass(Pa,"radial");const X_=["type","source","patternTransform"];class Xu{get type(){return"pattern"}set type(e){br("warn","Setting type has no effect",e)}constructor(e){T(this,"repeat","repeat"),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"crossOrigin",""),this.id=Ar(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return j(j({},ns(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Qe(this.offsetX,Te.NUM_FRACTION_DIGITS),offsetY:Qe(this.offsetY,Te.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:a,id:c}=this,u=Yi(this.offsetX/t,0),d=Yi(this.offsetY/r,0),f=a==="repeat-y"||a==="no-repeat"?1+Math.abs(u||0):Yi(s.width/t,0),g=a==="repeat-x"||a==="no-repeat"?1+Math.abs(d||0):Yi(s.height/r,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(u,'" y="').concat(d,'" width="').concat(f,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:a}=e,c=Ne(e,X_);const u=await ll(s,j(j({},t),{},{crossOrigin:c.crossOrigin}));return new this(j(j({},c),{},{patternTransform:a&&a.slice(0),source:u}))}}T(Xu,"type","Pattern"),te.setClass(Xu),te.setClass(Xu,"pattern");const $_=["path","left","top"],K_=["d"];class Kr extends mt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:a}=t,c=Ne(t,$_);super(),Object.assign(this,Kr.ownDefaults),this.setOptions(c),this._setPath(e||[],!0),typeof s=="number"&&this.set(je,s),typeof a=="number"&&this.set(jt,a)}_setPath(e,t){this.path=b_(Array.isArray(e)?e:F_(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new B(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=R_(this.path,Te.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Te.NUM_FRACTION_DIGITS;return" translate(".concat(Qe(-this.pathOffset.x,e),", ").concat(Qe(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,Ce,Ce)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,a=0;for(const c of this.path)switch(c[0]){case"L":s=c[1],a=c[2],e.push({x:t,y:r},{x:s,y:a});break;case"M":s=c[1],a=c[2],t=s,r=a;break;case"C":e.push(...Gg(s,a,c[1],c[2],c[3],c[4],c[5],c[6])),s=c[5],a=c[6];break;case"Q":e.push(...Gg(s,a,c[1],c[2],c[1],c[2],c[3],c[4])),s=c[3],a=c[4];break;case"Z":s=t,a=r}return Gn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return j(j({},e),{},{pathOffset:new B(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=er(e,this.ATTRIBUTE_NAMES,r),{d:a}=s;return new this(a,j(j(j({},Ne(s,K_)),t),{},{left:void 0,top:void 0}))}}T(Kr,"type","Path"),T(Kr,"cacheProperties",[...Jn,"path","fillRule"]),T(Kr,"ATTRIBUTE_NAMES",[...Or,"d"]),te.setClass(Kr),te.setSVGClass(Kr);const q_=["left","top","radius"],Pv=["radius","startAngle","endAngle","counterClockwise"];class Wn extends mt{static getDefaults(){return j(j({},super.getDefaults()),Wn.ownDefaults)}constructor(e){super(),Object.assign(this,Wn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ze(this.startAngle),Ze(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(It)}getRadiusY(){return this.get("radius")*this.get(Zt)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Pv,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Ze(this.startAngle),s=Ze(this.endAngle),a=$n(r)*t,c=Kn(r)*t,u=$n(s)*t,d=Kn(s)*t,f=e>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(c," A ").concat(t," ").concat(t," 0 ").concat(f," ").concat(g," ").concat(u," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=er(e,this.ATTRIBUTE_NAMES,r),{left:a=0,top:c=0,radius:u=0}=s;return new this(j(j({},Ne(s,q_)),{},{radius:u,left:a-u,top:c-u}))}static fromObject(e){return super._fromObject(e)}}T(Wn,"type","Circle"),T(Wn,"cacheProperties",[...Jn,...Pv]),T(Wn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),T(Wn,"ATTRIBUTE_NAMES",["cx","cy","r",...Or]),te.setClass(Wn),te.setSVGClass(Wn);const Z_=["x1","y1","x2","y2"],J_=["x1","y1","x2","y2"],wh=["x1","x2","y1","y2"];class qr extends mt{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,qr.ownDefaults),this.setOptions(a),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:c,top:u}=a;typeof c=="number"&&this.set(je,c),typeof u=="number"&&this.set(jt,u)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:a,top:c,width:u,height:d}=Gn([{x:e,y:t},{x:r,y:s}]),f=new B(a+u/2,c+d/2);this.setPositionByOrigin(f,Ce,Ce)}_set(e,t){return super._set(e,t),wh.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;qt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new B((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:a,height:c}=this,u=e<=t?-1:1,d=r<=s?-1:1;return{x1:u*a/2,x2:u*-a/2,y1:d*c/2,y2:d*-c/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=er(e,this.ATTRIBUTE_NAMES,r),{x1:a=0,y1:c=0,x2:u=0,y2:d=0}=s;return new this([a,c,u,d],Ne(s,Z_))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:a}=e,c=Ne(e,J_);return this._fromObject(j(j({},c),{},{points:[t,r,s,a]}),{extraParam:"points"})}}T(qr,"type","Line"),T(qr,"cacheProperties",[...Jn,...wh]),T(qr,"ATTRIBUTE_NAMES",Or.concat(wh)),te.setClass(qr),te.setSVGClass(qr);class Jr extends mt{static getDefaults(){return j(j({},super.getDefaults()),Jr.ownDefaults)}constructor(e){super(),Object.assign(this,Jr.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}T(Jr,"type","Triangle"),T(Jr,"ownDefaults",{width:100,height:100}),te.setClass(Jr),te.setSVGClass(Jr);const Mv=["rx","ry"];class Vn extends mt{static getDefaults(){return j(j({},super.getDefaults()),Vn.ownDefaults)}constructor(e){super(),Object.assign(this,Vn.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(It)}getRy(){return this.get("ry")*this.get(Zt)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Mv,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,fl,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=er(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function e2(o){if(!o)return[];const e=o.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}T(Vn,"type","Ellipse"),T(Vn,"cacheProperties",[...Jn,...Mv]),T(Vn,"ownDefaults",{rx:0,ry:0}),T(Vn,"ATTRIBUTE_NAMES",[...Or,"cx","cy","rx","ry"]),te.setClass(Vn),te.setSVGClass(Vn);const t2=["left","top"],Iv={exactBoundingBox:!1};class cn extends mt{static getDefaults(){return j(j({},super.getDefaults()),cn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"strokeDiff",void 0),Object.assign(this,cn.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(je,r),typeof s=="number"&&this.set(jt,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return Y1(this.points,e,this.isOpen())}_calcDimensions(e){e=j({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(f=>f.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new B,strokeOffset:new B,strokeDiff:new B};const r=Gn(t),s=Ll(j(j({},e),{},{scaleX:1,scaleY:1})),a=Gn(this.points.map(f=>Dt(f,s,!0))),c=new B(this.scaleX,this.scaleY);let u=r.left+r.width/2,d=r.top+r.height/2;return this.exactBoundingBox&&(u-=d*Math.tan(Ze(this.skewX)),d-=u*Math.tan(Ze(this.skewY))),j(j({},r),{},{pathOffset:new B(u,d),strokeOffset:new B(a.left,a.top).subtract(new B(r.left,r.top)).multiply(c),strokeDiff:new B(r.width,r.height).subtract(new B(a.width,a.height)).multiply(c)})}_findCenterFromElement(){const e=Gn(this.points);return new B(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:a,pathOffset:c,strokeOffset:u,strokeDiff:d}=this._calcDimensions();this.set({width:s,height:a,pathOffset:c,strokeOffset:u,strokeDiff:d}),e&&this.setPositionByOrigin(new B(t+s/2,r+a/2),Ce,Ce)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new B(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,r;const{width:u,height:d}=this._calcDimensions(e);c=new B((t=e.width)!==null&&t!==void 0?t:u,(r=e.height)!==null&&r!==void 0?r:d)}else{var s,a;c=new B((s=e.width)!==null&&s!==void 0?s:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return c.multiply(new B(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===It||e===Zt)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=Te.NUM_FRACTION_DIGITS;for(let a=0,c=this.points.length;a<c;a++)e.push(Qe(this.points[a].x-t,s),",",Qe(this.points[a].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let a=0;a<t;a++){const c=this.points[a];e.lineTo(c.x-r,c.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(e2(e.getAttribute("points")),j(j({},Ne(er(e,this.ATTRIBUTE_NAMES,r),t2)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}T(cn,"ownDefaults",Iv),T(cn,"type","Polyline"),T(cn,"layoutProperties",[es,ts,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),T(cn,"cacheProperties",[...Jn,"points"]),T(cn,"ATTRIBUTE_NAMES",[...Or]),te.setClass(cn),te.setSVGClass(cn);class Ma extends cn{isOpen(){return!1}}T(Ma,"ownDefaults",Iv),T(Ma,"type","Polygon"),te.setClass(Ma),te.setSVGClass(Ma);const Fv=["fontSize","fontWeight","fontFamily","fontStyle"],Rv=["underline","overline","linethrough"],Lv=[...Fv,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Bv=[...Lv,...Rv,"textBackgroundColor","direction"],n2=[...Fv,...Rv,Mt,"strokeWidth",rt,"deltaY","textBackgroundColor"],r2={_reNewline:Nh,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:je,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:je,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},kn="justify",El="justify-left",eo="justify-right",to="justify-center";class Nv extends mt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const a in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const a in r[s])if(r[s][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,a=0,c=!0,u=0;for(const d in t){r=0;for(const f in t[d]){const g=t[d][f]||{};a++,g[e]!==void 0?(s?g[e]!==s&&(c=!1):s=g[e],g[e]===this[e]&&delete g[e]):c=!1,Object.keys(g).length!==0?r++:delete t[d][f]}r===0&&delete t[d]}for(let d=0;d<this._textLines.length;d++)u+=this._textLines[d].length;c&&a===u&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,a;for(s in t){for(a in r=t[s],r)delete r[a][e],Object.keys(r[a]).length===0&&delete r[a];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const a=Yh(j(j({},this._getStyleDeclaration(r,s)),t),c=>c!==void 0);this._setStyleDeclaration(r,s,a)}getSelectionStyles(e,t,r){const s=[];for(let a=e;a<(t||e);a++)s.push(this.getStyleAtPosition(a,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return j(j({},ns(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}T(Nv,"_styleProperties",n2);const i2=/  +/g,s2=/"/g;function $u(o,e,t,r,s){return"		".concat(function(a,c){let{left:u,top:d,width:f,height:g}=c,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.NUM_FRACTION_DIGITS;const y=so(rt,a,!1),[C,x,S,k]=[u,d,f,g].map(_=>Qe(_,v));return"<rect ".concat(y,' x="').concat(C,'" y="').concat(x,'" width="').concat(S,'" height="').concat(k,'"></rect>')}(o,{left:e,top:t,width:r,height:s}),`
`)}const o2=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Ku;class xt extends Nv{static getDefaults(){return j(j({},super.getDefaults()),xt.ownDefaults)}constructor(e,t){super(),T(this,"__charBounds",[]),Object.assign(this,xt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=bv(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(kn)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,a,c,u;for(let d=0,f=this._textLines.length;d<f;d++)if((this.textAlign===kn||d!==f-1&&!this.isEndOfWrapping(d))&&(s=0,a=this._textLines[d],t=this.getLineWidth(d),t<this.width&&(u=this.textLines[d].match(this._reSpacesAndTabs)))){r=u.length,e=(this.width-t)/r;for(let g=0;g<=a.length;g++)c=this.__charBounds[d][g],this._reSpaceAndTab.test(a[g])?(c.width+=e,c.kernedWidth+=e,c.left+=s,s+=e):c.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Mt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Ce:e.textBaseline="middle";break;case"ascender":e.textBaseline=jt;break;case"descender":e.textBaseline=lh}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,a,c){this._renderChars(e,t,r,s,a,c)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let a=0,c=this._textLines.length;a<c;a++){const u=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){s+=u;continue}const d=this._textLines[a].length,f=this._getLineLeftOffset(a);let g,v,y=0,C=0,x=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let S=0;S<d;S++){const k=this.__charBounds[a][S];v=this.getValueOfPropertyAt(a,S,"textBackgroundColor"),this.path?(e.save(),e.translate(k.renderLeft,k.renderTop),e.rotate(k.angle),e.fillStyle=v,v&&e.fillRect(-k.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),k.width,u/this.lineHeight),e.restore()):v!==x?(g=r+f+C,this.direction==="rtl"&&(g=this.width-g-y),e.fillStyle=x,x&&e.fillRect(g,s,y,u/this.lineHeight),C=k.left,y=k.width,x=v):y+=k.kernedWidth}v&&!this.path&&(g=r+f+C,this.direction==="rtl"&&(g=this.width-g-y),e.fillStyle=v,e.fillRect(g,s,y,u/this.lineHeight)),s+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const a=Zs.getFontCache(t),c=this._getFontDeclaration(t),u=r+e,d=r&&c===this._getFontDeclaration(s),f=t.fontSize/this.CACHE_FONT_SIZE;let g,v,y,C;if(r&&a[r]!==void 0&&(y=a[r]),a[e]!==void 0&&(C=g=a[e]),d&&a[u]!==void 0&&(v=a[u],C=v-y),g===void 0||y===void 0||v===void 0){const x=function(){return Ku||(Ku=An({width:0,height:0}).getContext("2d")),Ku}();this._setTextStyles(x,t,!0),g===void 0&&(C=g=x.measureText(e).width,a[e]=g),y===void 0&&d&&r&&(y=x.measureText(r).width,a[r]=y),d&&v===void 0&&(v=x.measureText(u).width,a[u]=v,C=v-y)}return{width:g*f,kernedWidth:C*f}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const a=this.pathSide===qe,c=this.path,u=this._textLines[e],d=u.length,f=new Array(d);this.__charBounds[e]=f;for(let g=0;g<d;g++){const v=u[g];r=this._getGraphemeBox(v,e,g,t),f[g]=r,s+=r.kernedWidth,t=v}if(f[d]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let g=0;const v=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case je:g=a?v-s:0;break;case Ce:g=(v-s)/2;break;case qe:g=a?0:v-s}g+=this.pathStartOffset*(a?-1:1);for(let y=a?d-1:0;a?y>=0:y<d;a?y--:y++)r=f[y],g>v?g%=v:g<0&&(g+=v),this._setGraphemeOnPath(g,r),g+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,a=j_(s.path,r,s.segmentsInfo);t.renderLeft=a.x-s.pathOffset.x,t.renderTop=a.y-s.pathOffset.y,t.angle=a.angle+(this.pathSide===qe?Math.PI:0)}_getGraphemeBox(e,t,r,s,a){const c=this.getCompleteStyleDeclaration(t,r),u=s?this.getCompleteStyleDeclaration(t,r-1):{},d=this._measureChar(e,c,s,u);let f,g=d.kernedWidth,v=d.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),v+=f,g+=f);const y={width:v,left:0,height:c.fontSize,kernedWidth:g,deltaY:c.deltaY};if(r>0&&!a){const C=this.__charBounds[t][r-1];y.left=C.left+C.width+d.kernedWidth-d.width}return y}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),a=this._getTopOffset();for(let c=0,u=this._textLines.length;c<u;c++){const d=this.getHeightOfLine(c),f=d/this.lineHeight,g=this._getLineLeftOffset(c);this._renderTextLine(t,e,this._textLines[c],s+g,a+r+f,c),r+=d}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(rt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,a,c){const u=this.getHeightOfLine(c),d=this.textAlign.includes(kn),f=this.path,g=!d&&this.charSpacing===0&&this.isEmptyStyles(c)&&!f,v=this.direction==="ltr",y=this.direction==="ltr"?1:-1,C=t.direction;let x,S,k,_,M,F="",N=0;if(t.save(),C!==this.direction&&(t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?je:qe),a-=u*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(e,t,c,0,r.join(""),s,a),void t.restore();for(let U=0,H=r.length-1;U<=H;U++)_=U===H||this.charSpacing||f,F+=r[U],k=this.__charBounds[c][U],N===0?(s+=y*(k.kernedWidth-k.width),N+=k.width):N+=k.kernedWidth,d&&!_&&this._reSpaceAndTab.test(r[U])&&(_=!0),_||(x=x||this.getCompleteStyleDeclaration(c,U),S=this.getCompleteStyleDeclaration(c,U+1),_=Zh(x,S,!1)),_&&(f?(t.save(),t.translate(k.renderLeft,k.renderTop),t.rotate(k.angle),this._renderChar(e,t,c,U,F,-N/2,0),t.restore()):(M=s,this._renderChar(e,t,c,U,F,M,a)),F="",x=S,s+=y*N,N=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=An({width:t,height:r}),a=s.getContext("2d");return s.width=t,s.height=r,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,r),a.lineTo(0,r),a.closePath(),a.translate(t/2,r/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,a;return qt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,a=-this.height/2,e.translate(s,a),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:a}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,a,c,u){const d=this._getStyleDeclaration(r,s),f=this.getCompleteStyleDeclaration(r,s),g=e==="fillText"&&f.fill,v=e==="strokeText"&&f.stroke&&f.strokeWidth;if(v||g){if(t.save(),t.font=this._getFontDeclaration(f),d.textBackgroundColor&&this._removeShadow(t),d.deltaY&&(u+=d.deltaY),g){const y=this._setFillStyles(t,f);t.fillText(a,c-y.offsetX,u-y.offsetY)}if(v){const y=this._setStrokeStyles(t,f);t.strokeText(a,c-y.offsetX,u-y.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),c=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),u={fontSize:a*r.size,deltaY:c+a*r.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,a=this.direction,c=this.isEndOfWrapping(e);let u=0;return s===kn||s===to&&!c||s===eo&&!c||s===El&&!c?0:(s===Ce&&(u=r/2),s===qe&&(u=r),s===to&&(u=r/2),s===eo&&(u=r),a==="rtl"&&(s===qe||s===kn||s===eo?u=0:s===je||s===El?u=-r:s!==Ce&&s!==to||(u=-r/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),a=this.path,c=this._getWidthOfCharSpacing(),u=this.offsets[t];for(let d=0,f=this._textLines.length;d<f;d++){const g=this.getHeightOfLine(d);if(!this[t]&&!this.styleHas(t,d)){r+=g;continue}const v=this._textLines[d],y=g/this.lineHeight,C=this._getLineLeftOffset(d);let x,S,k=0,_=0,M=this.getValueOfPropertyAt(d,0,t),F=this.getValueOfPropertyAt(d,0,rt);const N=r+y*(1-this._fontSizeFraction);let U=this.getHeightOfChar(d,0),H=this.getValueOfPropertyAt(d,0,"deltaY");for(let X=0,se=v.length;X<se;X++){const le=this.__charBounds[d][X];x=this.getValueOfPropertyAt(d,X,t),S=this.getValueOfPropertyAt(d,X,rt);const we=this.getHeightOfChar(d,X),Se=this.getValueOfPropertyAt(d,X,"deltaY");if(a&&x&&S)e.save(),e.fillStyle=F,e.translate(le.renderLeft,le.renderTop),e.rotate(le.angle),e.fillRect(-le.kernedWidth/2,u*we+Se,le.kernedWidth,this.fontSize/15),e.restore();else if((x!==M||S!==F||we!==U||Se!==H)&&_>0){let pe=s+C+k;this.direction==="rtl"&&(pe=this.width-pe-_),M&&F&&(e.fillStyle=F,e.fillRect(pe,N+u*U+H,_,this.fontSize/15)),k=le.left,_=le.width,M=x,F=S,U=we,H=Se}else _+=le.kernedWidth}let W=s+C+k;this.direction==="rtl"&&(W=this.width-W-_),e.fillStyle=S,x&&S&&e.fillRect(W,N+u*U+H,_-c,this.fontSize/15),r+=g}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const c=e.includes("'")||e.includes('"')||e.includes(",")||xt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(a?this.CACHE_FONT_SIZE:s,"px"),c].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return qh(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let a=[];for(let c=0;c<t.length;c++)r[c]=this.graphemeSplit(t[c]),a=a.concat(r[c],s);return a.pop(),{_unwrappedLines:r,lines:t,graphemeText:a,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j(j({},super.toObject([...Bv,...e])),{},{styles:H1(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,a=!1;if(typeof e=="object")for(const c in e)c==="path"&&this.setPathInfo(),s=s||r.includes(c),a=a||c==="path";else s=r.includes(e),a=e==="path";return a&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=er(e,xt.ATTRIBUTE_NAMES,r),a=j(j({},t),s),{textAnchor:c=je,textDecoration:u="",dx:d=0,dy:f=0,top:g=0,left:v=0,fontSize:y=Bh,strokeWidth:C=1}=a,x=Ne(a,o2),S=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),j({left:v+d,top:g+f,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:y},x)),k=S.getScaledHeight()/S.height,_=((S.height+S.strokeWidth)*S.lineHeight-S.height)*k,M=S.getScaledHeight()+_;let F=0;return c===Ce&&(F=S.getScaledWidth()/2),c===qe&&(F=S.getScaledWidth()),S.set({left:S.left-F,top:S.top-(M-S.fontSize*(.07+S._fontSizeFraction))/S.lineHeight,strokeWidth:C}),S}static fromObject(e){return this._fromObject(j(j({},e),{},{styles:X1(e.styles||{},e.text)}),{extraParam:"text"})}}T(xt,"textLayoutProperties",Lv),T(xt,"cacheProperties",[...Jn,...Bv]),T(xt,"ownDefaults",r2),T(xt,"type","Text"),T(xt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),T(xt,"ATTRIBUTE_NAMES",Or.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),vv(xt,[class extends lv{_toSVG(){const o=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(o){return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(o){let{textBgRects:e,textSpans:t}=o;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(s2,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(o,e){const t=[],r=[];let s,a=o;this.backgroundColor&&r.push(...$u(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,u=this._textLines.length;c<u;c++)s=this._getLineLeftOffset(c),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(r,c,e+s,a),this._setSVGTextLineText(t,c,e+s,a),a+=this.getHeightOfLine(c);return{textSpans:t,textBgRects:r}}_createTextCharSpan(o,e,t,r){const s=this.getSvgSpanStyles(e,o!==o.trim()||!!o.match(i2)),a=s?'style="'.concat(s,'"'):"",c=e.deltaY,u=c?' dy="'.concat(Qe(c,Te.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Qe(t,Te.NUM_FRACTION_DIGITS),'" y="').concat(Qe(r,Te.NUM_FRACTION_DIGITS),'" ').concat(u).concat(a,">").concat(Q1(o),"</tspan>")}_setSVGTextLineText(o,e,t,r){const s=this.getHeightOfLine(e),a=this.textAlign.includes(kn),c=this._textLines[e];let u,d,f,g,v,y="",C=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let x=0,S=c.length-1;x<=S;x++)v=x===S||this.charSpacing,y+=c[x],f=this.__charBounds[e][x],C===0?(t+=f.kernedWidth-f.width,C+=f.width):C+=f.kernedWidth,a&&!v&&this._reSpaceAndTab.test(c[x])&&(v=!0),v||(u=u||this.getCompleteStyleDeclaration(e,x),d=this.getCompleteStyleDeclaration(e,x+1),v=Zh(u,d,!0)),v&&(g=this._getStyleDeclaration(e,x),o.push(this._createTextCharSpan(y,g,t,r)),y="",u=d,this.direction==="rtl"?t-=C:t+=C,C=0)}_setSVGTextLineBg(o,e,t,r){const s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let c,u=0,d=0,f=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let g=0;g<s.length;g++){const{left:v,width:y,kernedWidth:C}=this.__charBounds[e][g];c=this.getValueOfPropertyAt(e,g,"textBackgroundColor"),c!==f?(f&&o.push(...$u(f,t+d,r,u,a)),d=v,u=y,f=c):u+=C}c&&o.push(...$u(f,t+d,r,u,a))}_getSVGLineTopOffset(o){let e,t=0;for(e=0;e<o;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(o){return"".concat(super.getSvgStyles(o)," white-space: pre;")}getSvgSpanStyles(o,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:a,fontSize:c,fontStyle:u,fontWeight:d,deltaY:f}=o,g=this.getSvgTextDecoration(o);return[s?so(Mt,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",u?"font-style: ".concat(u,"; "):"",d?"font-weight: ".concat(d,"; "):"",g&&"text-decoration: ".concat(g,"; "),a?so(rt,a):"",f?"baseline-shift: ".concat(-f,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(o){return["overline","underline","line-through"].filter(e=>o[e.replace("-","")]).join(" ")}}]),te.setClass(xt),te.setSVGClass(xt);class a2{constructor(e){T(this,"target",void 0),T(this,"__mouseDownInPlace",!1),T(this,"__dragStartFired",!1),T(this,"__isDraggingOver",!1),T(this,"__dragStartSelection",void 0),T(this,"__dragImageDisposer",void 0),T(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:a}=t;const c=this.target,u=c.canvas,d=new B(c.flipX?-1:1,c.flipY?-1:1),f=c._getCursorBoundaries(s),g=new B(f.left+f.leftOffset,f.top+f.topOffset).multiply(d).transform(c.calcTransformMatrix()),v=u.getScenePoint(e).subtract(g),y=c.getCanvasRetinaScaling(),C=c.getBoundingRect(),x=g.subtract(new B(C.left,C.top)),S=u.viewportTransform,k=x.add(v).transform(S,!0),_=c.backgroundColor,M=Kh(c.styles);c.backgroundColor="";const F={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(F,0,s),c.setSelectionStyles(F,a,c.text.length),c.dirty=!0;const N=c.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=_,c.styles=M,c.dirty=!0,yh(N,{position:"fixed",left:"".concat(-N.width,"px"),border:Pt,width:"".concat(N.width/y,"px"),height:"".concat(N.height/y,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{N.remove()},un(e.target||this.target.hiddenTextarea).body.appendChild(N),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(N,k.x,k.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(s.selectionStart,s.selectionEnd).join(""),c=j({text:t.text,value:a},s);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,c)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let a=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!s){const c=this.target,u=c.canvas;let d=c.getSelectionStartFromPointer(r);const{styles:f}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},g=a[Math.max(0,a.length-1)],v=0;if(this.__dragStartSelection){const y=this.__dragStartSelection.selectionStart,C=this.__dragStartSelection.selectionEnd;d>y&&d<=C?d=y:d>C&&(d-=C-y),c.removeChars(y,C),delete this.__dragStartSelection}c._reNewline.test(g)&&(c._reNewline.test(c._text[d])||d===c._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=c,c.insertChars(a,f,d),u.setActiveObject(c),c.enterEditing(r),c.selectionStart=Math.min(d+v,c._text.length),c.selectionEnd=Math.min(c.selectionStart+a.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(gl,{index:d+v,action:"drop"}),u.fire("text:changed",{target:c}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,a=this.target.canvas,{selectionStart:c,selectionEnd:u}=this.__dragStartSelection,d=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||Pt;d===Pt?(s.selectionStart=c,s.selectionEnd=u,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),d==="move"&&(s.removeChars(c,u),s.selectionStart=s.selectionEnd=c,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(gl,{index:c,action:"dragend"}),a.fire("text:changed",{target:s}),a.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const $g=/[ \n\.,;!\?\-]/;class l2 extends xt{constructor(){super(...arguments),T(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:a}=e;return dv({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!Nh.test(r[e-1]))?e-1:e,a=r[s];for(;s>0&&s<r.length&&!$g.test(a);)s+=t,a=r[s];return t===-1&&$g.test(a)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;un(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,a=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==a||s!==r&&a!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),a=this.graphemeSplit(s).length;if(e===t)return{selectionStart:a,selectionEnd:a};const c=r.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,a=r.charIndex,c=this.getValueOfPropertyAt(s,a,"fontSize")*this.lineHeight,u=t.leftOffset,d=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,g=f.width/d,v=f.height/d,y=g-c,C=v-c,x=new B(t.left+u,t.top+t.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new B(f.clientWidth/g,f.clientHeight/v));return x.x<0&&(x.x=0),x.x>y&&(x.x=y),x.y<0&&(x.y=0),x.y>C&&(x.y=C),x.x+=this.canvas._offset.left,x.y+=this.canvas._offset.top,{left:"".concat(x.x,"px"),top:"".concat(x.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(ml),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:c}=this.get2DCursorLocation(t,!0);if(r!==a){if(this.styles[r])for(let u=s;u<this._unwrappedTextLines[r].length;u++)delete this.styles[r][u];if(this.styles[a])for(let u=c;u<this._unwrappedTextLines[a].length;u++){const d=this.styles[a][u];d&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+u-c]=d)}for(let u=r+1;u<=a;u++)delete this.styles[u];this.shiftLineStyles(a,r-a)}else if(this.styles[r]){const u=this.styles[r],d=c-s;for(let f=s;f<c;f++)delete u[f];for(const f in this.styles[r]){const g=parseInt(f,10);g>=c&&(u[g-d]=u[f],delete u[f])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const a=parseInt(s,10);a>e&&(this.styles[a+t]=r[a],r[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,r,s){const a={},c=this._unwrappedTextLines[e].length,u=c===t;let d=!1;r||(r=1),this.shiftLineStyles(e,r);const f=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const v in this.styles[e]){const y=parseInt(v,10);y>=t&&(d=!0,a[y-t]=this.styles[e][v],u&&t===0||delete this.styles[e][v])}let g=!1;for(d&&!u&&(this.styles[e+r]=a,g=!0),(g||c>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:j({},s[r-1])}:f?this.styles[e+r]={0:j({},f)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const a=this.styles[e],c=a?j({},a):{};r||(r=1);for(const d in c){const f=parseInt(d,10);f>=t&&(a[f+r]=c[f],c[f-r]||delete a[f])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=j({},s[r]));return}if(!a)return;const u=a[t?t-1:1];for(;u&&r--;)this.styles[e][t+r]=j({},u)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),a=[0];let c,u=0;for(let d=0;d<e.length;d++)e[d]===`
`?(u++,a[u]=0):a[u]++;for(a[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,a[0],r),r=r&&r.slice(a[0]+1)),u&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+a[0],u),c=1;c<u;c++)a[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,a[c],r):r&&this.styles[s.lineIndex+c]&&r[0]&&(this.styles[s.lineIndex+c][0]=r[0]),r=r&&r.slice(a[c]+1);a[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,a[c],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,r,t),this._text=[...this._text.slice(0,r),...a,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=je:this._selectionDirection===qe&&(this._selectionDirection=je,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===qe?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=qe:this._selectionDirection===je&&(this._selectionDirection=qe,this.selectionStart=t),this.selectionEnd=r)}}class c2 extends l2{initHiddenTextarea(){const e=this.canvas&&un(this.canvas.getElement())||Ji(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(c=>{let[u,d]=c;return t.setAttribute(u,d)});const{top:r,left:s,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(c=>{let[u,d]=c;return t.addEventListener(u,this[d].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(gl),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,a=this._text.length,c=s.length,u=this.selectionStart,d=this.selectionEnd,f=u!==d;let g,v,y,C,x=c-a;const S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),k=u>S.selectionStart;f?(v=this._text.slice(u,d),x+=d-u):c<a&&(v=k?this._text.slice(d+x,d):this._text.slice(u,u-x));const _=s.slice(S.selectionEnd-x,S.selectionEnd);if(v&&v.length&&(_.length&&(g=this.getSelectionStyles(u,u+1,!1),g=_.map(()=>g[0])),f?(y=u,C=d):k?(y=d-v.length,C=d):(y=d,C=d+v.length),this.removeStyleFromTo(y,C)),_.length){const{copyPasteData:M}=bn();t&&_.join("")===M.copiedText&&!Te.disableStyleCopyPaste&&(g=M.copiedTextStyle),this.insertNewStyleBlock(_,u,g)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=bn();e.copiedText=this.getSelectedText(),Te.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),a=s.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const c=s.charIndex,u=this._getWidthBeforeCursor(a,c),d=this._getIndexOnLine(a+1,u);return this._textLines[a].slice(c).length+d+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),a=s.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-r;const c=s.charIndex,u=this._getWidthBeforeCursor(a,c),d=this._getIndexOnLine(a-1,u),f=this._textLines[a].slice(0,c),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+d-f.length+(1-g)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,a,c=this._getLineLeftOffset(e),u=0;for(let d=0,f=r.length;d<f;d++)if(s=this.__charBounds[e][d].width,c+=s,c>t){a=!0;const g=c-s,v=c,y=Math.abs(g-t);u=Math.abs(v-t)<y?d:d-1;break}return a||(u=r.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===qe);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=$i(0,this.selectionStart,s),this.selectionEnd=$i(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===je?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=je,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===qe&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=je,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===je&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=qe,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=qe,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const qu=o=>!!o.button;class u2 extends c2{constructor(){super(...arguments),T(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new a2(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),hh(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!qu(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!qu(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||qu(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(hn(this.calcTransformMatrix())).add(new B(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,a=0;for(let f=0;f<this._textLines.length&&r<=t.y;f++)r+=this.getHeightOfLine(f),a=f,f>0&&(s+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let c=Math.abs(this._getLineLeftOffset(a));const u=this._textLines[a].length,d=this.__charBounds[a];for(let f=0;f<u;f++){const g=c+d[f].kernedWidth;if(t.x<=g){Math.abs(t.x-g)<=Math.abs(t.x-c)&&s++;break}c=g,s++}return Math.min(this.flipX?u-s:s,this._text.length)}}const Ia="moveCursorUp",Fa="moveCursorDown",Ra="moveCursorLeft",La="moveCursorRight",Ba="exitEditing",h2=j({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Ba,27:Ba,33:Ia,34:Fa,35:La,36:Ra,37:Ra,38:Ia,39:La,40:Fa},keysMapRtl:{9:Ba,27:Ba,33:Ia,34:Fa,35:Ra,36:La,37:La,38:Ia,39:Ra,40:Fa},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Yn extends u2{static getDefaults(){return j(j({},super.getDefaults()),Yn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,j(j({},Yn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof xh&&this.canvas.textEditingManager.remove(this),t instanceof xh&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:a}=this.get2DCursorLocation(e);for(let f=0;f<a;f++)t+=this.getHeightOfLine(f);const c=this._getLineLeftOffset(a),u=this.__charBounds[a][s];u&&(r=u.left),this.charSpacing!==0&&s===this._textLines[a].length&&(r-=this._getWidthOfCharSpacing());const d={top:t,left:c+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===qe||this.textAlign===kn||this.textAlign===eo?d.left*=-1:this.textAlign===je||this.textAlign===El?d.left=c-(r>0?r:0):this.textAlign!==Ce&&this.textAlign!==to||(d.left=c-(r>0?r:0))),d}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,a=r.charIndex>0?r.charIndex-1:0,c=this.getValueOfPropertyAt(s,a,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/u,f=this.getValueOfPropertyAt(s,a,"deltaY"),g=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-d/2,top:g+t.top+f,width:d,height:c}}_renderCursor(e,t,r){const{color:s,opacity:a,left:c,top:u,width:d,height:f}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=a,e.fillRect(c,u,d,f)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,a=t.selectionEnd,c=this.textAlign.includes(kn),u=this.get2DCursorLocation(s),d=this.get2DCursorLocation(a),f=u.lineIndex,g=d.lineIndex,v=u.charIndex<0?0:u.charIndex,y=d.charIndex<0?0:d.charIndex;for(let C=f;C<=g;C++){const x=this._getLineLeftOffset(C)||0;let S=this.getHeightOfLine(C),k=0,_=0,M=0;if(C===f&&(_=this.__charBounds[f][v].left),C>=f&&C<g)M=c&&!this.isEndOfWrapping(C)?this.width:this.getLineWidth(C)||5;else if(C===g)if(y===0)M=this.__charBounds[g][y].left;else{const W=this._getWidthOfCharSpacing();M=this.__charBounds[g][y-1].left+this.__charBounds[g][y-1].width-W}k=S,(this.lineHeight<1||C===g&&this.lineHeight>1)&&(S/=this.lineHeight);let F=r.left+x+_,N=S,U=0;const H=M-_;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",N=1,U=S):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===qe||this.textAlign===kn||this.textAlign===eo?F=this.width-F-H:this.textAlign===je||this.textAlign===El?F=r.left+x-M:this.textAlign!==Ce&&this.textAlign!==to||(F=r.left+x-M)),e.fillRect(F,r.top+r.topOffset+U,H,N),r.topOffset+=k}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,rt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}T(Yn,"ownDefaults",h2),T(Yn,"type","IText"),te.setClass(Yn),te.setClass(Yn,"i-text");class ei extends Yn{static getDefaults(){return j(j({},super.getDefaults()),ei.ownDefaults)}constructor(e,t){super(e,j(j({},ei.ownDefaults),t))}static createControls(){return{controls:W1()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(kn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const a={};for(let c=0;c<e.graphemeLines.length;c++)e.graphemeText[s]===`
`&&c>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&c>0&&(r++,s++),a[c]={line:t,offset:r},s+=e.graphemeLines[c].length,r+=e.graphemeLines[c].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,a=!1;const c=this._styleMap[e],u=this._styleMap[e+1];c&&(e=c.line,r=c.offset),u&&(s=u.line,a=s===e,t=u.offset);const d=e===void 0?this.styles:{line:this.styles[e]};for(const f in d)for(const g in d[f]){const v=parseInt(g,10);if(v>=r&&(!a||v<t))for(const y in d[f][g])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let a=0;a<r.wordsData.length;a++)s.push(...this._wrapLine(a,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((a,c)=>{let u=0;const d=t?this.graphemeSplit(a):this.wordSplit(a);return d.length===0?[{word:[],width:0}]:d.map(f=>{const g=t?[f]:this.graphemeSplit(f),v=this._measureWord(g,c,u);return s=Math.max(v,s),u+=g.length+r.length,{word:g,width:v}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let c=0,u=e.length;c<u;c++)a+=this._getGraphemeBox(e[c],t,c+s,r,!0).kernedWidth,r=e[c];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:a}=r,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,f=[],g=d?"":" ";let v=0,y=[],C=0,x=0,S=!0;t-=c;const k=Math.max(t,s,this.dynamicMinWidth),_=a[e];let M;for(C=0,M=0;M<_.length;M++){const{word:F,width:N}=_[M];C+=F.length,v+=x+N-u,v>k&&!S?(f.push(y),y=[],v=N,S=!0):v+=u,S||d||y.push(g),y=y.concat(F),x=d?0:this._measureWord([g],e,C),C++,S=!1}return M&&f.push(y),s+c>this.dynamicMinWidth&&(this.dynamicMinWidth=s-u+c),f}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let a=0;a<r.length;a++)s[a]=r[a].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}T(ei,"type","Textbox"),T(ei,"textLayoutProperties",[...Yn.textLayoutProperties,"width"]),T(ei,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),te.setClass(ei);class Kg extends Vl{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:a}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:c,height:u}=Gn(wv(r,s)),d=new B(c,u);if(s.absolutePositioned)return{center:Hi(s.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:d};{const f=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:g=new B,correction:v=new B}=this.calcBoundingBox(t,e)||{};return{center:g.add(f),correction:v.subtract(f),size:d}}return{center:r.getRelativeCenterPoint().add(f),size:d}}}}T(Kg,"type","clip-path"),te.setClass(Kg);class qg extends Vl{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new B(r.width||s.x,r.height||s.y)}}T(qg,"type","fixed"),te.setClass(qg);class d2 extends ao{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,a)=>(a.parent&&s.add(a.parent),s),new Set).forEach(s=>{!r.some(a=>a.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class ti extends ni{static getDefaults(){return j(j({},super.getDefaults()),ti.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ti.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:a}=t;this.groupInit(e,{left:r,top:s,layoutManager:a??new d2})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const a=this._objects.findIndex(u=>u.isInFrontOf(s)),c=a===-1?this.size():a;this.insertAt(c,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(br("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:a}=s;a&&r.add(a)}),e===ed?r.forEach(s=>{s._onAfterObjectsChange(Sl,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=j(j({hasControls:!1},r),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,s);super._renderControls(e,t),e.restore()}}T(ti,"type","ActiveSelection"),T(ti,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),te.setClass(ti),te.setClass(ti,"activeSelection");class p2{constructor(){T(this,"resources",{})}applyFilters(e,t,r,s,a){const c=a.getContext("2d");if(!c)return;c.drawImage(t,0,0,r,s);const u={sourceWidth:r,sourceHeight:s,imageData:c.getImageData(0,0,r,s),originalEl:t,originalImageData:c.getImageData(0,0,r,s),canvasEl:a,ctx:c,filterBackend:this};e.forEach(f=>{f.applyTo(u)});const{imageData:d}=u;return d.width===r&&d.height===s||(a.width=d.width,a.height=d.height),c.putImageData(d,0,0),u}}class zv{constructor(){let{tileSize:e=Te.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),T(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=An({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,a,c){const u=this.gl,d=a.getContext("2d");if(!u||!d)return;let f;c&&(f=this.getCachedTexture(c,t));const g={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:u,sourceTexture:this.createTexture(u,r,s,f?void 0:t),targetTexture:this.createTexture(u,r,s),originalTexture:f||this.createTexture(u,r,s,f?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},v=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,v),e.forEach(y=>{y&&y.applyTo(g)}),function(y){const C=y.targetCanvas,x=C.width,S=C.height,k=y.destinationWidth,_=y.destinationHeight;x===k&&S===_||(C.width=k,C.height=_)}(g),this.copyGLTo2D(u,g),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(g.sourceTexture),u.deleteTexture(g.targetTexture),u.deleteFramebuffer(v),d.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,a){const{NEAREST:c,TEXTURE_2D:u,RGBA:d,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:v,TEXTURE_MIN_FILTER:y,TEXTURE_WRAP_S:C,TEXTURE_WRAP_T:x}=e,S=e.createTexture();return e.bindTexture(u,S),e.texParameteri(u,v,a||c),e.texParameteri(u,y,a||c),e.texParameteri(u,C,g),e.texParameteri(u,x,g),s?e.texImage2D(u,0,d,d,f,s):e.texImage2D(u,0,d,t,r,0,d,f,null),S}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const a=this.createTexture(this.gl,t.width,t.height,t,r);return a&&(s[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,a=s.getContext("2d");if(!a)return;a.translate(0,s.height),a.scale(1,-1);const c=r.height-s.height;a.drawImage(r,0,c,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,a=t.destinationHeight,c=s*a*4;if(!r)return;const u=new Uint8Array(this.imageBuffer,0,c),d=new Uint8ClampedArray(this.imageBuffer,0,c);e.readPixels(0,0,s,a,e.RGBA,e.UNSIGNED_BYTE,u);const f=new ImageData(d,s,a);r.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),a=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let Zu;function f2(){const{WebGLProbe:o}=bn();return o.queryWebGL(fn()),Te.enableGLFiltering&&o.isSupported(Te.textureSize)?new zv({tileSize:Te.textureSize}):new p2}function Ju(){return!Zu&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Zu=f2()),Zu}const g2=["filters","resizeFilter","src","crossOrigin","type"],Wv=["cropX","cropY"];class Wt extends mt{static getDefaults(){return j(j({},super.getDefaults()),Wt.ownDefaults)}constructor(e,t){super(),T(this,"_lastScaleX",1),T(this,"_lastScaleY",1),T(this,"_filterScalingX",1),T(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Wt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ar()),this.setElement(typeof e=="string"?(this.canvas&&un(this.canvas.getElement())||Ji()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),(t=e.classList)===null||t===void 0||t.add(Wt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Ju(!1);t instanceof zv&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&bn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),j(j({},super.toObject([...Wv,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let a=[],c=[],u="",d="";if(!t)return[];if(this.hasCrop()){const f=Ar();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(d).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,c=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return a=this.paintFirst!==rt?a.concat(c,e):a.concat(e,c),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ll(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,a=r.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&a>t)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=a);const u=An(c),{width:d,height:f}=c;this._element=u,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=a,Ju().applyFilters([e],c,d,f,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=An({width:r,height:s});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);Ju().applyFilters(e,this._originalElement,r,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,a=this.width,c=this.height,u=Math.max(this.cropX,0),d=Math.max(this.cropY,0),f=t.naturalWidth||t.width,g=t.naturalHeight||t.height,v=u*r,y=d*s,C=Math.min(a*r,f-v),x=Math.min(c*s,g-y),S=-a/2,k=-c/2,_=Math.min(a,f/r-u),M=Math.min(c,g/s-d);t&&e.drawImage(t,v,y,C,x,S,k,_,M)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=qS(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let a,c=this._element.width,u=this._element.height,d=1,f=1,g=0,v=0,y=0,C=0;return!e||e.alignX===Pt&&e.alignY===Pt?(d=t/c,f=r/u):(e.meetOrSlice==="meet"&&(d=f=w_(this._element,s),a=(t-c*d)/2,e.alignX==="Min"&&(g=-a),e.alignX==="Max"&&(g=a),a=(r-u*f)/2,e.alignY==="Min"&&(v=-a),e.alignY==="Max"&&(v=a)),e.meetOrSlice==="slice"&&(d=f=C_(this._element,s),a=c-t/d,e.alignX==="Mid"&&(y=a/2),e.alignX==="Max"&&(y=a),a=u-r/f,e.alignY==="Mid"&&(C=a/2),e.alignY==="Max"&&(C=a),c=t/d,u=r/f)),{width:c,height:u,scaleX:d,scaleY:f,offsetLeft:g,offsetTop:v,cropX:y,cropY:C}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:a,crossOrigin:c,type:u}=e,d=Ne(e,g2);return Promise.all([ll(a,j(j({},t),{},{crossOrigin:c})),r&&io(r,t),s&&io([s],t),Bl(d,t)]).then(f=>{let[g,v=[],[y]=[],C={}]=f;return new this(g,j(j({},d),{},{src:a,filters:v,resizeFilter:y},C))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return ll(e,{crossOrigin:t,signal:r}).then(a=>new this(a,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=er(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"],t,s).catch(a=>(br("log","Unable to parse Image",a),null))}}T(Wt,"type","Image"),T(Wt,"cacheProperties",[...Jn,...Wv]),T(Wt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),T(Wt,"CSS_CANVAS","canvas-img"),T(Wt,"ATTRIBUTE_NAMES",[...Or,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),te.setClass(Wt),te.setSVGClass(Wt);zl(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Yl=o=>o.webgl!==void 0,td="precision highp float",m2=`
    `.concat(td,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),v2=["type"],y2=["type"],x2=new RegExp(td,"g");class it{get type(){return this.constructor.type}constructor(){let e=Ne(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v2);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return m2}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=bn();s!=="highp"&&(t=t.replace(x2,td.replace("highp",s)));const a=e.createShader(e.VERTEX_SHADER),c=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!a||!c||!u)throw new En("Vertex, fragment shader or program creation error");if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new En("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(c,t),e.compileShader(c),!e.getShaderParameter(c,e.COMPILE_STATUS))throw new En("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(c)));if(e.attachShader(u,a),e.attachShader(u,c),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new En('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const d=this.getUniformLocations(e,u)||{};return d.uStepW=e.getUniformLocation(u,"uStepW"),d.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:d}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let a=0;a<r.length;a++)s[r[a]]=e.getUniformLocation(t,r[a]);return s}sendAttributeData(e,t,r){const s=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Yl(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=An({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return j({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ne(e,y2))}}T(it,"type","BaseFilter"),T(it,"uniformLocations",[]);const w2={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Na extends it{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(w2[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new Me(this.color).getSource(),s=this.alpha,a=r[0]*s,c=r[1]*s,u=r[2]*s,d=1-s;for(let f=0;f<t.length;f+=4){const g=t[f],v=t[f+1],y=t[f+2];let C,x,S;switch(this.mode){case"multiply":C=g*a/255,x=v*c/255,S=y*u/255;break;case"screen":C=255-(255-g)*(255-a)/255,x=255-(255-v)*(255-c)/255,S=255-(255-y)*(255-u)/255;break;case"add":C=g+a,x=v+c,S=y+u;break;case"difference":C=Math.abs(g-a),x=Math.abs(v-c),S=Math.abs(y-u);break;case"subtract":C=g-a,x=v-c,S=y-u;break;case"darken":C=Math.min(g,a),x=Math.min(v,c),S=Math.min(y,u);break;case"lighten":C=Math.max(g,a),x=Math.max(v,c),S=Math.max(y,u);break;case"overlay":C=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,x=c<128?2*v*c/255:255-2*(255-v)*(255-c)/255,S=u<128?2*y*u/255:255-2*(255-y)*(255-u)/255;break;case"exclusion":C=a+g-2*a*g/255,x=c+v-2*c*v/255,S=u+y-2*u*y/255;break;case"tint":C=a+g*d,x=c+v*d,S=u+y*d}t[f]=C,t[f+1]=x,t[f+2]=S}}sendUniformData(e,t){const r=new Me(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}T(Na,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),T(Na,"type","BlendColor"),T(Na,"uniformLocations",["uColor"]),te.setClass(Na);const C2={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},S2=["type","image"];class za extends it{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return C2[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:a}}=e;const c=this.image;a.blendImage||(a.blendImage=fn());const u=a.blendImage,d=u.getContext("2d");u.width!==r||u.height!==s?(u.width=r,u.height=s):d.clearRect(0,0,r,s),d.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),d.drawImage(c.getElement(),0,0,r,s);const f=d.getImageData(0,0,r,s).data;for(let g=0;g<t.length;g+=4){const v=t[g],y=t[g+1],C=t[g+2],x=t[g+3],S=f[g],k=f[g+1],_=f[g+2],M=f[g+3];switch(this.mode){case"multiply":t[g]=v*S/255,t[g+1]=y*k/255,t[g+2]=C*_/255,t[g+3]=x*M/255;break;case"mask":t[g+3]=M}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return j(j({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,a=Ne(e,S2);return Wt.fromObject(s,t).then(c=>new this(j(j({},a),{},{image:c})))}}T(za,"type","BlendImage"),T(za,"defaults",{mode:"multiply",alpha:1}),T(za,"uniformLocations",["uTransformMatrix","uImage"]),te.setClass(za);class Wa extends it{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Yl(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:s}}=e;const{width:a,height:c}=r;s.blurLayer1||(s.blurLayer1=fn(),s.blurLayer2=fn());const u=s.blurLayer1,d=s.blurLayer2;u.width===a&&u.height===c||(d.width=u.width=a,d.height=u.height=c);const f=u.getContext("2d"),g=d.getContext("2d"),v=15,y=.06*this.blur*.5;let C,x,S,k;for(f.putImageData(r,0,0),g.clearRect(0,0,a,c),k=-15;k<=v;k++)C=(Math.random()-.5)/4,x=k/v,S=y*x*a+C,g.globalAlpha=1-Math.abs(x),g.drawImage(u,S,C),f.drawImage(d,0,0),g.globalAlpha=1,g.clearRect(0,0,d.width,d.height);for(k=-15;k<=v;k++)C=(Math.random()-.5)/4,x=k/v,S=y*x*c+C,g.globalAlpha=1-Math.abs(x),g.drawImage(u,C,S),f.drawImage(d,0,0),g.globalAlpha=1,g.clearRect(0,0,d.width,d.height);t.drawImage(u,0,0);const _=t.getImageData(0,0,u.width,u.height);return f.globalAlpha=1,f.clearRect(0,0,u.width,u.height),_}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}T(Wa,"type","Blur"),T(Wa,"defaults",{blur:0}),T(Wa,"uniformLocations",["uDelta"]),te.setClass(Wa);class Va extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}T(Va,"type","Brightness"),T(Va,"defaults",{brightness:0}),T(Va,"uniformLocations",["uBrightness"]),te.setClass(Va);const Vv={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Qi extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let a=0;a<t.length;a+=4){const c=t[a],u=t[a+1],d=t[a+2];if(t[a]=c*r[0]+u*r[1]+d*r[2]+255*r[4],t[a+1]=c*r[5]+u*r[6]+d*r[7]+255*r[9],t[a+2]=c*r[10]+u*r[11]+d*r[12]+255*r[14],!s){const f=t[a+3];t[a]+=f*r[3],t[a+1]+=f*r[8],t[a+2]+=f*r[13],t[a+3]=c*r[15]+u*r[16]+d*r[17]+f*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],a=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,a)}toObject(){return j(j({},super.toObject()),{},{matrix:[...this.matrix]})}}function ci(o,e){var t;const r=(T(t=class extends Qi{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",o),T(t,"defaults",{colorsOnly:!1,matrix:e}),t);return te.setClass(r,o),r}T(Qi,"type","ColorMatrix"),T(Qi,"defaults",Vv),T(Qi,"uniformLocations",["uColorMatrix","uConstants"]),te.setClass(Qi);ci("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);ci("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);ci("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);ci("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);ci("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);ci("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);ci("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Zg extends it{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Yl(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>te.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}T(Zg,"type","Composed"),te.setClass(Zg);class Ua extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let a=0;a<t.length;a+=4)t[a]=s*(t[a]-128)+128,t[a+1]=s*(t[a+1]-128)+128,t[a+2]=s*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}T(Ua,"type","Contrast"),T(Ua,"defaults",{contrast:0}),T(Ua,"uniformLocations",["uContrast"]),te.setClass(Ua);const _2={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ya extends it{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return _2[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,a=Math.round(Math.sqrt(s.length)),c=Math.floor(a/2),u=t.width,d=t.height,f=e.ctx.createImageData(u,d),g=f.data,v=this.opaque?1:0;let y,C,x,S,k,_,M,F,N,U,H,W,X;for(H=0;H<d;H++)for(U=0;U<u;U++){for(k=4*(H*u+U),y=0,C=0,x=0,S=0,X=0;X<a;X++)for(W=0;W<a;W++)M=H+X-c,_=U+W-c,M<0||M>=d||_<0||_>=u||(F=4*(M*u+_),N=s[X*a+W],y+=r[F]*N,C+=r[F+1]*N,x+=r[F+2]*N,v||(S+=r[F+3]*N));g[k]=y,g[k+1]=C,g[k+2]=x,g[k+3]=v?r[k+3]:S}e.imageData=f}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return j(j({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}T(Ya,"type","Convolute"),T(Ya,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),T(Ya,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),te.setClass(Ya);const Uv="Gamma";class Qa extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],a=1/r[1],c=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let d=0;d<256;d++)u.r[d]=255*Math.pow(d/255,s),u.g[d]=255*Math.pow(d/255,a),u.b[d]=255*Math.pow(d/255,c);for(let d=0;d<t.length;d+=4)t[d]=u.r[t[d]],t[d+1]=u.g[t[d+1]],t[d+2]=u.b[t[d+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Uv,gamma:this.gamma.concat()}}}T(Qa,"type",Uv),T(Qa,"defaults",{gamma:[1,1,1]}),T(Qa,"uniformLocations",["uGamma"]),te.setClass(Qa);const k2={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Ga extends it{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2];switch(this.mode){case"average":r=(a+c+u)/3;break;case"lightness":r=(Math.min(a,c,u)+Math.max(a,c,u))/2;break;case"luminosity":r=.21*a+.72*c+.07*u}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return k2[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}T(Ga,"type","Grayscale"),T(Ga,"defaults",{mode:"average"}),T(Ga,"uniformLocations",["uMode"]),te.setClass(Ga);const E2=j(j({},Vv),{},{rotation:0});class eh extends Qi{calculateMatrix(){const e=this.rotation*Math.PI,t=$n(e),r=Kn(e),s=1/3,a=Math.sqrt(s)*r,c=1-t;this.matrix=[t+c/3,s*c-a,s*c+a,0,0,s*c+a,t+s*c,s*c-a,0,0,s*c-a,s*c+a,t+s*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}T(eh,"type","HueRotation"),T(eh,"defaults",E2),te.setClass(eh);class Ha extends it{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}T(Ha,"type","Invert"),T(Ha,"defaults",{alpha:!1,invert:!0}),T(Ha,"uniformLocations",["uInvert","uAlpha"]),te.setClass(Ha);class Xa extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const a=(.5-Math.random())*r;t[s]+=a,t[s+1]+=a,t[s+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}T(Xa,"type","Noise"),T(Xa,"defaults",{noise:0}),T(Xa,"uniformLocations",["uNoise","uSeed"]),te.setClass(Xa);class $a extends it{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let a=0;a<s;a+=this.blocksize)for(let c=0;c<r;c+=this.blocksize){const u=4*a*r+4*c,d=t[u],f=t[u+1],g=t[u+2],v=t[u+3];for(let y=a;y<Math.min(a+this.blocksize,s);y++)for(let C=c;C<Math.min(c+this.blocksize,r);C++){const x=4*y*r+4*C;t[x]=d,t[x+1]=f,t[x+2]=g,t[x+3]=v}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}T($a,"type","Pixelate"),T($a,"defaults",{blocksize:4}),T($a,"uniformLocations",["uBlocksize"]),te.setClass($a);class Ka extends it{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new Me(this.color).getSource(),a=[s[0]-r,s[1]-r,s[2]-r],c=[s[0]+r,s[1]+r,s[2]+r];for(let u=0;u<t.length;u+=4){const d=t[u],f=t[u+1],g=t[u+2];d>a[0]&&f>a[1]&&g>a[2]&&d<c[0]&&f<c[1]&&g<c[2]&&(t[u+3]=0)}}sendUniformData(e,t){const r=new Me(this.color).getSource(),s=this.distance,a=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],c=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,c)}}T(Ka,"type","RemoveColor"),T(Ka,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),T(Ka,"uniformLocations",["uLow","uHigh"]),te.setClass(Ka);class qa extends it{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let a=1;a<=r;a++)s[a-1]=e(a*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Yl(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const a=t.width,c=t.height,u=Math.round(a*r),d=Math.round(c*s);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,c,u,d):this.resizeType==="hermite"?this.hermiteFastResize(e,a,c,u,d):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,c,u,d):this.resizeType==="lanczos"?this.lanczosResize(e,a,c,u,d):new ImageData(u,d),e.imageData=f}sliceByTwo(e,t,r,s,a){const c=e.imageData,u=.5;let d=!1,f=!1,g=t*u,v=r*u;const y=e.filterBackend.resources;let C=0,x=0;const S=t;let k=0;y.sliceByTwo||(y.sliceByTwo=fn());const _=y.sliceByTwo;(_.width<1.5*t||_.height<r)&&(_.width=1.5*t,_.height=r);const M=_.getContext("2d");for(M.clearRect(0,0,1.5*t,r),M.putImageData(c,0,0),s=Math.floor(s),a=Math.floor(a);!d||!f;)t=g,r=v,s<Math.floor(g*u)?g=Math.floor(g*u):(g=s,d=!0),a<Math.floor(v*u)?v=Math.floor(v*u):(v=a,f=!0),M.drawImage(_,C,x,t,r,S,k,g,v),C=S,x=k,k+=v;return M.getImageData(C,x,s,a)}lanczosResize(e,t,r,s,a){const c=e.imageData.data,u=e.ctx.createImageData(s,a),d=u.data,f=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,v=this.rcpScaleY,y=2/this.rcpScaleX,C=2/this.rcpScaleY,x=Math.ceil(g*this.lanczosLobes/2),S=Math.ceil(v*this.lanczosLobes/2),k={},_={x:0,y:0},M={x:0,y:0};return function F(N){let U,H,W,X,se,le,we,Se,pe,ee,ce;for(_.x=(N+.5)*g,M.x=Math.floor(_.x),U=0;U<a;U++){for(_.y=(U+.5)*v,M.y=Math.floor(_.y),se=0,le=0,we=0,Se=0,pe=0,H=M.x-x;H<=M.x+x;H++)if(!(H<0||H>=t)){ee=Math.floor(1e3*Math.abs(H-_.x)),k[ee]||(k[ee]={});for(let ke=M.y-S;ke<=M.y+S;ke++)ke<0||ke>=r||(ce=Math.floor(1e3*Math.abs(ke-_.y)),k[ee][ce]||(k[ee][ce]=f(Math.sqrt(Math.pow(ee*y,2)+Math.pow(ce*C,2))/1e3)),W=k[ee][ce],W>0&&(X=4*(ke*t+H),se+=W,le+=W*c[X],we+=W*c[X+1],Se+=W*c[X+2],pe+=W*c[X+3]))}X=4*(U*s+N),d[X]=le/se,d[X+1]=we/se,d[X+2]=Se/se,d[X+3]=pe/se}return++N<s?F(N):u}(0)}bilinearFiltering(e,t,r,s,a){let c,u,d,f,g,v,y,C,x,S,k,_,M,F=0;const N=this.rcpScaleX,U=this.rcpScaleY,H=4*(t-1),W=e.imageData.data,X=e.ctx.createImageData(s,a),se=X.data;for(y=0;y<a;y++)for(C=0;C<s;C++)for(g=Math.floor(N*C),v=Math.floor(U*y),x=N*C-g,S=U*y-v,M=4*(v*t+g),k=0;k<4;k++)c=W[M+k],u=W[M+4+k],d=W[M+H+k],f=W[M+H+4+k],_=c*(1-x)*(1-S)+u*x*(1-S)+d*S*(1-x)+f*x*S,se[F++]=_;return X}hermiteFastResize(e,t,r,s,a){const c=this.rcpScaleX,u=this.rcpScaleY,d=Math.ceil(c/2),f=Math.ceil(u/2),g=e.imageData.data,v=e.ctx.createImageData(s,a),y=v.data;for(let C=0;C<a;C++)for(let x=0;x<s;x++){const S=4*(x+C*s);let k=0,_=0,M=0,F=0,N=0,U=0,H=0;const W=(C+.5)*u;for(let X=Math.floor(C*u);X<(C+1)*u;X++){const se=Math.abs(W-(X+.5))/f,le=(x+.5)*c,we=se*se;for(let Se=Math.floor(x*c);Se<(x+1)*c;Se++){let pe=Math.abs(le-(Se+.5))/d;const ee=Math.sqrt(we+pe*pe);ee>1&&ee<-1||(k=2*ee*ee*ee-3*ee*ee+1,k>0&&(pe=4*(Se+X*t),H+=k*g[pe+3],M+=k,g[pe+3]<255&&(k=k*g[pe+3]/250),F+=k*g[pe],N+=k*g[pe+1],U+=k*g[pe+2],_+=k))}}y[S]=F/_,y[S+1]=N/_,y[S+2]=U/_,y[S+3]=H/M}return v}}T(qa,"type","Resize"),T(qa,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),T(qa,"uniformLocations",["uDelta","uTaps"]),te.setClass(qa);class Za extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2],d=Math.max(a,c,u);t[s]+=d!==a?(d-a)*r:0,t[s+1]+=d!==c?(d-c)*r:0,t[s+2]+=d!==u?(d-u)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}T(Za,"type","Saturation"),T(Za,"defaults",{saturation:0}),T(Za,"uniformLocations",["uSaturation"]),te.setClass(Za);class Ja extends it{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2],d=Math.max(a,c,u),f=(a+c+u)/3,g=2*Math.abs(d-f)/255*r;t[s]+=d!==a?(d-a)*g:0,t[s+1]+=d!==c?(d-c)*g:0,t[s+2]+=d!==u?(d-u)*g:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}T(Ja,"type","Vibrance"),T(Ja,"defaults",{vibrance:0}),T(Ja,"uniformLocations",["uVibrance"]),te.setClass(Ja);function ui(o,e,t,r){function s(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(g){try{f(r.next(g))}catch(v){c(v)}}function d(g){try{f(r.throw(g))}catch(v){c(v)}}function f(g){g.done?a(g.value):s(g.value).then(u,d)}f((r=r.apply(o,e||[])).next())})}const b2=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Ki(o,e,t){const r=A2(o),{webkitRelativePath:s}=o,a=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${o.name}`;return typeof r.path!="string"&&Jg(r,"path",a),Jg(r,"relativePath",a),r}function A2(o){const{name:e}=o;if(e&&e.lastIndexOf(".")!==-1&&!o.type){const r=e.split(".").pop().toLowerCase(),s=b2.get(r);s&&Object.defineProperty(o,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return o}function Jg(o,e,t){Object.defineProperty(o,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const T2=[".DS_Store","Thumbs.db"];function D2(o){return ui(this,void 0,void 0,function*(){return bl(o)&&O2(o.dataTransfer)?I2(o.dataTransfer,o.type):j2(o)?P2(o):Array.isArray(o)&&o.every(e=>"getFile"in e&&typeof e.getFile=="function")?M2(o):[]})}function O2(o){return bl(o)}function j2(o){return bl(o)&&bl(o.target)}function bl(o){return typeof o=="object"&&o!==null}function P2(o){return Ch(o.target.files).map(e=>Ki(e))}function M2(o){return ui(this,void 0,void 0,function*(){return(yield Promise.all(o.map(t=>t.getFile()))).map(t=>Ki(t))})}function I2(o,e){return ui(this,void 0,void 0,function*(){if(o.items){const t=Ch(o.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(F2));return em(Yv(r))}return em(Ch(o.files).map(t=>Ki(t)))})}function em(o){return o.filter(e=>T2.indexOf(e.name)===-1)}function Ch(o){if(o===null)return[];const e=[];for(let t=0;t<o.length;t++){const r=o[t];e.push(r)}return e}function F2(o){if(typeof o.webkitGetAsEntry!="function")return tm(o);const e=o.webkitGetAsEntry();return e&&e.isDirectory?Qv(e):tm(o,e)}function Yv(o){return o.reduce((e,t)=>[...e,...Array.isArray(t)?Yv(t):[t]],[])}function tm(o,e){return ui(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof o.getAsFileSystemHandle=="function"){const a=yield o.getAsFileSystemHandle();if(a===null)throw new Error(`${o} is not a File`);if(a!==void 0){const c=yield a.getFile();return c.handle=a,Ki(c)}}const r=o.getAsFile();if(!r)throw new Error(`${o} is not a File`);return Ki(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function R2(o){return ui(this,void 0,void 0,function*(){return o.isDirectory?Qv(o):L2(o)})}function Qv(o){const e=o.createReader();return new Promise((t,r)=>{const s=[];function a(){e.readEntries(c=>ui(this,void 0,void 0,function*(){if(c.length){const u=Promise.all(c.map(R2));s.push(u),a()}else try{const u=yield Promise.all(s);t(u)}catch(u){r(u)}}),c=>{r(c)})}a()})}function L2(o){return ui(this,void 0,void 0,function*(){return new Promise((e,t)=>{o.file(r=>{const s=Ki(r,o.fullPath);e(s)},r=>{t(r)})})})}var el={},nm;function B2(){return nm||(nm=1,el.__esModule=!0,el.default=function(o,e){if(o&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=o.name||"",s=(o.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return t.some(function(c){var u=c.trim().toLowerCase();return u.charAt(0)==="."?r.toLowerCase().endsWith(u):u.endsWith("/*")?a===u.replace(/\/.*$/,""):s===u})}return!0}),el}var N2=B2();const th=Dl(N2);function rm(o){return V2(o)||W2(o)||Hv(o)||z2()}function z2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W2(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function V2(o){if(Array.isArray(o))return Sh(o)}function im(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,r)}return t}function sm(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?im(Object(t),!0).forEach(function(r){Gv(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):im(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function Gv(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function lo(o,e){return Q2(o)||Y2(o,e)||Hv(o,e)||U2()}function U2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hv(o,e){if(o){if(typeof o=="string")return Sh(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Sh(o,e)}}function Sh(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=o[t];return r}function Y2(o,e){var t=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var r=[],s=!0,a=!1,c,u;try{for(t=t.call(o);!(s=(c=t.next()).done)&&(r.push(c.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,u=d}finally{try{!s&&t.return!=null&&t.return()}finally{if(a)throw u}}return r}}function Q2(o){if(Array.isArray(o))return o}var G2=typeof th=="function"?th:th.default,H2="file-invalid-type",X2="file-too-large",$2="file-too-small",K2="too-many-files",q2=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:H2,message:"File type must be ".concat(r)}},om=function(e){return{code:X2,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},am=function(e){return{code:$2,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Z2={code:K2,message:"Too many files"};function Xv(o,e){var t=o.type==="application/x-moz-file"||G2(o,e);return[t,t?null:q2(e)]}function $v(o,e,t){if(Zr(o.size))if(Zr(e)&&Zr(t)){if(o.size>t)return[!1,om(t)];if(o.size<e)return[!1,am(e)]}else{if(Zr(e)&&o.size<e)return[!1,am(e)];if(Zr(t)&&o.size>t)return[!1,om(t)]}return[!0,null]}function Zr(o){return o!=null}function J2(o){var e=o.files,t=o.accept,r=o.minSize,s=o.maxSize,a=o.multiple,c=o.maxFiles,u=o.validator;return!a&&e.length>1||a&&c>=1&&e.length>c?!1:e.every(function(d){var f=Xv(d,t),g=lo(f,1),v=g[0],y=$v(d,r,s),C=lo(y,1),x=C[0],S=u?u(d):null;return v&&x&&!S})}function Al(o){return typeof o.isPropagationStopped=="function"?o.isPropagationStopped():typeof o.cancelBubble<"u"?o.cancelBubble:!1}function tl(o){return o.dataTransfer?Array.prototype.some.call(o.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!o.target&&!!o.target.files}function lm(o){o.preventDefault()}function ek(o){return o.indexOf("MSIE")!==-1||o.indexOf("Trident/")!==-1}function tk(o){return o.indexOf("Edge/")!==-1}function nk(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return ek(o)||tk(o)}function Sn(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return e.some(function(u){return!Al(r)&&u&&u.apply(void 0,[r].concat(a)),Al(r)})}}function rk(){return"showOpenFilePicker"in window}function ik(o){if(Zr(o)){var e=Object.entries(o).filter(function(t){var r=lo(t,2),s=r[0],a=r[1],c=!0;return Kv(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every(qv))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(t,r){var s=lo(r,2),a=s[0],c=s[1];return sm(sm({},t),{},Gv({},a,c))},{});return[{description:"Files",accept:e}]}return o}function sk(o){if(Zr(o))return Object.entries(o).reduce(function(e,t){var r=lo(t,2),s=r[0],a=r[1];return[].concat(rm(e),[s],rm(a))},[]).filter(function(e){return Kv(e)||qv(e)}).join(",")}function ok(o){return o instanceof DOMException&&(o.name==="AbortError"||o.code===o.ABORT_ERR)}function ak(o){return o instanceof DOMException&&(o.name==="SecurityError"||o.code===o.SECURITY_ERR)}function Kv(o){return o==="audio/*"||o==="video/*"||o==="image/*"||o==="text/*"||o==="application/*"||/\w+\/[-+.\w]+/g.test(o)}function qv(o){return/^.*\.[\w]+$/.test(o)}var lk=["children"],ck=["open"],uk=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],hk=["refKey","onChange","onClick"];function dk(o){return gk(o)||fk(o)||Zv(o)||pk()}function pk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fk(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function gk(o){if(Array.isArray(o))return _h(o)}function nh(o,e){return yk(o)||vk(o,e)||Zv(o,e)||mk()}function mk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zv(o,e){if(o){if(typeof o=="string")return _h(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _h(o,e)}}function _h(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=o[t];return r}function vk(o,e){var t=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(t!=null){var r=[],s=!0,a=!1,c,u;try{for(t=t.call(o);!(s=(c=t.next()).done)&&(r.push(c.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,u=d}finally{try{!s&&t.return!=null&&t.return()}finally{if(a)throw u}}return r}}function yk(o){if(Array.isArray(o))return o}function cm(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,r)}return t}function Ye(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cm(Object(t),!0).forEach(function(r){kh(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):cm(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function kh(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Tl(o,e){if(o==null)return{};var t=xk(o,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(o,r)&&(t[r]=o[r])}return t}function xk(o,e){if(o==null)return{};var t={},r=Object.keys(o),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=o[s]);return t}var nd=D.forwardRef(function(o,e){var t=o.children,r=Tl(o,lk),s=ey(r),a=s.open,c=Tl(s,ck);return D.useImperativeHandle(e,function(){return{open:a}},[a]),ix.createElement(D.Fragment,null,t(Ye(Ye({},c),{},{open:a})))});nd.displayName="Dropzone";var Jv={disabled:!1,getFilesFromEvent:D2,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};nd.defaultProps=Jv;nd.propTypes={children:xe.func,accept:xe.objectOf(xe.arrayOf(xe.string)),multiple:xe.bool,preventDropOnDocument:xe.bool,noClick:xe.bool,noKeyboard:xe.bool,noDrag:xe.bool,noDragEventsBubbling:xe.bool,minSize:xe.number,maxSize:xe.number,maxFiles:xe.number,disabled:xe.bool,getFilesFromEvent:xe.func,onFileDialogCancel:xe.func,onFileDialogOpen:xe.func,useFsAccessApi:xe.bool,autoFocus:xe.bool,onDragEnter:xe.func,onDragLeave:xe.func,onDragOver:xe.func,onDrop:xe.func,onDropAccepted:xe.func,onDropRejected:xe.func,onError:xe.func,validator:xe.func};var Eh={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ey(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ye(Ye({},Jv),o),t=e.accept,r=e.disabled,s=e.getFilesFromEvent,a=e.maxSize,c=e.minSize,u=e.multiple,d=e.maxFiles,f=e.onDragEnter,g=e.onDragLeave,v=e.onDragOver,y=e.onDrop,C=e.onDropAccepted,x=e.onDropRejected,S=e.onFileDialogCancel,k=e.onFileDialogOpen,_=e.useFsAccessApi,M=e.autoFocus,F=e.preventDropOnDocument,N=e.noClick,U=e.noKeyboard,H=e.noDrag,W=e.noDragEventsBubbling,X=e.onError,se=e.validator,le=D.useMemo(function(){return sk(t)},[t]),we=D.useMemo(function(){return ik(t)},[t]),Se=D.useMemo(function(){return typeof k=="function"?k:um},[k]),pe=D.useMemo(function(){return typeof S=="function"?S:um},[S]),ee=D.useRef(null),ce=D.useRef(null),ke=D.useReducer(wk,Eh),me=nh(ke,2),z=me[0],K=me[1],q=z.isFocused,P=z.isFileDialogActive,V=D.useRef(typeof window<"u"&&window.isSecureContext&&_&&rk()),ue=function(){!V.current&&P&&setTimeout(function(){if(ce.current){var fe=ce.current.files;fe.length||(K({type:"closeDialog"}),pe())}},300)};D.useEffect(function(){return window.addEventListener("focus",ue,!1),function(){window.removeEventListener("focus",ue,!1)}},[ce,P,pe,V]);var ae=D.useRef([]),ye=function(fe){ee.current&&ee.current.contains(fe.target)||(fe.preventDefault(),ae.current=[])};D.useEffect(function(){return F&&(document.addEventListener("dragover",lm,!1),document.addEventListener("drop",ye,!1)),function(){F&&(document.removeEventListener("dragover",lm),document.removeEventListener("drop",ye))}},[ee,F]),D.useEffect(function(){return!r&&M&&ee.current&&ee.current.focus(),function(){}},[ee,M,r]);var ge=D.useCallback(function(Z){X?X(Z):console.error(Z)},[X]),Ee=D.useCallback(function(Z){Z.preventDefault(),Z.persist(),mn(Z),ae.current=[].concat(dk(ae.current),[Z.target]),tl(Z)&&Promise.resolve(s(Z)).then(function(fe){if(!(Al(Z)&&!W)){var ze=fe.length,He=ze>0&&J2({files:fe,accept:le,minSize:c,maxSize:a,multiple:u,maxFiles:d,validator:se}),st=ze>0&&!He;K({isDragAccept:He,isDragReject:st,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Z)}}).catch(function(fe){return ge(fe)})},[s,f,ge,W,le,c,a,u,d,se]),be=D.useCallback(function(Z){Z.preventDefault(),Z.persist(),mn(Z);var fe=tl(Z);if(fe&&Z.dataTransfer)try{Z.dataTransfer.dropEffect="copy"}catch{}return fe&&v&&v(Z),!1},[v,W]),Oe=D.useCallback(function(Z){Z.preventDefault(),Z.persist(),mn(Z);var fe=ae.current.filter(function(He){return ee.current&&ee.current.contains(He)}),ze=fe.indexOf(Z.target);ze!==-1&&fe.splice(ze,1),ae.current=fe,!(fe.length>0)&&(K({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),tl(Z)&&g&&g(Z))},[ee,g,W]),Ie=D.useCallback(function(Z,fe){var ze=[],He=[];Z.forEach(function(st){var rr=Xv(st,le),Vt=nh(rr,2),jn=Vt[0],ls=Vt[1],pi=$v(st,c,a),Pr=nh(pi,2),cs=Pr[0],Mr=Pr[1],Ir=se?se(st):null;if(jn&&cs&&!Ir)ze.push(st);else{var Fr=[ls,Mr];Ir&&(Fr=Fr.concat(Ir)),He.push({file:st,errors:Fr.filter(function(us){return us})})}}),(!u&&ze.length>1||u&&d>=1&&ze.length>d)&&(ze.forEach(function(st){He.push({file:st,errors:[Z2]})}),ze.splice(0)),K({acceptedFiles:ze,fileRejections:He,isDragReject:He.length>0,type:"setFiles"}),y&&y(ze,He,fe),He.length>0&&x&&x(He,fe),ze.length>0&&C&&C(ze,fe)},[K,u,le,c,a,d,y,C,x,se]),Dn=D.useCallback(function(Z){Z.preventDefault(),Z.persist(),mn(Z),ae.current=[],tl(Z)&&Promise.resolve(s(Z)).then(function(fe){Al(Z)&&!W||Ie(fe,Z)}).catch(function(fe){return ge(fe)}),K({type:"reset"})},[s,Ie,ge,W]),On=D.useCallback(function(){if(V.current){K({type:"openDialog"}),Se();var Z={multiple:u,types:we};window.showOpenFilePicker(Z).then(function(fe){return s(fe)}).then(function(fe){Ie(fe,null),K({type:"closeDialog"})}).catch(function(fe){ok(fe)?(pe(fe),K({type:"closeDialog"})):ak(fe)?(V.current=!1,ce.current?(ce.current.value=null,ce.current.click()):ge(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ge(fe)});return}ce.current&&(K({type:"openDialog"}),Se(),ce.current.value=null,ce.current.click())},[K,Se,pe,_,Ie,ge,we,u]),jr=D.useCallback(function(Z){!ee.current||!ee.current.isEqualNode(Z.target)||(Z.key===" "||Z.key==="Enter"||Z.keyCode===32||Z.keyCode===13)&&(Z.preventDefault(),On())},[ee,On]),hi=D.useCallback(function(){K({type:"focus"})},[]),ss=D.useCallback(function(){K({type:"blur"})},[]),os=D.useCallback(function(){N||(nk()?setTimeout(On,0):On())},[N,On]),gn=function(fe){return r?null:fe},di=function(fe){return U?null:gn(fe)},tr=function(fe){return H?null:gn(fe)},mn=function(fe){W&&fe.stopPropagation()},nr=D.useMemo(function(){return function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=Z.refKey,ze=fe===void 0?"ref":fe,He=Z.role,st=Z.onKeyDown,rr=Z.onFocus,Vt=Z.onBlur,jn=Z.onClick,ls=Z.onDragEnter,pi=Z.onDragOver,Pr=Z.onDragLeave,cs=Z.onDrop,Mr=Tl(Z,uk);return Ye(Ye(kh({onKeyDown:di(Sn(st,jr)),onFocus:di(Sn(rr,hi)),onBlur:di(Sn(Vt,ss)),onClick:gn(Sn(jn,os)),onDragEnter:tr(Sn(ls,Ee)),onDragOver:tr(Sn(pi,be)),onDragLeave:tr(Sn(Pr,Oe)),onDrop:tr(Sn(cs,Dn)),role:typeof He=="string"&&He!==""?He:"presentation"},ze,ee),!r&&!U?{tabIndex:0}:{}),Mr)}},[ee,jr,hi,ss,os,Ee,be,Oe,Dn,U,H,r]),as=D.useCallback(function(Z){Z.stopPropagation()},[]),yo=D.useMemo(function(){return function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=Z.refKey,ze=fe===void 0?"ref":fe,He=Z.onChange,st=Z.onClick,rr=Tl(Z,hk),Vt=kh({accept:le,multiple:u,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:gn(Sn(He,Dn)),onClick:gn(Sn(st,as)),tabIndex:-1},ze,ce);return Ye(Ye({},Vt),rr)}},[ce,t,u,Dn,r]);return Ye(Ye({},z),{},{isFocused:q&&!r,getRootProps:nr,getInputProps:yo,rootRef:ee,inputRef:ce,open:gn(On)})}function wk(o,e){switch(e.type){case"focus":return Ye(Ye({},o),{},{isFocused:!0});case"blur":return Ye(Ye({},o),{},{isFocused:!1});case"openDialog":return Ye(Ye({},Eh),{},{isFileDialogActive:!0});case"closeDialog":return Ye(Ye({},o),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ye(Ye({},o),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Ye(Ye({},o),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Ye({},Eh);default:return o}}function um(){}const Ck="data:image/svg+xml,%3csvg%20width='471'%20height='428'%20viewBox='0%200%20471%20428'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M57%20214.2C57%20303.733%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%2057%20124.667%2057%20214.2Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M413.35%20214.2C413.35%20303.733%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%20413.35%20124.667%20413.35%20214.2Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M146.088%20368.504C223.626%20413.271%20235.176%20214.2%20235.176%20214.2C235.176%20214.2%2068.5505%20323.738%20146.088%20368.504Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M324.262%2059.8963C401.8%20104.663%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%20246.724%2015.1299%20324.262%2059.8963Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M324.261%20368.504C246.724%20413.271%20235.174%20214.2%20235.174%20214.2C235.174%20214.2%20401.799%20323.738%20324.261%20368.504Z'%20fill='%23B5CFFD'/%3e%3cpath%20d='M146.088%2059.8963C68.55%20104.663%20235.175%20214.2%20235.175%20214.2C235.175%20214.2%20223.625%2015.1299%20146.088%2059.8963Z'%20fill='%23B5CFFD'/%3e%3c/svg%3e",Sk="data:image/svg+xml,%3csvg%20width='471'%20height='428'%20viewBox='0%200%20471%20428'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M92%20214.175C171.051%20214.175%20235.134%20134.403%20235.134%2036C235.134%20134.403%20299.217%20214.175%20378.267%20214.175C299.217%20214.175%20235.134%20293.946%20235.134%20392.35C235.134%20293.946%20171.051%20214.175%2092%20214.175Z'%20fill='%23FFE18D'/%3e%3c/svg%3e",_k="data:image/svg+xml,%3csvg%20width='471'%20height='427'%20viewBox='0%200%20471%20427'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M180.385%20158.385L82%20213.644L180.385%20268.904L235.644%20367.289L290.904%20268.904L389.289%20213.644L290.904%20158.385L235.644%2060L180.385%20158.385Z'%20fill='%23FFBFD6'/%3e%3c/svg%3e",kk=[Ck,Sk,_k];function Ek(){li();const o=ho(),e=Tr(),t=Zi(),r=D.useRef(null),s=D.useRef(null),a=D.useCallback(v=>{for(const y of v)f(URL.createObjectURL(y))},[]),{getRootProps:c,getInputProps:u,isDragActive:d}=ey({accept:"image/*",maxFiles:1,onDrop:a});D.useEffect(()=>{if(!r.current)return;s.current||(s.current=new xh(r.current));const v=e.layout==="original"?{width:122,height:362}:{width:244,height:362};return s.current.setDimensions(v),r.current.width=v.width,r.current.height=v.height,s.current.getObjects().forEach(y=>{y.left=Math.min(y.left,v.width-10),y.top=Math.min(y.top,v.height-10)}),s.current.renderAll(),()=>{s.current.dispose()}},[e.layout]),D.useEffect(()=>{const v=y=>{if(["Delete","Backspace"].includes(y.key)){const C=s.current,x=C.getActiveObject();x&&C.remove(x)}};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[]);const f=v=>{const y=s.current,C=document.createElement("img");C.src=v,C.alt=v,C.onload=()=>{const x=new Wt(C),S=x.height/x.width,_=50/x.width,M=_*S;x.set({left:0,top:0,scaleX:_,scaleY:M,hasBorders:!0,hasControls:!0,lockScalingFlip:!0,cornerSize:12,cornerColor:"transparent",cornerStyle:"circle",transparentCorners:!0,borderColor:"rgba(255, 255, 255, 0.5)"}),y.add(x),y.centerObject(x),y.setActiveObject(x)}},g=()=>{const v=s.current,y=8,C=e.layout==="original"?122:244,x=362;v.setWidth(C*y),v.setHeight(x*y),v.getObjects().forEach(k=>{k.set({scaleX:k.scaleX*y,scaleY:k.scaleY*y,left:k.left*y,top:k.top*y}),k.setCoords()});const S=v.toDataURL({format:"png",quality:1});v.setWidth(C),v.setHeight(x),t(k=>({...k,stickers:S})),o("/download")};return b.jsxs("div",{children:[b.jsx(Zn,{}),b.jsxs("section",{className:"options-c",children:[b.jsx("h1",{className:"options-heading",children:"Add Stickers"}),b.jsxs("section",{className:"options-r",children:[b.jsxs("div",{className:"frame-wrapper",children:[b.jsx("canvas",{width:ag[e.layout].width,height:ag[e.layout].height,ref:r}),b.jsx(ai,{layout:e.layout,filter:e.filter,images:e.images,design:e.design})]}),b.jsxs("section",{className:"options-box",children:[b.jsxs("section",{children:[b.jsx("p",{className:"options-box-label",children:"Gallery"}),kk.map((v,y)=>b.jsx("img",{className:"sticker",src:v,alt:`Sticker ${y+1}`,onClick:()=>f(v)},y))]}),b.jsxs("section",{children:[b.jsx("p",{className:"options-box-label",children:"Upload"}),b.jsxs("div",{className:"dropzone",...c(),children:[b.jsx("input",{...u()}),d?b.jsx("p",{children:"Drop your file here"}):b.jsxs("p",{children:["Drag and drop or"," ",b.jsx("span",{className:"underline",children:"click to upload"})]})]})]})]})]}),b.jsx("button",{className:"btn",onClick:()=>{g()},children:"Continue"})]})]})}const bk=()=>(D.useEffect(()=>{window.scrollTo(0,0)},[]),b.jsxs("div",{children:[b.jsx(jh,{}),b.jsx("div",{className:"about-privacy-container",children:b.jsx("div",{className:"about-privacy-wrapper",children:b.jsxs("div",{className:"about-privacy-text-section",children:[b.jsx("h1",{className:"about-privacy-heading",children:"Privacy Policy"}),b.jsx("p",{className:"about-privacy-paragraph",children:"At NeroFilm, your privacy comes first. We don’t track, collect, or store your data. Everything you create stays on your device, and nothing is uploaded or shared."})]})})}),b.jsx(Ph,{})]}));function Ak(){const o=Tr(),e=D.useRef(null),[t,r]=D.useState(!1),s=()=>{zm(o.allImages||o.images,e,r)};return b.jsxs("div",{className:"timelapse-container",children:[b.jsx(Zn,{}),b.jsx("h1",{className:"timelapse-title",children:"Download Timelapse"}),b.jsx("canvas",{ref:e,style:{display:"none"}}),b.jsx("button",{className:"btn",onClick:s,disabled:t,children:t?"Generating Timelapse...":"Download Timelapse"})]})}const Tk=()=>b.jsx(Om,{children:b.jsx(vw,{children:b.jsxs(Xx,{children:[b.jsx(Kt,{path:"/",element:b.jsx(Rw,{})}),b.jsx(Kt,{path:"/about",element:b.jsx(Ww,{})}),b.jsx(Kt,{path:"/frame-layout",element:b.jsx(Kw,{})}),b.jsx(Kt,{path:"/camera",element:b.jsx(LS,{})}),b.jsx(Kt,{path:"/photo-selection",element:b.jsx(BS,{})}),b.jsx(Kt,{path:"/frame-design",element:b.jsx(MC,{})}),b.jsx(Kt,{path:"/filter",element:b.jsx(qw,{})}),b.jsx(Kt,{path:"/sticker",element:b.jsx(Ek,{})}),b.jsx(Kt,{path:"/download",element:b.jsx(OS,{})}),b.jsx(Kt,{path:"/timelapse",element:b.jsx(Ak,{})}),b.jsx(Kt,{path:"/privacy-policy",element:b.jsx(bk,{})})]})})});rx.createRoot(document.getElementById("root")).render(b.jsx(Tk,{}));
